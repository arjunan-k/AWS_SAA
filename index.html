<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AWS Solutions Architect: Arjunan K</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}

</style></head><body><article id="449b8d49-641f-44b2-8cca-6bf5acb43142" class="page serif"><header><h1 class="page-title">AWS Solutions Architect: Arjunan K</h1></header><div class="page-body"><h3 id="4084bcc9-61de-44e8-bdfc-b57fb486f2f8" class=""><details open=""><summary>Section 1: Introduction - AWS Certified Solutions Architect Associate</summary></details></h3><div class="indented"><ul id="020ce123-36d5-4b0e-a9d6-c0bca3f50f5d" class="toggle"><li><details open=""><summary>What is AWS</summary><ul id="949962f3-82d2-449c-a14e-a0901fdd32af" class="bulleted-list"><li style="list-style-type:disc">AWS (Amazon Web Services) is a Cloud Provider</li></ul><ul id="b98a4375-c5bb-48dd-b431-01e92c51c775" class="bulleted-list"><li style="list-style-type:disc">They provide you with servers and services that you can use on demand and scale easily</li></ul><ul id="112e6ce6-cb18-4e2d-acab-26b4d748e46a" class="bulleted-list"><li style="list-style-type:disc">AWS has revolutionized IT over time</li></ul><ul id="fc683651-eebe-42b6-adcb-2385bc1d437d" class="bulleted-list"><li style="list-style-type:disc">AWS powers some of the biggest websites in the world<ul id="6dc89eff-f5ea-4ff7-a8b6-0662ba674697" class="bulleted-list"><li style="list-style-type:circle">Amazon.com</li></ul><ul id="1205755b-1146-49c4-948b-9bafd4b1257e" class="bulleted-list"><li style="list-style-type:circle">Netflix</li></ul></li></ul></details></li></ul><ul id="0203f1e2-a783-4141-97c9-ceacaee1e41d" class="toggle"><li><details open=""><summary>What AWS services we will learn</summary><figure id="18ebe62c-2fbf-4479-b675-8bc564874827" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled.png"><img style="width:912px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled.png"/></a></figure></details></li></ul></div><h3 id="0ea96066-5686-4c79-bfa3-d23646e053ca" class=""><details open=""><summary>Section 2: Code &amp; Slides Download</summary></details></h3><div class="indented"><p id="aa376dad-ad44-4376-bd07-6ff5551abb09" class=""><a href="https://courses.datacumulus.com/downloads/certified-solutions-architect-pn9/">AWS Certified Solutions Architect Associate Code &amp; Slides</a></p></div><h3 id="402b2485-0d42-4b9a-b21a-c86abf5ade0a" class=""><details open=""><summary>Section 3: Getting started with AWS</summary></details></h3><div class="indented"><ul id="faae6b7d-47e4-494f-8280-41d18dbe87d7" class="toggle"><li><details open=""><summary>History of AWS Cloud</summary><p id="2942534e-fbfc-48c1-8483-8e8c30b18a76" class="">Several companies that use AWS services are shown below.</p><figure id="edf40491-3b4c-4ebd-84b0-b32de7bcfb97" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%201.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%201.png"/></a></figure></details></li></ul><ul id="1e243a96-67f2-4401-b6f0-6b63df09ba95" class="toggle"><li><details open=""><summary>Market Cap</summary><ul id="db87df07-b4da-40bc-846e-f96a3d9432a3" class="bulleted-list"><li style="list-style-type:disc">AWS has the largest market cap followed by Microsoft Azure</li></ul><figure id="c72c3ace-ce96-4002-9b4b-f72fbf25ba8d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%202.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%202.png"/></a></figure></details></li></ul><ul id="010bc4a2-a0b9-48c1-ba0c-90744d800514" class="toggle"><li><details open=""><summary>Cloud use cases</summary><ul id="3527805a-0209-48a4-ae04-63869771c2b7" class="bulleted-list"><li style="list-style-type:disc">AWS enables you to build sophisticated, scalable applications</li></ul><ul id="2c1f72db-3459-4549-99a1-5122f0bcb75f" class="bulleted-list"><li style="list-style-type:disc">Applicable to a diverse set of industries</li></ul><ul id="88b6760c-064e-4692-9e83-2d02d00f7bd7" class="bulleted-list"><li style="list-style-type:disc">Use cases include Enterprise IT, Backup &amp; Storage, Big Data analytics, Website hosting, Mobile &amp; Social Apps, Gaming</li></ul></details></li></ul><ul id="8bb5c6ea-2b10-48e2-b936-925219e628f5" class="toggle"><li><details open=""><summary>AWS Global Infrastructure</summary><ul id="9464a2e9-03e8-4cc0-a00e-05f81af1733e" class="bulleted-list"><li style="list-style-type:disc">The entire AWS infrastructure is divided into <ol type="1" id="870a4338-ec7d-4d3c-85d6-7bb7fcf7e045" class="numbered-list" start="1"><li>Regions</li></ol><ol type="1" id="b815dab2-b847-498c-b39d-bc336bd42313" class="numbered-list" start="2"><li>Availability Zones</li></ol><ol type="1" id="fea5ab9b-f2ae-4eb6-b180-d5d025379e6c" class="numbered-list" start="3"><li>Data Centers</li></ol><ol type="1" id="e144bc73-125d-4b4f-b245-7e8d8ed8fd5c" class="numbered-list" start="4"><li>Edge locations/Points of Presence</li></ol></li></ul><ul id="e4396340-b8a8-44f6-84fc-8fcea15912e2" class="toggle"><li><details open=""><summary>Global Services and Regional Services</summary><p id="bc4ca370-5e2c-4038-a7f9-3b5029ef8575" class="">Global services do not require a region to be selected.</p><ul id="a27412f8-47e1-462f-88d0-79a09e726921" class="bulleted-list"><li style="list-style-type:disc">Global Services:<ul id="525ad308-e79e-45d1-904b-0b8063dcad97" class="bulleted-list"><li style="list-style-type:circle">Identity and Access Management (IAM)</li></ul><ul id="a79a8e68-695d-4a9b-8b69-86317078f53d" class="bulleted-list"><li style="list-style-type:circle">Route 53 (DNS service)</li></ul><ul id="73b3905e-01b0-46e1-8994-9d86eee074ba" class="bulleted-list"><li style="list-style-type:circle">CloudFront (Content Delivery Network)</li></ul><ul id="431a2dd6-780f-4445-ace2-603b5bc56ee3" class="bulleted-list"><li style="list-style-type:circle">WAF (Web Application Firewall)</li></ul></li></ul><ul id="c21b2e20-ec7b-4216-9850-743b8c532f51" class="bulleted-list"><li style="list-style-type:disc">Most AWS services are Region-scoped:<ul id="9b4723bf-e592-4703-9e19-406491b52e56" class="bulleted-list"><li style="list-style-type:circle">Amazon EC2 (Infrastructure as a Service)</li></ul><ul id="92245ac8-efa0-4fe5-9acd-014a57e95591" class="bulleted-list"><li style="list-style-type:circle">Elastic Beanstalk (Platform as a Service)</li></ul><ul id="b6fe8980-1e77-4d12-b72e-b4679469987f" class="bulleted-list"><li style="list-style-type:circle">Lambda (Function as a Service)</li></ul><ul id="acd757e1-34d8-4b33-8d8e-30b73e983f44" class="bulleted-list"><li style="list-style-type:circle">Rekognition (Software as a Service)</li></ul></li></ul></details></li></ul><ul id="169bfa3c-a00d-4363-97cf-f3c86d78e307" class="toggle"><li><details open=""><summary>AWS Regions</summary><ul id="a62ab95c-6bcc-478a-ade4-d6f347c0f2e7" class="bulleted-list"><li style="list-style-type:disc">Intro<p id="d4a76eba-4d75-4d46-9df7-f29c3a1f16b4" class="">Region scoped means that if you use the same service in two different regions, you will be charged twice. Most AWS services are region scoped. Each region <strong>is fully isolated and consists of multiple availability zones.</strong></p><p id="819b6827-8776-4461-81b0-a5293bc74193" class="">A region is a cluster of data centers.</p></li></ul><ul id="48a7c859-5ce6-4c56-bbe8-2315df9f83c6" class="bulleted-list"><li style="list-style-type:disc">How to choose an AWS region<ul id="b5ef6511-6e0b-4ec9-8703-f896e8316e32" class="bulleted-list"><li style="list-style-type:circle"><strong>Compliance</strong> with data governance and legal requirements: data never leaves a region without your explicit permission (some countries require the data to be present in a data center present in that country by law)</li></ul><ul id="8e3804c4-dfaf-4fdb-ab7c-92799712af44" class="bulleted-list"><li style="list-style-type:circle"><strong>Proximity</strong> to customers: reduced latency</li></ul><ul id="01751612-f2be-4e89-9236-b801ca0ddca7" class="bulleted-list"><li style="list-style-type:circle">Available services within a Region: new services and new features aren’t available in every Region</li></ul><ul id="bea10d91-09b8-4ce2-8035-e59740b8beaa" class="bulleted-list"><li style="list-style-type:circle">Pricing: pricing varies region to region and is transparent in the service pricing page</li></ul></li></ul></details></li></ul><ul id="cdc7b6ba-cb48-4bd9-814d-55062e08a653" class="toggle"><li><details open=""><summary>AWS Data Centers</summary><p id="a73302da-aca4-4a7f-a7ed-7c8ec58ab46b" class="">A data center is a physical location that stores computing machines and their related hardware equipment. It contains the computing infrastructure that IT systems require, such as servers, data storage drives, and network equipment. It is the physical facility that stores any company’s digital data.</p></details></li></ul><ul id="03ca5776-5bec-4129-9f55-6fa8f1a70d71" class="toggle"><li><details open=""><summary>AWS Availability Zones</summary><ul id="0841e944-a0c2-4326-b283-6c8c6e923575" class="bulleted-list"><li style="list-style-type:disc">Each region has many availability zones (usually 3, min is 2, max is 6)</li></ul><ul id="ed45cdd3-07d2-4dc6-bc62-3ba64e2fecb4" class="bulleted-list"><li style="list-style-type:disc">Each availability zone (AZ) is one or more discrete data centers with redundant power, networking, and connectivity</li></ul><ul id="979c7982-bdc6-4f64-adc0-1f75c39446c2" class="bulleted-list"><li style="list-style-type:disc">AZs are separated from each other, so that they’re isolated from disasters</li></ul><ul id="1ee1adf8-88fd-4633-8baf-61e4371d9339" class="bulleted-list"><li style="list-style-type:disc">They’re connected with high bandwidth (The more bandwidth a data connection has, the more data it can send and receive at one time), ultra-low latency networking (Low Delay).</li></ul><p id="91d0d263-a899-48b9-994a-53e0a18b4121" class="">In the example below, each availability zone has 2 data centers.</p><figure id="91053063-b412-4478-9351-8aaa88f5acd0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%203.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%203.png"/></a></figure></details></li></ul><ul id="a605ab9e-87bc-4668-8177-aaf38136b906" class="toggle"><li><details open=""><summary>AWS Points of Presence (Edge Locations)</summary><p id="2d943c02-cadd-4435-bf97-27af8ea8e94b" class="">Amazon has 216 Points of Presence (205 Edge Locations &amp; 11 Regional Caches) in 84 cities across 42 countries to deliver content to end users with lower latency.</p></details></li></ul></details></li></ul></div><h3 id="65f30132-426b-4817-af67-1088da8bdc83" class=""><details open=""><summary>Section 4: IAM &amp; AWS CLI</summary></details></h3><div class="indented"><ul id="2f55a101-e463-4e20-83b4-d8fa1e8fab63" class="toggle"><li><details open=""><summary>IAM: Users &amp; Groups</summary><ul id="a8428fa6-01a3-4d65-94e7-9e3c804c411b" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3b194c90-635b-4cd8-b825-596afc7a6d60" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-yellow">IAM is a global AWS service,</mark> not linked to any region</li></ul><ul id="8c42c522-4018-455a-b49a-5b9ed54d02c5" class="bulleted-list"><li style="list-style-type:disc">Users are people within your organization, and can be grouped</li></ul><ul id="2a4b8b5c-da03-4558-a47f-c2d78a194ceb" class="bulleted-list"><li style="list-style-type:disc">Groups only contain users, not other groups</li></ul><ul id="683c8e48-a288-462b-a179-204daa5fa603" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">Users don’t have to belong to a group, and user can belong to multiple groups</li></ul><figure id="5e6ad558-3fd4-49ee-bab7-2506243a6e00" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%204.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%204.png"/></a></figure></details></li></ul><ul id="6c599bfb-8e09-42b6-b524-15a8e3fc5c91" class="toggle"><li><details open=""><summary>Root User vs IAM User</summary><ul id="7a2746ed-e717-4874-9923-c75fe1156935" class="bulleted-list"><li style="list-style-type:disc">Root user is the one that has full access to the account (account owner).</li></ul><ul id="aad9edfe-60a8-4b81-9df9-92812b5b61ee" class="bulleted-list"><li style="list-style-type:disc">IAM user is the one that is created with limited permissions (engineers, developer, etc.)</li></ul><p id="98ba47b4-5d1a-4160-833e-63de5bd99219" class="">⛔ You should log in as an IAM user with admin access even if you have root access. This is just to be sure that nothing goes wrong by accident.</p><figure id="4acc1921-2afc-43c9-8040-d3412eedc658" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%205.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%205.png"/></a></figure><p id="ea7f37a3-313f-4163-b12f-7ee47821b3d2" class="">Left: root user (just the account alias)</p><p id="117f8a0c-889e-4ee4-b2c4-3d7320aa31d2" class="">Right: IAM user (user @ account alias)</p><figure id="94b4e82f-b6ce-439d-bac9-11b8198e45d0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%206.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%206.png"/></a></figure></details></li></ul><ul id="e0ffa58c-4a67-45b6-b973-79a0a29dcce3" class="toggle"><li><details open=""><summary>Creating an IAM user and assigning a group</summary><p id="bab299ec-1b35-4e27-8c8f-e93291f5b6da" class="">IAM → Users → Create a user → Attach user to group</p></details></li></ul><ul id="c4b0bf15-a426-45e5-9879-229a43a9b0fa" class="toggle"><li><details open=""><summary>Change Account Alias</summary><p id="d0de060b-6cad-4942-a1e0-d74101111d4f" class="">Signing in as an IAM user requires Account ID which is hard to remember. So, we can create alias and use that instead.</p><p id="a9c9811d-70ee-44a8-a346-9b2371f7448f" class="">IAM → Dashboard → Account Alias → Create</p></details></li></ul></details></li></ul><ul id="fb25490a-6de8-4618-8af4-a7dda5f45785" class="toggle"><li><details open=""><summary>IAM: Policies</summary><ul id="813b48e3-38e7-49cc-bcc5-91df71c0c3df" class="toggle"><li><details open=""><summary>Intro</summary><ul id="93e0aa6b-f473-47d4-a8f2-18cfe715fbd2" class="bulleted-list"><li style="list-style-type:disc">Policies are <mark class="highlight-yellow">JSON documents</mark> that outline permissions for users, groups or roles.</li></ul><ul id="b68170c9-0154-462e-abbc-a21684db8e5b" class="bulleted-list"><li style="list-style-type:disc">A policy consists of one or more statements.</li></ul><ul id="6781a6a5-51c0-4819-a236-160084a09125" class="bulleted-list"><li style="list-style-type:disc">In AWS you should apply the least privilege principle: don’t give more permissions than a user, group or role needs</li></ul><figure id="fce64914-1b94-4338-a6fa-bfe1c11b4c46" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%207.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%207.png"/></a></figure></details></li></ul><ul id="06d174bf-370b-41ce-a0dc-bcb121fefee2" class="toggle"><li><details open=""><summary>Policy Inheritance</summary><p id="076912c2-6c8a-4c62-8ab1-7c7630176844" class="">In the diagram below, a policy is attached to each group. Users that are in multiple groups will have both the policies (union of both the policies). User Fred is not assigned any group, so he will have an inline policy (attached directly to the user). Users that are assigned to one of more groups can also be assigned inline policies.</p><figure id="ab5268aa-2ba2-4f48-a13b-83d72ff09363" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%208.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%208.png"/></a></figure></details></li></ul><ul id="c4dc4a56-9e68-4f52-b665-53aa4d70b981" class="toggle"><li><details open=""><summary>Policy Structure</summary><p id="ae66e128-7346-47fc-8040-0e09ea9584c2" class="">In the diagram below, the policy is being applied to the root user</p><figure id="70020f20-aa4e-4728-b50c-996d280ccb2e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%209.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%209.png"/></a></figure></details></li></ul><ul id="400a3abb-ec73-40f1-8bae-4339104ff254" class="toggle"><li><details open=""><summary>Admin Policy</summary><p id="2808557c-bd08-40e6-9ea2-4bbd327c62e8" class="">The below policy has only one statement saying “Allow this group of users to perform any action on any resource”</p><figure id="dc5f2975-97d2-441e-bf63-e07e08969e7a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2010.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2010.png"/></a></figure></details></li></ul></details></li></ul><ul id="59a975b8-1a94-4cd7-9775-eafbf773ac45" class="toggle"><li><details open=""><summary>IAM: Security</summary><p id="7b40ac0a-9483-48c2-b965-226d22280dea" class="">The account owner (root user) needs to ensure that the AWS account is not compromised at any cost. There are two options to do the same:</p><ul id="e0393472-2ef9-406d-85be-30411add88c6" class="toggle"><li><details open=""><summary>IAM: Password Policy</summary><ul id="8d2c6e75-8072-43fa-9bc9-072691be90de" class="bulleted-list"><li style="list-style-type:disc">Intro<p id="46fc702a-2a71-4505-b4dd-eee708373b0e" class="">Using Password Policy, the account owner can enforce certain standards for password.</p><ul id="c5718596-a8a1-4631-997b-a672638f7bd0" class="bulleted-list"><li style="list-style-type:circle">In AWS, you can setup a password policy:<ul id="c21db51c-437b-4cfb-a85b-60ad45ed0950" class="bulleted-list"><li style="list-style-type:square">Set a minimum password length</li></ul><ul id="710e3a48-4ff6-4c9e-ae3a-6eef9495b86f" class="bulleted-list"><li style="list-style-type:square">Require specific character types:<ul id="859311cb-4d52-4b10-b332-407e7b32d462" class="bulleted-list"><li style="list-style-type:disc">uppercase letters</li></ul><ul id="a7f9dbe0-f8bd-47d9-ae9c-5baaa2603cf3" class="bulleted-list"><li style="list-style-type:disc">lowercase letters</li></ul><ul id="a62a60d8-a1b1-4ac3-a889-ad7816873e80" class="bulleted-list"><li style="list-style-type:disc">numbers</li></ul><ul id="53eb35c4-6272-4f3f-ac27-b89edd44f2ff" class="bulleted-list"><li style="list-style-type:disc">non-alphanumeric characters</li></ul></li></ul><ul id="8d6a47f9-11f2-4046-90ea-ff7c0294e854" class="bulleted-list"><li style="list-style-type:square">Allow all IAM users to change their own passwords</li></ul><ul id="4a5dddd0-3959-43c8-b551-5f1182a65d3c" class="bulleted-list"><li style="list-style-type:square">Require users to change their password after some time (password expiration)</li></ul><ul id="72f9a2c0-3121-4140-a8d5-a3b9cf8de642" class="bulleted-list"><li style="list-style-type:square">Prevent password re-use</li></ul></li></ul><p id="40a6e04d-e3dc-44da-b6b3-9e62a4627ab0" class="">⛔ Prevents brute force attacks</p></li></ul><ul id="0095b14a-9f6b-4c2f-a92f-7dbdf8fa82cb" class="bulleted-list"><li style="list-style-type:disc">Edit password policy<p id="0afbc90a-769e-4b55-9771-4d3f64417715" class="">IAM → Account Settings → Change Password Policy</p><figure id="76d0378d-d9b2-452f-991e-95a1a7173192" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2011.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2011.png"/></a></figure></li></ul></details></li></ul><ul id="c9f40ec7-7f0d-4dfe-a5cd-48fe3c60af24" class="toggle"><li><details open=""><summary>IAM: Multi Factor Authentication</summary><ul id="8efe27d8-1a6c-4778-b7bc-1b948cef16b2" class="toggle"><li><details open=""><summary>Intro</summary><ul id="2b971070-e101-43eb-8287-820e7dcdbc10" class="bulleted-list"><li style="list-style-type:disc">Both root and all of the IAM users should be secured using MFA.</li></ul><ul id="ad3f3aad-b33d-418b-8d1a-d83dfb68425e" class="bulleted-list"><li style="list-style-type:disc">MFA = password you know + security device you own</li></ul><ul id="a48e4658-4f9f-4f27-8aa2-45538ed74d5e" class="bulleted-list"><li style="list-style-type:disc">If the password is stolen or hacked, the account is not compromised</li></ul><ul id="11487ff0-9be3-4fe4-9373-1d09aeae92ad" class="bulleted-list"><li style="list-style-type:disc">MFA devices options:<ul id="840d4186-0616-4675-99c6-5bddc719a9d2" class="bulleted-list"><li style="list-style-type:circle">Virtual MFA device (support for multiple tokens on a single device)<ul id="f4fe6178-c276-45a1-a405-be919b04c16d" class="bulleted-list"><li style="list-style-type:square">Google Authenticator (phone only)</li></ul><ul id="26d3ff05-d206-4702-87e4-760c7585f2ad" class="bulleted-list"><li style="list-style-type:square">Authy (multi-device)</li></ul></li></ul><ul id="8fbaf65e-de91-41a9-8ca9-2c5517fa4f1d" class="bulleted-list"><li style="list-style-type:circle">Universal 2nd Factor (U2F) Security Key (support for multiple root and IAM users using a single security key)<ul id="2467f220-acc9-4e53-aee2-510e1d0d118a" class="bulleted-list"><li style="list-style-type:square">YubiKey by Yubico (3rd party)</li></ul></li></ul><ul id="6cc3bf2a-6b4d-4fd1-a52c-c75e45757581" class="bulleted-list"><li style="list-style-type:circle">Hardware Key Fob MFA Device<ul id="a5107d27-037e-4f65-a7ed-b064ba624f3a" class="bulleted-list"><li style="list-style-type:square">Provided by Gemalto (3rd party)</li></ul></li></ul><ul id="aba164f0-ed32-4752-8744-bc676c7dc4f0" class="bulleted-list"><li style="list-style-type:circle">Hardware Key Fob MFA Device for AWS GovCloud (US)<ul id="74c5c7e9-1460-433e-a5dd-b47e07f727d5" class="bulleted-list"><li style="list-style-type:square">Provided by SurePassID (3rd party)</li></ul></li></ul></li></ul></details></li></ul><ul id="f891c832-b59c-40bb-9ed3-8bb17ee2850f" class="toggle"><li><details open=""><summary>Enable MFA</summary><p id="31334e29-7132-4a50-8caa-418e02aa68d5" class="">Account/User name (top right hand corner) → Security Credentials → MFA → Activate MFA → Virtual MFA device → Scan the QR code using Authy → Enter the current MFA token and the next token → Activate MFA</p><p id="f365f1d1-1646-4abb-8b37-c9adbc714a1b" class="">MFA will be required from the next login</p></details></li></ul></details></li></ul></details></li></ul><ul id="1ab13eac-9594-418f-8c9f-8760468c5426" class="toggle"><li><details open=""><summary>IAM: Roles</summary><ul id="b6144938-c6f7-436f-b512-e731830110b9" class="bulleted-list"><li style="list-style-type:disc">Intro<ul id="e07fe07e-4acb-40ad-9bbe-d18b04345c53" class="bulleted-list"><li style="list-style-type:circle">IAM Roles are a collection of policies for AWS services. Each AWS service will be assigned some role which will grant it the permission to access other AWS services.</li></ul><ul id="fa028af0-b189-4e99-81d0-223142cc136d" class="bulleted-list"><li style="list-style-type:circle">Usually, EC2 and Lambda are most commonly assigned roles as they have to access other AWS services within the account.</li></ul></li></ul><ul id="34d89588-1f21-4eba-85c0-b9d4023e9b76" class="bulleted-list"><li style="list-style-type:disc">Create a role<p id="7871f8c6-2e46-4b5d-b31b-a04f7bbb7f24" class="">IAM → Roles → Create role</p></li></ul></details></li></ul><ul id="8c0f4d0e-796d-4076-bf05-bd8a681dafb5" class="toggle"><li><details open=""><summary>IAM Security Tools</summary><ul id="961b0852-7e39-4c00-9df5-fdbff236b4f5" class="toggle"><li><details open=""><summary>IAM Credentials Report</summary><ul id="2a1ad371-2598-48cb-8e5a-3b37be2045e6" class="bulleted-list"><li style="list-style-type:disc">A report that lists all your account’s users (account-level) and the status of their various credentials</li></ul><ul id="0042ed8b-7241-4954-a6ab-1079def52b4f" class="bulleted-list"><li style="list-style-type:disc">The report is a CSV file with all the details about the users and their security like MFA, password rotation etc.</li></ul><ul id="2dcd81eb-e66d-4d84-9ca3-01c153573bc6" class="bulleted-list"><li style="list-style-type:disc">It is used to audit security for all the users</li></ul><ul id="f04bb820-80c2-4a1d-8e8c-515f26745698" class="bulleted-list"><li style="list-style-type:disc">IAM → Credentials Report → Download Report</li></ul></details></li></ul><ul id="c3d3f773-a4e3-4ef9-8bee-2bd9801b7bde" class="toggle"><li><details open=""><summary>IAM Access Advisor</summary><ul id="4180188f-b574-4137-9a88-576e226aa7d1" class="bulleted-list"><li style="list-style-type:disc">Access advisor shows the service permissions granted to a user (user-level) and when those services were last accessed.</li></ul><ul id="8871ab30-5a52-4aa1-a7ae-f4f247feb29f" class="bulleted-list"><li style="list-style-type:disc">You can use this information to revise your policies for a specific user</li></ul><ul id="e7bdbc59-a510-4832-a9e4-863f8f7168bc" class="bulleted-list"><li style="list-style-type:disc">IAM → Users → Select a user → Access Advisor</li></ul><ul id="58f816ce-cfd8-4cac-8e8e-80d5e9a048fd" class="bulleted-list"><li style="list-style-type:disc">In the report below, you can see that the user has not been using some services and so it might be a good idea to revoke permissions to those services to follow the least permission policy.<figure id="3373f7d6-c7f0-45e5-b28e-389f3c46c56c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2012.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2012.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="38bc3a08-b889-4d93-bd23-2151ff6a8402" class="toggle"><li><details open=""><summary>IAM Guidelines and Best Practices</summary><ul id="8e5e7d42-e56b-45c8-b7a2-b076531efb64" class="bulleted-list"><li style="list-style-type:disc">Don’t use the root account for anything except for AWS account setup</li></ul><ul id="61c5c2be-18d2-4590-958b-2c65a38a1b48" class="bulleted-list"><li style="list-style-type:disc">One physical user = One AWS user</li></ul><ul id="12ac960f-c16a-48cb-b35b-54b71247224e" class="bulleted-list"><li style="list-style-type:disc">Use and enforce the use of Multi Factor Authentication (MFA) for both root and IAM users</li></ul><ul id="45eb906c-ea22-48fe-b8a6-dd33687bbf26" class="bulleted-list"><li style="list-style-type:disc">Use Access Keys for Programmatic Access (CLI / SDK)</li></ul><ul id="d038ce9d-be8b-47ae-86bd-1a88eeb44e88" class="bulleted-list"><li style="list-style-type:disc">Audit permissions of your account with the lAM Credentials Report</li></ul><ul id="c2812d19-40bc-405f-b66e-23866be15a5d" class="bulleted-list"><li style="list-style-type:disc">Never share lAM users &amp; Access Keys</li></ul></details></li></ul><ul id="13bcb6b6-7f7a-4f3b-a1cc-840fe9ae23df" class="toggle"><li><details open=""><summary>Accessing AWS Services</summary><ul id="7c60a13b-3df5-49b4-93f8-01737816995c" class="bulleted-list"><li style="list-style-type:disc">To access AWS, you have three options:<ul id="da141a9e-5d00-4d72-aef7-89e22b561302" class="bulleted-list"><li style="list-style-type:circle">AWS Management Console: protected by password + MFA</li></ul><ul id="ef0646a9-ff9b-45e5-abb3-2e32f8102770" class="bulleted-list"><li style="list-style-type:circle">AWS Command Line Interface (CLI): protected by access keys</li></ul><ul id="e8d02b3b-5bbc-4132-b227-5d08d38eb543" class="bulleted-list"><li style="list-style-type:circle">AWS Software Developer Kit (SDK): protected by access keys</li></ul></li></ul><ul id="685586f6-cd54-4425-9901-9dc04484ea96" class="bulleted-list"><li style="list-style-type:disc">Access Keys are generated through the AWS Console</li></ul><ul id="8d03d056-d3f8-4e01-92e9-66aa1aea0de7" class="bulleted-list"><li style="list-style-type:disc">Users manage their own access keys</li></ul><ul id="5ad3a524-8121-4f19-9d36-2478796d2c04" class="bulleted-list"><li style="list-style-type:disc">Access Keys are secret, just like a password (don’t share them)</li></ul><ul id="5c13c298-b9db-4daf-9b78-d0d088701f42" class="bulleted-list"><li style="list-style-type:disc">Access Key ID ~ username</li></ul><ul id="2e4e1236-51de-48ce-b142-ae93faf4ce8c" class="bulleted-list"><li style="list-style-type:disc">Secret Access Key ~ password</li></ul></details></li></ul><ul id="84ae238c-9087-4cb8-b894-83b9ba3c36a9" class="toggle"><li><details open=""><summary>AWS CLI</summary><ul id="f8595595-5a10-46e2-952a-586f7299fc3c" class="toggle"><li><details open=""><summary>Intro</summary><ul id="01b79e1d-d8cd-41af-962f-9809b7651798" class="bulleted-list"><li style="list-style-type:disc">A tool that enables you to interact with AWS services using commands in your command-line shell</li></ul><ul id="adfb9883-7ee1-470a-a2f6-3e84a0320138" class="bulleted-list"><li style="list-style-type:disc">Direct access to the public APIs of AWS services</li></ul><ul id="41f8f9fc-4e83-4c24-b538-9a0d57b20386" class="bulleted-list"><li style="list-style-type:disc">You can develop scripts to manage your resources</li></ul><ul id="767442bd-b1e6-4175-9964-d2677aa738fa" class="bulleted-list"><li style="list-style-type:disc">It’s open-source <a href="https://github.com/aws/aws-cli">https://github.com/aws/aws-cli</a></li></ul><ul id="68beb8b1-63a3-49a5-b8e8-683d3cf7c553" class="bulleted-list"><li style="list-style-type:disc">Alternative to using AWS Management Console</li></ul></details></li></ul><ul id="e21f3486-ca4e-4b05-bedc-7b6ce0299175" class="toggle"><li><details open=""><summary>Installation</summary><p id="101511c2-2b24-4670-9376-485a59ba5fce" class=""><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">Installing or updating the latest version of the AWS CLI</a></p><p id="4bb0accb-d4b4-488d-b663-53b6509a2f4c" class="">Run <code>aws --version</code> to verify the installation</p></details></li></ul><ul id="25c245a2-c2dc-4b2f-855e-59f8c6a153ce" class="toggle"><li><details open=""><summary>Generate Access Key</summary><p id="e9b88e55-1175-41b2-9253-18b728d75ba7" class="">User (top right hand corner) → Security Credentials → Create Access Key</p><p id="7617749d-ef4d-47f5-b59f-46c640d12271" class="">⛔ Access keys are only shown once and if you lose them you need to generate a new access key</p></details></li></ul><ul id="0d0916ca-a13c-431f-8f1b-fbceff762958" class="toggle"><li><details open=""><summary>Configure AWS CLI</summary><p id="8661c6bb-be97-4c03-97aa-4baee5b44227" class=""><code>aws configure</code> → Access Key ID → Secret Access Key → AWS Region</p></details></li></ul><ul id="5674ac21-0779-49c5-8cc8-d5320659b90d" class="toggle"><li><details open=""><summary>AWS CloudShell</summary><ul id="cd46e25b-98ec-410c-b355-68c4583cb605" class="bulleted-list"><li style="list-style-type:disc">It is a terminal built into the AWS console.</li></ul><ul id="b6060a93-a8f2-4765-8193-f85fb044916c" class="bulleted-list"><li style="list-style-type:disc">It is available for some regions only.</li></ul><ul id="40510248-f90e-479c-9617-8d2d66550d75" class="bulleted-list"><li style="list-style-type:disc">It takes the permission of the current user.</li></ul><ul id="4e39029c-69f6-4151-bc5c-06c023491eab" class="bulleted-list"><li style="list-style-type:disc">It also allows us to download and upload files from our system to the AWS CloudShell environment.</li></ul></details></li></ul></details></li></ul><ul id="098597a1-83da-49f2-9cdc-42c68c4a6e56" class="toggle"><li><details open=""><summary><mark class="highlight-yellow">AWS SDK</mark></summary><ul id="9fd25bd0-d1d1-4657-b3ea-33a75a540ad4" class="bulleted-list"><li style="list-style-type:disc">Enables you to access and manage AWS services programmatically</li></ul><ul id="c08bdc2f-ada4-483f-891e-356d9f61f2c4" class="bulleted-list"><li style="list-style-type:disc">Embedded within your application</li></ul><ul id="0e40fbb7-8cad-4b25-b6a9-8f220599bab1" class="bulleted-list"><li style="list-style-type:disc">Language specific, supports following languages:<ul id="a127e129-b6fd-49b4-9a1a-dd545b2d2d1e" class="bulleted-list"><li style="list-style-type:circle">SDKs: JavaScript, Python, PHP, .NET, Ruby, Java, Go, Node.js, C++</li></ul><ul id="35494256-c3cd-4637-be8d-2e638e50cfb4" class="bulleted-list"><li style="list-style-type:circle">Mobile SDKs: Android, iOS, etc.</li></ul><ul id="6a228299-452c-44c3-8eb9-dfc2971f2e5a" class="bulleted-list"><li style="list-style-type:circle">loT Device SDKs: Embedded C, Arduino, etc.</li></ul></li></ul><p id="e2f45086-69e8-4bb9-aa23-82bf1674272c" class="">💡 AWS CLI is built on AWS SDK for Python</p></details></li></ul></div><h3 id="ca28dddf-0110-4071-a776-58d1f368f71b" class=""><details open=""><summary>Section 5: EC2 Fundamentals</summary></details></h3><div class="indented"><ul id="85fd6210-cfc5-43eb-a357-943baeaa4946" class="toggle"><li><details open=""><summary>Intro</summary><ul id="6d550aac-28b5-436d-ae4b-e8c559e34aab" class="bulleted-list"><li style="list-style-type:disc">EC2 (Elastic Compute Cloud) is an Infrastructure as a Service (IaaS)</li></ul><ul id="9492f124-c851-4688-ba1a-efc855347ade" class="bulleted-list"><li style="list-style-type:disc">t2.micro can be run continuously throughout a month with no cost</li></ul></details></li></ul><ul id="b24db0b3-bb06-46ac-bc01-2f6d3a47b017" class="toggle"><li><details open=""><summary>Sizing an Configuration</summary><p id="33f3055d-cf05-47de-ac03-71cbdb138802" class="">EC2 is highly customizable.</p><ul id="06e1211d-37cf-4ab8-926e-4c480a35c52b" class="bulleted-list"><li style="list-style-type:disc">Operating System (OS): Linux, Windows or Mac OS</li></ul><ul id="4ee68a9c-703e-494c-ae61-d9018db6d9dd" class="bulleted-list"><li style="list-style-type:disc">Compute power &amp; cores (CPU)</li></ul><ul id="e5f38d1c-6190-4aa0-a527-6c338a025c37" class="bulleted-list"><li style="list-style-type:disc">RAM</li></ul><ul id="54c0e594-4d0e-4c5a-9a6d-8531245e7d66" class="bulleted-list"><li style="list-style-type:disc">Storage space:<ul id="f2a310f4-f27f-44d2-8991-8e643b0b4729" class="bulleted-list"><li style="list-style-type:circle">Network-attached (EBS &amp; EFS)</li></ul><ul id="94b87ac3-a1b2-4539-8235-71a99ae3cf5e" class="bulleted-list"><li style="list-style-type:circle">Hardware (EC2 Instance Store)</li></ul></li></ul><ul id="93bf84d2-a600-4ef7-b1fc-37fd981ff16f" class="bulleted-list"><li style="list-style-type:disc">Network card: speed of the card &amp; Public IP address</li></ul><ul id="8d2efdf8-1a81-4ff8-bdcc-039ba44dae63" class="bulleted-list"><li style="list-style-type:disc">Firewall rules: security group</li></ul><ul id="d2d73d68-8131-4113-919b-4217824a194a" class="bulleted-list"><li style="list-style-type:disc">Bootstrap script (configure at first launch): EC2 User Data</li></ul></details></li></ul><ul id="44f37751-5de6-445f-af5a-ed501dd346d0" class="toggle"><li><details open=""><summary>User Data (bootstrap)</summary><ul id="af9d3785-2274-43ec-a1b9-dfc37dfe6aa1" class="bulleted-list"><li style="list-style-type:disc">It is possible to bootstrap our instances (launch some commands when a machine starts) using an EC2 User data script.</li></ul><ul id="6a1fc750-206e-4822-b401-df4e8340a1d9" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">User data script is only run once at the instance first start</li></ul><ul id="d08ae041-1809-4114-bd7b-93a479f02422" class="bulleted-list"><li style="list-style-type:disc">User data is used to automate boot tasks such as:<ul id="ae476094-c4e9-4ed1-8d17-3f2123b98a0f" class="bulleted-list"><li style="list-style-type:circle">Installing updates</li></ul><ul id="14563b89-027f-42ce-a6cb-4df1ca250abe" class="bulleted-list"><li style="list-style-type:circle">Installing software</li></ul><ul id="749bddce-dc89-45b2-ab70-ac2084727011" class="bulleted-list"><li style="list-style-type:circle">Downloading common files from the internet</li></ul></li></ul><ul id="f7f9d82a-bac5-40f7-9ae3-a93ec8b418e5" class="bulleted-list"><li style="list-style-type:disc">The EC2 User Data Script runs with the root user privilege </li></ul></details></li></ul><ul id="7c192394-bb42-41a6-b39f-a46c9542cfde" class="toggle"><li><details open=""><summary>Create an instance</summary><p id="83c20d11-bfdd-4178-ab6c-893f0730209f" class="">EC2 → Instances → Launch Instance → Select AMI → Choose instance type → Configure Instance Details → Add storage → Configure Security Groups → Review and Launch → Select an existing key pair or create a new one</p><ul id="6d06e33c-80f5-4b52-93ae-a2a692f0a2b4" class="toggle"><li><details open=""><summary>Adding User Data</summary><p id="00a746dd-680b-4a24-9255-3b6a19b5de40" class="">User data (code that executes when the EC2 is booted for the first time) is setup during instance configuration. To setup a basic http server, use the shell script below</p><pre id="e9c98e34-1a08-4b39-9888-79d170d7b169" class="code"><code>#!/bin/bash
# Use this for your user data (script from top to bottom)
# install httpd (Linux 2 version)
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
echo &quot;&lt;h1&gt;Hello World from $(hostname -f)&lt;/h1&gt;&quot; &gt; /var/www/html/index.html</code></pre></details></li></ul><ul id="3eb3b37c-5032-4120-8a22-20894c27ba80" class="toggle"><li><details open=""><summary>Adding an HTTP rule</summary><p id="45380fe1-fdf3-4437-b122-025665078b03" class="">Add an HTTP rule to access the website from anywhere.</p><p id="150604bb-c873-49c0-ab3c-24dbe6f64ca7" class="">If we do this, we will be able to access the server using its public IP address.</p><figure id="322b1fcc-738f-4e27-9430-07c7db87976b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2013.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2013.png"/></a></figure></details></li></ul><ul id="1df3901f-9eff-45ca-8ee9-85e4ff621507" class="toggle"><li><details open=""><summary>Create a new key pair</summary><p id="6b88ed66-8030-4c3c-91f2-e9c62910dda1" class="">Key pair will be used to SSH into our EC2 instance. Don’t lose the downloaded key pair file.</p><figure id="e97c3665-280a-42ce-a05e-50289207a6d5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2014.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2014.png"/></a></figure></details></li></ul></details></li></ul><ul id="afd6f986-b5c1-47b6-8277-db40d84a2b08" class="toggle"><li><details open=""><summary>Stopping and Restarting an EC2 instance</summary><p id="f6ec916e-90ce-4826-8aff-74e7402db36c" class="">Right click any instance → Stop instance</p><p id="ad4bd03b-c605-4fc6-90ee-e189a5e57e5f" class="">Right click any instance → Start instance</p><p id="2a5618d2-6b4a-4d88-ac00-38d7c1ca6bde" class="">⛔ Restarting any instance may change its public IP but not its private IP</p></details></li></ul><ul id="9ecb2a2c-8dd1-49ef-93f1-0f8f68e1c6b8" class="toggle"><li><details open=""><summary>Instance Types</summary><p id="d75b9174-cb6e-48ea-a81f-1eaf829cb025" class=""><a href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 Instance Types - Amazon Web Services</a></p><p id="86f10ed9-ba69-4e28-98ac-fd08b2b4c840" class=""><a href="https://instances.vantage.sh/">Amazon EC2 Instance Comparison</a></p><ul id="365ed0f2-ec1d-47b3-9379-e492749d849f" class="toggle"><li><details open=""><summary>Naming Convention</summary><p id="a4335e59-d994-4f76-ab24-157fb09646fc" class="">### <strong>m5.2xlarge</strong></p><p id="fc52fdc2-c1ef-4723-8155-11fc4c610a21" class="">m ⇒ instance class 5 ⇒ generation (AWS improves them over time) 2xlarge ⇒ size within the instance class</p></details></li></ul><ul id="20cbe488-cb25-437c-91f5-d777a260bead" class="toggle"><li><details open=""><summary>Instance Classes</summary><ul id="10d2ab6d-56ca-4635-8651-5125c6eb874c" class="toggle"><li><details open=""><summary>General Purpose Instances</summary><ul id="92bdbd41-0760-425f-999d-53d9a6a8f8e9" class="bulleted-list"><li style="list-style-type:disc">Great for a diversity of workloads such as web servers or code repositories</li></ul><ul id="5c640c10-08bf-4066-a4f6-7b7e6a26a510" class="bulleted-list"><li style="list-style-type:disc">Balance between:<ul id="30bc23f7-3bdc-4587-a0b5-8739e6aed597" class="bulleted-list"><li style="list-style-type:circle">Compute</li></ul><ul id="87656fae-b41e-49fc-89e5-c02caf38e3a9" class="bulleted-list"><li style="list-style-type:circle">Memory</li></ul><ul id="957bf967-dbbb-4501-9835-533f13407724" class="bulleted-list"><li style="list-style-type:circle">Networking</li></ul></li></ul><ul id="533e71a4-c2cc-4c8e-87a7-f98df0f93490" class="bulleted-list"><li style="list-style-type:disc">t2.micro is a General Purpose EC2 instance</li></ul><figure id="c8de908e-7a8e-4173-8a8b-5ee94f25c4de" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2015.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2015.png"/></a></figure></details></li></ul><ul id="d181c95b-7fc7-41ab-9bec-710476c11ccc" class="toggle"><li><details open=""><summary>Compute Optimized Instances</summary><ul id="ad902397-d1cf-4842-a553-31f292c221e8" class="bulleted-list"><li style="list-style-type:disc">Great for compute-intensive tasks that require high performance processors:<ul id="980eaf58-6eed-4577-87cf-0dde6518f1be" class="bulleted-list"><li style="list-style-type:circle">Batch processing workloads</li></ul><ul id="b00c1928-7493-4a49-83f1-9be29b99d604" class="bulleted-list"><li style="list-style-type:circle">Media transcoding</li></ul><ul id="af67ffe2-a0f4-4a81-9226-03c249902e67" class="bulleted-list"><li style="list-style-type:circle">High performance web servers</li></ul><ul id="e20dbcd8-f42c-4a40-ae85-8600fd27e03f" class="bulleted-list"><li style="list-style-type:circle">High performance computing (HPC)</li></ul><ul id="f03cf2a2-360f-4466-a5f2-cacdb191dd53" class="bulleted-list"><li style="list-style-type:circle">Scientific modeling &amp; machine learning</li></ul><ul id="7a71f369-ba28-41a8-aef3-d011cc5d65b3" class="bulleted-list"><li style="list-style-type:circle">Dedicated gaming servers</li></ul></li></ul><figure id="cba430b7-4e5f-4772-8935-ede146a5fccf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2016.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2016.png"/></a></figure></details></li></ul><ul id="f3373f44-9302-4bc9-8efb-929604141fa5" class="toggle"><li><details open=""><summary>Memory Optimized Instances</summary><ul id="387a5e45-17ad-43b3-b318-97eda4cdb98b" class="bulleted-list"><li style="list-style-type:disc">Fast performance for workloads that process large data sets in memory</li></ul><ul id="595e29ee-e048-420d-b359-f1169144c780" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="1ee6f146-572d-44ec-b506-a5a669fc2b83" class="bulleted-list"><li style="list-style-type:circle">High performance, relational / non-relational databases</li></ul><ul id="ada164cd-e404-47c4-b49a-54be78899a18" class="bulleted-list"><li style="list-style-type:circle">Distributed web scale cache stores</li></ul><ul id="2c504ebd-b18f-4c66-8458-cd39b764553b" class="bulleted-list"><li style="list-style-type:circle">In-memory databases optimized for Bl (business intelligence)</li></ul><ul id="792a81fa-2dc3-415c-9a62-baa90887148e" class="bulleted-list"><li style="list-style-type:circle">Applications performing real-time processing of big unstructured data</li></ul><figure id="b58eaf9c-a998-40f5-b06c-514da61ab0f8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2017.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2017.png"/></a></figure></li></ul></details></li></ul><ul id="f6f8e7bb-c7bd-4c6b-81f4-d114fbe96733" class="toggle"><li><details open=""><summary>Storage Optimized Instances</summary><ul id="6ddfcfbe-5b2f-4d29-830d-1e27842b3c80" class="bulleted-list"><li style="list-style-type:disc">Great for storage-intensive tasks that require high, sequential read and write access to large data sets on local storage</li></ul><ul id="3b6fd113-9753-4254-9a53-6cc222634b6f" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="b7ade2c1-db68-4b90-beef-864149620b93" class="bulleted-list"><li style="list-style-type:circle">High frequency online transaction processing (OLTP) systems</li></ul><ul id="ccf9001c-b2f2-4601-b81e-41d20c5ab523" class="bulleted-list"><li style="list-style-type:circle">Relational &amp; NoSQL databases</li></ul><ul id="37442a2d-7ef0-44b9-9511-c0a3502d5fcd" class="bulleted-list"><li style="list-style-type:circle">Cache for in-memory databases (eg. Redis)</li></ul><ul id="960b1d89-359d-4857-b7d1-73ed3926158a" class="bulleted-list"><li style="list-style-type:circle">Data warehousing applications</li></ul><ul id="42e83661-a65b-400b-9a6e-7f17af4600e7" class="bulleted-list"><li style="list-style-type:circle">Distributed file systems</li></ul><figure id="1dae6040-d51b-4102-a485-f9ea35716dda" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2018.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2018.png"/></a></figure></li></ul></details></li></ul></details></li></ul></details></li></ul><ul id="2a0b4ded-cc6e-46a2-840f-698cba76a84b" class="toggle"><li><details open=""><summary>Security Groups</summary><ul id="85265587-0678-4eb6-a278-bdc4ac09cc90" class="toggle"><li><details open=""><summary>Intro</summary><ul id="e159496c-2e8b-4517-9d7d-6fdf41b9eb30" class="bulleted-list"><li style="list-style-type:disc">They control how traffic is allowed into or out of our EC2 Instances.</li></ul><ul id="a7b5de5f-9fb9-447d-a617-0f0355707ae7" class="bulleted-list"><li style="list-style-type:disc">Security groups only contain allow rules</li></ul><ul id="b696416f-6a24-4793-9f7d-6144dbb4c8a7" class="bulleted-list"><li style="list-style-type:disc">Security groups rules can reference by IP or by security group</li></ul><ul id="c21909d9-c60b-4f81-9639-a6258a68b0e5" class="bulleted-list"><li style="list-style-type:disc">Security groups act as a “firewall” on EC2 instances</li></ul><ul id="15d6e84e-207d-43dd-bbe8-4201546d43e1" class="bulleted-list"><li style="list-style-type:disc">They regulate:<ul id="4ef67302-6ac2-4553-94c8-8e8a8638b3c0" class="bulleted-list"><li style="list-style-type:circle">Access to Ports</li></ul><ul id="a5c052ee-cf5c-4072-9c49-c0dc654883f7" class="bulleted-list"><li style="list-style-type:circle">Authorized IP ranges IPv4 and IPv6</li></ul><ul id="42fc56a8-bda3-454b-a8ec-451b09033c59" class="bulleted-list"><li style="list-style-type:circle">Control of inbound &amp; outbound network</li></ul></li></ul><figure id="6b2be196-9024-422a-9c0d-ace843037e36" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2019.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2019.png"/></a></figure></details></li></ul><ul id="098f4472-ad3f-498e-8231-01a36b9deaac" class="toggle"><li><details open=""><summary>Firewall Diagram</summary><p id="912d58b7-2f26-4ba5-b7d8-056c6012ab66" class="">In the diagram below, EC2 has only 1 security group which is shown separately for inbound and outbound traffic. Our computer comes under the authorized IP range, so it get access to the EC2 instance but any other computer whose IP doesn’t fall in the range will be denied access and the request will time out.</p><p id="e2bd2cca-a754-4a79-a69f-83424b744bf4" class="">EC2 instances, by default, allow any traffic out of it. So, it can send a request to a web server.</p><figure id="661c275c-288c-4099-b4fe-c4bcb266493d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2020.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2020.png"/></a></figure></details></li></ul><ul id="0b0a3ae5-3e80-47b5-b307-7e3aacc75ee3" class="toggle"><li><details open=""><summary>Important Points</summary><ul id="ca81b209-4234-4827-8f83-bf9c6d2171b7" class="bulleted-list"><li style="list-style-type:disc">A security group can be attached to multiple instances</li></ul><ul id="2af3007c-e5fe-427d-a436-00d1cb8e41f5" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">An instance can have multiple security groups attached to it</li></ul><ul id="2133ef3a-dad9-4d96-a673-0ec3b642f44f" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">Security groups are locked down to a region or VPC. So, if you change the region or VPC, you need to re-create security groups.</li></ul><ul id="ab8ef30f-5c6c-47a3-8ebb-cbdf330a755a" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">Security groups live outside the EC2, they are not some application running on the instance. So if the traffic is blocked, the EC2 instance won’t even know.</li></ul><ul id="49f1c23c-514e-470e-8d25-105c5276e3fd" class="bulleted-list"><li style="list-style-type:disc">It’s recommended to maintain a separate security group for SSH access</li></ul><ul id="6b74a545-80f1-4df2-9f0e-cb588c0bfbae" class="bulleted-list"><li style="list-style-type:disc">If your application is not accessible (time out), then it’s probably a security group issue. But, if you get a “connection refused” error, then the security group worked fine. In this case, it’s an application issue.</li></ul><ul id="11498f9a-f087-4e28-a974-7f567dacf78e" class="bulleted-list"><li style="list-style-type:disc">By default, for a new SG, all inbound traffic is blocked and all outbound traffic is authorized.</li></ul></details></li></ul><ul id="edde26b9-72e1-49c4-a679-8f984db7d7c5" class="toggle"><li><details open=""><summary>Referencing other security groups</summary><p id="ee4833c5-9483-46aa-8f25-77f96e07d650" class="">In the diagram below, security group 1 allows inbound traffic from instances that have security group 1 or 2 attached to them. This pattern is quite common in load balancers.</p><figure id="cf25f1f6-30ed-4d83-9a5f-b2749a4756d3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2021.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2021.png"/></a></figure><p id="1c5ebdd7-e090-4b08-afcd-5d2244b86f4f" class="">Untitled</p></details></li></ul><ul id="d5240393-004b-469e-b38f-71dae44d949a" class="toggle"><li><details open=""><summary>Important Ports to know</summary><ul id="d6bb5d0e-77ca-438d-839f-558b1cff9288" class="bulleted-list"><li style="list-style-type:disc">FTP: 21 - File Transfer Protocol - Upload files into a file share</li></ul><ul id="bda8ce56-d713-40db-8d50-7cd3e2c0d696" class="bulleted-list"><li style="list-style-type:disc">SSH: 22 - Secure Shell - Log into a Linux instance</li></ul><ul id="3b7911e2-57d1-43bd-a821-5d42a74c166e" class="bulleted-list"><li style="list-style-type:disc">SFTP: 22- Secure File Transfer Protocol -  (same as SSH) - used for uploading files using SSH</li></ul><ul id="5b88a151-b131-428e-bca1-473189420830" class="bulleted-list"><li style="list-style-type:disc">HTTP: 80 - access unsecured websites</li></ul><ul id="d42ab46e-a47b-47e7-b144-f78631b612ce" class="bulleted-list"><li style="list-style-type:disc">HTTPS: 443 - access secured websites</li></ul><ul id="d0b552a7-eb75-498c-8c4b-438340deeec4" class="bulleted-list"><li style="list-style-type:disc">RDP: 3389 - Remote Desktop Protocol - Log into a Windows instance</li></ul></details></li></ul></details></li></ul><ul id="580cfe41-313e-498f-9894-30b708863375" class="toggle"><li><details open=""><summary>Connect to an EC2 instance</summary><ul id="f5d9f90a-3a8b-4f8c-8bbd-38fe5eebd513" class="bulleted-list"><li style="list-style-type:disc">Intro<ul id="07ff02bf-7aa0-4eab-a75b-8a11735888a7" class="bulleted-list"><li style="list-style-type:circle">SSH is used to connect to the instance for some maintenance. It allows us to control a remote machine using a terminal.</li></ul><ul id="474b477b-5692-4672-8dde-226f966596f1" class="bulleted-list"><li style="list-style-type:circle">EC2 instance connect is a web browser based way to connect to an EC2 instance without the use of a terminal.</li></ul><figure id="50f4ac44-e100-445c-ade9-63f18414f05b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2022.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2022.png"/></a></figure></li></ul><ul id="4f00bfd6-e7c8-4c8e-940e-df2cb69ae424" class="toggle"><li><details open=""><summary>SSH into an EC2 instance (Linux or Mac)</summary><ul id="f543bc3f-be79-4607-a042-a289cced48c0" class="bulleted-list"><li style="list-style-type:disc">Open terminal and navigate to the <code>.pem</code> key file location</li></ul><ul id="d536cf7a-71df-4c12-811d-72ac75cb188e" class="bulleted-list"><li style="list-style-type:disc">Run <code>ssh -i EC2Tutorial.pem ec2-user@65.0.74.155</code> to SSH into the EC2 instance. Here, <code>EC2Tutorial.pem</code> is the key file name and <code>65.0.74.155</code> is the public IP of the instance.</li></ul><ul id="2f7c07fa-ff08-425c-9a06-32577dc9f493" class="bulleted-list"><li style="list-style-type:disc">If the above command throws an error as shown below, run <code>chmod 0400 EC2Tutorial.pem</code> and SSH again.<pre id="2f051bd3-42e4-41c0-8360-f10d0e550ecc" class="code code-wrap"><code>Permissions 0644 for &#x27;EC2Tutorial.pem&#x27; are too open.It is required that your private key files are NOT accessible by others.This private key will be ignored.Load key &quot;EC2Tutorial.pem&quot;: bad permissionsec2-user@65.0.74.155: Permission denied (publickey,gssapi-keyex,gssapi-with-mic)</code></pre></li></ul><ul id="5d5a5137-c9de-4e1c-8aab-0421a5d14951" class="bulleted-list"><li style="list-style-type:disc">To close the SSH connection, run <code>exit</code> or <code>Ctrl + D</code> in the terminal</li></ul></details></li></ul><ul id="839fee58-320f-4b9e-b701-78e58e35c684" class="toggle"><li><details open=""><summary>SSH into an EC2 instance (Windows - Using Putty)</summary><ul id="fda6a53c-4e0d-4276-b784-969baff953ca" class="bulleted-list"><li style="list-style-type:disc">Download &amp; Install Putty from <a href="https://www.putty.org/">https://www.putty.org/</a></li></ul><ul id="0ee4e4af-853b-479c-8f86-a29e96b8ea82" class="bulleted-list"><li style="list-style-type:disc">If you haven’t downloaded ppk format we can make pem file to ppk using putty gen</li></ul><ul id="7356abbb-5654-479a-8451-5996fca2a96f" class="bulleted-list"><li style="list-style-type:disc">Click Putty gen → Load → All files → Click pem file → ok → save privet key → yes → save the file as ppk format</li></ul><ul id="44269b62-556e-466e-9737-64c2ab6fe6d2" class="bulleted-list"><li style="list-style-type:disc">Click Putty → type host name as 13.127.185.123, which is the public IP from the AWS ec2 instance</li></ul><ul id="bbdf2d66-3123-4993-8abc-786074ad7ef2" class="bulleted-list"><li style="list-style-type:disc">SSH → Type EC2 Instance Save → Double click EC2 Instance → Click Accept → But it wont be logged in</li></ul><ul id="828d7a89-d65c-4609-b2fc-a8ef5c6a1de4" class="bulleted-list"><li style="list-style-type:disc">Start Putty → Load → EC2 Instance → Type host name as ec2-user@13.127.185.123 → SSH → Side SSH → Auth → Credential → add pkk file in private key file. → Session → Save →  Open</li></ul><ul id="0df85a15-d549-45c3-9ce8-df71af27ea92" class="bulleted-list"><li style="list-style-type:disc">Check commands <code>whoami</code> , <code>ping </code><a href="http://google.com"><code>google.com</code></a> </li></ul><ul id="87074b7d-22d3-422b-8d65-e9d558bccb49" class="bulleted-list"><li style="list-style-type:disc">To stop it hit Ctrl + C</li></ul><ul id="36184f67-b72a-4948-8811-b8ff1d032725" class="bulleted-list"><li style="list-style-type:disc">type <code>exit </code> to close</li></ul><ul id="5094325c-edc5-43d6-acb0-5853b7756d46" class="bulleted-list"><li style="list-style-type:disc">Open Putty Again → Load EC2 Instance → Click Open to access EC2 again directly.</li></ul></details></li></ul><ul id="c94204ea-3d59-471f-befd-4545f3d29303" class="toggle"><li><details open=""><summary>SSH into an EC2 instance (Windows ≥ 10)</summary><ul id="6ba8268b-2161-458d-8b91-41a0c61f62a0" class="bulleted-list"><li style="list-style-type:disc">type ssh in terminal to check if it supports it or not. If ssh is supported it shows like below.</li></ul><pre id="aa9e8890-c583-46b0-b95d-62b7f487acb7" class="code"><code>usage: ssh [-46AaCfGgKkMNnqsTtVvXxYy] [-B bind_interface]
           [-b bind_address] [-c cipher_spec] [-D [bind_address:]port]
           [-E log_file] [-e escape_char] [-F configfile] [-I pkcs11]
           [-i identity_file] [-J [user@]host[:port]] [-L address]
           [-l login_name] [-m mac_spec] [-O ctl_cmd] [-o option] [-p port]
           [-Q query_option] [-R address] [-S ctl_path] [-W host:port]
           [-w local_tun[:remote_tun]] destination [command]</code></pre><ul id="d078e722-9e7a-460b-8d48-1e306488ad48" class="bulleted-list"><li style="list-style-type:disc">Open terminal (powershell or command prompt) and navigate to the <code>.pem</code> key file location</li></ul><ul id="be053e81-1954-44cc-a3d8-f26388ab60d8" class="bulleted-list"><li style="list-style-type:disc">Run <code>ssh -i .\EC2Tutorial.pem ec2-user@13.127.185.123</code> to SSH into the EC2 instance. Here, <code>EC2Tutorial.pem</code> is the key file name and <code>13.127.185.123</code> is the public IP of the instance.</li></ul><ul id="1c98f616-44cc-4d08-aefe-2cf9582c9660" class="bulleted-list"><li style="list-style-type:disc">Click <code>yes</code> incase asked for authenticity</li></ul><ul id="af8606db-3466-4e4d-9e6c-8742d7b26e7a" class="bulleted-list"><li style="list-style-type:disc">To close the SSH connection, run <code>exit </code>in the terminal</li></ul><ul id="dae28fcf-f734-4327-8b6f-72aa936e44ac" class="toggle"><li><details open=""><summary>Connection Error</summary><ul id="817e9c68-7d49-4480-a51d-6cd3d0a29235" class="bulleted-list"><li style="list-style-type:disc">If it doesn’t connect to the server</li></ul><ul id="95a913cd-1d5e-41e9-94d3-4e5c07df7aac" class="bulleted-list"><li style="list-style-type:disc">Navigate pem file → right click → properties → security → Advanced → Make sure that you are the owner → else change → object type → Find your name → location is your computer → type your name as object name → ok</li></ul><ul id="6a489cd5-880e-4a92-9777-a2cfe663b73e" class="bulleted-list"><li style="list-style-type:disc">Then remove access of system and administrator</li></ul><ul id="3ec25dbe-2e13-402e-b7e1-c1637dadb247" class="bulleted-list"><li style="list-style-type:disc">For that first disable inheritance → Remove all Inherited permissions from this object → add → type your name → ok → full control → ok </li></ul><ul id="769f0678-5072-4294-bc02-5f409122b024" class="bulleted-list"><li style="list-style-type:disc">ok → ok → right click property and security we see our name only</li></ul><ul id="9eff587d-9fb9-4b37-b9e5-446de8ae8544" class="bulleted-list"><li style="list-style-type:disc">Then repeat the above ssh task to show the connection.</li></ul></details></li></ul></details></li></ul><ul id="853fad20-9cbd-4336-be5d-b91f386221b4" class="toggle"><li><details open=""><summary>EC2 Instance Connect</summary><p id="79e10791-7930-46bd-b660-5e0360105f74" class="">EC2 → Instances → Select instance and click on Connect button → EC2 instance connect → Connect</p><p id="16077980-5836-4949-9a90-f0a025dfb55b" class="">This will open a terminal in the web browser by generating a temporary key behind the scenes.</p><figure id="32995f93-97c3-457e-b322-ef509772625f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2023.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2023.png"/></a></figure><p id="27af147d-ea0c-4be3-8fd3-73251f3154f5" class="">⛔ This still uses port 22 (SSH), so the security group must have inbound rules activated on this port for this to work.</p></details></li></ul></details></li></ul><ul id="66d4529e-377b-406f-a32f-60448ea589a0" class="toggle"><li><details open=""><summary>IAM roles for EC2 instances</summary><ul id="9a2baa8c-f5ea-4e03-b420-afb7b5a6c02c" class="bulleted-list"><li style="list-style-type:disc">Intro<p id="35e162e7-a9f6-4796-bd9a-6b1bd3241f30" class="">To allow our instances to access AWS resources, we need to provide them the access. We can either provide our credentials (Access Key ID and Secret Access Key) or attach IAM roles to the instances. The former should not be done at any cost and the latter is preferred.</p></li></ul><ul id="12a7bac7-1ff1-4241-a8e9-30b9106b170a" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-yellow">Never enter AWS credentials into the EC2 instance</mark><p id="3b57e3dc-7d93-4cf0-b16e-3e32cd991a02" class="">NX2 AMIs come with AWS CLI pre installed. So, we can run AWS CLI commands from inside the instance. Running some AWS CLI commands will require you to configure AWS credentials inside the EC2 instance which is a horrible idea as anyone else can SSH into the instance and get the credentials from the instance.</p><figure id="4f879b57-8041-4c89-92d4-d228e4c396e1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2024.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2024.png"/></a></figure></li></ul><ul id="48a3821c-a342-4ebe-b552-5ab7f58c7605" class="bulleted-list"><li style="list-style-type:disc">Attach IAM roles to EC2 instances<p id="652e297b-ffc4-4b94-ad6f-951614a2e239" class="">EC2 → Instances → Select instance → Actions → Security → Modify IAM role → Select the IAM role → Attach</p><p id="1b186eae-51c4-4bde-bdf3-add4b8025209" class="">To check this run <code>aws iam list-users</code> in ec2 instance connect and it shows all user details.</p><p id="14cd4ba0-7f79-4463-9009-9d265f2be0b1" class="">This will allow the EC2 instance to perform allowed operations on the AWS resources.</p></li></ul></details></li></ul><ul id="60782d9d-9877-4cf1-bf16-9563c8cadf3e" class="toggle"><li><details open=""><summary>EC2 instances purchasing options</summary><ul id="f86ee8de-7ec4-4460-a5bd-450a5a985a4c" class="toggle"><li><details open=""><summary>Intro</summary><p id="23612ed7-b37c-4b49-a7c8-960828c68ac0" class="">If we need some instances for long term, choosing the right type of instance can save some us some cost.</p><ul id="d1235bd6-2057-4f5c-8974-a91dad3d28ce" class="bulleted-list"><li style="list-style-type:disc">On-Demand Instances: short workload, predictable pricing</li></ul><ul id="554c43ff-da8c-42ca-bb86-674d14c1b05a" class="bulleted-list"><li style="list-style-type:disc">Reserved: (1 &amp; 3 years)<ul id="5d524ef9-b9df-4f86-af28-8bd17d97c8be" class="bulleted-list"><li style="list-style-type:circle">Reserved Instances: long workloads</li></ul><ul id="eb5ec507-ab26-4cdb-b38b-67ac71868795" class="bulleted-list"><li style="list-style-type:circle">Convertible Reserved Instances: long workloads with flexible instances</li></ul></li></ul><ul id="75961447-9616-4430-920d-7fb9c3c91371" class="bulleted-list"><li style="list-style-type:disc">Savings Plan (1 &amp; 3 years) - commitment to amount of usage, long workload</li></ul><ul id="340d8ac5-605a-470c-af78-f662b9cdf108" class="bulleted-list"><li style="list-style-type:disc">Spot Instances: short workloads, cheap, can lose instances (less reliable)</li></ul><ul id="818b5893-439a-41f3-8c6c-73f42bacff7c" class="bulleted-list"><li style="list-style-type:disc">Dedicated Hosts: book an entire physical server, control instance placement</li></ul><ul id="858d32c0-4359-4320-841c-c210ed7f72b9" class="bulleted-list"><li style="list-style-type:disc">Dedicated Instances: No other customer will share your hardware</li></ul><ul id="3953e2fb-dcf7-4618-800f-59dfc7e3b3a6" class="bulleted-list"><li style="list-style-type:disc">Capacity Reservation: Reserve Capacity in a specific AZ for a duration</li></ul></details></li></ul><ul id="7dcd5aea-2069-4fcf-81e3-33ad0d125405" class="toggle"><li><details open=""><summary>On Demand Instances</summary><ul id="bff22c9f-3834-4a1b-af0b-413705ca3724" class="bulleted-list"><li style="list-style-type:disc">Pay for what you use:<ul id="2538423f-225c-4b8b-bea7-dcbd85adc7df" class="bulleted-list"><li style="list-style-type:circle">Linux or Windows - billing per second, after the first minute</li></ul><ul id="8f3721d0-4a5e-41ff-a025-f59fc5555b32" class="bulleted-list"><li style="list-style-type:circle">All other operating systems - billing per hour</li></ul></li></ul><ul id="534020f4-cb5b-4af8-93e6-24a99588c612" class="bulleted-list"><li style="list-style-type:disc">Has the highest cost but no upfront payment</li></ul><ul id="469d451f-535d-4f30-b524-3af0c42007eb" class="bulleted-list"><li style="list-style-type:disc">No long-term commitment</li></ul><ul id="f176ce83-223b-4745-86dc-23b4a2b77c04" class="bulleted-list"><li style="list-style-type:disc">Recommended for short-term and un-interrupted workloads, where you can’t predict how the application will behave</li></ul></details></li></ul><ul id="bed73b5b-c26c-48fd-906e-555024068604" class="toggle"><li><details open=""><summary>EC2 Reserved Instances</summary><ul id="1907d083-f1cb-4bdf-95cd-87356361832a" class="bulleted-list"><li style="list-style-type:disc">Up to 72% discount compared to on-demand instances</li></ul><ul id="d5381885-725d-40bc-a3ab-99d90fc156cd" class="bulleted-list"><li style="list-style-type:disc">Reservation period: 1 year ⇒ +discount or 3 years ⇒ +++discount</li></ul><ul id="ff94b2c0-3771-42a1-a81b-a6e38d7fe728" class="bulleted-list"><li style="list-style-type:disc">Purchasing options: no upfront | partial upfront ⇒ +discount | all upfront ⇒ ++discount</li></ul><ul id="7f98a15b-b739-4dbf-bdc9-53b347b98ecd" class="bulleted-list"><li style="list-style-type:disc">Reserved Instance Scope - Regional or Zonal (reserve capacity in an AZ)</li></ul><ul id="2f931780-acfa-4fd5-bfa6-21f76beedf22" class="bulleted-list"><li style="list-style-type:disc">Recommended for steady-state usage applications (like database)</li></ul><ul id="0f0a3151-51a0-4465-80ef-f0b8b4fdd858" class="bulleted-list"><li style="list-style-type:disc">You can buy and  sell in a Reserved Instance Marketplace</li></ul><ul id="bfbe3ea5-fc97-440d-8fb8-d0c68b77cfe0" class="bulleted-list"><li style="list-style-type:disc"><strong>Convertible Reserved Instance</strong><ul id="740685aa-7288-4751-bb92-4589b249efe5" class="bulleted-list"><li style="list-style-type:circle">can change the EC2 instance type, instance family, OS, scope and tenancy</li></ul><ul id="e94ee0b7-e609-4063-8c7d-d8ac0668cdac" class="bulleted-list"><li style="list-style-type:circle">Up to 66% discount</li></ul></li></ul><figure id="81d3a4a8-208d-4982-9c17-295fd1e2cb4e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(352).png"><img style="width:1672px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(352).png"/></a></figure></details></li></ul><ul id="268cba5e-f38f-4c71-88a3-9667ed9c9bdb" class="toggle"><li><details open=""><summary>Savings Plans</summary><ul id="ee0c101f-3d60-4ad7-8bcb-812aa3f7331c" class="bulleted-list"><li style="list-style-type:disc">Get discount based on long term usage (Up to 72% same as Reserved Instance)</li></ul><ul id="6e6f53bd-4925-41f9-9347-ea1f3e104b14" class="bulleted-list"><li style="list-style-type:disc">Commit to certain type usage like $10/hour for 1 or 3 years</li></ul><ul id="5c18069d-5f60-454d-baba-4183627c4376" class="bulleted-list"><li style="list-style-type:disc">Usage beyond Savings plan is billed at the On-Demand price</li></ul><ul id="78990a85-e31e-4df7-85ea-e73c8788d5ee" class="bulleted-list"><li style="list-style-type:disc">locked to a specific instance family &amp; AWS region (eg: M5 in us-east-1)</li></ul><ul id="6c7bb61d-9b69-4f35-be75-fd72052525e2" class="bulleted-list"><li style="list-style-type:disc">Flexible across <ul id="b84da482-ad9e-4a8e-bb5c-c794d4858f97" class="bulleted-list"><li style="list-style-type:circle">instance size (M5.xlarge, M5.2xlarge)</li></ul><ul id="8db3532c-6068-442c-accb-8c024a64036d" class="bulleted-list"><li style="list-style-type:circle">OS (Linux &amp; Windows)</li></ul><ul id="509dbf09-e1e2-4199-86d1-5aab8b1a191b" class="bulleted-list"><li style="list-style-type:circle">Tenancy (possession) of Host/Dedicated/Default</li></ul></li></ul></details></li></ul><ul id="99f366a7-16fc-4756-9c7b-642d98e2956a" class="toggle"><li><details open=""><summary>Spot Instances</summary><ul id="6af07e35-69f6-4465-954f-339db0a80e54" class="toggle"><li><details open=""><summary>Intro</summary><ul id="85093ead-cfb9-45eb-8e68-ceb3a59e9712" class="bulleted-list"><li style="list-style-type:disc">Can get a discount of up to 90% compared to On-demand</li></ul><ul id="2932216e-52de-4b0f-bf2e-9fec8cfef303" class="bulleted-list"><li style="list-style-type:disc">Spot instances work on a bidding basis where you say you are willing to pay a specific max hourly rate for the instance. Your instance can terminate if the spot price increases.</li></ul><ul id="b19a5e46-8a9e-49a5-a672-93355478f337" class="bulleted-list"><li style="list-style-type:disc">The MOST cost-efficient instances in AWS</li></ul><ul id="a34fde14-fd34-4a58-a5b5-08674fce01a7" class="bulleted-list"><li style="list-style-type:disc">Useful for workloads that are resilient to failure<ul id="523aaac5-b1b2-441b-9722-5a5e4cc29be5" class="bulleted-list"><li style="list-style-type:circle">Batch jobs</li></ul><ul id="11b8026e-91ed-4dd7-aa49-351f166e0532" class="bulleted-list"><li style="list-style-type:circle">Data analysis</li></ul><ul id="8f6c5164-1754-43b1-8668-9a330e41a58e" class="bulleted-list"><li style="list-style-type:circle">Image processing</li></ul><ul id="81b01f44-f04e-4044-868d-3e99ebd23e5d" class="bulleted-list"><li style="list-style-type:circle">Any distributed workloads</li></ul><ul id="4eeb49dc-d25a-462c-9dfe-1a701dc4de68" class="bulleted-list"><li style="list-style-type:circle">Workloads with a flexible start and end time</li></ul></li></ul><ul id="e0a71b32-af44-458e-a8b3-e3dd9857a61f" class="bulleted-list"><li style="list-style-type:disc">Not suitable for critical jobs or databases</li></ul></details></li></ul><ul id="7e732766-e6cf-42a2-85df-d0baa28dca93" class="toggle"><li><details open=""><summary>Instance Request</summary><ul id="9a3a61d9-ce45-4176-bbd6-c4f6b11b8509" class="bulleted-list"><li style="list-style-type:disc">Define max spot price and get the instance while current spot price &lt; max<ul id="b4b491c5-e66f-4011-b1a4-977120f40176" class="bulleted-list"><li style="list-style-type:circle">The hourly spot price varies based on offer and capacity</li></ul><ul id="322165ce-e326-4215-974c-65e9308c4b7d" class="bulleted-list"><li style="list-style-type:circle">If the current spot price &gt; your max price you can choose to stop (retain the data and resume it later when the spot price comes down) or terminate (start with a fresh instance later) your instance with a 2 minutes grace period.</li></ul></li></ul><ul id="8b7ab83e-3cf3-4942-91f9-3afec72f9d63" class="bulleted-list"><li style="list-style-type:disc">Spot Block (deprecated)<ul id="aa1f7c4e-0c2c-4565-b296-f90e26dfc853" class="bulleted-list"><li style="list-style-type:circle">Block spot instance during a specified time frame (1 to 6 hours) without interruptions</li></ul><ul id="67ea34be-690b-49b1-8c59-ab00c1aa602e" class="bulleted-list"><li style="list-style-type:circle">In rare situations, the instance may be reclaimed</li></ul></li></ul></details></li></ul><ul id="0f48f331-9d70-4c2b-9020-10ce3fde2445" class="toggle"><li><details open=""><summary>Pricing</summary><p id="721875a9-da16-4b60-b9a9-dfeeb9875cb4" class="">You can notice a significant price difference between the on demand instance and the spot instance.</p><figure id="bdc7bee9-4b86-4e7f-81f7-8e1b4d15a917" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2025.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2025.png"/></a></figure><p id="c368c190-fd35-4ff7-9bd7-d4593e75ca86" class="">Untitled</p></details></li></ul><ul id="d978662d-4d5a-49e6-9bc2-7177d32371cc" class="toggle"><li><details open=""><summary>Spot Request and Termination</summary><p id="c6bf0827-26e7-45d7-8538-1f175b6862f5" class="">Spot requests define request type as either one-time or persistent. One-time request, once opened, spins up the spot instances and the request closes. In case of persistent request, the request will stay disabled while the spot instances are up and running. Once these instances stop or terminate and need to be restarted, the request will become active again, ready to start the instances.</p><p id="532900e7-aebb-412a-a776-26e40de02867" class="">To terminate spot instances, we need to first terminated the spot request to prevent relaunching of these instances, and then terminate the spot instances.</p><figure id="c478b293-5957-4b46-86a1-4885d387a029" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2026.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2026.png"/></a></figure><p id="6e831666-62ac-49a4-9046-7c9aaeac9d32" class="">Untitled</p></details></li></ul><ul id="88e8f673-27a0-43a3-aa30-ceb815d93fdb" class="toggle"><li><details open=""><summary>Spot Fleets</summary><ul id="ff4c6b61-2adc-4862-808b-eaf5f90457a6" class="toggle"><li><details open=""><summary>Intro</summary><p id="ce975a91-b09b-4f99-9df0-0216f344bca8" class="">Spot fleets are basically a combination of spot instances and on-demand instances that tries to optimize for cost or capacity. It’s like a smart way to let AWS choose the best set of spot instances for us to save cost.</p><ul id="94f365ed-f82e-4354-b0e7-448c36e86161" class="bulleted-list"><li style="list-style-type:disc">Spot Fleets = set of Spot Instances + On-Demand Instances (optional)</li></ul><ul id="1b284746-cf5e-4f9b-a4d9-d85b5565548f" class="bulleted-list"><li style="list-style-type:disc">The Spot Fleet will try to meet the target capacity with price constraints<ul id="01a2f48e-5b45-4f1f-b335-013eacf64a94" class="bulleted-list"><li style="list-style-type:circle">Define possible launch pools: instance type (m5.large), OS, Availability Zone</li></ul><ul id="260da565-21c9-4a47-ba0a-d935391a3dbc" class="bulleted-list"><li style="list-style-type:circle">Can have multiple launch pools, so that the fleet can choose</li></ul><ul id="1c202780-f3ca-4dfa-ba1e-63f38fcb63ef" class="bulleted-list"><li style="list-style-type:circle">Spot Fleet stops launching instances when reaching capacity or max cost</li></ul></li></ul><ul id="0b48303c-2193-4c95-8128-ac8956d0cc3b" class="bulleted-list"><li style="list-style-type:disc">Strategies to allocate Spot Instances:<ul id="720c4d40-82cd-4698-afbb-025324fc4fea" class="bulleted-list"><li style="list-style-type:circle">lowestPrice: from the pool with the lowest price (cost optimization, short workload)</li></ul><ul id="fd8433c9-e0df-4cf9-a43c-74cfb7d2f3bb" class="bulleted-list"><li style="list-style-type:circle">diversified: distributed across all pools (great for availability, long workloads)</li></ul><ul id="6e71fdb9-f267-4e4d-a3fc-41aba848eb4d" class="bulleted-list"><li style="list-style-type:circle">capacityOptimized: pool with the optimal capacity for the number of instances</li></ul></li></ul><ul id="d98a72ee-9db5-4618-ab2a-c3a6636aeb70" class="bulleted-list"><li style="list-style-type:disc">Spot Fleets allow us to automatically request Spot Instances with the lowest price</li></ul></details></li></ul><ul id="e5aef4ad-96b3-4553-8a8d-88f676064302" class="toggle"><li><details open=""><summary>Create a spot fleet request</summary><p id="ce90c820-8638-483f-9112-59462abd4c6a" class="">EC2 → Spot Requests → Request Spot Instances</p><p id="49af839a-d2c2-42f7-bd1a-d04934309208" class="">In this we can either configure the spot fleet manually or using a template. <mark class="highlight-yellow">Templates allow us to have on-demand instances in the spot fleet.</mark></p></details></li></ul><ul id="17aead95-42c5-49a0-bdf2-e0d9065744c6" class="toggle"><li><details open=""><summary>Create a single spot instance</summary><p id="33d49500-1709-4299-a133-c78c24473b00" class="">When creating a normal EC2 instance, you have the option to make it a spot instance.</p></details></li></ul></details></li></ul><ul id="c18c45b7-baf6-4f42-a4c3-24382359593c" class="toggle"><li><details open=""><summary>Spot Instances: Hands on</summary><ul id="9aeead46-f66a-4255-8e67-d04bc1331f34" class="bulleted-list"><li style="list-style-type:disc">View Pricing History<p id="ba6aacbd-a445-4899-a4db-c83f41baff45" class="">EC2 → Spot Requests → Pricing History</p></li></ul></details></li></ul></details></li></ul><ul id="983dde67-2443-418e-b92a-2f67f56fd0ea" class="toggle"><li><details open=""><summary>Dedicated Hosts</summary><ul id="a417b481-161e-46be-9c04-8fc7ddff751c" class="bulleted-list"><li style="list-style-type:disc">A physical server with EC2 instance capacity fully dedicated to your use.</li></ul><ul id="b2b5ff8e-080c-434b-a790-22f15bb99dab" class="bulleted-list"><li style="list-style-type:disc">Allow you address compliance requirements and use your existing server bound software licenses (per-socket, per-scope, pe-VM software licenses)</li></ul><ul id="5e3334b8-5465-42a4-961c-0d56c3ec8bef" class="bulleted-list"><li style="list-style-type:disc">Purchasing Options<ul id="6eef2f79-f017-48db-9eec-bb686d488600" class="bulleted-list"><li style="list-style-type:circle">On-Demand - Pay per second for active Dedicated Host</li></ul><ul id="3ce88f3a-23d7-43c5-b3f1-74dcd9af399b" class="bulleted-list"><li style="list-style-type:circle">Reserved - 1 or 3 years (No Upfront, partial Upfront, All Upfront)</li></ul></li></ul><ul id="14bbf00b-7947-47ef-98f2-b676a6f6d76b" class="bulleted-list"><li style="list-style-type:disc">More expensive</li></ul><ul id="d6fc4f52-f2d0-424d-9cbf-4b90e59c1afa" class="bulleted-list"><li style="list-style-type:disc">Useful for software that have complicated licensing model (BYOL - Bring Your Own License) or for companies that have strong regulatory or compliance needs.</li></ul></details></li></ul><ul id="20a41542-ae18-463c-b49c-d4e97ee1ad14" class="toggle"><li><details open=""><summary>Dedicated Instances</summary><ul id="8aa413e5-9022-45f7-941a-50ccb253d0c4" class="bulleted-list"><li style="list-style-type:disc">Instances running on hardware that’s dedicated to you</li></ul><ul id="735e2687-2b15-4f2e-8951-d84a9f276a9a" class="bulleted-list"><li style="list-style-type:disc">May share hardware with other instances in same account</li></ul><ul id="bc3866eb-b12a-4eb3-b792-254dce43ec49" class="bulleted-list"><li style="list-style-type:disc">No control over instance placement (can move hardware after Stop / Start)</li></ul><figure id="064d8abf-b88b-4057-b382-40ab51af28ea" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(353).png"><img style="width:480px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(353).png"/></a></figure></details></li></ul><ul id="58067a61-a5b8-494f-b32a-a0b7791b50d5" class="toggle"><li><details open=""><summary>Capacity Reservation</summary><ul id="a17e3f76-dfbe-48ed-b71c-880a7c4b3ff0" class="bulleted-list"><li style="list-style-type:disc">Reserve on demand capacity in a specific AZ for any duration</li></ul><ul id="907d2cc2-60d8-4122-9f08-118f3e8806fc" class="bulleted-list"><li style="list-style-type:disc">You have access to EC2 capacity when you need it.</li></ul><ul id="af352a7e-d56e-4d6b-b14d-7c1e56690a93" class="bulleted-list"><li style="list-style-type:disc">No time commitments (create/cancel anytime), no billing discounts</li></ul><ul id="aa15582e-21fa-405a-bfc2-34c94e0eb3e9" class="bulleted-list"><li style="list-style-type:disc">combined with Regional Reserved Instance and Savings plan to benefit from billing discounts</li></ul><ul id="cba9f798-e7a1-47c5-9b2f-a319dbe0099b" class="bulleted-list"><li style="list-style-type:disc">you are charged at On Demand price whether or not your instance is running</li></ul><ul id="9fb54c78-1ee2-429d-abe7-38da16086d54" class="bulleted-list"><li style="list-style-type:disc">Suitable for short term, uninterrupted workloads in a specific AZ</li></ul></details></li></ul><ul id="7c008eef-825d-4202-922c-742f2183ed6e" class="toggle"><li><details open=""><summary>Outro</summary><figure id="cafc90ec-4719-4c9b-9ad8-f11697f30841" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(354).png"><img style="width:672px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(354).png"/></a></figure><p id="5e5d76c0-8f89-43f4-9326-aae334994997" class=""><strong>Price Comparison of a m4.large - US-east- 1</strong></p><figure id="fc0a01ff-a5ad-42e1-85f0-44498f5589c2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(356).png"><img style="width:1605px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(356).png"/></a></figure></details></li></ul></details></li></ul><ul id="4dc69351-ab1a-4e6d-9222-54c3463557cb" class="toggle"><li><details open=""><summary>Spot Instances and Spot Fleet</summary><ul id="0b1fc66c-1cc9-4a0c-ad4f-61c5902197bd" class="toggle"><li><details open=""><summary>EC2 Spot Instance Requests</summary><ul id="027b5782-481e-479d-a75a-3e87e5f2bfdd" class="bulleted-list"><li style="list-style-type:disc">Can get a discount up to 90% compared to On-Demand</li></ul><ul id="fc30d18d-c8b5-4022-93b6-1aef97dc1a49" class="bulleted-list"><li style="list-style-type:disc">Define max spot price and get the instance while current spot price &lt; max<ul id="e0742adf-22ec-44a5-983b-5a655f48a19d" class="bulleted-list"><li style="list-style-type:circle">The hourly spot price varies based on offer and capacity</li></ul><ul id="c1cab6c9-63a6-4b8d-b8ee-3e5c7d407a7a" class="bulleted-list"><li style="list-style-type:circle">If the current spot price &gt; your max price you can choose to stop or terminate your instance with a 2 minutes grace period.</li></ul></li></ul><ul id="2d7d0043-47ac-485a-83e6-76836bd15bed" class="bulleted-list"><li style="list-style-type:disc">Other Strategy: Spot Block (Not available after 31 Dec 2022)<ul id="f2e66f3d-f440-4d54-a7b3-f52879db9079" class="bulleted-list"><li style="list-style-type:circle">“block” a spot instance during a  specified time frame (1 to 6 hours) without interruptions</li></ul><ul id="9f6a4cc4-8023-4435-81a1-1e1cfba55a89" class="bulleted-list"><li style="list-style-type:circle">In rare situations, the instance may be reclaimed</li></ul></li></ul><ul id="1e6030e1-57ab-4e28-bd17-2379afb4a98d" class="bulleted-list"><li style="list-style-type:disc">Used for batch jobs/Data analysis/Workloads that are resilient to failures</li></ul><ul id="193cd835-9697-46e0-b72e-74402a6c8c21" class="bulleted-list"><li style="list-style-type:disc">Not great for critical jobs or database</li></ul><figure id="8ecba4e0-07ee-4d31-bf18-ee914a2b27a8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(358).png"><img style="width:672px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(358).png"/></a></figure></details></li></ul><ul id="05e5ac8d-7883-4cd1-b56b-fbdad2f41f96" class="toggle"><li><details open=""><summary>Spot Fleet</summary><figure id="60004a2e-9832-4b75-9f6c-547209462ecf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(359).png"><img style="width:1751px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(359).png"/></a></figure></details></li></ul></details></li></ul><ul id="61d9ab4b-159b-4292-9a92-0338dc43a9cc" class="toggle"><li><details open=""><summary>EC2 Instance Launch type hands on</summary><p id="99073e95-c75b-4c81-8859-d9a01f462be7" class="">Request Spot Instance → Launch template/Manual → AMI → Key Pair → Additional →Untick Apply Defaults for more options → Make necessary changes → Target Instance → Set instance/vCPUs/Memory → maintain target capacity → set AZ → manual/specific → capacity or price optimized → launch</p><p id="41887387-7c87-4eb6-a407-c04cb70fb9a6" class="">You can also normally launch a ec2 instance and in advanced section we can optimize it</p></details></li></ul></div><h3 id="74eef129-8a03-43ea-b4d2-bbff32dfb383" class=""><details open=""><summary>Section 6: EC2 - Solutions Architect Associate Level</summary></details></h3><div class="indented"><ul id="19bc6112-c7ea-4d84-9523-aff09b42072e" class="toggle"><li><details open=""><summary>Public &amp; Private IPs</summary><ul id="e57fec44-9467-4ddf-8c21-6fabb970031a" class="toggle"><li><details open=""><summary>Intro</summary><p id="acb1e4b5-3968-49b6-a6bf-1305f6cabbce" class="">Private IPs allow computers within a private network to communicate with each other.</p><p id="bc980fea-7f60-4c3d-835e-a2d7d89c6fcd" class="">Public IPs allow computers to talk to other computers on the internet.</p><figure id="ed8e6816-b8cb-4e9d-9e7c-9a84701e2031" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2027.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2027.png"/></a></figure></details></li></ul><ul id="b96dbb4f-a915-45fe-bc90-63ea70501824" class="toggle"><li><details open=""><summary>IPv4 vs IPv6</summary><ul id="39531fe6-9d90-4ed8-9aeb-0119b37bca03" class="bulleted-list"><li style="list-style-type:disc">IPv4 is still the most common format used online.</li></ul><ul id="2fa70cc7-3c8e-4e8e-b7f2-3043ffd4abe5" class="bulleted-list"><li style="list-style-type:disc">IPv6 is newer and solves problems for the Internet of Things (loT).</li></ul></details></li></ul><ul id="6d175d3f-ee15-4e69-8c2d-23a5c162c671" class="toggle"><li><details open=""><summary>Private v/s Public IP (IPv4)</summary><ul id="a693b1a0-6e02-47dc-a64d-83d90fe13548" class="toggle"><li><details open=""><summary>Public IP</summary><ul id="045698da-5e39-4e26-bb49-99c4ca42883f" class="bulleted-list"><li style="list-style-type:disc">Machines can be identified on the internet (WWW)</li></ul><ul id="e30a078c-3723-41c2-8b1e-b3145ae6587c" class="bulleted-list"><li style="list-style-type:disc">Must be unique - Two machines cannot have same public IP</li></ul><ul id="47050901-c11c-4095-a4b5-b5a8d873747c" class="bulleted-list"><li style="list-style-type:disc">Can be geo located easily</li></ul></details></li></ul><ul id="f5fe736a-6bf3-4088-9036-352674e42c76" class="toggle"><li><details open=""><summary>Private IP</summary><ul id="a784b966-9902-4738-8d58-a76a5cd7bb1f" class="bulleted-list"><li style="list-style-type:disc">Private IP means the machine can only be identified on a private network only</li></ul><ul id="bb08765b-71ba-446f-bd25-4518f488f4cd" class="bulleted-list"><li style="list-style-type:disc">the IP must be unique across the private network</li></ul><ul id="0806ddde-7003-4951-87c4-9465c7b4426b" class="bulleted-list"><li style="list-style-type:disc">But 2 different private network (2 companies) can have the same IPs</li></ul><ul id="26b0cf94-7212-4628-b5b9-90b9d83433e7" class="bulleted-list"><li style="list-style-type:disc">machines connect to WWW using a NAT + internet gateway (a proxy)</li></ul><ul id="bc1c57b9-d5cb-492c-8797-fac410010602" class="bulleted-list"><li style="list-style-type:disc">Specified range can be used as a private IP</li></ul></details></li></ul></details></li></ul><ul id="e4c6aebf-bfb4-40cc-8c27-42ac5e7c017f" class="toggle"><li><details open=""><summary>Elastic IPs</summary><ul id="07aff105-1cf7-4328-b897-84c80bb3cf5f" class="toggle"><li><details open=""><summary>Intro</summary><ul id="9d0256d8-1fa1-4345-b686-1b0fb0d0906f" class="bulleted-list"><li style="list-style-type:disc">When you stop and then start an EC2 instance, it can change its public IP. If you need to have a fixed public IP for your instance, you need an Elastic IP.</li></ul><ul id="a6d7e8f9-2347-4450-a399-06c758dff8c0" class="bulleted-list"><li style="list-style-type:disc">An Elastic IP is a public IPv4 IP you own as long as you don’t delete it</li></ul><ul id="aae28e13-450f-404e-b0fb-90111d643ce4" class="bulleted-list"><li style="list-style-type:disc">You can attach it to one instance at a time</li></ul><ul id="7307705b-8662-429e-a940-60e40541e110" class="bulleted-list"><li style="list-style-type:disc">With an Elastic IP address, you can mask the failure of an instance or software by rapidly remapping the address to another instance in your account.</li></ul><ul id="e03c46a0-61e6-4c8d-9a92-4a3684e2cece" class="bulleted-list"><li style="list-style-type:disc">You can only have 5 Elastic IP in your account (request AWS to increase that).</li></ul><ul id="c3869316-b7eb-4190-94e8-6ff437d4605d" class="bulleted-list"><li style="list-style-type:disc">Overall, try to avoid using Elastic IP. They often reflect poor architectural decisions. Instead, use a random public IP and register a DNS name to it or use a Load Balancer (Don’t use Load Balancer).</li></ul><ul id="2b30b798-d341-4247-8aba-80ddb88e316e" class="toggle"><li><details open=""><summary>AWS EC2</summary><ul id="a1a97957-1f19-4d89-916e-27c7c05d2c24" class="bulleted-list"><li style="list-style-type:disc">A public IP for WWW </li></ul><ul id="ab8badf9-f964-46d9-8d93-36474def7b57" class="bulleted-list"><li style="list-style-type:disc">By default EC2 instance have a private IP for internal AWS Network</li></ul></details></li></ul><ul id="f1f1719d-a374-43df-81c6-5abfefa6cf25" class="toggle"><li><details open=""><summary>SSH on EC2</summary><ul id="09b28768-20fe-4f71-88b4-cef0695e4268" class="bulleted-list"><li style="list-style-type:disc">when doing SSH into our EC2 machines we can’t use a private IP, because we are not in the same network</li></ul><ul id="4d3393f1-987f-4544-ba45-ba3fd6a220d8" class="bulleted-list"><li style="list-style-type:disc">We can only use the public IP.</li></ul><ul id="2b13de68-bd28-4653-83fd-dc99b38da500" class="bulleted-list"><li style="list-style-type:disc">If EC2 instance is stopped and then started public IP can change</li></ul></details></li></ul></details></li></ul><ul id="ecdd8fde-3fbd-4e23-b94e-24956ee34403" class="toggle"><li><details open=""><summary>Billing</summary><p id="2213c901-7f4a-41b7-b046-a307c67f4e2b" class="">Elastic IPs are billed as long as you own them and they are not attached to any instance.</p></details></li></ul><ul id="7da29654-fdf5-4def-a83e-946cabe4d7a2" class="toggle"><li><details open=""><summary>Allocate Elastic IP &amp; associate it to an EC2 instance</summary><p id="b1879c2a-05ff-4746-b019-caaf7dcbc802" class="">EC2 → Elastic IPs → Allocate Elastic IP address → Allocate</p><p id="dbf8ba4a-d5c0-4d21-9b25-af2f09156a7e" class="">This will allocate for us an elastic IP from the pool of elastic IPs that AWS holds. Now, let’s associate this IP to our EC2 instance.</p><p id="54af1b6e-e994-4c25-bd5e-4f9f5d1db032" class="">Select the elastic IP → Actions → Associate elastic IP address → Choose the instance and private IP address of the instance → Associate</p><p id="2abea99f-1665-4864-99ef-2ae5795cc4cf" class="">Now, in the instance summary we can see the elastic IP and public IP are identical and they will not change even if we restart the instance.</p><figure id="392f235b-5df0-4e84-8017-749161b7136b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2028.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2028.png"/></a></figure><p id="6045fbbf-455c-44bf-9290-f7fa2bf31a11" class="">Untitled</p></details></li></ul><ul id="cba0777b-e4da-4182-adfc-463f6d794934" class="toggle"><li><details open=""><summary>Disassociate &amp; Release Elastic IP</summary><p id="e68eb611-fdb0-435e-903e-fd9ce95a4a8d" class="">EC2 → Elastic IPs → Select the IP → Actions → Disassociate elastic IP</p><p id="cfdd1720-5d13-46b8-959d-dda3026f10ef" class="">This will detach the elastic IP from the instance. Next, release the elastic IP to prevent billing.</p><p id="ba9ddb63-b21a-4ab9-bebb-5294f18a9b89" class="">Select the IP → Actions → Release elastic IP</p></details></li></ul></details></li></ul><ul id="9b07c011-5368-40d8-9c99-9254012301e5" class="bulleted-list"><li style="list-style-type:disc">IPs for EC2 instances<p id="af3d79ff-6214-451b-945a-b78fbc370efc" class="">If we have a VPN using which we can connect to our AWS VPC, we can use the private IP to SSH into our EC2 instance. Otherwise, we will have to use the public IP which might change when you stop and start your instance.</p></li></ul></details></li></ul><ul id="6bdcf721-878b-4442-a602-4a25a88a19d3" class="toggle"><li><details open=""><summary>Placement Groups</summary><ul id="774a609b-3c2e-40ad-ad48-1998d99d85d2" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3737c442-70ac-4d9c-822b-8897c9c63316" class="bulleted-list"><li style="list-style-type:disc">Placement group lets us control the placement strategy of our instances within the AWS infrastructure.</li></ul><ul id="a3d8cc5d-2e08-48e4-880e-d264686743ea" class="bulleted-list"><li style="list-style-type:disc">When you create a placement group, you specify one of the following strategies for the group:<ul id="eb79717d-22a3-4169-a1d7-ffe2c11be2c9" class="bulleted-list"><li style="list-style-type:circle">Cluster - clusters instances into a low-latency group in a single Availability Zone</li></ul><ul id="43cfc9ea-9288-44d2-bb07-a1c4106a7cc3" class="bulleted-list"><li style="list-style-type:circle">Spread - spreads instances across underlying hardware (max 7 instances per group per AZ) for critical applications</li></ul><ul id="7b66b194-2467-4e00-9655-a164d32368c1" class="bulleted-list"><li style="list-style-type:circle">Partition - spreads instances across many different partitions (which rely on different sets of racks) within an AZ. Scales to 100s of EC2 instances per group (Hadoop, Cassandra, Kafka)</li></ul></li></ul></details></li></ul><ul id="6104ef2b-a938-4665-8a01-92cf0a8c332e" class="toggle"><li><details open=""><summary>Cluster Placement Strategy (optimize for network)</summary><p id="49a3542a-95ba-44b1-b1af-747612494e84" class="">All the instances are placed on the same hardware (same rack) which is obviously in the same availability zone.</p><ul id="c4bb9103-75e2-4e0f-98f1-fb3b793aaab0" class="bulleted-list"><li style="list-style-type:disc">Pros: Great network (10 Gbps bandwidth between instances)</li></ul><ul id="799d8e61-ebf8-426f-8eab-ae5058b70c0f" class="bulleted-list"><li style="list-style-type:disc">Cons: If the rack fails, all instances will fail at the same time</li></ul><ul id="52f6a8b9-73de-44b7-a9d7-6d81f91fd88f" class="bulleted-list"><li style="list-style-type:disc">Use case:<ul id="3b73a98e-ed39-4fb6-9375-17bdfef9eb44" class="bulleted-list"><li style="list-style-type:circle">Big Data job that needs to complete fast</li></ul><ul id="eb84b06c-d98d-45c0-a112-8a7bf4490856" class="bulleted-list"><li style="list-style-type:circle">Application that needs extremely low latency and high network throughput</li></ul></li></ul><figure id="2de51260-ecbd-40c5-9b62-12b5470fee63" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2029.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2029.png"/></a></figure></details></li></ul><ul id="363c59d6-5ed0-47e5-9fb9-c39929a15793" class="toggle"><li><details open=""><summary>Spread Placement Strategy (minimize risk of failure)</summary><ul id="9fc53a6a-e130-429c-b1ba-956d92949807" class="bulleted-list"><li style="list-style-type:disc">Each instance is in a separate rack (physical hardware) for maximum reliability.</li></ul><ul id="932aaf03-1b1b-4c64-bfa6-3da0f12ce7a6" class="bulleted-list"><li style="list-style-type:disc">Pros:<ul id="fcb79158-5ac9-4504-bd50-0729887d9542" class="bulleted-list"><li style="list-style-type:circle">Reduced risk of simultaneous failure (multi AZ)</li></ul><ul id="b69ff433-cc9e-4b19-8d4a-1c4ca0256a25" class="bulleted-list"><li style="list-style-type:circle">Span across the AZs</li></ul><ul id="abf41d72-8443-4dc1-b62c-c0eab7330fff" class="bulleted-list"><li style="list-style-type:circle">EC2 Instances are on different physical hardware</li></ul></li></ul><ul id="10110ea5-411e-4026-bbed-e7194b76eed9" class="bulleted-list"><li style="list-style-type:disc">Cons:<ul id="3f122521-d3da-40ca-9300-dfecb5b39aa6" class="bulleted-list"><li style="list-style-type:circle">Limited to 7 instances per AZ per placement group</li></ul></li></ul><ul id="2bd49607-1c92-414a-b0d7-b0c17d9e5a42" class="bulleted-list"><li style="list-style-type:disc">Use case:<ul id="6a8328f7-1d44-4b8b-a559-bedc2f3c8665" class="bulleted-list"><li style="list-style-type:circle">Application that needs to maximize high availability</li></ul><ul id="0d721cc4-eddb-4ebc-b2d8-22a2e5a77ebc" class="bulleted-list"><li style="list-style-type:circle">Critical Applications where each instance must be isolated from each other for increased reliability</li></ul></li></ul><figure id="6a825907-6a5d-41db-b829-de799e737b3e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2030.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2030.png"/></a></figure></details></li></ul><ul id="03d36a96-c380-46b0-b29b-fe629c7e599d" class="toggle"><li><details open=""><summary>Partition Placement Strategy (best of both worlds)</summary><ul id="438df3d3-1eb7-4460-aea3-2587c1aa3d1c" class="bulleted-list"><li style="list-style-type:disc">Instances in a partition do not share rack with instance in other partitions.</li></ul><ul id="3ed2cb71-c2a8-4c2f-8c61-2315a4bbcc45" class="bulleted-list"><li style="list-style-type:disc">Instances in a partition share rack with each other so if the rack goes down, the entire partition goes down. But, it won’t affect other partitions. Used in big data applications (HDFS, HBase, Cassandra, Kafka)</li></ul><ul id="d7086e5e-a05c-4eaf-810f-7e544673e25b" class="bulleted-list"><li style="list-style-type:disc">EC2 instances get access to the partition information as metadata</li></ul><ul id="a9002012-5d83-41b8-99b9-cab3faf083d0" class="bulleted-list"><li style="list-style-type:disc">Up to 7 partitions per AZ</li></ul><ul id="f0db0003-a2c2-49ac-9f92-965c7609a1ac" class="bulleted-list"><li style="list-style-type:disc">Spread across multiple AZs in the same region</li></ul><ul id="302b4eda-820e-46c7-bd64-99029b8214bc" class="bulleted-list"><li style="list-style-type:disc">Up to 100s of EC2 instances</li></ul><ul id="d93b3bae-7b10-4e07-b1a9-3fcf364ee53f" class="bulleted-list"><li style="list-style-type:disc">We need use it in Big data applications like HDFS, Kafka ….</li></ul><figure id="1343d8e0-b3ef-4ef4-9864-ff3f8df2fd64" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2031.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2031.png"/></a></figure></details></li></ul><ul id="8d7e2dc2-809c-46aa-9ae9-d501b72e043c" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="d3a8171f-a6d2-46fa-aaef-eed0a0672b21" class="toggle"><li><details open=""><summary>Create Placement Groups</summary><p id="0a930964-2827-4cd3-922b-ed1e0df30776" class="">EC2 → Placement groups → Create placement group</p><figure id="d2a89087-8cd5-4a01-9554-b69e2b4471a9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2032.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2032.png"/></a></figure></details></li></ul><ul id="949371c8-13e3-4bac-bead-ac5f58991e27" class="toggle"><li><details open=""><summary>Launch EC2 instances in Placement Groups</summary><p id="827ba5d0-fdea-4576-aaee-80e1cfe9655c" class="">While creating a new EC2 instance, you can add it to a placement group.</p><figure id="af91a0c7-8c0d-4f38-bdb2-76c2f9f47f34" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2033.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2033.png"/></a></figure></details></li></ul></details></li></ul></details></li></ul><ul id="544e7641-2a25-47c8-be52-0d9265209ac0" class="toggle"><li><details open=""><summary>Elastic Network Interfaces (ENI)</summary><ul id="45b566c3-0be2-4236-823b-980d90243e91" class="toggle"><li><details open=""><summary>Theory</summary><ul id="ed26fc19-cce4-4459-8383-e7bcb5abd915" class="bulleted-list"><li style="list-style-type:disc">ENIs are virtual network cards that give EC2 instances access to the private network. A primary ENI is created and attached to the instance upon creation. The primary ENI will be deleted automatically upon instance termination.</li></ul><ul id="ca919475-412d-472b-a184-c3c887390956" class="bulleted-list"><li style="list-style-type:disc">We can create additional ENIs and attach them to an EC2 instance to access it via multiple private IPs. ENIs can be moved from one instance to another for failover. Secondary ENIs will not be deleted automatically upon instance termination.</li></ul><ul id="cb763f69-7ff3-415b-8a8f-6cab01db7c2a" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">Remember that ENIs can only be moved within an AZ (subnet).</li></ul><ul id="d61bb23e-0649-4f30-865e-54bb99e913cc" class="bulleted-list"><li style="list-style-type:disc">ENI can have the following attributes:<ul id="968c0a24-099e-48b7-9821-c99a0aa26881" class="bulleted-list"><li style="list-style-type:circle">Primary private IPv4</li></ul><ul id="be9dacc8-e751-4fb5-a054-9df09cd3eea4" class="bulleted-list"><li style="list-style-type:circle">One or more secondary IPV4</li></ul><ul id="a213aec1-b1df-41f8-bafd-8627bee971ca" class="bulleted-list"><li style="list-style-type:circle">One Elastic IP (IPv4) per private IPv4</li></ul><ul id="c4a0dfac-ca18-4d2a-8f1b-338db9d72187" class="bulleted-list"><li style="list-style-type:circle">One Public IPv4</li></ul><ul id="a1519250-7296-4985-a028-b8827ecad6ee" class="bulleted-list"><li style="list-style-type:circle">One or more security groups</li></ul><ul id="77f681d2-1d4e-4606-a2bd-4d552a5b70bf" class="bulleted-list"><li style="list-style-type:circle">MAC address</li></ul></li></ul><figure id="902e05b3-6fd5-43a7-83e3-b8350300ed44" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2034.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2034.png"/></a></figure></details></li></ul><ul id="d473e4fc-b1ba-4a61-acda-4bc2aae28dd6" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="2d73a18b-10d9-43b0-b061-df0e4259b8ea" class="bulleted-list"><li style="list-style-type:disc">Create an ENI<p id="38de0748-3c64-4b0f-b15a-6c0b6b666012" class="">EC2 → Network Interfaces → Create network interface → Give it a name and select the subnet (availability zone) for this ENI → Create</p><p id="324aadfd-816c-4324-8d8f-2e99fdf3e1da" class="">Once created, the ENI will appear as available. The other two ENIs shown below are in use and they were created by default when two EC2 instances were started.</p><figure id="74c37bc1-5479-4de5-8ce6-285a46579dda" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2035.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2035.png"/></a></figure></li></ul><ul id="750350ca-a6ae-4953-9316-5f9385f68513" class="bulleted-list"><li style="list-style-type:disc">Attach and Detach ENI to and from an EC2 instance<p id="e08eeeaa-1caa-42ab-9697-44c39c29d61d" class="">To attach, EC2 → Network Interfaces → Select the ENI → Action → Attach → Select the instance → Attach</p><ul id="480f6691-4f4b-4fb6-926c-e0986859c79a" class="bulleted-list"><li style="list-style-type:circle">The attached ENIs can be viewed in the instance details<figure id="6db90f49-81e0-4b48-b07b-6aed3afe83fd" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2036.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2036.png"/></a></figure></li></ul><p id="4c1bc562-6cf2-423b-91ac-ec02ea4d7bbe" class="">To detach, select the ENI → Action → Detach → Enable force detach → Detach</p></li></ul></details></li></ul></details></li></ul><ul id="64c4edcb-2589-42aa-beec-dbb029c89177" class="toggle"><li><details open=""><summary>EC2 Hibernate</summary><ul id="728d5f4a-fd6d-487d-a11d-f7e7f51bcc74" class="toggle"><li><details open=""><summary>Theory</summary><figure id="1dcdb009-9f91-48f0-9c62-cad2d0a64428" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(360).png"><img style="width:860px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(360).png"/></a></figure><figure id="bde38aa4-73dd-4599-8c30-712a5416f627" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(361).png"><img style="width:1776px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(361).png"/></a></figure><ul id="4b7ea331-4fb9-4ba6-a15b-6d802432cee2" class="bulleted-list"><li style="list-style-type:disc">Supported Instance Families - C3, C4, C5, I3, M3, M4, R3, R4, T2, T3 …..</li></ul><ul id="77187d5c-9b95-4ae5-8921-9cc8781b80f3" class="bulleted-list"><li style="list-style-type:disc">Instance RAM Size - Must be less than 150 GB</li></ul><ul id="50e65764-e253-486b-8c31-a835c3abeeb0" class="bulleted-list"><li style="list-style-type:disc">Instance Size - Not supported for bare metal instances</li></ul><ul id="814593a2-2c9a-4257-a2c2-8b4a6a94b5e0" class="bulleted-list"><li style="list-style-type:disc">AMI - Amazon Linux 2, Linux AMI, Ubuntu, RHEL, CentOS &amp; Windows …..</li></ul><ul id="e156164e-dbf4-4237-b710-1bcaab73e482" class="bulleted-list"><li style="list-style-type:disc">Root Volume - Must be EBS, encrypted not instance store and large</li></ul><ul id="aaa1b854-6450-426b-9887-4899268cb768" class="bulleted-list"><li style="list-style-type:disc">Hibernation is supported in On-Demand, Reserved instances and Spot instances</li></ul><ul id="6f9a663d-08f3-4842-b1ca-c92bb2f06530" class="bulleted-list"><li style="list-style-type:disc">Instances cannot hibernate more than 60 days</li></ul></details></li></ul><ul id="999cdf37-cabe-44b4-bbd9-c5b35c9164b3" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="bf9c31e6-dcc1-4bbf-bfca-cfed3be91dd6" class="bulleted-list"><li style="list-style-type:disc">Enable Hibernation for an EC2 instance<p id="14bb026c-15de-4995-a60b-b50547d1a3e1" class="">When creating an EC2 instance:</p><p id="40781916-0d23-49cd-b89a-5ca2098be0a3" class="">Enable hibernation as an additional stop behavior</p><figure id="48a1a38c-3d12-4eda-83c1-eb2c3a20c98b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2037.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2037.png"/></a></figure><p id="05fa9156-5376-42d4-83ed-20e3f324e6c0" class="">Encrypt the EBS storage</p><figure id="70483882-d59c-45bc-9696-5bf184030518" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2038.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2038.png"/></a></figure></li></ul><ul id="bea1d505-aad7-49e4-b422-7651c22123fa" class="bulleted-list"><li style="list-style-type:disc">Check if an instance was hibernating or stopped<p id="5ad6a291-c411-4d67-8725-0eadc7aa7f01" class="">SSH into the instance and run <code>uptime</code> which basically prints how long the instance has been on. In case of hibernation, the printed uptime will not be ~ 0</p></li></ul></details></li></ul></details></li></ul><ul id="1bb5ff7a-226e-4315-8f55-e9e1e2483350" class="toggle"><li><details open=""><summary>EC2 Nitro</summary><ul id="c9a73708-1466-4be6-9483-01ec97d66678" class="bulleted-list"><li style="list-style-type:disc">New virtualization technology for next-gen EC2 instances</li></ul><ul id="81d8e3e9-b1d4-4b32-9beb-b212fe229084" class="bulleted-list"><li style="list-style-type:disc">Allows for better performance:<ul id="3116539c-d6aa-4f59-81ed-a0b8305b6f86" class="bulleted-list"><li style="list-style-type:circle">Better networking options (enhanced networking, HPC, IPv6)</li></ul><ul id="d41c1d7f-9354-4439-969f-053eac102f2d" class="bulleted-list"><li style="list-style-type:circle">Higher Speed EBS - Nitro is necessary for 64,000 EBS IOPS max 32,000 on non-Nitro</li></ul><ul id="1829b2f4-a8dc-4d55-a165-3153980a5e35" class="bulleted-list"><li style="list-style-type:circle">Better underlying security</li></ul></li></ul></details></li></ul><ul id="9997290b-a2b0-4e4c-ab88-4982d3a3953a" class="toggle"><li><details open=""><summary>vCPU</summary><ul id="88fed0b2-a363-4271-80ab-5a47dc3606ef" class="bulleted-list"><li style="list-style-type:disc">Intro<ul id="a71d18b1-a7aa-4e40-ba5d-39742d19151b" class="bulleted-list"><li style="list-style-type:circle"><mark class="highlight-yellow">Multiple threads can run on one CPU (multi-threading)</mark></li></ul><ul id="45de21cf-ee74-4daf-b26c-f5bec4bbcbc4" class="bulleted-list"><li style="list-style-type:circle">vCPU is basically the total number of concurrent threads that can be run on an EC2 instance.</li></ul><ul id="47def52f-14cf-4a28-902f-3be202a4a373" class="bulleted-list"><li style="list-style-type:circle">Usually 2 threads per CPU core (eg. 4 CPU ⇒ 8 vCPU)</li></ul></li></ul><ul id="d88b0070-e1f6-414e-8f2a-b66fdadc94fe" class="bulleted-list"><li style="list-style-type:disc">Optimizing vCPU options<figure id="fba2fa9c-490f-4c3a-91df-a8474a1e110d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2039.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2039.png"/></a></figure><p id="3d35e2a8-c9c6-4d39-8cc6-4eee58f47cab" class="">Untitled</p></li></ul></details></li></ul><ul id="1bbfc05d-521e-49d6-b024-e85407b83acd" class="toggle"><li><details open=""><summary>Capacity Reservations</summary><ul id="f00a00c1-4765-4ef5-8930-64c097f88749" class="bulleted-list"><li style="list-style-type:disc">Capacity Reservations ensure you have EC2 Capacity when needed</li></ul><ul id="2861dbcc-ef82-49e3-97e8-cdcf7e85962e" class="bulleted-list"><li style="list-style-type:disc">Manual or planned end-date for the reservation</li></ul><ul id="4f4ac392-f2f2-4b1c-b4c5-b04c8457c72d" class="bulleted-list"><li style="list-style-type:disc">No need for 1 or 3-year commitment</li></ul><ul id="2095ade0-265b-4ef8-998c-e789eb4d0d95" class="bulleted-list"><li style="list-style-type:disc">Capacity access is immediate, you get billed as soon as it starts</li></ul><ul id="825cbe5b-f5e6-43e5-bec8-a434d195795e" class="bulleted-list"><li style="list-style-type:disc">Specify:<ul id="0216139c-c33c-46e5-b9e4-a04dc939f1ba" class="bulleted-list"><li style="list-style-type:circle">The Availability Zone in which to reserve the capacity (only one)</li></ul><ul id="a65a55fc-7862-4fce-82ee-96219c7127e7" class="bulleted-list"><li style="list-style-type:circle">The number of instances for which to reserve capacity</li></ul><ul id="f4a9a6e7-e724-4f80-96c7-2640665cb37a" class="bulleted-list"><li style="list-style-type:circle">The instance attributes, including the instance type, tenancy, and platform/OS</li></ul></li></ul><ul id="21e5c5a9-78ac-4ea9-ae90-a3d5786c2ef1" class="bulleted-list"><li style="list-style-type:disc">Combine with Reserved Instances and Savings Plans to do cost saving</li></ul></details></li></ul></div><h3 id="d2c84731-3085-4905-930a-9a23e441c795" class=""><details open=""><summary>Section 7: EC2 - Instance Storage</summary></details></h3><div class="indented"><ul id="890d2751-58c2-4d03-b575-e8232a0b5153" class="toggle"><li><details open=""><summary>Elastic Block Store (EBS)</summary><ul id="34d85178-76bf-4c9d-858e-090f335fa383" class="toggle"><li><details open=""><summary>Theory</summary><ul id="105ffc29-9122-4cd3-a7e2-8a99f430ae03" class="toggle"><li><details open=""><summary>Intro</summary><ul id="e50f1fa9-bec7-4960-842d-adf7f54ffda0" class="bulleted-list"><li style="list-style-type:disc">An EBS (Elastic Block Store) Volume is a network drive you can attach to your instances while they run. It allows your instances to persist data, even after their termination.</li></ul><ul id="2d87b0a1-5b77-4e8f-b071-f0e84c853311" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">They can only be mounted to one instance at a time</li></ul><ul id="ffb1a7f5-c9c6-4703-88ec-404cf20a82d6" class="bulleted-list"><li style="list-style-type:disc">An instance can have multiple EBS volumes attached to it</li></ul><ul id="015e5d63-1825-4c03-9696-b5cb02986460" class="bulleted-list"><li style="list-style-type:disc">An EBS volume can be left unattached</li></ul><ul id="d1685442-e80a-4bdf-9642-f1b2292946c7" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">They are bound to a specific availability zone<ul id="193bee9e-ce01-42c1-a021-2ef1599f43a5" class="bulleted-list"><li style="list-style-type:circle">An EBS volume on us-east- 1 a cannot be attached to another one quickly</li></ul><ul id="f2a5b7ae-2db4-4f8a-9f34-57609ba38b42" class="bulleted-list"><li style="list-style-type:circle">to move a volume across first we need to snapshot it.</li></ul></li></ul><ul id="152e312c-5814-4d3a-970f-0837f55bde0c" class="bulleted-list"><li style="list-style-type:disc">It is a network drive, not a physical drive, it uses network to communicate with the instance so there will be bit of latency</li></ul><ul id="db4c234e-9f29-47a7-9912-1442cd805812" class="bulleted-list"><li style="list-style-type:disc">It can be detached from an EC2 instance and attached to another one quickly</li></ul><ul id="64187377-6a69-47c2-8246-77909df090e3" class="bulleted-list"><li style="list-style-type:disc">Capacity (size in GB &amp; throughput in IOPS) must be provisioned<ul id="3a6f968b-68db-4330-8e18-e2f7bf96a9ad" class="bulleted-list"><li style="list-style-type:circle">You get billed for the provisioned capacity</li></ul><ul id="e3d06996-7051-4645-a441-57e39ca5fbf5" class="bulleted-list"><li style="list-style-type:circle">You can increase the provisioned capacity overtime</li></ul></li></ul><figure id="4b665fc2-01ce-42df-b36b-46770fe23a99" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(362).png"><img style="width:949px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(362).png"/></a></figure></details></li></ul><ul id="3dbb9ce2-b274-48c5-b21f-4b5d7bd6d323" class="toggle"><li><details open=""><summary>Delete on termination</summary><ul id="95934a33-d1f1-43d1-9813-454699ffcfe9" class="bulleted-list"><li style="list-style-type:disc">By default, the root EBS volume is deleted upon instance termination (attribute enabled)</li></ul><ul id="5fe855e3-1708-4b26-b4ed-90ea45391273" class="bulleted-list"><li style="list-style-type:disc">By default, any other attached EBS volume is not deleted upon instance termination (attribute disabled)</li></ul><ul id="5ac6351d-073d-4db7-9713-ba4e15fa83fd" class="bulleted-list"><li style="list-style-type:disc">The default behavior can be overridden</li></ul><ul id="58d05651-8b45-485c-8ebc-71384b2d8418" class="bulleted-list"><li style="list-style-type:disc">used to preserve root volume when instance is terminated</li></ul><figure id="fea91624-e4bb-40a7-a8a1-70f0d9600b3d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2040.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2040.png"/></a></figure></details></li></ul></details></li></ul><ul id="63f7e7f9-c545-464e-a477-34e74ca8b5f7" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="ea65dbd6-6982-4fc2-abc2-fc46fd64ec66" class="bulleted-list"><li style="list-style-type:disc">Create a new EBS volume &amp; attach it to an instance<p id="934ee522-ab86-4e26-a6d9-e19f8bb8b521" class="">To create a new volume: EC2 → Volumes (under Elastic Block Store) → Create volume → Choose the storage size and availability zone → Create</p><p id="c1280cfc-da89-40ab-b3dc-2df4a17a1023" class="">To attach an existing volume to an instance: Right click on the volume → Attach → Select the instance → Attach</p><figure id="330ae821-b16a-45f9-84d3-efcee22b78ca" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2041.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2041.png"/></a></figure></li></ul><ul id="3ec755fe-f055-4a31-ac82-9c6e801b0244" class="bulleted-list"><li style="list-style-type:disc">Create a snapshot of an EBS volume<p id="49dbabd3-7ca3-43a5-acaa-3354757213ee" class="">Select the volume → Right click → Create Snapshot</p><p id="1518ebb8-9117-4bac-b113-6feed77ebb31" class="">To view the snapshots: EC2 → Snapshots (under Elastic Block Store)</p></li></ul><ul id="57b9ecc0-0116-41e1-a00f-41bf011ad31b" class="bulleted-list"><li style="list-style-type:disc">Create a volume from a snapshot (in different AZ)<p id="b0191eac-6514-4713-9894-2c7378e111ce" class="">Select snapshot → Right click → Create volume from snapshot</p><p id="b6e7ccba-9393-4061-a7f7-aa5949611632" class="">During the above process, we can select a different availability zone from the one that contains the snapshot.</p></li></ul><ul id="bb60c81d-8aba-4bae-9ae1-f81bb1816ac0" class="bulleted-list"><li style="list-style-type:disc">Copy the snapshot (to a different region)<p id="76bd5801-051e-4219-9307-151eda3314c0" class="">Right click the snapshot → Copy snapshot → select the destination region → Copy snapshot</p></li></ul></details></li></ul></details></li></ul><ul id="9755b56c-3799-4c03-a41b-8d1243f6a29c" class="toggle"><li><details open=""><summary>EBS Snapshots</summary><ul id="3ac634ab-714f-4712-9f39-3da60e5fdddd" class="bulleted-list"><li style="list-style-type:disc">Snapshots allow us to restore the contents of an EBS volume at a later point in time.</li></ul><ul id="2b435618-fd8c-4280-9471-ef7bb8ae82c4" class="bulleted-list"><li style="list-style-type:disc">Not necessary to detach volume to do snapshot, but recommended</li></ul><ul id="ee7a3d3b-2b4e-43dd-8097-3e53c637b1e7" class="bulleted-list"><li style="list-style-type:disc">Can copy snapshots across AZ or Region (used to transfer data between availability zones or regions)</li></ul><figure id="82bc1118-dbcb-4f2b-adc0-d9105c451295" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2042.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2042.png"/></a></figure><figure id="cf785256-37c1-42cc-9279-6950493eaad2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(363).png"><img style="width:935px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(363).png"/></a></figure></details></li></ul><ul id="4a07049d-beec-4424-b39e-e92372aa2838" class="toggle"><li><details open=""><summary>Amazon Machine Image (AMI)</summary><ul id="85ba4dcd-9b5c-4543-89ec-7fc9b0f113e3" class="toggle"><li><details open=""><summary>Theory</summary><ul id="4cb98cbf-b60d-4d25-aa94-fa7d5f0966bc" class="bulleted-list"><li style="list-style-type:disc">AMIs are the image of the instance after installing all the necessary OS, software and configuring everything. It boots much faster because the whole thing is pre-packaged and doesn’t have to be installed separately for each instance.</li></ul><ul id="449bc893-ed9e-44a0-bd10-ec82d73012c1" class="bulleted-list"><li style="list-style-type:disc">AMI are built for a specific region (can be copied across regions)</li></ul><ul id="66b8ddda-3bd1-4d65-8780-2a868df35911" class="bulleted-list"><li style="list-style-type:disc">You can launch EC2 instances from:<ul id="a1c893b7-65df-4578-9876-3a7e4a4bd473" class="bulleted-list"><li style="list-style-type:circle">A Public AMI: AWS provided</li></ul><ul id="158519c9-51bc-4369-b97b-6cfdfd43f19f" class="bulleted-list"><li style="list-style-type:circle">Your Own AMI: you make and maintain them yourself</li></ul><ul id="c202bf9f-1f9b-42d7-a9bd-a843fed79715" class="bulleted-list"><li style="list-style-type:circle">An AWS Marketplace AMI: an AMI someone else made (and potentially sells)</li></ul></li></ul><figure id="6bebbb7d-f86f-4c73-9e94-1264d0acf30d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(364).png"><img style="width:849px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(364).png"/></a></figure></details></li></ul><ul id="cbf4217a-d2ad-4110-9233-8d1e61e9f27f" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="73685bee-1979-4728-abf3-1d98d1c49606" class="bulleted-list"><li style="list-style-type:disc">Create an AMI from an existing EC2 instance<p id="8af76470-7c9d-4895-b56d-684f34c848e4" class="">EC2 → Instances → Right click on the instance → Image and Templates → Create image</p><p id="9f5b7e74-6131-4c6c-b522-0ee5b3a422a6" class="">To view the created AMI: EC2 → AMIs (under Images)</p><figure id="00ae0be4-213b-4b1c-b8ba-47b394bee940" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2043.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2043.png"/></a></figure><p id="7e611946-1158-4c7b-8b59-166ff659279b" class="">Untitled</p></li></ul><ul id="a05ea3a0-c057-48c1-bfd0-f5bd9231dd1e" class="bulleted-list"><li style="list-style-type:disc">Create an EC2 instance from an existing AMI<p id="c6d3d2c8-5993-4673-bcb1-ee443e2669be" class="">⛔ If you just created an AMI, it could take some time to become available to create instances from it.</p><p id="07cc0814-14f7-41fe-94ab-4924a4ca69e4" class="">When creating an EC2 instance, go to “My AMIs” to create an instance from your AMI.</p><figure id="006dcff5-bbe6-4dd8-9f5f-bbc30e893a0f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2044.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2044.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="4294204b-5ded-4eee-813d-67a3ef267407" class="toggle"><li><details open=""><summary>Instance Store</summary><ul id="4229752b-a3aa-4b11-96e0-3f5b907d69e7" class="bulleted-list"><li style="list-style-type:disc">Instance stores are hardware storages directly attached to EC2 instances (servers hosting the EC2 instances).</li></ul><ul id="597776dd-0ef0-44c9-8e1f-3155a6081aff" class="bulleted-list"><li style="list-style-type:disc">Network isn’t involved, so the IO performance of instance store is very high, but unlike EBS, they lose data when the instance is stopped or terminated (ephemeral).</li></ul><ul id="4fc1cde6-febd-46cb-8fe9-ebbccba06416" class="bulleted-list"><li style="list-style-type:disc">Good for buffer / cache / scratch data / temporary content</li></ul><ul id="042f26b9-d34c-451a-a0ab-bc46e568a26a" class="bulleted-list"><li style="list-style-type:disc">Risk of data loss if hardware fails</li></ul></details></li></ul><ul id="eabb8e9a-1b6f-4480-8b85-d601374ef3b2" class="toggle"><li><details open=""><summary>EBS Volume Types </summary><figure id="2a2bdd1d-0a85-453a-94da-b2659602a4fc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(365).png"><img style="width:908px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(365).png"/></a></figure><p id="5be2b184-9976-4235-82d0-37d166e1ec5f" class="">Only SSD based volumes (gp2/gp3 or io1/io2) can be used as root for EC2 instances.</p><ul id="d763a764-2838-4406-b3e5-7bf885345c22" class="toggle"><li><details open=""><summary>General Purpose SSD</summary><ul id="6a4d5c79-24a3-49a3-8e2e-a3626c3817c9" class="bulleted-list"><li style="list-style-type:disc">Cost effective storage, low-latency</li></ul><ul id="c9ba1866-1056-4b86-b2a1-cb4a913bb3ae" class="bulleted-list"><li style="list-style-type:disc">Good for system boot volumes, virtual desktops, development and test environments</li></ul><ul id="2ac77031-ebeb-4eac-a970-2255f8d3ec29" class="bulleted-list"><li style="list-style-type:disc">Storage: 1 GiB - 16 TiB</li></ul><ul id="70627fbb-a07a-4d88-b147-c0a4a64e23c8" class="bulleted-list"><li style="list-style-type:disc">gp3:<ul id="f34a492c-815c-42c3-bf61-c1bc5646f209" class="bulleted-list"><li style="list-style-type:circle">Baseline of 3,000 lOPS and throughput of 125 MiB/s</li></ul><ul id="70a951ed-2176-4043-bd5e-f969c08bd7a9" class="bulleted-list"><li style="list-style-type:circle">Can increase IOPS up to 16,000 and throughput up to 1000 MiB/s independently</li></ul></li></ul><ul id="80a4a58d-2177-4f54-8123-b88f5e092ea1" class="bulleted-list"><li style="list-style-type:disc">gp2:<ul id="44991d33-c295-4bcb-86e0-47b7e53c78cc" class="bulleted-list"><li style="list-style-type:circle">Small gp2 volumes can burst IOPS to 3,000</li></ul><ul id="8bbd5d0a-1a43-4468-9bea-1354672a0624" class="bulleted-list"><li style="list-style-type:circle">Size of the volume and IOPS are linked, max IOPS is 16,000</li></ul><ul id="e54f9405-5965-4d5e-939d-721eae491d5e" class="bulleted-list"><li style="list-style-type:circle">3 IOPS per GB (linked), means at 5,334 GB we are at the max lOPS</li></ul></li></ul></details></li></ul><ul id="5c68e833-9ae5-4e27-8e84-13efb0067369" class="toggle"><li><details open=""><summary>Provisioned IOPS (PIOPS) SSD</summary><ul id="7d3a897c-63fc-4ebb-b4d8-9565512c0233" class="bulleted-list"><li style="list-style-type:disc">Good for critical business applications with sustained lOPS performance or applications that need more than 16,000 IOPS (max for gp3)</li></ul><ul id="0f95302a-e30f-4cd0-a63f-ca99ad585f52" class="bulleted-list"><li style="list-style-type:disc">Great for databases workloads (demanding storage performance and consistency)</li></ul><ul id="9f05ee67-cf16-4492-bc51-5eea72fce5ef" class="bulleted-list"><li style="list-style-type:disc">Supports EBS Multi-attach (attach volume to multiple instances)</li></ul><ul id="78abb5fc-3e3a-4429-9309-bc9df94eaa63" class="bulleted-list"><li style="list-style-type:disc">io1/io2:<ul id="d6466fdd-3cf6-4ee6-a932-1410a8ecd9e8" class="bulleted-list"><li style="list-style-type:circle">Storage: 4 GIB - 16 TiB</li></ul><ul id="deaeadb2-a3b8-4c09-b029-9aca1e8ad34e" class="bulleted-list"><li style="list-style-type:circle">Max PIOPS: 64,000 for Nitro EC2 instances &amp; 32,000 for other</li></ul><ul id="b13482d0-ba2d-4796-94bd-dafabb5cd359" class="bulleted-list"><li style="list-style-type:circle">Can increase PIOPS independently from storage size</li></ul><ul id="7e8459d4-e222-40f8-ba9f-7474f0fc4e09" class="bulleted-list"><li style="list-style-type:circle">io2 have more durability and more IOPS per GiB (at the same price as io1)</li></ul></li></ul><ul id="193fba3f-365d-4208-b1fd-a467610aa0f9" class="bulleted-list"><li style="list-style-type:disc">io2 Block Express:<ul id="9ff5c9ba-100f-47d7-8cc7-bf9142958156" class="bulleted-list"><li style="list-style-type:circle">Storage: 4 GiB - 64 TiB</li></ul><ul id="42a0162f-76eb-48ae-8088-6ba596da3abc" class="bulleted-list"><li style="list-style-type:circle">Sub-millisecond latency</li></ul><ul id="b21018ee-e34f-4b18-aae3-94cf81c58119" class="bulleted-list"><li style="list-style-type:circle">Max PIOPS: 256,000 with an lOPS: GiB ratio of 1,000: |</li></ul></li></ul></details></li></ul><ul id="ae9a0f8e-b6f4-451b-baba-5617fab60eb7" class="toggle"><li><details open=""><summary>Hard Disk Drives (HDD)</summary><ul id="c5c69700-15e8-4d3e-9512-100910b5b598" class="bulleted-list"><li style="list-style-type:disc">Cannot be a boot volume</li></ul><ul id="d9795666-83f1-4098-bce3-62f73ae9d760" class="bulleted-list"><li style="list-style-type:disc">Storage: 125 MiB to 16 TiB</li></ul><ul id="3acbc0f8-94ff-4cef-9442-5489ada2e8ec" class="bulleted-list"><li style="list-style-type:disc">Throughput Optimized HDD (st1)<ul id="b03d088d-bcbc-496c-9c96-0c92798f65bc" class="bulleted-list"><li style="list-style-type:circle">Big Data, Data Warehouses, Log Processing</li></ul><ul id="4a9260e9-f24e-46e7-8a9b-b79630ab97ac" class="bulleted-list"><li style="list-style-type:circle">Max throughput - 500 MiB/s - max IOPS 500</li></ul></li></ul><ul id="c7cfd65f-9427-416a-b392-0e9ec5d9c95e" class="bulleted-list"><li style="list-style-type:disc">Cold HDD (sc1):<ul id="06e9e43e-50de-4e58-b417-9f64f8b32f62" class="bulleted-list"><li style="list-style-type:circle">For data that is infrequently accessed</li></ul><ul id="5302c15c-f3a9-4b8b-9d89-f7f6bafb7034" class="bulleted-list"><li style="list-style-type:circle">Scenarios where lowest cost is important</li></ul><ul id="aba2c3dd-75bb-4861-ba9c-07ba9de13334" class="bulleted-list"><li style="list-style-type:circle">Max throughput - 250 MiB/s - max IOPS 250</li></ul></li></ul></details></li></ul><p id="963da4ae-978f-470e-93c5-e84287ab288f" class=""><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html">Amazon EBS volume types</a></p></details></li></ul><ul id="a2ca94cb-269e-499f-bf5c-c6f4111b46dc" class="toggle"><li><details open=""><summary>EBS Multi Attach</summary><ul id="5da52eb6-9b67-4b7b-92e2-f364f69527e9" class="bulleted-list"><li style="list-style-type:disc">Attach the same EBS volume to multiple EC2 instances in the<mark class="highlight-brown"> same AZ</mark></li></ul><ul id="8d73dd48-ddec-430d-b4d8-17b169cabc8f" class="bulleted-list"><li style="list-style-type:disc">Each instance has full read &amp; write permissions to the volume</li></ul><ul id="507fd9c1-ac1b-4da4-bddf-13813856e7f0" class="block-color-yellow bulleted-list"><li style="list-style-type:disc">Multi attach only works for Provisioned IOPS (io1 and io2 family)</li></ul><ul id="f1c8ff44-af48-4620-99bf-46c5f9becda1" class="bulleted-list"><li style="list-style-type:disc">Use case:<ul id="5c4394df-a2ec-4bc3-8534-015350780165" class="bulleted-list"><li style="list-style-type:circle">Achieve higher application availability in clustered Linux applications (eg. Teradata)</li></ul><ul id="6d543412-7dbc-4e86-b043-d582960f7c60" class="bulleted-list"><li style="list-style-type:circle">Applications must manage concurrent write operations</li></ul><ul id="8079b5d7-08c4-40f7-9b84-49c2d519a772" class="bulleted-list"><li style="list-style-type:circle">Must use a file system that’s cluster-aware (not XFS, EX4, etc…)</li></ul></li></ul><ul id="aa85d46e-44dc-4b75-ab93-7d7e14a938af" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-brown"><strong>Up to 16 EC2 Instances at a time</strong></mark></li></ul><figure id="735b6790-56ed-4aef-92bd-04b2c1a3a3d9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(366).png"><img style="width:240px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(366).png"/></a></figure></details></li></ul><ul id="30c90168-1e7a-44fe-b065-8ca72131f615" class="toggle"><li><details open=""><summary>EBS Encryption</summary><ul id="e834012b-678a-48d3-8479-4f5f8242e416" class="toggle"><li><details open=""><summary>Intro</summary><ul id="c22368dd-95d0-49d8-aa3b-badab3b0c1df" class="bulleted-list"><li style="list-style-type:disc">When you create an encrypted EBS volume, you get the following:<ul id="2692d49d-c56f-4455-9161-d881fd589fc2" class="bulleted-list"><li style="list-style-type:circle">Data at rest is encrypted inside the volume</li></ul><ul id="f30f832b-e2d0-420d-91fe-09181cda414e" class="bulleted-list"><li style="list-style-type:circle">All the data in-flight moving between the instance and the volume is encrypted</li></ul><ul id="a3447984-7a83-4880-9977-cf5d455a1574" class="bulleted-list"><li style="list-style-type:circle">All snapshots are encrypted</li></ul><ul id="6067d5af-3ac3-4c8a-851a-9428da1c2bce" class="bulleted-list"><li style="list-style-type:circle">All volumes created from the snapshot are encrypted</li></ul></li></ul><ul id="51670b23-3f16-4fa9-88c8-6962abd362aa" class="bulleted-list"><li style="list-style-type:disc">Encryption and decryption are handled transparently (you have nothing to do)</li></ul><ul id="1c099148-e892-4fa1-9451-b0de4eeab278" class="bulleted-list"><li style="list-style-type:disc">Encryption has a minimal impact on latency</li></ul><ul id="bf490099-8479-4efc-87b8-0de7ca9f2d8e" class="bulleted-list"><li style="list-style-type:disc">EBS Encryption leverages keys from KMS (AES-256)</li></ul><ul id="926e8e5e-d488-4cd8-b448-1ecb38a718a7" class="bulleted-list"><li style="list-style-type:disc">Copying an unencrypted snapshot allows encryption</li></ul><ul id="da0319c6-ff5a-41c2-9f18-247b8251a291" class="bulleted-list"><li style="list-style-type:disc">Snapshots of encrypted volumes are encrypted</li></ul></details></li></ul><ul id="2eb7129a-b67c-43a2-a45a-f51f2d9a9039" class="toggle"><li><details open=""><summary>Encrypt EBS volumes upon creation</summary><p id="6a343658-00f4-4677-8fbc-48c85248899b" class="">When creating EBS volumes, select the checkbox to encrypt the volume</p></details></li></ul><ul id="3fa7256f-ddfa-4ef4-bc67-f476a9637ab4" class="toggle"><li><details open=""><summary>Encrypt an un-encrypted EBS volume</summary><p id="f61067e0-396b-4a4e-ab5a-0e6792cb3223" class="">Follow the steps below in order.</p><ul id="588d5bcd-52e9-49c0-b5ad-e7878211f89a" class="bulleted-list"><li style="list-style-type:disc">Create an EBS snapshot of the volume</li></ul><ul id="f022bb5c-eff8-4738-9711-2d8bbc76b416" class="bulleted-list"><li style="list-style-type:disc">Copy the EBS snapshot and encrypt the new copy</li></ul><ul id="5a7c25dd-89f4-45bd-9561-06fb6b387477" class="bulleted-list"><li style="list-style-type:disc">Create a new EBS volume from the encrypted snapshot (the volume will be automatically encrypted)</li></ul><p id="09173ede-7a27-4394-a64a-b9f580cbd805" class="">Shortcut way:</p><ul id="f35cc686-9d40-4599-9dba-b42f639e5df6" class="bulleted-list"><li style="list-style-type:disc">Create an EBS snapshot of the volume</li></ul><ul id="8db25888-f1f7-49f3-a106-ee3827a6c8cd" class="bulleted-list"><li style="list-style-type:disc">Create a new EBS volume from the un-encrypted snapshot and select the checkbox to encrypt this volume.</li></ul></details></li></ul></details></li></ul><ul id="2ce87523-63f2-447d-aa84-db7bf9319d8c" class="toggle"><li><details open=""><summary><mark class="highlight-red"><strong>Elastic File System (EFS)</strong></mark></summary><ul id="4f92a783-af12-484f-ac62-b22f66e63788" class="toggle"><li><details open=""><summary>Theory</summary><ul id="70475586-91f3-410e-8f88-f3c45e688f82" class="toggle"><li><details open=""><summary>Intro</summary><p id="b48dbc0e-bf7f-4ffd-bb1a-34af25b5bbef" class=""><mark class="highlight-brown"><strong>Compatible with Linux based AMI (Not Windows)</strong></mark></p><figure id="c05f3a7f-25e0-4337-a787-180b11a479ce" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(367).png"><img style="width:576px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(367).png"/></a></figure><figure id="ca2b3b40-cec6-4aa9-9bb3-d818530338f8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(368).png"><img style="width:895px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(368).png"/></a></figure></details></li></ul><ul id="7859023e-bb0b-4237-8872-e91f0595ef96" class="toggle"><li><details open=""><summary><strong><mark class="highlight-red">Performance and Storage Class</mark></strong></summary><p id="29c9a4e9-111e-4024-b2a3-2f920ae7a2f2" class="">⛔ Really important for exam</p><ul id="c52bd146-4fa7-47ae-873f-4dc2be06de88" class="bulleted-list"><li style="list-style-type:disc">EFS Scale - 1000s of concurrent NFS clients - 10 GB+ /s throughput - Grow to Petabyte-scale network file system automatically<ul id="ab5ce62e-854e-4329-afc2-da2ec9126282" class="toggle"><li><details open=""><summary>Performance mode (set at EFS creation time)</summary><ul id="25ede460-d187-46a6-b066-18c60bec5311" class="bulleted-list"><li style="list-style-type:disc">General purpose (default): latency-sensitive use cases (web server, CMS, etc…)</li></ul><ul id="f3da9950-1c29-43b5-aaac-502a9423cf83" class="bulleted-list"><li style="list-style-type:disc">Max I/O: higher latency, throughput, highly parallel (big data, media processing)</li></ul></details></li></ul><ul id="0fbae202-678f-402f-ba3e-f187b0537408" class="toggle"><li><details open=""><summary>Throughput mode</summary><ul id="2397a8e0-be7c-458a-9827-831442476d66" class="bulleted-list"><li style="list-style-type:disc">Bursting<ul id="78f5519e-5d46-4ee6-ab25-83718d566549" class="bulleted-list"><li style="list-style-type:circle">By default, EFS is in bursting throughput mode (throughput scales with the file system size).</li></ul><ul id="23530725-f867-484b-9960-d2f7664ba7f6" class="bulleted-list"><li style="list-style-type:circle">For every 1TB storage, we get 50MiB/s + burst of up to 100MiB/s.</li></ul></li></ul><ul id="fb54d3e8-71e0-4c8b-93a6-821be7649b76" class="bulleted-list"><li style="list-style-type:disc">Provisioned<ul id="eb5dbc28-4840-4013-a964-6545f0219003" class="bulleted-list"><li style="list-style-type:circle">Throughput is fixed regardless of the storage size. eg: 1 GiB/s for 1TB storage</li></ul></li></ul></details></li></ul><ul id="dbbe7ee7-88e7-4733-957e-2867fe9f2e73" class="toggle"><li><details open=""><summary>Storage Tiers (lifecycle management feature - move file after N days)</summary><figure id="7935cebb-844f-480b-af81-56c054391b37" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(369).png"><img style="width:1741px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(369).png"/></a></figure></details></li></ul></li></ul></details></li></ul></details></li></ul><p id="354e383b-a277-43cf-856b-2c9b4855ef43" class="">new →</p><ul id="35b49f6d-d96a-4277-b8f4-c6415e4e8110" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="b7f32b9d-7366-4d27-a9d8-f1c7c60bf838" class="bulleted-list"><li style="list-style-type:disc">Create an EFS<p id="0f6e8f94-4fda-400e-9298-41a286166475" class="">EFS → Create file system → Customize → Create</p></li></ul><ul id="f1781725-0353-4b0e-a381-11127b9fed9e" class="bulleted-list"><li style="list-style-type:disc">Attach EFS to EC2 instances during instance creation<figure id="9338e115-397b-47f4-8327-4d214b5a6678" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2045.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2045.png"/></a></figure></li></ul><ul id="a78d1c0b-26d1-4432-bbb7-d1fc0a7d686e" class="bulleted-list"><li style="list-style-type:disc">Attach EFS to existing EC2 instances<ul id="db64ab7e-0b14-448d-92c4-3639e4b02428" class="bulleted-list"><li style="list-style-type:circle">EFS → Select the file system → Attach</li></ul><figure id="58409f78-fcfc-4d1c-9b4b-cde4613c2525" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2046.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2046.png"/></a></figure><ul id="386895fd-20c6-44c4-87c1-284eecdd1d2d" class="bulleted-list"><li style="list-style-type:circle">SSH into the EC2 instance</li></ul><ul id="8aca387a-143c-4e46-8404-9cf53fedfb99" class="bulleted-list"><li style="list-style-type:circle">Create an <code>efs</code> directory in the instance by running <code>mkdir efs</code></li></ul><ul id="7b46ba8f-7821-4431-bb2d-e4c9716c479a" class="bulleted-list"><li style="list-style-type:circle">Install <code>amazon-efs-utils</code> on the instance by running <code>sudo yum install -y amazon-efs-utils</code></li></ul><ul id="d7042ee6-6f29-49d7-9bc6-2144ad0d3249" class="bulleted-list"><li style="list-style-type:circle">Mount the EFS to the <code>efs</code> directory by running the command shown in the Attach modal (using the EFS mount helper). If this takes too long or gives a timeout error. Then, we need to add NFS inbound rules to the security group attached to the EFS.</li></ul><p id="c5d5b6e1-bf32-4a2d-aa90-963e6c690840" class="">If the above method doesn’t work, run the command “Using NFS client” and it will mount the EFS to the <code>efs</code> directory.</p><blockquote id="391928ee-87e0-42db-9b9b-ad381dd3ef66" class="">Once mounted to multiple instances, the change made in the efs directory by one instance will be visible to other instances too.</blockquote><ul id="85c73b83-89bb-4f81-a11c-048575e01d86" class="bulleted-list"><li style="list-style-type:circle">Setup NFS rule to allow EC2 instances into the EFS<p id="0e423bcc-91a6-4100-99dd-fb06dbe66e11" class="">The NFS rule below allows all EC2 instances that have <code>ec2-to-efs</code> security groups attached to them to access the EFS.</p><figure id="c1815956-fc15-4916-afaf-7a75d4427a0b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2047.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2047.png"/></a></figure></li></ul></li></ul></details></li></ul></details></li></ul><ul id="2dce97f8-200b-4a09-b9e6-bf7da63b42dd" class="toggle"><li><details open=""><summary>EFS v/s EBS</summary><figure id="9720b2c3-6302-4347-bc75-b79a8dfefb64" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(370).png"><img style="width:1750px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(370).png"/></a></figure><figure id="e705c1ca-ba04-47bb-97a4-73617ff7c30e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(371).png"><img style="width:1734px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(371).png"/></a></figure><ul id="57eaf6b0-4f23-46e5-ace2-beb332f0bbc5" class="bulleted-list"><li style="list-style-type:disc">EFS - Billed for what you use, For a network volume mounted on one instance and locked on a AZ</li></ul><ul id="048b8a0c-b93f-4572-bda9-d13f1aec43fb" class="bulleted-list"><li style="list-style-type:disc">EBS - Have to provision in advance a size that you know for EBS drive, and you pay for provision capacity, not actual use capacity, For Network file system mounted across multiple instances.</li></ul><ul id="d8252695-202f-40b7-aa44-7a2dbc73ff2c" class="bulleted-list"><li style="list-style-type:disc">Instance Store - To get maximum amount of IO onto a instance but we lose that, if we lose the instance so it is a ephemeral drive</li></ul></details></li></ul></div><h3 id="9d2d1711-ddf4-433f-ae47-6737f696a316" class=""><details open=""><summary>Section 8: High Availability And Scalability: ELB &amp; ASG</summary></details></h3><div class="indented"><ul id="75abe870-9e1c-4743-a630-011c12d58562" class="toggle"><li><details open=""><summary>Scalability</summary><ul id="1be50b1d-c36a-4a40-ad46-2b346bf18447" class="bulleted-list"><li style="list-style-type:disc">Scalability means that an application / system can handle greater loads by adapting.</li></ul><ul id="0027e075-82a7-46cc-afed-8fbb39864e36" class="bulleted-list"><li style="list-style-type:disc">There are two kinds of scalability:<ul id="4ec093bb-9041-4f6f-9b6b-06e311b58e97" class="bulleted-list"><li style="list-style-type:circle">Vertical Scalability (scaling up / down)<ul id="0d375a6c-875c-4832-89a0-4dd2ca4f01a3" class="bulleted-list"><li style="list-style-type:square">Vertically scalability means increasing the size (performance) of the instance</li></ul><ul id="3899ee8a-fc42-4908-b92a-91424f744756" class="bulleted-list"><li style="list-style-type:square">For example, your application runs on a t2.micro. Scaling that application vertically means running it on a t2.large</li></ul><ul id="ffa537f4-972d-4875-8608-87f642693bc5" class="bulleted-list"><li style="list-style-type:square">Vertical scalability is very common for non-distributed systems, such as a database.</li></ul><ul id="bab33627-017e-455d-9b17-a0157ff82392" class="bulleted-list"><li style="list-style-type:square">RDS, ElastiCache are services that can scale vertically.</li></ul><ul id="ea706b59-b239-4e0b-b6e0-487a109ca4c4" class="bulleted-list"><li style="list-style-type:square">There’s usually limit to how much you can vertically scale (hardware limit)</li></ul></li></ul><ul id="d4994e77-c575-4b74-bfcb-59d8a4def7ac" class="bulleted-list"><li style="list-style-type:circle">Horizontal Scalability (elasticity) (scaling out / in)<ul id="d0f8fd62-5bee-4be4-880b-751d3a0798bb" class="bulleted-list"><li style="list-style-type:square">Horizontal Scalability means increasing the number of instances / systems for your application.</li></ul><ul id="3d51e2e9-e410-4644-9e55-601169ceec93" class="bulleted-list"><li style="list-style-type:square">Horizontal scaling implies distributed systems.</li></ul><ul id="629c64ff-ac80-4ccb-8528-8c2f9489b8fc" class="bulleted-list"><li style="list-style-type:square">This is very common for web applications / modern applications</li></ul><ul id="eb18b948-eaa2-49f0-b21a-0c5cbe09597e" class="bulleted-list"><li style="list-style-type:square">It’s easy to horizontally scale thanks the cloud offerings such as Amazon EC2</li></ul><ul id="32744251-6be7-457e-98d0-980d52650da1" class="bulleted-list"><li style="list-style-type:square">Horizontal scaling is done through<ul id="72c1a51b-f781-407d-a473-7a667267d575" class="bulleted-list"><li style="list-style-type:disc">Auto Scaling Group (ASG)</li></ul><ul id="a3dd8e67-e324-4448-87c2-88d85ce19c7d" class="bulleted-list"><li style="list-style-type:disc">Load Balancer</li></ul></li></ul></li></ul></li></ul></details></li></ul><ul id="14256690-4576-42a0-90fa-0d2c614829b0" class="toggle"><li><details open=""><summary>High Availability</summary><ul id="9ac68610-1e3a-4010-b9e6-f22ba214bc9f" class="bulleted-list"><li style="list-style-type:disc">High availability means running your application / system in at least 2 data centers (Availability Zones)</li></ul><ul id="aa206700-175f-40f9-8f46-57b45544cedb" class="bulleted-list"><li style="list-style-type:disc">The goal of high availability is to survive a data center loss</li></ul><ul id="b42bf9eb-b936-4e42-8e5c-065ef7fdfea4" class="bulleted-list"><li style="list-style-type:disc">The high availability can be passive (for RDS Multi AZ for example)</li></ul><ul id="fc7fb844-13eb-422c-aa17-ea5131844cb2" class="bulleted-list"><li style="list-style-type:disc">The high availability can be active (for horizontal scaling)</li></ul><ul id="c60c1ce1-ad79-495e-96f2-c54e8ead4ad2" class="bulleted-list"><li style="list-style-type:disc">High availability is achieved though<ul id="8cf57309-8ec5-4d78-8e9f-feb6375af9c8" class="bulleted-list"><li style="list-style-type:circle">Auto Scaling Group (multi AZ enabled)</li></ul><ul id="ccbc30ea-76e6-41c3-b405-330d33cf51ba" class="bulleted-list"><li style="list-style-type:circle">Load Balancer (multi AZ enabled)</li></ul></li></ul><p id="7e520d46-8a04-44d8-8acd-d7363a31ca66" class="">Example: having two call centers in different locations so that if one goes down, the other can keep running</p><ul id="09fb25c0-fa69-4675-b1de-d86e16562394" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>Vertical Scaling: Increasing the instance size</strong></mark><ul id="ec4b27fc-c199-40a9-9d55-8ddd3cfbf83a" class="bulleted-list"><li style="list-style-type:circle"><mark class="highlight-red"><strong>from t2.nano - 0.5G of RAM, 1 vCPU</strong></mark></li></ul><ul id="09167888-edab-495d-b86d-82bac2cf848c" class="bulleted-list"><li style="list-style-type:circle"><mark class="highlight-red"><strong>To: u-12tb 1.metal - 12.3 TB of RAM, 448 vCPUs</strong></mark></li></ul></li></ul><ul id="2b6ef39e-6035-448c-9449-9aaa1820981b" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>Horizontal Scaling: Increasing number of instance</strong></mark><ul id="a1c191c6-bb7b-4ec3-b8e6-cc53fc658744" class="bulleted-list"><li style="list-style-type:circle"><mark class="highlight-red"><strong>Auto Scaling Group</strong></mark></li></ul><ul id="1c5a84f6-dc92-4752-a3e2-ac0f23376934" class="bulleted-list"><li style="list-style-type:circle"><mark class="highlight-red"><strong>Load Balancer</strong></mark></li></ul></li></ul><ul id="8a6374c6-8f66-4c30-9dee-f0929fde71d6" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>High Availability: Run instance for same application across multiple AZ</strong></mark></li></ul></details></li></ul><ul id="80cdf647-d187-4508-8ccb-de0e3b4510fc" class="toggle"><li><details open=""><summary>Elastic Load Balancer (ELB)</summary><ul id="96825248-6f2d-4585-b506-2712555d0b5d" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3c340d91-94dd-4485-9611-6653074f7952" class="bulleted-list"><li style="list-style-type:disc">Load Balances are servers that forward traffic to multiple servers (e.g. EC2 instances) downstream.</li></ul><ul id="4c155075-e05e-4088-a184-91cfcc527ba8" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, none of these users know internally which EC2 instance they are connected to. ELB gives one endpoint of connectivity only.<figure id="97b2a320-23ba-4f17-b93b-df0a65f19bb6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2048.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2048.png"/></a></figure></li></ul></details></li></ul><ul id="c550ab14-e4ec-4f9d-82f7-9277a28a891a" class="toggle"><li><details open=""><summary>Why use an ELB</summary><ul id="1473d410-b343-486b-8737-cb87583b9f10" class="bulleted-list"><li style="list-style-type:disc">Spread load across multiple downstream instances</li></ul><ul id="a784cd39-849d-46e2-a254-3004b701ce1d" class="bulleted-list"><li style="list-style-type:disc">Expose a single point of access (DNS) to your application</li></ul><ul id="df45d530-df16-4a83-b03a-75992004bb25" class="bulleted-list"><li style="list-style-type:disc">Seamlessly handle failures of downstream instances (if an instance is down, ELB can route the traffic to another instance)</li></ul><ul id="4b0d25f2-11cb-46a2-beb4-f5b9d6db1ee6" class="bulleted-list"><li style="list-style-type:disc">Do regular health checks to your instances</li></ul><ul id="77efa1f7-c7d3-4406-8c41-8f2257382d4a" class="bulleted-list"><li style="list-style-type:disc">Provide SSL termination (HTTPS) for your websites</li></ul><ul id="56766137-a040-4fde-8d90-0227f2a0bcbc" class="bulleted-list"><li style="list-style-type:disc">Enforce stickiness with cookies</li></ul><ul id="5c111147-7f0c-476c-b393-dfaa2655a25f" class="bulleted-list"><li style="list-style-type:disc">High availability across zones</li></ul><ul id="26e2d430-3ef5-4c4c-935e-df189a2f78a9" class="bulleted-list"><li style="list-style-type:disc">Separate public traffic from private traffic</li></ul><ul id="fc12f0b9-e713-445c-93e3-fcd0c5ecd0ee" class="bulleted-list"><li style="list-style-type:disc">It is integrated with many AWS offerings / services:<ul id="109eeb3a-267b-4e2f-8eb6-a97a07d398f2" class="bulleted-list"><li style="list-style-type:circle">EC2, Auto Scaling Groups, Amazon ECS</li></ul><ul id="17d18dca-560b-4b22-a7a5-0b26d03b5dd7" class="bulleted-list"><li style="list-style-type:circle">AWS Certificate Manager (ACM), CloudWatch</li></ul><ul id="fe99dad7-78fa-42f5-897f-b8522e07e390" class="bulleted-list"><li style="list-style-type:circle">Route 53, AWS WAF, AWS Global Accelerator</li></ul></li></ul><figure id="77ec5c41-3638-402c-981d-13c73c32f80a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(372).png"><img style="width:895px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(372).png"/></a></figure></details></li></ul><ul id="e121e629-19ce-4392-a7aa-47b532e2b6d0" class="toggle"><li><details open=""><summary>Health Checks</summary><ul id="730679f1-a7b4-4ad0-9fea-3df50addb6e7" class="bulleted-list"><li style="list-style-type:disc">Health checks allow ELB to know which instances are working properly</li></ul><ul id="ac6acdc5-4a91-4dd7-83f9-ad593da247de" class="bulleted-list"><li style="list-style-type:disc">Health Checks are crucial for Load Balancers</li></ul><ul id="10afb3ab-8bff-481a-9b10-235b6a98968c" class="bulleted-list"><li style="list-style-type:disc">The health check is done on a port and a route (<code>/health</code> is common)</li></ul><ul id="3ecf52a6-9594-4e9c-bb00-27574247bb0c" class="bulleted-list"><li style="list-style-type:disc">If the response is not 200 (OK), then the instance is unhealthy and ELB will send the incoming traffic to another instance.</li></ul><figure id="8c6a8785-31d9-4155-ab93-be1666915cc1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2049.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2049.png"/></a></figure></details></li></ul><ul id="4b2328e1-3d00-4963-bc94-b3d619d2e7a8" class="toggle"><li><details open=""><summary>Types of Load Balancers</summary><ul id="5ed1a19c-082f-4a6e-a054-dc4b598b181e" class="toggle"><li><details open=""><summary>Classic Load Balancer (CLB) (deprecated)</summary><ul id="2a3ca71b-9413-4fc5-9e39-44da5714c76f" class="bulleted-list"><li style="list-style-type:disc">Theory<ul id="5b6043d5-4de6-4386-82d2-33f0ef44cf1c" class="bulleted-list"><li style="list-style-type:circle">v1 - old generation (started in 2009)</li></ul><ul id="9a1dff46-98d7-45dd-9aee-a595bebb6b76" class="bulleted-list"><li style="list-style-type:circle">Provides load balancing to a single application</li></ul><ul id="8192269f-4d51-4b5a-9a95-0c24305039fd" class="bulleted-list"><li style="list-style-type:circle">Supports HTTP, HTTPS (layer 7) &amp; TCP, SSL (secure TCP) (layer 3)</li></ul><ul id="174383ac-4710-441a-a38c-7c14a2727d32" class="bulleted-list"><li style="list-style-type:circle">Health checks are HTTP or TCP based</li></ul><ul id="16aab5af-e46c-410a-a941-feb495307333" class="bulleted-list"><li style="list-style-type:circle">Provides a fixed hostname (xxx.region.elb.amazonaws.com) where we can send traffic</li></ul><figure id="5122e69c-7ad2-4301-9a9e-e9ca3e832e6c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2050.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2050.png"/></a></figure><p id="37d15971-ec66-48e1-b145-3d0b2dea5d49" class="">Untitled</p></li></ul><ul id="ba4a174b-fd4c-4148-8fda-2813d8d85c91" class="bulleted-list"><li style="list-style-type:disc">Create a CLB and attach multiple EC2 instances to it<ul id="a08fb105-165a-49ef-9ac8-84d2d9a03fff" class="bulleted-list"><li style="list-style-type:circle">Create a CLB with a security group to allow HTTP traffic from anywhere: EC2 → Load Balancers → Create load balancer → CLB</li></ul><ul id="08c66d5d-7814-428d-a98f-85819d0d40f4" class="bulleted-list"><li style="list-style-type:circle">Create a security group to only allow HTTP traffic from CLB’s security group</li></ul><ul id="e25eab80-23bd-4b01-b68f-e5ce70b7f985" class="bulleted-list"><li style="list-style-type:circle">Create multiple EC2 instances (with a server running on each of them)</li></ul><ul id="53c4fa15-52b1-4815-9e98-1b3fbd20cbf7" class="bulleted-list"><li style="list-style-type:circle">Attach EC2 instances to CLB: Select CLB → Edit instances</li></ul><figure id="22d8cbbe-aeeb-452a-b33e-6e7b3a4814cf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2051.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2051.png"/></a></figure><p id="b08d0550-7362-4976-b9b5-9a3bada3907f" class="">Untitled</p><p id="9cefe15f-a64e-4cfd-85d9-f73276983444" class="">Wait for the instance status to become InService. After this, you can use the DNS (URL) provided by the CLB to access the webpage.</p></li></ul></details></li></ul><ul id="256f2a2b-4d5d-4d53-8263-b067cf0eb342" class="toggle"><li><details open=""><summary>Application Load Balancer (ALB)</summary><ul id="c9b1faac-8629-49cd-9bba-39922ed71c58" class="toggle"><li><details open=""><summary>Theory</summary><ul id="32eda4f7-e4ee-4e07-ac94-dfc9bc8af4bf" class="toggle"><li><details open=""><summary>Intro</summary><ul id="269e2a01-cd74-46a2-8cfa-78ad744b9d9b" class="bulleted-list"><li style="list-style-type:disc">v2 - new generation (started in 2016)</li></ul><ul id="df869e46-10af-4dff-b5cf-347b31f7f384" class="bulleted-list"><li style="list-style-type:disc">Supports only Layer 7 (HTTP, HTTPS and WebSocket)</li></ul><ul id="6d17b30a-3d1f-4e7d-a3db-1b9336729657" class="bulleted-list"><li style="list-style-type:disc">Supports load balancing to multiple HTTP applications across machines using target groups</li></ul><ul id="fa188391-4018-408c-b714-402287e99077" class="bulleted-list"><li style="list-style-type:disc">Supports load balancing to multiple applications on the same machine (eg. containers)</li></ul><ul id="85b3c489-ccb3-4112-8697-3f073d4e7101" class="bulleted-list"><li style="list-style-type:disc">ALB terminates the original connection and creates a new connection to the EC2 instance</li></ul><ul id="bbf3a0ff-4035-463a-b38d-5fd6325bdddb" class="bulleted-list"><li style="list-style-type:disc">Support redirects (from HTTP to HTTPS for example)</li></ul><ul id="24964f8f-2fe6-43d8-911d-7d30ab960fd1" class="bulleted-list"><li style="list-style-type:disc">Supports both internal and external traffic</li></ul><ul id="24a534d9-7d0a-445e-be76-920d8fb5840e" class="bulleted-list"><li style="list-style-type:disc">ALBs are a great fit for micro services &amp; container-based application (eg. Docker &amp; Amazon ECS)</li></ul><ul id="9c9683f3-a3e3-45b6-a650-5565e103cb21" class="bulleted-list"><li style="list-style-type:disc">Has a port mapping feature to redirect to a dynamic port in ECS</li></ul><ul id="402f0c21-14dd-454f-ae08-30aa0b642816" class="bulleted-list"><li style="list-style-type:disc">In case of CLB, we’d need one CLB per application whereas one ALB can balance the load on multiple applications.</li></ul><ul id="da7ae124-d414-47d8-beac-eb544ad17e5c" class="bulleted-list"><li style="list-style-type:disc">ALB also provides a fixed hostname (<a href="http://xxx.region.elb.amazonaws.com/">XXX.region.elb.amazonaws.com</a>)</li></ul><ul id="79358066-44b4-43a0-a31e-8acc9b34d621" class="bulleted-list"><li style="list-style-type:disc">The application servers don’t see the IP of the client (external user making the request) directly<ul id="f7a2e54d-9b57-4e16-9374-4f95d71a3119" class="bulleted-list"><li style="list-style-type:circle">The true IP of the client is inserted in the header X-Forwarded-For</li></ul><ul id="07628954-3a6a-46da-bbee-ee57a2a39534" class="bulleted-list"><li style="list-style-type:circle">We can also get Port (X-Forwarded-Port) and protocol (X-Forwarded-Proto)</li></ul></li></ul><figure id="ac26ccc7-ad35-41f6-8e24-cc7f253ea5d3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2052.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2052.png"/></a></figure></details></li></ul><ul id="a8ff7429-a93c-456a-a448-2aaf043a66bc" class="toggle"><li><details open=""><summary>Target Groups</summary><ul id="1d1f5997-86ef-4b99-9a50-05387f158a9c" class="bulleted-list"><li style="list-style-type:disc">Target groups could be:<ul id="6b5aca22-a96e-4a82-b25e-c78cc84111ef" class="bulleted-list"><li style="list-style-type:circle">EC2 instances (can be managed by an Auto Scaling Group) - HTTP</li></ul><ul id="993fa848-d9a4-4436-a680-484d39aa282a" class="bulleted-list"><li style="list-style-type:circle">ECS tasks (managed by ECS itself) - HTTP</li></ul><ul id="36bf3503-c30e-46c2-af45-96515b4142a2" class="bulleted-list"><li style="list-style-type:circle">Lambda functions - HTTP request is translated into a JSON event</li></ul><ul id="a9194629-9622-47b4-a52d-075352248bd3" class="bulleted-list"><li style="list-style-type:circle">IP Addresses (must be private IPs)</li></ul></li></ul><ul id="955e924b-56b9-4f32-adff-d745d50b6ad9" class="bulleted-list"><li style="list-style-type:disc">Traffic can be routed to different target groups based on:<ul id="067f51fe-3fa1-4bec-a4f4-f844eb024cd0" class="bulleted-list"><li style="list-style-type:circle">Path in URL (<a href="http://example.com/users">example.com/users</a> &amp; <a href="http://example.com/posts">example.com/posts</a>)</li></ul><ul id="e33757d1-11e4-4074-ad83-203e06db20a0" class="bulleted-list"><li style="list-style-type:circle">Hostname In URL (<a href="http://one.example.com/">one.example.com</a> &amp; <a href="http://other.example.com/">other.example.com</a>)</li></ul><ul id="a6f373d5-bd3b-4a2d-a50e-30af87cbc92a" class="bulleted-list"><li style="list-style-type:circle">Query String (<a href="http://example.com/users?id=123&amp;order=false">example.com/users?id=123&amp;order=false</a>)</li></ul><ul id="cb9a4cc7-e37f-45a4-b2cd-e334a2d1e18b" class="bulleted-list"><li style="list-style-type:circle">Request Headers</li></ul><ul id="29dc40ef-ced4-4004-bcc0-dee22c080b1e" class="bulleted-list"><li style="list-style-type:circle">Source IP address</li></ul></li></ul><ul id="302625d5-8bfd-41dc-9172-e5d4ff6093b3" class="bulleted-list"><li style="list-style-type:disc">Health checks are done at the target group level</li></ul></details></li></ul><ul id="3705ae3e-b422-42d2-85ba-7d3034c2af14" class="toggle"><li><details open=""><summary>ALB (path routing)</summary><p id="7cf790c3-5ae8-43d5-9459-4766f1b31a81" class="">In the diagram below, we have two micro services: <code>/user</code> and <code>/search</code>. Both of these services are balanced by a single ALB. Both the services are kept under separate target groups. The ALB determines which target group to balance for using the URL path in the incoming request.</p><figure id="9d0da0d5-9d37-48fc-ad67-72949d8ab488" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2053.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2053.png"/></a></figure><p id="e5a2d4df-d4af-4956-a4a4-dc84a8c32c7c" class="">Untitled</p></details></li></ul><ul id="cee232b1-6754-424a-8322-0e9e8e6ec611" class="toggle"><li><details open=""><summary>ALB (query string parameter routing)</summary><p id="b5f44ea2-6cf7-42d6-b4e1-ba1e9733a543" class="">We can balance loads for two different target groups based on some query string parameters.</p><figure id="62fb74f4-faa3-4e0c-b243-6db44165c02f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2054.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2054.png"/></a></figure><p id="151998b2-52b3-4e37-9331-b9f1dbed19a7" class="">Untitled</p></details></li></ul></details></li></ul><ul id="2b3e811c-62d4-414d-ad01-46499f6fe724" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="73ee3c6c-7b9d-4588-8bfd-fba358f2f988" class="bulleted-list"><li style="list-style-type:disc">Create an ALB and attach EC2 instances to it<p id="04883229-6e64-43f1-98fd-eb84730c908f" class="">EC2 → Load Balancers → Create → ALB</p><p id="6fee4e16-a8d3-49f8-b33f-555d34e14df4" class="">EC2 instances will have to be added to target groups which can be created during the ALB creation.</p><p id="79c8bbb7-2322-4bda-8e98-d52fcabf43a3" class="">Sample summary for reference.</p><figure id="d9f3067f-06ee-4122-93d4-ecdc364ca68e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2055.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2055.png"/></a></figure><p id="40d09678-e0f1-4d7f-9a95-c0d3c8cd220d" class="">Untitled</p><p id="920ffd42-a9e4-4257-8c91-7a28d39de13a" class="">We can also create additional target groups later and add them by editing the rules of the listener on the ALB.</p><figure id="0e2ceb4e-beae-4cab-a02e-18bf9f79cc1e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2056.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2056.png"/></a></figure><p id="08fe1a28-3485-4ded-a238-07c6a53a338a" class="">Untitled</p></li></ul><ul id="c13f4842-a3f6-4a1e-bb76-d5adbcde11e7" class="bulleted-list"><li style="list-style-type:disc">Edit listener rules<p id="78fca81d-c5d6-479c-87da-a4c7557e23e6" class="">We can add rules to direct traffic to different target groups based on the IP, path, hostname, query string parameter etc. We can also return fixed response if required.</p><figure id="a09aabd5-20a7-4561-8552-25d7c0f885b4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2057.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2057.png"/></a></figure><p id="fad71998-20d2-4186-935a-df532bf1c5fe" class="">Untitled</p></li></ul></details></li></ul></details></li></ul><ul id="fa09158f-a7f5-495a-ad82-03025e335954" class="toggle"><li><details open=""><summary>Network Load Balancer (NLB)</summary><ul id="52d353dd-bbed-4124-b03a-8046c6be8bdb" class="toggle"><li><details open=""><summary>Theory</summary><ul id="375b6b4e-adba-4f95-a39b-5878d9024ba6" class="toggle"><li><details open=""><summary>Intro</summary><ul id="5d2dbefb-1184-4ff0-8c4a-16f9f6542847" class="bulleted-list"><li style="list-style-type:disc">v2 - new generation (started in 2017)</li></ul><ul id="601fcd75-af7b-4b18-b8a9-bfdb40231966" class="bulleted-list"><li style="list-style-type:disc">Supports Transport Layer (layer 4) traffic (TCP, TLS (secure TCP), UDP)</li></ul><ul id="4ebdc15f-3197-49b7-8615-617742e518a6" class="bulleted-list"><li style="list-style-type:disc">Forward TCP &amp; UDP traffic to your instances</li></ul><ul id="a24ff97e-ffac-4e26-84de-13c935819fe2" class="bulleted-list"><li style="list-style-type:disc">Can handle millions of request per seconds (extreme performance)</li></ul><ul id="a9ff466b-d4a6-4b15-9e5d-062f2d6f9479" class="bulleted-list"><li style="list-style-type:disc">Less latency ~ 100 ms (vs 400 ms for ALB)</li></ul><ul id="fa993878-c800-4db3-ab97-999d5363cf27" class="bulleted-list"><li style="list-style-type:disc">NLB has one static IP per AZ (vs a static hostname for CLB &amp; ALB)</li></ul><ul id="76c4ff63-c715-443b-890d-95a6e5da9f26" class="bulleted-list"><li style="list-style-type:disc">Maintains the same connection from client all the way to the instance</li></ul><ul id="ee05e866-5bca-49f6-b0e4-a6353c72ac06" class="bulleted-list"><li style="list-style-type:disc">No security groups can be attached to NLBs. So, the attached instances must allow TCP traffic on port 80 (HTTP) from anywhere (as if no ELB is attached).</li></ul><ul id="aeaf8aee-3be1-4708-8eb8-68da8478ee0d" class="bulleted-list"><li style="list-style-type:disc">Supports assigning Elastic IP (helpful for whitelisting specific IP)</li></ul><ul id="14ce7e02-3dee-4f9e-98b9-732795fc5df3" class="bulleted-list"><li style="list-style-type:disc">Not included in the AWS free tier</li></ul><ul id="0e1f6626-4868-43de-a3b1-fe775905100f" class="bulleted-list"><li style="list-style-type:disc">We can configure rules to direct traffic to different target groups</li></ul><figure id="c22f018c-a6fb-46cf-a84b-217d7e7c3267" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2058.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2058.png"/></a></figure></details></li></ul><ul id="6d68cbde-c432-4fb1-bae2-bdc21a55831f" class="toggle"><li><details open=""><summary>Target Groups</summary><p id="5bf8bef6-ff37-4c45-be7d-5d3affe61c57" class="">Within a target group, NLB can send traffic based on</p><ul id="7f523af7-e508-42d7-afdc-b2f8d7b37082" class="bulleted-list"><li style="list-style-type:disc">EC2 instances</li></ul><ul id="886db15a-0ba6-44c2-81d3-d7a02c255d46" class="bulleted-list"><li style="list-style-type:disc">IP addresses<ul id="386d5ce9-6cba-4732-a7b3-e73913fe9c33" class="bulleted-list"><li style="list-style-type:circle">Used when you want to balance load for a physical server having a static IP.</li></ul></li></ul><ul id="47a5795b-8b6d-40bc-8b21-82f03060effd" class="bulleted-list"><li style="list-style-type:disc">Application Load Balancer (ALB)<ul id="37a1b134-3344-4bd3-ad17-b617ce19c5b5" class="bulleted-list"><li style="list-style-type:circle">This setup is used when you want a static IP provided by a NLB but also want to use the features provided by ALB at the application layer.</li></ul></li></ul><figure id="888335ef-4f4b-46b7-a64a-227ac9f132f3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2059.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2059.png"/></a></figure></details></li></ul></details></li></ul><ul id="4bb0e701-c561-4b99-a94f-b3685aecf3da" class="toggle"><li><details open=""><summary>Create a NLB and attach EC2 instances to it</summary><p id="9fb82714-aa2a-4e05-b007-a77ef6213f31" class="">EC2 → Load Balancers → Create → NLB</p><p id="bb5b922e-9376-4c35-a515-9422d2471b90" class="">Separate target groups (that work on TCP) must be created for NLBs. Target groups created for ALB will not work with NLBs.</p><p id="19b13816-8735-427a-bde1-65cd47ca93ca" class="">⛔ No security groups are attached to NLBs. They just forward the incoming traffic to the right target group as if those requests were directly coming from client. So, the attached instances must allow TCP traffic on port 80 from anywhere.</p></details></li></ul></details></li></ul><ul id="424421dd-56dd-4533-a765-6f15102c4169" class="toggle"><li><details open=""><summary>Gateway Load Balancer (GWLB)</summary><ul id="e62797a8-f92e-40e4-856e-2b30cd32339d" class="toggle"><li><details open=""><summary>Intro</summary><ul id="e0b0822f-4df8-4724-ad5c-1ce84b640a96" class="bulleted-list"><li style="list-style-type:disc">Newest (started in 2020)</li></ul><ul id="696c4d12-c975-4419-bc07-6dafb94c6d60" class="bulleted-list"><li style="list-style-type:disc">Operates at layer 3 (Network layer) - IP Protocol</li></ul><ul id="772e4526-679f-4195-b83d-6a837f723ff2" class="bulleted-list"><li style="list-style-type:disc">Used to deploy, scale, and manage a fleet of 3rd party network virtual appliances in AWS. Example: Firewalls, Intrusion Detection and Prevention Systems (IDPS), Deep Packet Inspection Systems, payload manipulation, etc.</li></ul><ul id="4dae452e-92a0-4b19-872e-58dc73b3066b" class="bulleted-list"><li style="list-style-type:disc">Performs two functions:<ul id="e0900546-1bc9-402c-bbb7-9b4639ff0c7b" class="bulleted-list"><li style="list-style-type:circle">Transparent Network Gateway (single entry/exit for all traffic)</li></ul><ul id="ca227bb1-9097-4059-beff-26205689a8d3" class="bulleted-list"><li style="list-style-type:circle">Load Balancer (distributes traffic to your virtual appliances)</li></ul></li></ul><ul id="42d0a234-e9d0-49e3-a36c-56371b4c09c3" class="bulleted-list"><li style="list-style-type:disc">Uses the GENEVE protocol on port 6081</li></ul><ul id="9acecb6e-e64a-41a5-b50a-51b298780d8c" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, all of the external traffic is first sent to a fleet of EC2 instances to perform security check on the traffic. If the request passes the security check, it is then routed to the application.<figure id="d6b132ed-5598-4beb-bf6f-2175c64bdfbf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2060.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2060.png"/></a></figure><p id="ce474c1b-5070-4205-886c-b5f5efa04d11" class="">Untitled</p></li></ul></details></li></ul><ul id="e29131c8-4942-448c-8f86-21824976434d" class="toggle"><li><details open=""><summary>Target Groups</summary><p id="7b290abf-20e1-44db-8718-a52355a96d80" class="">Target groups for GWLB will be the external appliances. They could be:</p><ul id="edf9d26e-e7cd-4515-9871-7709b6982f5a" class="bulleted-list"><li style="list-style-type:disc">EC2 instances</li></ul><ul id="3ce93810-71ab-4edd-b9b1-bfd6166e4209" class="bulleted-list"><li style="list-style-type:disc">IP addresses</li></ul><figure id="3cbbf4fe-d000-4b20-a1ff-fbba498feacc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2061.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2061.png"/></a></figure></details></li></ul></details></li></ul><p id="33376407-3e55-4c15-b70b-19071ac80177" class="">Overall, it is recommended to use the newer generation load balancers as they provide more features.</p><p id="81174057-0c53-4b9e-85da-7ed1cdf84ad2" class="">Some load balancers can be setup as internal (private), balancing load within the VPC, or external (public), balancing load coming from outside the VPC like website.</p></details></li></ul><ul id="dde9ed7d-884f-4eda-87b3-588bfb9c8785" class="toggle"><li><details open=""><summary>Security groups for ELB</summary><p id="35ebb864-3204-42d5-8fcf-3a53a2c420aa" class="">ELB will be publicly available on the internet, so it’s security group should allow HTTP and HTTPS traffic from anywhere.</p><p id="5644af54-297a-40c0-bce4-2ba11e4d9208" class="">EC2 should only allow traffic from the ELB, so the it’s security group should allow HTTP requests from ELB’s security group.</p><figure id="814576e8-c608-4a86-98fb-2e885bdccdc1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2062.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2062.png"/></a></figure></details></li></ul></details></li></ul><ul id="4574a608-8d95-4963-95f9-a3839349835d" class="toggle"><li><details open=""><summary>Classic Load Balancer (CLB) (deprecated)</summary><ul id="6b3d8b3d-8f8c-4dcd-beec-0900505ee117" class="toggle"><li><details open=""><summary>Theory</summary><ul id="0b05fcc0-ebfc-44ea-b47d-7200c5cde3a4" class="bulleted-list"><li style="list-style-type:disc">v1 - old generation (started in 2009)</li></ul><ul id="8baa7825-d1e0-47b2-8623-fc91dce3e89c" class="bulleted-list"><li style="list-style-type:disc">Provides load balancing to a single application</li></ul><ul id="92344925-14f0-45f1-b9e6-e7b4de144501" class="bulleted-list"><li style="list-style-type:disc">Supports HTTP, HTTPS (layer 7) &amp; TCP, SSL (secure TCP) (layer 4)</li></ul><ul id="6193674d-6669-4ac1-9026-d85fb65e24ab" class="bulleted-list"><li style="list-style-type:disc">Health checks are HTTP or TCP based</li></ul><ul id="37ef4f6c-2cad-4b47-941a-909b74522c5d" class="bulleted-list"><li style="list-style-type:disc">Provides a fixed hostname (xxx.region.elb.amazonaws.com) where we can send traffic</li></ul><figure id="56206289-2bdd-4fd3-8722-84b7bea020ef" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2050.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2050.png"/></a></figure></details></li></ul><ul id="9ea19204-309b-4da7-821c-ef0be6a2c5a9" class="toggle"><li><details open=""><summary>Hands On</summary><ul id="b4861e98-f95f-451a-babe-b66899582fac" class="bulleted-list"><li style="list-style-type:disc">Create a CLB and attach multiple EC2 instances to it<ul id="e8f3c982-92d0-49fe-ab9f-018292d34693" class="bulleted-list"><li style="list-style-type:circle">Create a CLB with a security group to allow HTTP traffic from anywhere: EC2 → Load Balancers → Create load balancer → CLB</li></ul><ul id="95edc9bf-bdd0-4f1c-a6e6-79bfa25fc64e" class="bulleted-list"><li style="list-style-type:circle">Create a security group to only allow HTTP traffic from CLB’s security group</li></ul><ul id="871e64eb-2702-4388-aab7-8fab463f1fbb" class="bulleted-list"><li style="list-style-type:circle">Create multiple EC2 instances (with a server running on each of them)</li></ul><ul id="3a6e44d1-cc46-4597-94e9-eff156a49456" class="bulleted-list"><li style="list-style-type:circle">Attach EC2 instances to CLB: Select CLB → Edit instances</li></ul><figure id="baddac50-f836-4852-9d21-c15aa6e36593" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2051.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2051.png"/></a></figure><p id="ba813fc3-0302-420b-ac94-e982862ad924" class="">Wait for the instance status to become InService. After this, you can use the DNS (URL) provided by the CLB to access the webpage.</p></li></ul></details></li></ul></details></li></ul><ul id="6dd46c02-701d-44a6-b667-e7f34163205f" class="toggle"><li><details open=""><summary>Application Load Balancer (ALB)</summary><ul id="83c711ac-92f4-475b-9589-5a7fb8143382" class="toggle"><li><details open=""><summary>Theory</summary><ul id="9c286306-1f87-4362-850e-7290956c65ef" class="toggle"><li><details open=""><summary>Intro</summary><ul id="b9f27a0d-e4ec-456b-a3b2-a3ebf1220668" class="bulleted-list"><li style="list-style-type:disc">v2 - new generation (started in 2016)</li></ul><ul id="729a379b-c438-49c5-bae4-82d7d4d4c223" class="bulleted-list"><li style="list-style-type:disc">Supports only Layer 7 (HTTP, HTTPS and WebSocket)</li></ul><ul id="302a8c66-2583-47b3-b3b4-b68495a158eb" class="bulleted-list"><li style="list-style-type:disc">Supports load balancing to multiple HTTP applications across machines using target groups</li></ul><ul id="f52e545f-c906-46c6-a2cc-0c062e95046b" class="bulleted-list"><li style="list-style-type:disc">Supports load balancing to multiple applications on the same machine (eg. containers)</li></ul><ul id="3ce44fb7-93e7-4ca5-80ca-3bea068284bd" class="bulleted-list"><li style="list-style-type:disc">ALB terminates the original connection and creates a new connection to the EC2 instance</li></ul><ul id="e4ae5fde-3099-4ed5-b475-ff7652c7deb7" class="bulleted-list"><li style="list-style-type:disc">Support redirects (from HTTP to HTTPS for example)</li></ul><ul id="d58f030f-7911-418d-ac6d-b07c070a9364" class="bulleted-list"><li style="list-style-type:disc">Supports both internal and external traffic</li></ul><figure id="dc43d779-0ce5-49b7-9436-6fb3ac2081a4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(373).png"><img style="width:921px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(373).png"/></a></figure><ul id="915d9314-a007-469e-bdb4-159c1eee5c19" class="bulleted-list"><li style="list-style-type:disc">ALBs are a great fit for micro services &amp; container-based application (eg. Docker &amp; Amazon ECS)</li></ul><ul id="a001b3f1-bd72-4445-95c7-6b1c1d7fa3fb" class="bulleted-list"><li style="list-style-type:disc">Has a port mapping feature to redirect to a dynamic port in ECS</li></ul><ul id="d5c1763d-8a17-4adf-b544-1aff1e008cde" class="bulleted-list"><li style="list-style-type:disc">In case of CLB, we’d need one CLB per application whereas one ALB can balance the load on multiple applications.</li></ul><ul id="1e48f857-63cd-4eaa-bde6-6523f0cd1558" class="bulleted-list"><li style="list-style-type:disc">ALB also provides a fixed hostname (<a href="http://xxx.region.elb.amazonaws.com/">XXX.region.elb.amazonaws.com</a>) like CLB</li></ul><ul id="ce9346db-dcdb-4002-8b5e-80c6320d7b5e" class="bulleted-list"><li style="list-style-type:disc">The application servers don’t see the IP of the client (external user making the request) directly<ul id="c1381c79-6556-4837-942f-e376f9cd4d14" class="bulleted-list"><li style="list-style-type:circle">The true IP of the client is inserted in the header X-Forwarded-For</li></ul><ul id="91d32661-f9c9-4e2a-ac7a-834a35865fce" class="bulleted-list"><li style="list-style-type:circle">We can also get Port (X-Forwarded-Port) and protocol (X-Forwarded-Proto)</li></ul></li></ul><figure id="b75c759c-8f91-40d0-a465-c5ec20e437ea" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2052.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2052.png"/></a></figure></details></li></ul><ul id="16184b5f-6f9d-471f-8e93-5e45c3a1499c" class="toggle"><li><details open=""><summary>Target Groups</summary><ul id="b605194d-4e8a-4804-b445-257e2e2f916b" class="bulleted-list"><li style="list-style-type:disc">Target groups could be:<ul id="4206973e-6294-4403-9c80-044b6358fee4" class="bulleted-list"><li style="list-style-type:circle">EC2 instances (can be managed by an Auto Scaling Group) - HTTP</li></ul><ul id="30294fc7-42b3-46a8-b1c4-4070aa6f2d05" class="bulleted-list"><li style="list-style-type:circle">ECS tasks (managed by ECS itself) - HTTP</li></ul><ul id="c2648666-40c0-43dd-890a-01369d36218e" class="bulleted-list"><li style="list-style-type:circle">Lambda functions - HTTP request is translated into a JSON event</li></ul><ul id="49243ee1-283a-48d1-8017-9a8fb4e05d06" class="bulleted-list"><li style="list-style-type:circle">IP Addresses (must be private IPs)</li></ul><ul id="b1bb4e0b-6b3a-4b71-830b-bc66d99eff28" class="bulleted-list"><li style="list-style-type:circle">ALB can route to multiple target groups</li></ul></li></ul><ul id="0b8a64ff-ddff-4a5f-896b-54e9e78cb4a4" class="bulleted-list"><li style="list-style-type:disc">Traffic can be routed to different target groups based on:<ul id="01f0ea42-2a15-4f66-b201-59d393f55408" class="bulleted-list"><li style="list-style-type:circle">Path in URL (<a href="http://example.com/users">example.com/users</a> &amp; <a href="http://example.com/posts">example.com/posts</a>)</li></ul><ul id="ed649d56-93bb-4719-be00-a7348388624b" class="bulleted-list"><li style="list-style-type:circle">Hostname In URL (<a href="http://one.example.com/">one.example.com</a> &amp; <a href="http://other.example.com/">other.example.com</a>)</li></ul><ul id="f33e8971-eae3-4752-b10a-6553527996c3" class="bulleted-list"><li style="list-style-type:circle">Query String (<a href="http://example.com/users?id=123&amp;order=false">example.com/users?id=123&amp;order=false</a>)</li></ul><ul id="aa4e1892-99fb-439f-841e-83ff5212914f" class="bulleted-list"><li style="list-style-type:circle">Request Headers</li></ul><ul id="d4d48c4d-0ba1-4e00-aceb-70f60394a893" class="bulleted-list"><li style="list-style-type:circle">Source IP address</li></ul></li></ul><ul id="8cf49700-15aa-4f97-89c8-bd0a4bed8c9d" class="bulleted-list"><li style="list-style-type:disc">Health checks are done at the target group level</li></ul></details></li></ul><ul id="c0d64991-2fad-4c86-83ad-5c9b8930f2f8" class="toggle"><li><details open=""><summary>ALB (path routing)</summary><p id="79af743a-2a56-47fd-89c4-993301bd1c60" class="">In the diagram below, we have two micro services: <code>/user</code> and <code>/search</code>. Both of these services are balanced by a single ALB. Both the services are kept under separate target groups. The ALB determines which target group to balance for using the URL path in the incoming request.</p><figure id="8bfedade-1b17-4936-a2e8-b2505c4cbb26" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2053.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2053.png"/></a></figure></details></li></ul><ul id="d8d544ef-5534-4d1a-9e20-e522666dd6a3" class="toggle"><li><details open=""><summary>ALB (query string parameter routing)</summary><p id="5d223a41-2de7-4a2a-985a-15a9bb01dcc1" class="">We can balance loads for two different target groups based on some query string parameters.</p><figure id="e72673a9-01a6-454f-8074-bb50e7030f7a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2054.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2054.png"/></a></figure></details></li></ul></details></li></ul><ul id="ce595830-0d9d-470a-93ec-c44a7638ef2f" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="2d8be3f3-93a9-4dea-bd0c-b1932d3c5fe4" class="bulleted-list"><li style="list-style-type:disc">Create an ALB and attach EC2 instances to it<p id="8dadd0ff-90c7-4f2f-a50e-9f569ce07cef" class="">EC2 → Load Balancers → Create → ALB</p><p id="8125fa42-79cd-408d-9486-fc23a4b03afe" class="">EC2 instances will have to be added to target groups which can be created during the ALB creation.</p><p id="1bebc4f2-1ab7-436f-8df4-fce3e79fa83f" class="">Sample summary for reference.</p><figure id="c2b53caa-818e-4952-96e8-84695e1fa9ba" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2055.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2055.png"/></a></figure><p id="e80db0b7-9584-42b7-8940-ee25c40c32f1" class="">We can also create additional target groups later and add them by editing the rules of the listener on the ALB.</p><figure id="8a248c25-2f0e-4b9d-b630-878263b06252" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2056.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2056.png"/></a></figure></li></ul><ul id="f51431c2-26d6-42ff-9e67-a465a59dc23d" class="bulleted-list"><li style="list-style-type:disc">Edit listener rules<p id="528f6fb3-3b00-48a9-8e42-e9a3e2328bfb" class="">We can add rules to direct traffic to different target groups based on the IP, path, hostname, query string parameter etc. We can also return fixed response if required.</p><figure id="6a148a6b-868a-4129-a517-928024cd3f6c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2057.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2057.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="99ec0624-e1cd-46c9-be14-77540e5dfaff" class="toggle"><li><details open=""><summary>Network Load Balancer (NLB)</summary><ul id="8d05ad33-6ebc-4a0d-aa92-6a56b46f8eeb" class="toggle"><li><details open=""><summary>Theory</summary><ul id="50937908-bbf9-4ae4-9c65-08b020d9bd7f" class="toggle"><li><details open=""><summary>Intro</summary><ul id="dad17774-2431-45ac-9c40-424d205f1bce" class="bulleted-list"><li style="list-style-type:disc">v2 - new generation (started in 2017)</li></ul><ul id="83ebe9ac-c646-49a3-b299-9f21f0fcfaad" class="bulleted-list"><li style="list-style-type:disc">Supports Transport Layer (layer 4) traffic (TCP, TLS (secure TCP), UDP)</li></ul><ul id="1180c8aa-ae25-4a2b-ad05-cbc96c7839df" class="bulleted-list"><li style="list-style-type:disc">Forward TCP &amp; UDP traffic to your instances</li></ul><ul id="21e617cf-9547-477b-9da5-5b3188a56ee6" class="bulleted-list"><li style="list-style-type:disc">Can handle millions of request per seconds (extreme performance)</li></ul><ul id="1be88283-254e-45fc-8cf7-55b2bcb528c9" class="bulleted-list"><li style="list-style-type:disc">Less latency ~ 100 ms (vs 400 ms for ALB)</li></ul><ul id="553546db-87eb-4c6a-8bbb-bd01d08c77c3" class="bulleted-list"><li style="list-style-type:disc">NLB has one static IP per AZ (vs a static hostname for CLB &amp; ALB)</li></ul><ul id="36c16333-fccf-47b1-b379-5978708c8167" class="bulleted-list"><li style="list-style-type:disc">Maintains the same connection from client all the way to the instance</li></ul><ul id="380607e9-d70f-4ddd-894c-a829239747a0" class="bulleted-list"><li style="list-style-type:disc">No security groups can be attached to NLBs. So, the attached instances must allow TCP traffic on port 80 (HTTP) from anywhere (as if no ELB is attached).</li></ul><ul id="ec8cf14c-e27f-4a56-a91b-b036f14b2e61" class="bulleted-list"><li style="list-style-type:disc">Supports assigning Elastic IP (helpful for whitelisting specific IP)</li></ul><ul id="1bf11167-5fda-456a-a699-18b615c4614b" class="bulleted-list"><li style="list-style-type:disc">Not included in the AWS free tier</li></ul><ul id="6dcb70a1-b12d-4238-bf68-e98c4e08e3e0" class="bulleted-list"><li style="list-style-type:disc">We can configure rules to direct traffic to different target groups</li></ul><figure id="9177b52a-3a92-444e-8caf-98a1b5d28c83" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2058.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2058.png"/></a></figure></details></li></ul><ul id="fb2e9436-bf98-4701-b74b-8e4a8243231e" class="toggle"><li><details open=""><summary>Target Groups</summary><p id="6be6f247-c7b6-4a26-961f-b0de784a099d" class="">Within a target group, NLB can send traffic based on</p><ul id="d567330e-46ad-4c51-9ea7-33a04d4967fe" class="bulleted-list"><li style="list-style-type:disc">EC2 instances</li></ul><ul id="9006a2a9-3a22-442b-ac61-9f52494256da" class="bulleted-list"><li style="list-style-type:disc">IP addresses- must be private IPs</li></ul><ul id="e005909b-ac24-426b-8c1e-9e45afc8548e" class="bulleted-list"><li style="list-style-type:disc">Health Checks support the TCP, HTTP, HTTPS Protocols</li></ul><ul id="2fed9290-416d-4c6c-a8f9-d65aa75fb05b" class="bulleted-list"><li style="list-style-type:disc">Used when you want to balance load for a physical server having a static IP.</li></ul><ul id="347cd3ab-8756-46ac-b759-de1bced67e7f" class="bulleted-list"><li style="list-style-type:disc">Application Load Balancer (ALB)<ul id="c4224c79-a776-40e5-93c7-216967afbb94" class="bulleted-list"><li style="list-style-type:circle">This setup is used when you want a static IP provided by a NLB but also want to use the features provided by ALB at the application layer.</li></ul></li></ul><figure id="beaec246-e2ea-46aa-9469-7a0376fd9f93" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2059.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2059.png"/></a></figure></details></li></ul></details></li></ul><ul id="eed56e91-8396-46e9-9894-a9fd01062652" class="toggle"><li><details open=""><summary>Create a NLB and attach EC2 instances to it</summary><p id="10635fb6-081c-484a-9746-08e8d7eb56f6" class="">EC2 → Load Balancers → Create → NLB</p><p id="37f30a36-a3d5-460a-8891-9fe49abcb3de" class="">Separate target groups (that work on TCP) must be created for NLBs. Target groups created for ALB will not work with NLBs.</p><p id="71e723ea-1c26-41b7-b5c7-225d84dbeb64" class="">⛔ No security groups are attached to NLBs. They just forward the incoming traffic to the right target group as if those requests were directly coming from client. So, the attached instances must allow TCP traffic on port 80 from anywhere.</p></details></li></ul></details></li></ul><ul id="7658727a-32bd-47df-97ad-f3155ab2c7b1" class="toggle"><li><details open=""><summary>Gateway Load Balancer (GWLB)</summary><ul id="0e466997-258e-476f-943f-84d57de29d7d" class="toggle"><li><details open=""><summary>Intro</summary><ul id="4dea7bc6-92db-4773-9c75-ed2e0d0efa8f" class="bulleted-list"><li style="list-style-type:disc">Newest (started in 2020)</li></ul><ul id="58731e53-c09c-450a-9f65-582ee126e43e" class="bulleted-list"><li style="list-style-type:disc">Operates at layer 3 (Network layer) - IP Protocol</li></ul><ul id="78092bc8-bc1b-4cbd-b4a2-43397a18fcd9" class="bulleted-list"><li style="list-style-type:disc">Used to deploy, scale, and manage a fleet of 3rd party network virtual appliances in AWS. Example: Firewalls, Intrusion Detection and Prevention Systems (IDPS), Deep Packet Inspection Systems, payload manipulation, etc.</li></ul><ul id="dd85d403-7f99-48de-b3ba-a34be8048db7" class="bulleted-list"><li style="list-style-type:disc">Performs two functions:<ul id="3c0e0395-3528-4991-93a9-a27f394f6d83" class="bulleted-list"><li style="list-style-type:circle">Transparent Network Gateway (single entry/exit for all traffic)</li></ul><ul id="5b43aa3f-c84d-47e6-a11f-4d84cc638175" class="bulleted-list"><li style="list-style-type:circle">Load Balancer (distributes traffic to your virtual appliances)</li></ul></li></ul><ul id="a545c225-9d15-4075-bf0e-3d7acd16ee5c" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>Uses the GENEVE protocol on port 6081</strong></mark></li></ul><ul id="d4e25b62-0488-4a81-9e63-60e0c6439239" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, all of the external traffic is first sent to a fleet of EC2 instances to perform security check on the traffic. If the request passes the security check, it is then routed to the application.<figure id="3298f963-a93f-4506-b1a6-1de05c83bffe" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2060.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2060.png"/></a></figure></li></ul></details></li></ul><ul id="e4abf4ef-82c5-4798-8282-4c43f3e91258" class="toggle"><li><details open=""><summary>Target Groups</summary><p id="a0cf8d00-dade-44df-801f-82087b3007a7" class="">Target groups for GWLB will be the external appliances. They could be:</p><ul id="283679ca-432f-4322-bc0b-ce7899a245d6" class="bulleted-list"><li style="list-style-type:disc">EC2 instances</li></ul><ul id="1d179a5e-abf7-4e1a-8cf5-19a0eae72d4f" class="bulleted-list"><li style="list-style-type:disc">IP addresses - must be private IPs</li></ul><figure id="67f146c6-ffdf-448e-a9c6-ea27dd986dc6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2061.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2061.png"/></a></figure></details></li></ul></details></li></ul><ul id="057ed319-ae6c-4a6d-a220-264139013412" class="toggle"><li><details open=""><summary>Sticky Sessions (Session Affinity)</summary><ul id="946807cc-0f67-4960-a3f8-6e7fac2fc541" class="toggle"><li><details open=""><summary>Theory</summary><ul id="6a9635e2-995f-4a4b-9ef2-412e0b7ddbfa" class="toggle"><li><details open=""><summary>Intro</summary><p id="430b0a76-7690-4471-9971-50dac7a78695" class="">It is possible to implement stickiness so that the requests coming from a client is always redirected to the same instance behind the load balancer.</p><ul id="c786cc9e-0291-4e1b-85e4-6a85354ab6ea" class="bulleted-list"><li style="list-style-type:disc">It only works for CLB &amp; ALB</li></ul><ul id="d4dab808-75f4-444f-8413-8f1948d149f9" class="bulleted-list"><li style="list-style-type:disc">Cookie is used for stickiness. This cookie has an expiration date that you can control. After the cookie expires, the requests coming from the same user might be redirected to another instance.</li></ul><ul id="08ebf570-05cf-4bb4-b29a-daf83f1893dd" class="bulleted-list"><li style="list-style-type:disc">Use case: to make sure the user doesn’t lose his session data (example login info). If sticky session is not enabled, it will result in the user being prompted to login again and again if they just navigate to a different webpage.</li></ul><ul id="385b18fa-8a22-4e30-925a-1d45529b2c5d" class="bulleted-list"><li style="list-style-type:disc">Enabling stickiness may bring imbalance to the load over the backend EC2 instances<figure id="914845d8-193a-4c64-bd0f-2a1bc7a6c0a1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(375).png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(375).png"/></a></figure></li></ul></details></li></ul><ul id="91f69031-5650-42ed-90d9-211b86508bb1" class="toggle"><li><details open=""><summary>Cookie types</summary><ul id="0d00fab6-3c58-454d-a7b9-2e878feadd53" class="bulleted-list"><li style="list-style-type:disc">Application-based Cookies<ul id="830972a6-b810-4b4e-a52a-9b9793379d65" class="bulleted-list"><li style="list-style-type:circle">Custom cookie<ul id="1f2c2599-082b-42d8-871f-a08e3e3f183e" class="bulleted-list"><li style="list-style-type:square">Generated by the target (your application)</li></ul><ul id="5a53d3b5-d962-4a9b-8692-5bc088c60bd3" class="bulleted-list"><li style="list-style-type:square">Can include any custom attributes required by the application</li></ul><ul id="5b314a49-f41e-4bf1-a3ef-901e07d91258" class="bulleted-list"><li style="list-style-type:square">Cookie name must be specified individually for each target group</li></ul><ul id="939e3caf-0136-4b95-806b-b2f88c671d53" class="bulleted-list"><li style="list-style-type:square">Don’t use AWSALB, AWSALBAPP, or AWSALBTG (reserved for use by the ELB)</li></ul><ul id="63a9095a-bb12-452d-ab71-370c9f25eec0" class="bulleted-list"><li style="list-style-type:square">Duration of the cookie is specified by the application</li></ul></li></ul><ul id="c998416a-d239-4e29-844e-d1af803bfde1" class="bulleted-list"><li style="list-style-type:circle">Application cookie<ul id="8614a344-e94d-470f-95a4-47a72c9832cc" class="bulleted-list"><li style="list-style-type:square">Generated by the load balancer</li></ul><ul id="ffaafe6c-9a56-46fa-a841-ab0dc383bdec" class="bulleted-list"><li style="list-style-type:square">Cookie name is AWSALBAPP</li></ul></li></ul></li></ul><ul id="2c3ad832-c0dd-456a-b1d7-3a41e1b857a6" class="bulleted-list"><li style="list-style-type:disc">Duration-based Cookies<ul id="623f156e-9346-415d-85d2-4b505178cd2b" class="bulleted-list"><li style="list-style-type:circle">Generated by the load balancer</li></ul><ul id="f9019649-e701-45ad-9cbe-b4ffab012391" class="bulleted-list"><li style="list-style-type:circle">Cookie name is AWSALB for ALB, AWSELB for CLB</li></ul><ul id="57ddaa7e-5413-4128-86ac-c077309eaf0b" class="bulleted-list"><li style="list-style-type:circle">Duration of the cookie is specified by the load balancer</li></ul></li></ul></details></li></ul></details></li></ul><ul id="0c9e381e-0b46-4e1a-88ee-43ee3fe6b2ea" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="90521857-c481-4b94-aabc-3d98fdbabb19" class="bulleted-list"><li style="list-style-type:disc">Enable stickiness<p id="7b8608ce-ceb0-4c50-9b8d-6b2d70a36c8b" class="">EC2 → Target groups → Select target group → Actions → Edit attributes</p><p id="9d4bcf9e-03d2-4885-bf34-5dca7bc41b6f" class="">We have both Application based and Duration based cookie options. For Application based one, we need to specify the cookie name.</p><figure id="f9de321f-b886-4dcf-901a-4646b11147cf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2063.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2063.png"/></a></figure><p id="1ba77837-80f6-4a2a-ac0a-782b5875baa2" class="">Untitled</p></li></ul><ul id="b96c2251-4a57-419e-83c0-4a35ba5a69c5" class="bulleted-list"><li style="list-style-type:disc">View cookie<p id="e9acae63-0487-4ecf-b8bf-9c7f62dc42ff" class="">Inspect and send the request to the ALB. You can see the cookies being used.</p><figure id="5505d8ea-ed93-4a2a-add6-4fce337a306a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2064.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2064.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="7912c794-cd73-49c9-9645-1fb24e1d0f01" class="toggle"><li><details open=""><summary>Cross-zone load balancing</summary><ul id="c8fdd6ca-b39c-4ccd-a1f1-aa04b73f09fa" class="toggle"><li><details open=""><summary>Theory</summary><ul id="423c96e3-25ed-453c-b425-87bd25ca7a87" class="toggle"><li><details open=""><summary>Intro</summary><p id="2193cc68-96df-4f52-a80e-b4d521e8fc94" class="">Cross-zone load balancing allows ELBs in different AZs containing unbalanced number of instances to distribute the traffic evenly across all instances in all the AZs registered under a load balancer. A load balancer created for multiple AZs has different ELB instances for each AZ, even though they are part of a single load balancer.</p><p id="bf6b550c-9ba3-4cbe-a1ab-4383d7da722d" class="">In the diagram below, the client is sending 50% of the traffic to either load balancer. In case of cross-zone load balancing, the traffic coming through any of the load balancer is equally distributed across all instances registered under the load balancer. Without cross-zone load balancing, each load balancer distributes traffic within its AZ.</p><figure id="ae91a872-87e8-4dcd-840a-586a4e891576" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2065.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2065.png"/></a></figure></details></li></ul><ul id="caebe2dd-a54a-44de-bda7-d52b4784a2b6" class="toggle"><li><details open=""><summary>Supported load balancers</summary><ul id="d40ac3cb-72a4-474d-94fd-68ac49492409" class="bulleted-list"><li style="list-style-type:disc">Classic Load Balancer<ul id="18685bb8-1899-4344-bc28-fb52011d2ec9" class="bulleted-list"><li style="list-style-type:circle">Disabled by default</li></ul><ul id="e79cd48c-4388-419f-8dcd-079afad93908" class="bulleted-list"><li style="list-style-type:circle">No charges for inter AZ data if enabled</li></ul></li></ul><ul id="85ac9cf3-4756-454b-bc56-66224d5d2103" class="bulleted-list"><li style="list-style-type:disc">Application Load Balancer<ul id="d3db6cc1-3fb1-4175-9db8-46a547f0e7a9" class="bulleted-list"><li style="list-style-type:circle">Always on (can’t be disabled)</li></ul><ul id="98f1d0ff-a6c9-417c-b893-59791d41b09e" class="bulleted-list"><li style="list-style-type:circle">No charges for inter AZ data</li></ul></li></ul><ul id="aa720332-a316-4a0b-b0cf-8fcb7a5eb43a" class="bulleted-list"><li style="list-style-type:disc">Network Load Balancer<ul id="17e3e802-a7bb-4448-a7b1-e76041a3f54e" class="bulleted-list"><li style="list-style-type:circle">Disabled by default</li></ul><ul id="b771b3e5-d714-437e-9a13-d70b0165461f" class="bulleted-list"><li style="list-style-type:circle">You pay charges for inter AZ data if enabled</li></ul></li></ul></details></li></ul></details></li></ul><ul id="fedd554e-f2de-47c3-8ac9-ad7d2c5d4d89" class="toggle"><li><details open=""><summary>Enable cross-zone load balancing</summary><p id="6dd70674-b8d3-43ef-abae-461cb3f4f492" class="">EC2 → Load Balancers (CLB/NLB) → Select load balancer → Activate cross-zone load balancing in the attributes</p><p id="7f59581b-a1ed-4a1e-a3b1-0160db3b66d0" class="">ALB is enable by default</p></details></li></ul></details></li></ul><ul id="cbb7dd4f-08a7-48b4-9334-0944eab26923" class="toggle"><li><details open=""><summary>SSL / TLS Certificates</summary><ul id="9f87759b-de8a-4ca3-b790-e6fd8fec4cf9" class="toggle"><li><details open=""><summary>Intro</summary><ul id="7bbf0256-e5df-4e40-9563-ed3e85512b60" class="bulleted-list"><li style="list-style-type:disc">An SSL Certificate allows traffic between your clients and your load balancer to be encrypted in transit (in-flight encryption)</li></ul><ul id="783384d9-6dd3-4837-9304-ee35fcc5e03e" class="bulleted-list"><li style="list-style-type:disc">SSL refers to Secure Sockets Layer and it is used to encrypt connections</li></ul><ul id="8a6acd81-00f4-411e-8991-9769f7887d47" class="bulleted-list"><li style="list-style-type:disc">TLS refers to Transport Layer Security (newer version). Nowadays, TLS certificates are mainly used, but people still refer to them as SSL</li></ul><ul id="225a61eb-7003-4c4b-aef5-bb14f1ad5512" class="bulleted-list"><li style="list-style-type:disc">SSL certificates have an expiration date (you set) and must be renewed regularly to make sure they are authentic.</li></ul><ul id="761f18b8-5fc6-468d-b7bc-486d290f41a8" class="bulleted-list"><li style="list-style-type:disc">Public SSL certificates are issued by Certificate Authorities (CA) like Comodo, Symantec, GoDaddy, GlobalSign, Digicert, Letsencrypt, etc.</li></ul></details></li></ul><ul id="7b4ba8c5-6cc2-4885-bf40-b04e2aa182d4" class="toggle"><li><details open=""><summary>HTTPS encryption using SSL certificates</summary><p id="b4ab9045-03d8-4257-a96b-edb0c037fd17" class="">User to load balancer communication happens over HTTPS which is in-flight encrypted. Load balancer to EC2 instance communication happens over HTTP inside the VPC which is secure.</p><figure id="5f20ca22-dbb0-4b0e-a943-c71b3bd2923f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2066.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2066.png"/></a></figure><ul id="b7ee4b66-852e-4bfa-bc7e-855c550b3884" class="bulleted-list"><li style="list-style-type:disc">The load balancer uses an X.509 certificate (SSL/TLS server certificate)</li></ul><ul id="a9844b2f-e792-4ab3-aafc-10c5202bc235" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-yellow">You can manage certificates using ACM (AWS Certificate Manager) or you can create and upload your own certificates to ACM.</mark></li></ul><ul id="14f7076b-443b-476c-833a-bc88448d89f3" class="bulleted-list"><li style="list-style-type:disc">When you setup an HTTPS listener:<ul id="5fe50162-3f5e-494f-8421-20f86e429960" class="bulleted-list"><li style="list-style-type:circle">You must specify a default certificate</li></ul><ul id="8ffe430f-95fd-4a86-85db-b98125204af6" class="bulleted-list"><li style="list-style-type:circle">You can add an optional list of certs to support multiple domains</li></ul><ul id="0de7f6df-71e9-44c8-87af-51e29ffd4f1f" class="bulleted-list"><li style="list-style-type:circle">Clients can use SNI (Server Name Indication) to specify the hostname they reach</li></ul><ul id="8246ebd6-791c-4f40-9aea-3dd461ece38d" class="bulleted-list"><li style="list-style-type:circle">Ability to a specify a security policy to support older versions of SSL /TLS (legacy clients)</li></ul></li></ul></details></li></ul><ul id="a8def4fa-57aa-4fd9-a016-5ca0349e30c1" class="toggle"><li><details open=""><summary>Server Name Indication (SNI)</summary><ul id="853cb7db-1d11-481a-9b70-d8b869d0f503" class="bulleted-list"><li style="list-style-type:disc">SNI allows us to load multiple SSL certificates onto one web server (to serve multiple websites securely)</li></ul><ul id="1fc5adaa-82cf-4225-a3bb-2cf8954c761b" class="bulleted-list"><li style="list-style-type:disc">It’s a “newer” protocol, and requires the client to indicate the hostname of the target server in the initial SSL handshake. The server will then find the correct certificate to encrypt the traffic, or return the default one.</li></ul><ul id="39e7da2b-bcdb-4360-b35c-5fdbc87c6976" class="bulleted-list"><li style="list-style-type:disc">Since it is a newer protocol, not every client supports it yet.</li></ul><ul id="daf7e228-0236-4bc0-a872-a36640692e36" class="bulleted-list"><li style="list-style-type:disc">Only works for ALB &amp; NLB. They can load multiple certificates on each listener using SNI. Each certificate will be used for a separate target group.</li></ul><ul id="19ae4ef4-5c27-4c4d-bfca-840589d7324c" class="bulleted-list"><li style="list-style-type:disc">SNI is not supported in CLB. CLBs only support one SSL certificate. Need to use multiple CLBs for multiple hostnames in order to use multiple SSL certificates.</li></ul><ul id="0706ee74-2f48-4033-bdc3-a4c784313c7a" class="bulleted-list"><li style="list-style-type:disc">SNI is supported in CloudFront</li></ul><ul id="1ecffbce-16b4-48c0-a4b2-7d2dde91cdb3" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, the ALB is routing HTTPS traffic to two target groups, each with a different hostname. So, the ALB needs to have two SSL certificates (one for each target group). SNI allows the ALB to have multiple SSL certificates on one listener and use the right one.<figure id="a8c16c40-f444-4ef2-a334-c09d9c4b72d1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2067.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2067.png"/></a></figure><figure id="3109f7b4-1614-4aab-adc0-0e1c86dbef4e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(377).png"><img style="width:864px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(377).png"/></a></figure></li></ul><ul id="96d1a0c8-c6ed-49b2-b12a-42bae817e9ac" class="toggle"><li><details open=""><summary>Steps</summary><p id="e3ac8c76-c6ba-46b1-933a-6ac9287774ef" class="">Load Balancer → CLB → Listeners → edit → add → HTTPS → Cipher → SSL Certificate from ACM/Upload → Save</p><p id="a21489b7-7a10-463a-adcd-09555bbe0035" class="">
</p><p id="b837115c-19f3-402e-a319-d480dc14b6ce" class="">Load Balancer → ALB → Add listener → HTTPS → Default Action → Forward to → target ALB grp → Security Policy → Default SSL certificate → ACM/IAM/import → Add</p><p id="620fa98f-6c6f-4356-aba2-33fdd3408c9b" class="">
</p><p id="979225dc-18e4-4393-95ac-3c30beba27b5" class="">Load Balancer → NLB → Add listener → TLS → Default Action → Forward to → target ALB grp → Security Policy → Default SSL certificate → ACM/IAM/import → Add</p></details></li></ul></details></li></ul></details></li></ul><ul id="048b6916-00e4-49e6-a656-c9c864c43946" class="toggle"><li><details open=""><summary>Connection Draining / De-registration Delay</summary><ul id="bb912334-4eaa-4013-8045-682ae3e428ba" class="bulleted-list"><li style="list-style-type:disc">While the instance is de-registering or unhealthy (going offline), the “in-flight requests” being served by that instance are given time to complete before shutting down the instance. The ELB stops sending new requests to the EC2 instance which is de-registering.</li></ul><ul id="1fdb4ab3-5bed-46fe-9517-1648c7b5defb" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-brown"><strong>Called as Connection Draining for CLB and De-registration Delay for ALB &amp; NLB</strong></mark></li></ul><ul id="19704373-19db-4105-9f8e-fcf01fd348a0" class="bulleted-list"><li style="list-style-type:disc">The de-registration delay can be set manually (between 1 to 3600 seconds) (default: 300 seconds)</li></ul><ul id="9a3168a6-ef2c-46a6-9308-f0c316592d09" class="bulleted-list"><li style="list-style-type:disc">Set to a low value if your requests are short and vice versa</li></ul><ul id="50e7b053-42c2-46fb-b418-fdf6d0c2841d" class="bulleted-list"><li style="list-style-type:disc">Can be disabled (set value to 0)</li></ul><figure id="c87f1060-9341-42a0-9b6e-c64485411cd6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2068.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2068.png"/></a></figure></details></li></ul><ul id="b08e821e-f7a5-409d-837c-a0a2b04ac233" class="toggle"><li><details open=""><summary>Auto Scaling Groups (ASG)</summary><ul id="62d7157d-28be-4d4e-bf59-a99f41e2a1d8" class="toggle"><li><details open=""><summary>Theory</summary><ul id="e4147df0-f567-4b2e-a642-26887045a47f" class="toggle"><li><details open=""><summary>Purpose of ASG</summary><p id="11741217-dc29-4060-9e9c-4b11b9db586a" class="">In real life load on a website can change. ASG helps us to deal this issue.</p><ul id="ba25a95b-77c6-4fcd-9241-057052aacffa" class="bulleted-list"><li style="list-style-type:disc">Scale out (add EC2 instances) to match an increased load</li></ul><ul id="a31c309a-70c3-45b1-809a-14c1e9078c4e" class="bulleted-list"><li style="list-style-type:disc">Scale in (remove EC2 instances) to match a decreased load</li></ul><ul id="33eee335-b92e-4375-8b11-f31e087d40c1" class="bulleted-list"><li style="list-style-type:disc">Ensure we have a minimum and a maximum number of machines running</li></ul><ul id="189b557e-6fc2-4dec-abb0-a975834e6786" class="bulleted-list"><li style="list-style-type:disc">Automatically Register new instances to a load balancer</li></ul><ul id="191b33ea-c688-4af5-80f5-ae83b89abf06" class="bulleted-list"><li style="list-style-type:disc">Re-Create EC2 instance incase a previous one was terminated (eg: If Unhealthy)</li></ul><ul id="bf4b6147-529e-4880-b7b2-e2112560f877" class="bulleted-list"><li style="list-style-type:disc">ASG are free we only pay for the underlying EC2 instances</li></ul><figure id="f6fe0868-4519-4286-b8ad-6d72786b7b82" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(378).png"><img style="width:1602px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(378).png"/></a></figure><figure id="46b290b4-bbe3-4601-b85f-4fa600e29122" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(379).png"><img style="width:1735px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(379).png"/></a></figure></details></li></ul><ul id="66254a8c-5dc7-410c-96c8-4f8b60c9d585" class="toggle"><li><details open=""><summary>Attributes of ASG</summary><ul id="0d9221ce-1baf-4097-a1be-bd7a8982c8ba" class="bulleted-list"><li style="list-style-type:disc">A Launch Template (what type of instances will be created - older Launch Configurations are deprecated)<ul id="8ba6ea44-ead4-46dc-af99-87af9b57dcf2" class="bulleted-list"><li style="list-style-type:circle">AMI + Instance Type</li></ul><ul id="45353872-af68-4e26-95c4-95dee7c0eabb" class="bulleted-list"><li style="list-style-type:circle">EC2 User Data</li></ul><ul id="88c8ba94-dfd0-484f-834c-9c95e8e121ee" class="bulleted-list"><li style="list-style-type:circle">EBS Volumes</li></ul><ul id="fa04df89-08af-4ae2-ba59-273c73ee196b" class="bulleted-list"><li style="list-style-type:circle">Security Groups</li></ul><ul id="ed7fd99a-3ace-455d-9222-eba5061b575e" class="bulleted-list"><li style="list-style-type:circle">SSH Key Pair</li></ul><ul id="792d0d1d-92e8-467f-bc5f-2de03c004a24" class="bulleted-list"><li style="list-style-type:circle">IAM Roles for your EC2 instances</li></ul><ul id="8c1ac5c0-f4c9-442b-870d-661a3eb3bb6f" class="bulleted-list"><li style="list-style-type:circle">Network + Subnets Information</li></ul><ul id="b4b376b6-9ac7-4371-943f-3d713c7f25d9" class="bulleted-list"><li style="list-style-type:circle">Load Balancer Information</li></ul></li></ul><ul id="b847ada7-04b1-443d-ba3a-6607ce79525f" class="bulleted-list"><li style="list-style-type:disc">Min Size / Max Size / Initial Capacity</li></ul><ul id="90dc98b9-c0a8-4ca7-bc9c-f68e91b80eaa" class="bulleted-list"><li style="list-style-type:disc">Network + Subnets Information (where the instances will be created)</li></ul><ul id="94594050-068a-4bf2-bff4-485334a87836" class="bulleted-list"><li style="list-style-type:disc">Load Balancer Information (specify which ELB to attach instances to)</li></ul><ul id="0be03e8c-7d35-4aae-a56b-59364222845b" class="toggle"><li><details open=""><summary>Scaling Policies (specify what will trigger a scale out or scale in)</summary><figure id="71e22fc4-1877-4fe4-ab6a-eb30ddf81396" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(380).png"><img style="width:1666px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(380).png"/></a></figure><p id="938a830e-2306-47c2-8daa-acfdd6b4e0d0" class="">
</p><p id="1726f2f5-e628-4c46-9bda-b4a2b7d08bec" class="">new →</p><p id="43f6bd2d-a0b0-491c-859f-e22e1bd38e39" class="">Three type of scaling Policies:</p><ul id="2b327ec6-f703-4781-be70-527d43131c53" class="toggle"><li><details open=""><summary>Scheduled Scaling Policies</summary><ul id="1a4c8f57-f1b0-43cd-a073-c2e5ab49b4bc" class="bulleted-list"><li style="list-style-type:disc">Anticipate a scaling based on known usage patterns</li></ul><ul id="97db784e-55e7-4532-b712-6dd810224c16" class="bulleted-list"><li style="list-style-type:disc">Example: increase the min capacity to 10 at 5 pm on Fridays</li></ul></details></li></ul><ul id="1ebd1492-da59-4046-b828-37f0a050eae0" class="toggle"><li><details open=""><summary>Dynamic Scaling Policies</summary><ul id="1b919430-f115-4cd4-bf36-3cec70d2350d" class="bulleted-list"><li style="list-style-type:disc">Target Tracking Scaling<ul id="e1dd64b5-994c-45a8-8367-523a8e6f771d" class="bulleted-list"><li style="list-style-type:circle">Most simple and easy to set-up. Just ask the ASG to maintain a metric and scale accordingly. The ASG automatically creates cloudwatch alarms for this to work.</li></ul><ul id="f1bceedd-5046-44a3-8d54-1f1c988e4163" class="bulleted-list"><li style="list-style-type:circle">Example: I want the average ASG CPU to stay at around 40% and let ASG scale accordingly</li></ul></li></ul><ul id="e41a4917-9cda-45b9-8084-698f9f10ef61" class="bulleted-list"><li style="list-style-type:disc">Simple / Step Scaling<ul id="c96d7d6c-773a-4a10-aa4b-1f3657e9e2c2" class="bulleted-list"><li style="list-style-type:circle">Need to setup CloudWatch alarms and specify the actions.</li></ul><ul id="fe28ab8d-21e2-4f08-933e-72c4724d03f6" class="bulleted-list"><li style="list-style-type:circle">Example: When CPU &gt; 70%, then add 2 units and when CPU &lt; 30%, then remove 1 unit. CloudWatch alarms will be the trigger points in this case.</li></ul></li></ul></details></li></ul><ul id="d8bada19-be15-42d7-ab6b-224cf65ed29e" class="toggle"><li><details open=""><summary>Predictive Scaling Policies</summary><p id="f3c16a59-729a-439d-9c5f-0af02fe5bb62" class="">This is a new kind of scaling where the historical data is used to predict the load patterns using ML. We need to specify the metric based on which we want to scale our ASG and it will automatically create a forecast for that metric and scale accordingly.</p><figure id="284a86b4-857f-45dd-9a8c-f414254cc92c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2069.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2069.png"/></a></figure><p id="1cade23b-95f6-4376-b3a4-b8ccab3b8bef" class="">Untitled</p></details></li></ul><ul id="ee2558e0-ad7e-4a3b-9a10-a56c53252ba3" class="toggle"><li><details open=""><summary>Good metrics to scale on</summary><ul id="ec1be391-a877-4d7e-8293-5db856202678" class="bulleted-list"><li style="list-style-type:disc">CPU Utilization: average CPU utilization across your instances</li></ul><ul id="150fbf6b-a614-48e8-b028-ab1d9e82d4cc" class="bulleted-list"><li style="list-style-type:disc">RequestCountPerTarget: to make sure the number of requests per EC2 instances is stable</li></ul><ul id="0ee551ba-aceb-4006-9f13-290b96e1bda7" class="bulleted-list"><li style="list-style-type:disc">Average Network In / Out: if you’re application is network bound, meaning it involves a lot of download or upload and the network could become a bottleneck</li></ul><ul id="d77840d7-0b33-46b7-ba3f-106f487f6804" class="bulleted-list"><li style="list-style-type:disc">Any custom metric (that you push using CloudWatch)<p id="f9a63863-ff61-433a-9b8d-8419061f02b8" class="">We can auto scale based on a custom metric (ex: number of connected users). To set this up:</p><ol type="1" id="a51cc38c-181a-43c6-b245-f882c0965345" class="numbered-list" start="1"><li>Send custom metric from application on EC2 to CloudWatch using the PutMetric API</li></ol><ol type="1" id="9b6d5a92-b78e-441a-ba0f-eee9a52557f8" class="numbered-list" start="2"><li>Create CloudWatch alarm to react to low / high values</li></ol><ol type="1" id="a46ec8f7-ccf8-4d42-bdf1-aeceb5a5316c" class="numbered-list" start="3"><li>Use the CloudWatch alarm as the scaling policy for ASG</li></ol></li></ul></details></li></ul></details></li></ul></details></li></ul><p id="924bdb97-02ed-49df-aa02-140331021893" class="">
</p><p id="0646ebd1-ae05-4cd8-8f60-961f8e3b795a" class="">new →</p><ul id="506a0640-3e91-4ff1-acfc-a6e4a62e594f" class="toggle"><li><details open=""><summary>Important</summary><ul id="a421431c-eaff-4c5e-96a2-155472ce9f89" class="bulleted-list"><li style="list-style-type:disc">ASGs use Launch configurations or Launch Templates which are a newer version of launch configuration.</li></ul><ul id="55f213bb-03d9-4b81-8312-48d84b2eb6f5" class="bulleted-list"><li style="list-style-type:disc">To update an ASG, you must provide a new launch configuration / launch template</li></ul><ul id="97b9cc9e-8ef5-4eee-9f11-90d77a8c601c" class="bulleted-list"><li style="list-style-type:disc">IAM roles attached to an ASG will get assigned to EC2 instances</li></ul><ul id="df82e076-fb8f-4f41-a12e-075a52104cb1" class="bulleted-list"><li style="list-style-type:disc">ASGs are free. You pay for the underlying resources being launched</li></ul><ul id="4796e0a5-7b6e-4d9a-9054-9561e66951f1" class="bulleted-list"><li style="list-style-type:disc">Having instances under an ASG means that if they get terminated for whatever reason, the ASG will automatically create new ones as a replacement.</li></ul><ul id="90140546-d172-4932-a90d-02130280065c" class="bulleted-list"><li style="list-style-type:disc">ASG can terminate instances marked as unhealthy by an ELB (and hence replace them)</li></ul></details></li></ul><ul id="83ae6e7c-06c7-4c3d-8127-807239bfa623" class="toggle"><li><details open=""><summary>Default Termination Policy (simplified)</summary><p id="e05bda35-02d3-4a24-bb5b-6fec0bd08768" class="">Select the AZ with the most number of instances. If there are multiple instances in this AZ, delete the one with the <strong>oldest </strong>launch configuration. By default, ASG prioritizes to balance the number of instances across AZ.</p><p id="a9ddab7d-fa44-4656-8113-5234f5d16aca" class="">In the diagram below, if an instance has to be dropped, it will be a v1 instance in A.</p><figure id="b6b46542-6cd5-4c2b-9ed1-b1b33acfba59" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2070.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2070.png"/></a></figure><p id="8e9389f7-629f-4475-bfd6-511ee90bff5e" class="">
</p></details></li></ul><ul id="896e24cf-1019-4316-840d-1900d41c801f" class="toggle"><li><details open=""><summary>Lifecycle Hooks</summary><p id="262824ac-eb8e-414b-8624-bfade81a3bbb" class="">It is a feature of ASG which allows us to perform extra steps before creating or terminating an instance. Example: install some extra software or do some checks (during pending state) before declaring the instance as “in service”. Similarly, before the instance is terminated (terminating state), extract the log files.</p><p id="90911f56-75eb-47c2-9ed9-20bbe7341951" class="">Without lifecycle hooks, pending and terminating states are avoided.</p><figure id="7f7a5a1d-c519-499f-bb35-9f16187bc68c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2071.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2071.png"/></a></figure><p id="90f9dca9-3df4-470e-848f-e8d434e94397" class="">Untitled</p></details></li></ul><ul id="0a91271a-7092-4ddb-8ce8-a311cb82a812" class="toggle"><li><details open=""><summary>Launch Template vs Launch Configuration</summary><ul id="370f290d-c08c-4450-b8ba-fe1b6d07b27c" class="bulleted-list"><li style="list-style-type:disc">Both allow us to configure the ID of the AMI, the instance type, a key pair, security groups, and the other parameters that you use to launch EC2 instances (tags, EC2 user-data, etc.)</li></ul><ul id="2022916f-556d-403c-8aa3-06628a1f3226" class="bulleted-list"><li style="list-style-type:disc">Launch Configuration (legacy):<ul id="d21080e5-bcda-4c67-9200-2e7dfe3eed0c" class="bulleted-list"><li style="list-style-type:circle">Must be re-created every time you want to make some changes to the configuration</li></ul></li></ul><ul id="63863e91-6960-4ddd-94b5-9d620ba9f166" class="bulleted-list"><li style="list-style-type:disc">Launch Template (newer):<ul id="1f415fd4-52a8-408d-a079-c12d8e6e5584" class="bulleted-list"><li style="list-style-type:circle">Can have multiple versions</li></ul><ul id="706540ce-d2c0-4e0f-b1a5-4cab9b73e27a" class="bulleted-list"><li style="list-style-type:circle">Create parameters subsets (partial configuration for re-use and inheritance)</li></ul><ul id="b0243218-7149-4e3d-93d5-b9a5a0e30546" class="bulleted-list"><li style="list-style-type:circle">Provision using both On-Demand and Spot instances (or a mix)</li></ul><ul id="5ce46434-f4e5-49cd-b982-c3e35d55d1af" class="bulleted-list"><li style="list-style-type:circle">Can use T2 unlimited burst feature</li></ul><ul id="3fa3fa91-da14-44f5-858d-475993a7a94c" class="bulleted-list"><li style="list-style-type:circle">Recommended by AWS going forward</li></ul></li></ul></details></li></ul></details></li></ul><ul id="0e3381fe-d5e5-44ca-84e4-59092d5321f0" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="46ce0b3f-2de6-4c6a-b176-797346367b2a" class="toggle"><li><details open=""><summary>Create an ASG</summary><p id="b12a11f0-0400-409e-819d-759c9d6fc2e1" class="">EC2 → Auto Scaling Groups → Create ASG</p><p id="a1683432-2bf8-49d3-8a39-1c3ffca5b50f" class="">Create a launch template to configure the EC2 instances that ASG will be creating</p><p id="aa433127-a6c5-4698-bd0d-42dc2d1d9ca9" class="">Choose multiple AZs as ASG can balance the instance creation across all the zones.</p><p id="2d941bc3-39fa-48b2-a685-fc8535d945ad" class="">Attach a load balancer to the ASG</p><p id="c51c0e3f-3a32-40cd-9fa0-02ab77820ac8" class="">Enable health checks on both EC2 and ELB level</p><p id="37e48acd-6ab3-4ea4-a85e-b4753e91a269" class="">⛔ Right after creation, the ASG will automatically create EC2 instances based on the scaling policy or desired instances count.</p></details></li></ul><ul id="164278a9-29e6-42a3-89a4-125ae71ef8ca" class="toggle"><li><details open=""><summary>Setup Scaling Policies for ASG</summary><ul id="5d03b0ca-7e31-4a10-aa95-4f28fd3cadfd" class="bulleted-list"><li style="list-style-type:disc">Navigate to Scaling Policies<p id="21035cc2-0643-4fed-9d34-e482f6508fa2" class="">Select the ASG → Automatic Scaling (tab)</p><figure id="786e49a2-c8cc-4c0c-9961-d58041f369f6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2072.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2072.png"/></a></figure><p id="70ebd762-d06c-4a32-909f-e874f260fb43" class="">Untitled</p></li></ul><ul id="54739962-6cde-4800-af8b-23ab45119b23" class="bulleted-list"><li style="list-style-type:disc">Dynamic Scaling<ul id="768f900e-7e42-4a66-b4a8-e89dbc430837" class="bulleted-list"><li style="list-style-type:circle">Target Scaling<p id="89cf1cf6-496e-4a68-b604-0c4e3b55e7c9" class="">Just specify the metric and target value to maintain. The ASG will scale accordingly by automatically setting up cloudwatch alarms that trigger the scaling action.</p><figure id="4320e51c-80e1-4d14-bcb5-135d37db5e72" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2073.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2073.png"/></a></figure><p id="7c34e088-3c45-4d6a-a0cb-852306f2859a" class="">Untitled</p><figure id="5d3c10c8-4b01-4572-80c6-de8aa35bee46" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2074.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2074.png"/></a></figure><p id="ffd51712-47fb-4e63-9b79-370c37cccb06" class="">Untitled</p></li></ul><ul id="ae0c0cf1-2a3f-439a-9381-d19e84e6674f" class="bulleted-list"><li style="list-style-type:circle">Simple Scaling<p id="542ebb3f-aeb8-4c8b-948a-a1d7300811f8" class="">Here, we need to specify a CloudWatch alarm and the action.</p><figure id="a46e28da-ba93-4e78-b434-c1f55a5c8004" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2075.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2075.png"/></a></figure><p id="4de62e0d-ea32-4279-9d6b-136757bdcf30" class="">Untitled</p></li></ul><ul id="1995adbc-1229-48f2-b579-7767e979c825" class="bulleted-list"><li style="list-style-type:circle">Step Scaling<p id="cdd2d51f-f9c9-4002-80f9-8b846c94a0ae" class="">Like simple scaling, but we can specify steps to scale gradually.</p><figure id="fbfa68b4-699a-4c45-ad16-48a7e23fadc5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2076.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2076.png"/></a></figure><p id="6b2bee13-0e16-4ccf-8481-fcdab9696b01" class="">Untitled</p></li></ul></li></ul><ul id="a7958205-738f-4ec8-8ac8-db88efa67e75" class="bulleted-list"><li style="list-style-type:disc">Test scaling by stressing the EC2 instance<p id="d3469cb9-7e49-4d81-b07b-e63b2814ff7a" class="">Connect to an EC2 instance and install stress by running these two linux commands:</p><p id="a17851f7-b9c4-4340-ae26-876b3719c0ac" class=""><code>sudo amazon-linux-extras install epel -y</code></p><p id="285cbe22-8214-42bc-9a4a-02bf3bc128ed" class=""><code>sudo yum install stress -y</code></p><p id="6df9a162-cc45-49b0-9757-47de27c5d166" class="">After installing:</p><p id="25b0e11c-e59b-4070-a64b-085723d00d7a" class="">Stress 4 vCPUs: <code>stress -c 4</code></p><p id="bf06a25e-8ab4-4697-871f-4f855addc867" class="">This will make the CPU utilization go up and should trigger scaling if your metric was set to CPU utilization.</p><p id="17044e82-4f62-45f6-927f-0e7aa363cb07" class="">To stop the stressing, reboot all the active instances.</p></li></ul></details></li></ul></details></li></ul><ul id="16385a89-e715-432e-8a44-f1ab751128cc" class="toggle"><li><details open=""><summary>Scaling Policies</summary><p id="e45e986d-751e-40dd-b882-d8b51412b4ba" class="">Two types of scaling Policies</p><ul id="b6da5624-de24-4897-8b49-062e48885120" class="toggle"><li><details open=""><summary>Dynamic Scaling Policies</summary><ul id="b698da6e-5c63-41b0-98db-7286bf52bf1b" class="bulleted-list"><li style="list-style-type:disc">Scheduled Actions<ul id="04f2b2dd-70e9-4caf-8458-6f71ede0b042" class="bulleted-list"><li style="list-style-type:circle">Anticipate a scaling based on known usage patterns</li></ul><ul id="756f955d-3e6d-47f2-813b-e82e2f177366" class="bulleted-list"><li style="list-style-type:circle">Example: increase the min capacity to 10 at 5 pm on Fridays</li></ul></li></ul><ul id="4b00ff87-b371-4508-ace4-d9f551931ce2" class="bulleted-list"><li style="list-style-type:disc">Target Tracking Scaling<ul id="3c66ca5c-a9b4-44ca-81d8-e21e6ce90d32" class="bulleted-list"><li style="list-style-type:circle">Most simple and easy to set-up. Just ask the ASG to maintain a metric and scale accordingly. The ASG automatically creates cloudwatch alarms for this to work.</li></ul><ul id="19a9c9e9-bea4-4bd2-a05c-5ca64b679d4f" class="bulleted-list"><li style="list-style-type:circle">Example: I want the average ASG CPU to stay at around 40% and let ASG scale accordingly</li></ul></li></ul><ul id="1960dffb-74ce-4a67-8407-1f5d999f9fa7" class="bulleted-list"><li style="list-style-type:disc">Simple / Step Scaling<ul id="7eaf35c6-f9de-44cc-84e5-5f957d888281" class="bulleted-list"><li style="list-style-type:circle">Need to setup CloudWatch alarms and specify the actions.</li></ul><ul id="4c56e6f9-56ba-431d-84ac-07804610d8fc" class="bulleted-list"><li style="list-style-type:circle">Example: When CPU &gt; 70%, then add 2 units and when CPU &lt; 30%, then remove 1 unit. CloudWatch alarms will be the trigger points in this case.</li></ul></li></ul></details></li></ul><ul id="9d0b2ffb-c8c7-4aea-8251-a9484b906372" class="toggle"><li><details open=""><summary>Predictive Scaling Policies</summary><p id="28611954-d528-48d3-9763-66d50f201de4" class="">This is a new kind of scaling where the historical data is used to predict the load patterns using ML forecast load and schedule scaling ahead. We need to specify the metric based on which we want to scale our ASG and it will automatically create a forecast for that metric and scale accordingly.</p><figure id="05f5903b-86b4-4ea3-bc3a-d0335e156b1c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2069.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2069.png"/></a></figure></details></li></ul><ul id="b745e05d-b66b-4fc6-b63e-60b332a799e8" class="toggle"><li><details open=""><summary>Good metrics to scale on</summary><ul id="4968d98c-39e2-48ce-a2e3-a6f7e4d5643b" class="bulleted-list"><li style="list-style-type:disc">CPU Utilization: average CPU utilization across your instances</li></ul><ul id="92196574-e869-4c3d-b097-906830100e32" class="bulleted-list"><li style="list-style-type:disc">RequestCountPerTarget: to make sure the number of requests per EC2 instances is stable</li></ul><ul id="58ad903b-7a31-4420-9588-4d0801c630ad" class="bulleted-list"><li style="list-style-type:disc">Average Network In / Out: if you’re application is network bound, meaning it involves a lot of download or upload and the network could become a bottleneck</li></ul><ul id="87cc08c1-84ef-4a0a-b940-7a083457171c" class="bulleted-list"><li style="list-style-type:disc">Any custom metric (that you push using CloudWatch)<p id="ccfa2eeb-a9f7-4f54-a956-36ea2440453f" class="">We can auto scale based on a custom metric (ex: number of connected users). To set this up:</p><ol type="1" id="5bfe74bc-27d0-4543-9ccb-7a7386c5909d" class="numbered-list" start="1"><li>Send custom metric from application on EC2 to CloudWatch using the PutMetric API</li></ol><ol type="1" id="bf57bf1c-5e46-4ef3-a43f-ee65a8b381c7" class="numbered-list" start="2"><li>Create CloudWatch alarm to react to low / high values</li></ol><ol type="1" id="c823a959-3e3f-4d30-966a-011bc57dd7d0" class="numbered-list" start="3"><li>Use the CloudWatch alarm as the scaling policy for ASG</li></ol></li></ul></details></li></ul></details></li></ul><ul id="cf2252c8-c3a6-4ac0-a710-95d96ce360e6" class="toggle"><li><details open=""><summary>Scaling Cooldown</summary><p id="e3861e45-4457-4245-a3de-e18c02d16b6f" class="">After a scaling activity happens, the ASG is in a cooldown period (default 300 seconds) during which it will not launch or terminate additional instances (it will ignore scaling requests) to allow the metrics to stabilize.</p><blockquote id="960fa76a-7465-458c-b095-f2ee0a24986c" class="">Use a ready-to-use AMI to reduce configuration time in order to be serving request fasters and reduce the cooldown period.</blockquote></details></li></ul></details></li></ul></div><h3 id="23b6d3f0-545c-41aa-9aa2-2f0fec05df72" class=""><details open=""><summary>Section 9: AWS Fundamentals: RDS + Aurora + ElastiCache</summary></details></h3><div class="indented"><ul id="349d6f50-ecf1-4405-8f86-26dd889aa18d" class="toggle"><li><details open=""><summary>Relational Database Service (RDS)</summary><ul id="4bce30f8-4284-4212-a29e-24b0d12fd864" class="toggle"><li><details open=""><summary>Theory</summary><ul id="b437b0ca-3f3a-465a-acee-b52a0915e4df" class="toggle"><li><details open=""><summary>Intro</summary><ul id="eb7b6ded-ee27-4139-9b41-9310e8c5090f" class="bulleted-list"><li style="list-style-type:disc">It’s a managed DB service where SQL is used as the query language.</li></ul><ul id="2a42cf17-15a5-4100-8784-a9091ee3611f" class="bulleted-list"><li style="list-style-type:disc">Supported database engines:<ul id="7bc86889-2cad-43bb-91b4-d0c804c4068b" class="bulleted-list"><li style="list-style-type:circle">Postgres</li></ul><ul id="69d0c0b0-56b8-48de-a4b2-7fe4167cceed" class="bulleted-list"><li style="list-style-type:circle">MySQL</li></ul><ul id="80cacafe-8564-4871-992e-0b13c84916af" class="bulleted-list"><li style="list-style-type:circle">MariaDB</li></ul><ul id="2ef19741-db95-4c87-aaf9-8efb14db502c" class="bulleted-list"><li style="list-style-type:circle">Oracle</li></ul><ul id="10681122-207d-4b67-b04f-57a21c86f0cc" class="bulleted-list"><li style="list-style-type:circle">Microsoft SQL Server</li></ul><ul id="5a4c3215-4620-4523-83e6-d73694136996" class="bulleted-list"><li style="list-style-type:circle">Aurora (AWS Proprietary database)</li></ul></li></ul><ul id="5a2e5be9-c08c-4117-8549-d0fba47554d7" class="bulleted-list"><li style="list-style-type:disc">Automated provisioning, OS patching</li></ul><ul id="f6b33dc3-ff1a-44cc-8e16-b663ca71e61c" class="bulleted-list"><li style="list-style-type:disc">Continuous backups and restore to specific timestamp (Point in Time Restore)</li></ul><ul id="eca7474c-31fe-4cb5-a262-ab36ef8d5079" class="bulleted-list"><li style="list-style-type:disc">Monitoring dashboards</li></ul><ul id="b5fc7292-d533-4149-842b-7d98cbc1c2e0" class="bulleted-list"><li style="list-style-type:disc">Read replicas for improved read performance</li></ul><ul id="ffde5b8a-9015-441d-9514-c6100e061591" class="bulleted-list"><li style="list-style-type:disc">Multi AZ setup for DR (Disaster Recovery)</li></ul><ul id="0f657334-13d5-481e-b994-26b2060b3d9a" class="bulleted-list"><li style="list-style-type:disc">Maintenance windows for upgrades</li></ul><ul id="2f4bb4cc-8ec7-450e-bc5b-69168a311863" class="bulleted-list"><li style="list-style-type:disc">Scaling capability (vertical and horizontal)</li></ul><ul id="48022681-60e3-4964-a468-476fd3ff259c" class="bulleted-list"><li style="list-style-type:disc">Storage backed by EBS (gp2 or io1)</li></ul><ul id="2d4be8cf-551b-474e-bb75-2ead0e88583b" class="bulleted-list"><li style="list-style-type:disc">You can’t SSH into your RDS instances. Since RDS is managed by AWS, we don’t have access to the underlying EC2 instances.</li></ul></details></li></ul><ul id="1a708aff-4755-4ad6-b7f3-e48878747837" class="toggle"><li><details open=""><summary>Storage Auto Scaling</summary><ul id="4a6cf6c0-6568-4215-88cf-96120d10a282" class="bulleted-list"><li style="list-style-type:disc">Helps you increase storage on your RDS DB instance dynamically. When RDS detects that your DB is running out of free space, it scales automatically within a maximum storage threshold (set by you).</li></ul><ul id="9663dc2e-d6e1-4b24-98f6-21369a0d8705" class="bulleted-list"><li style="list-style-type:disc">Condition for automatic storage scaling:<ul id="fdff66e3-52a4-4c57-8a80-9fdf4e13fa9c" class="bulleted-list"><li style="list-style-type:circle">Free storage is less than 10% of allocated storage</li></ul><ul id="aa840802-ce4b-46f9-a8a0-b01fa9465fbe" class="bulleted-list"><li style="list-style-type:circle">Low-storage lasts at least 5 minutes</li></ul><ul id="ee6856cb-9d8d-4841-92be-fe347a8b0d76" class="bulleted-list"><li style="list-style-type:circle">6 hours have passed since last modification</li></ul></li></ul><ul id="9ffdffdb-ffd4-4e56-a203-d0656f7cd76a" class="bulleted-list"><li style="list-style-type:disc">Avoids manually scaling your database storage</li></ul><ul id="3118bf07-eca8-468c-845f-eb7229621d52" class="bulleted-list"><li style="list-style-type:disc">Useful for applications with unpredictable workloads</li></ul><ul id="3183aba8-7bc1-462d-9f25-484d59d8a057" class="bulleted-list"><li style="list-style-type:disc">Supports all RDS database engines (MariaDB, MySQL, PostgreSQL, SQL Server, Oracle.</li></ul><figure id="0aa4709a-b2a9-4d73-8dea-e5bcc43b6b4c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2077.png"><img style="width:240px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2077.png"/></a></figure></details></li></ul><ul id="7a23f593-d02f-497a-8600-91afec28cc9f" class="toggle"><li><details open=""><summary><mark class="highlight-red"><strong>RDS Read Replicas</strong></mark></summary><ul id="e79d10b8-32f3-4b20-a40f-51c45ae11d0b" class="toggle"><li><details open=""><summary>Intro</summary><ul id="d5e8a607-de83-48a7-b640-6bf1c60909f5" class="bulleted-list"><li style="list-style-type:disc">Read Replicas allow us to scale the read operation on RDS. This is done by creating up to 5 replicas of the original DB within AZ, cross AZ or cross region.</li></ul><ul id="8ee5659c-b8e9-4381-adda-dc7ea04f2b1a" class="bulleted-list"><li style="list-style-type:disc">Replication is asynchronous, so reads are eventually consistent. This means if the application reads some data from any of the replicas before the new data is replicated, the application might receive the old data. Example: You have set up read replicas on your RDS database, but users are complaining that upon updating their social media posts, they do not see their updated posts right away.</li></ul><ul id="1eaf37f2-b303-4a5b-a86e-e6fac700c6e9" class="bulleted-list"><li style="list-style-type:disc">Replicas can be promoted to their own DB</li></ul><ul id="b0537983-a7d8-46ba-abbf-9c3f83db25c2" class="bulleted-list"><li style="list-style-type:disc">Applications must update the connection string to leverage read replicas</li></ul><ul id="c031bb23-1a10-436e-a488-ec859a579aac" class="bulleted-list"><li style="list-style-type:disc">Read replicas are used for SELECT (read only kind of statements not INSERT, UPDATE, DELETE)</li></ul><figure id="79a2f5d7-410e-4f00-8629-edd2e28ddc21" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2078.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2078.png"/></a></figure></details></li></ul><ul id="5464347f-4cc3-4a0a-a848-e6ea104b720e" class="toggle"><li><details open=""><summary>Use case</summary><p id="609b10bf-8c46-4c6e-8f62-3b44051f85a5" class="">You have a production database that is taking on normal load. Now, the analytics team informs you that they want to use the database to run some analytics. So, if you allow them to read the data off the original DB, it might slow down your application. Instead, you create a Read Replica to run the new workload there. This way the production application is unaffected.</p><p id="ac5d6f13-3a9a-473f-b126-007201451936" class=""><strong>It is for SELECT (=read) only kinds of statements (Not INSERT, UPDATE, DELETE)</strong></p><figure id="944c550b-fccb-465d-9c5e-d448557787a0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2079.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2079.png"/></a></figure></details></li></ul><ul id="b2b95d54-60b2-4f99-baf9-baad88b27ffb" class="toggle"><li><details open=""><summary>Network Cost</summary><p id="73b0d651-3b32-48a9-8310-5d09e1a971c1" class="">In AWS there’s usually a network cost when data moves from one AZ to another. For RDS Read Replicas, if your replicas are in the same region (even if in different AZ) as the original instance, you don’t incur the network cost. However, if your replica is in a different region than the original database, then you will incur the network cost (replication fee).</p><figure id="d7e26138-a438-46d4-9134-5bc90cb27fb6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2080.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2080.png"/></a></figure></details></li></ul></details></li></ul><ul id="409fcc40-7c2f-475a-806f-4d4b539bee87" class="toggle"><li><details open=""><summary>RDS Multi AZ (disaster recovery)</summary><ul id="9a816e02-42f0-42d1-8c0c-bc4b2387c00e" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3973ef41-de83-407b-896f-ce77a1c1b3f1" class="bulleted-list"><li style="list-style-type:disc">Multi AZ is a feature that enables data redundancy for disaster recovery and hence increases the availability of the RDS database. This is done by synchronously replicating the the master database to standby database in another AZ. So, any change to be made to the master database is also made in parallel to the standby instance.</li></ul><ul id="3829b37b-9a8d-466e-83c1-56a92ca1954b" class="bulleted-list"><li style="list-style-type:disc">Both the databases can be accessed by one DNS name, which allows for automatic app failover to standby database. Failover can occur in case of loss of AZ, loss of network, instance or storage failure. In these cases the standby database will become the new master.</li></ul><ul id="11595901-b5dc-40f6-a6fd-3da15256b29b" class="bulleted-list"><li style="list-style-type:disc">Connection string does not require to be updated</li></ul><ul id="6609b934-2ee1-431a-996d-15a673410cd2" class="bulleted-list"><li style="list-style-type:disc">No manual intervention is required on the application end</li></ul><ul id="ea14ed4d-5b8e-4253-8076-53712bb2485c" class="bulleted-list"><li style="list-style-type:disc">Cannot be used for scaling as the standby database cannot take read/write operation.</li></ul><p id="cf2af328-01f6-4f76-95e9-dbef9290d1d0" class=""><strong>⛔ Read Replicas can be setup as Multi AZ for Disaster Recovery. In that case, the replication will be asynchronous.</strong></p><figure id="9a9eb8ec-0d84-499a-a859-3604329b901c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2081.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2081.png"/></a></figure></details></li></ul><ul id="ec5b3b5a-2b80-4975-9ded-bdd2f8fb58f7" class="toggle"><li><details open=""><summary>Moving from Single AZ to Multi AZ</summary><p id="53527b10-639e-4189-a4f0-8ce1c70a4307" class="">Zero downtime operation (no need to stop the DB). Just click on ‘modify’ on the database configuration.</p><p id="03f0f668-ed13-42b3-900e-1bb65aacd50c" class="">The following happens internally:</p><ol type="1" id="fe671708-bf2f-4b53-ba62-ad7ce6d8bd92" class="numbered-list" start="1"><li>A snapshot of the master DB is taken</li></ol><ol type="1" id="d61311c2-05e8-49ed-833b-359bf3d5dedd" class="numbered-list" start="2"><li>A new DB is restored from the snapshot in a new AZ</li></ol><ol type="1" id="e1399ede-d667-43ba-9363-686c403d788b" class="numbered-list" start="3"><li>Synchronization is established between the two databases</li></ol><figure id="ab31a1aa-be59-45e0-b40a-30d3b9b9d7cc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2082.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2082.png"/></a></figure></details></li></ul></details></li></ul><ul id="506d6ae6-9cb9-4089-b741-a7a5abcff846" class="toggle"><li><details open=""><summary>RDS Custom</summary><figure id="3d1116e3-e425-4262-b063-2648b1f99f86" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(381).png"><img style="width:1755px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(381).png"/></a></figure></details></li></ul><p id="bbbdabf2-e9f4-4502-8608-d873f43da780" class="">
</p><p id="11bf7882-1e97-4ecb-9500-634b3cd0776f" class="">new →</p><ul id="42bde1f9-b165-4a93-80de-8208383bf7bc" class="toggle"><li><details open=""><summary>Backups</summary><ul id="7d23ca31-a64d-4b9c-84d2-e65df146ea84" class="bulleted-list"><li style="list-style-type:disc">Automated Backups (automatically enabled in RDS)<ul id="6f3fd1e4-461a-4407-989c-c89ae75c9745" class="bulleted-list"><li style="list-style-type:circle">Daily full backup of the database (during the maintenance window that you define)</li></ul><ul id="43f7df08-f963-4008-8e83-0d5a097ca0a9" class="bulleted-list"><li style="list-style-type:circle">Transaction logs are backed-up by RDS every 5 minutes which gives us the ability to restore to any point in time (from oldest backup to 5 minutes ago)</li></ul><ul id="67b9c07f-fe23-4c71-9af2-f232a2edeb7b" class="bulleted-list"><li style="list-style-type:circle">7 days retention (can be increased to 35 days)</li></ul></li></ul><ul id="32f7757e-10df-43bc-a85c-2e03184ca0cf" class="bulleted-list"><li style="list-style-type:disc">DB Snapshots:<ul id="3d2b1ec9-d963-4b7a-9fb3-a3ccb28c9a1b" class="bulleted-list"><li style="list-style-type:circle">Manually triggered by the user</li></ul><ul id="ba9d5e95-82a6-47f0-80ac-dd6d6f8a2991" class="bulleted-list"><li style="list-style-type:circle">Retention of backup for as long as you want</li></ul></li></ul></details></li></ul><ul id="e4629b2d-5972-487a-a0d1-3a7cb2ce8045" class="toggle"><li><details open=""><summary>Encryption</summary><ul id="dbdfcc51-699c-4f4e-9ebc-ecfa6c554865" class="toggle"><li><details open=""><summary>Intro</summary><ul id="f67f465c-6846-44e7-99d0-b51a9a110a5e" class="toggle"><li><details open=""><summary>At rest encryption</summary><ul id="58733be0-51ec-468e-9031-b9f1c73f6a8e" class="bulleted-list"><li style="list-style-type:disc">Possibility to encrypt the master &amp; read replicas with AWS KMS AES-256 encryption</li></ul><ul id="ffa21578-3322-4cef-a2d5-a4de12ecaf27" class="bulleted-list"><li style="list-style-type:disc">Encryption has to be defined while creating the database</li></ul><ul id="413d2eef-81c2-4c1f-9c16-b80e1404e5f0" class="bulleted-list"><li style="list-style-type:disc">If the master is not encrypted, the read replicas cannot be encrypted</li></ul><ul id="abc84dd9-4582-4ed5-94f1-e29671667792" class="bulleted-list"><li style="list-style-type:disc">Transparent Data Encryption (TE) available for Oracle and SQL Server (alternative way of encrypting)</li></ul><ul id="3bdae229-cbdd-448c-848e-b9774956312c" class="bulleted-list"><li style="list-style-type:disc">Snapshots of un-encrypted RDS databases are un-encrypted</li></ul><ul id="62dcc6ff-8c70-43d1-bd99-31e1bd0e7cc0" class="bulleted-list"><li style="list-style-type:disc">Snapshots of encrypted RDS databases are encrypted</li></ul></details></li></ul><ul id="827368e9-f12a-48b3-8950-8feed98136ff" class="toggle"><li><details open=""><summary>In-flight encryption</summary><ul id="9310ccd6-14a2-4d2a-b5a0-51cafd09245c" class="bulleted-list"><li style="list-style-type:disc">SSL certificates are required to encrypt data to RDS in flight</li></ul><ul id="916720ac-cb7a-48e7-9829-5b7ad417ef71" class="bulleted-list"><li style="list-style-type:disc">Need to provide SSL options with trust certificate when connecting to database</li></ul><ul id="f405c040-a94f-430d-a172-f5ab7d41f678" class="bulleted-list"><li style="list-style-type:disc">To enforce SSL:<ul id="414a4792-8a1f-401a-911a-dcfcf2a5fd1d" class="bulleted-list"><li style="list-style-type:circle">PostgreSQL: rds.force_ssl=1 in the AWS RDS Console (Parameter Group)</li></ul><ul id="4a9042f4-2547-43ae-b712-25c74ebe4bd4" class="bulleted-list"><li style="list-style-type:circle">MySQL: Within the DB: GRANT USAGE ON ** TO ‘mysqluser’@‘%’ REQUIRE SSL; (SQL command)</li></ul></li></ul></details></li></ul></details></li></ul><ul id="e0890f8f-e0ca-495d-9057-b7b49ac859f9" class="toggle"><li><details open=""><summary>Encryption Operations</summary><ul id="4cf81488-19b4-495f-8267-cfb8a7514197" class="bulleted-list"><li style="list-style-type:disc">Encrypting RDS snapshots<ul id="27cb7f61-9e6e-4d1c-a3dd-b3f1b8f8bd86" class="bulleted-list"><li style="list-style-type:circle">Take a snapshot of the RDS (unencrypted)</li></ul><ul id="0762175d-13b6-4a0d-bf4d-91b2c8adda59" class="bulleted-list"><li style="list-style-type:circle">Copy the snapshot and enable encryption for it</li></ul></li></ul><ul id="ef4f657a-cd2c-4c1a-919c-05493577537a" class="bulleted-list"><li style="list-style-type:disc">To encrypt an un-encrypted RDS database:<ul id="5dad798d-2990-4a17-b700-2f109b77ddcf" class="bulleted-list"><li style="list-style-type:circle">Create a snapshot of the un-encrypted database</li></ul><ul id="863f1de8-839c-4156-b64e-d9faacbde15d" class="bulleted-list"><li style="list-style-type:circle">Copy the snapshot and enable encryption for the snapshot</li></ul><ul id="5cff7598-060d-4a2c-bec1-9f61c367a1e7" class="bulleted-list"><li style="list-style-type:circle">Restore the database from the encrypted snapshot</li></ul><ul id="eae41005-0bc2-49e3-bc25-ed110601e107" class="bulleted-list"><li style="list-style-type:circle">Migrate applications to the new database, and delete the old database</li></ul></li></ul></details></li></ul></details></li></ul><ul id="b20166da-ea27-4539-aab5-2c2a9a1c2ed1" class="toggle"><li><details open=""><summary>Network Security</summary><ul id="15f085ff-929e-4150-b6e1-a1ea64a193a0" class="bulleted-list"><li style="list-style-type:disc">RDS databases are usually deployed within a private subnet, not in a public one</li></ul><ul id="99fca1c9-8b57-40df-9da6-9a4e1fbf2540" class="bulleted-list"><li style="list-style-type:disc">RDS security works by leveraging security groups (the same concept as for EC2 instances) it controls which IP / security group can communicate with RDS</li></ul></details></li></ul><ul id="36e608cb-b0af-4b3d-bf80-e42b872454dc" class="toggle"><li><details open=""><summary>IAM</summary><ul id="c0e3011c-22fe-4097-88ee-a3367f43e6f3" class="bulleted-list"><li style="list-style-type:disc">IAM policies help control who can <strong>manage</strong> (create or modify) AWS RDS (through the RDS API)</li></ul><ul id="ad4e5ddb-d22e-4485-a92e-1848c1f3c828" class="bulleted-list"><li style="list-style-type:disc">Traditional Username and Password can be used to login into the database</li></ul><ul id="4e6d19d5-df10-4867-b742-a8c9172b876f" class="bulleted-list"><li style="list-style-type:disc">IAM-based authentication can be used to login into RDS MySQL &amp; PostgreSQL<p id="d75d9a05-8c78-40d4-8887-cbff14ce6edb" class="">In the diagram below, the EC2 instance has an IAM role which allows is to make an API call to the RDS service to get the Auth token which it uses to access the MySQL database.</p><figure id="b63440ab-f1c2-4059-97d9-b61264987292" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2083.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2083.png"/></a></figure><ul id="f5e49b08-fa09-429d-8fc6-8407d2a093f3" class="bulleted-list"><li style="list-style-type:circle">To access the database, you don’t need a password, just an authentication token obtained through IAM &amp; RDS API calls</li></ul><ul id="16cc9e63-35bc-4c7d-919a-c113e34b00d1" class="bulleted-list"><li style="list-style-type:circle">IAM database authentication works with MySQL and PostgreSQL</li></ul><ul id="f6afbdfb-d965-4c9c-88e6-4461cbc1318f" class="bulleted-list"><li style="list-style-type:circle">Auth token has a lifetime of 15 minutes</li></ul><ul id="12f8770c-ab3d-4047-ad52-963860970b3b" class="bulleted-list"><li style="list-style-type:circle">Benefits:<ul id="7a3749ee-4e18-432e-a8d4-dbe0378151aa" class="bulleted-list"><li style="list-style-type:square">Network in/out is encrypted using SSL</li></ul><ul id="45297a8e-18e8-47ff-a2dc-7af726f12c5d" class="bulleted-list"><li style="list-style-type:square">Users are centrally managed by IAM instead of RDS</li></ul><ul id="e0d3c6f3-0559-4085-87b1-6fdaf41eb6a5" class="bulleted-list"><li style="list-style-type:square">Can leverage IAM Roles and EC2 Instance profiles for easy integration</li></ul></li></ul></li></ul></details></li></ul><ul id="8d306a86-3179-41b4-90f4-87df9ad6fde2" class="toggle"><li><details open=""><summary>Responsibilities</summary><p id="ff65c578-5d2f-4db6-8c73-86b50c10cf0d" class="">Your responsibility:</p><ul id="6d4b8d83-ecd9-4630-ac34-a68a8b56665c" class="bulleted-list"><li style="list-style-type:disc">Check the ports / IP / security group inbound rules in DB’s SG</li></ul><ul id="fbfe75d8-04f1-425d-bd17-51ae076f0700" class="bulleted-list"><li style="list-style-type:disc">In-database user creation and permissions or manage through IAM</li></ul><ul id="84c451a1-7f68-44c6-a8f2-029519e402f2" class="bulleted-list"><li style="list-style-type:disc">Creating a database with or without public access</li></ul><ul id="b6da9051-d61b-4af0-9cc4-95797818311c" class="bulleted-list"><li style="list-style-type:disc">Ensure parameter groups or DB is configured to only allow SSL connections</li></ul><p id="73463169-b44c-4a51-97a7-956443dfbba2" class="">AWS responsibility:</p><ul id="07d13be9-41d9-4b08-bc22-a3fdbc8ef8bf" class="bulleted-list"><li style="list-style-type:disc">No SSH access</li></ul><ul id="d65f07ce-7af3-4ad4-82a9-33565de409a8" class="bulleted-list"><li style="list-style-type:disc">No manual DB patching</li></ul><ul id="21c36b9e-0fa7-49d0-b9a2-abec8afcc96e" class="bulleted-list"><li style="list-style-type:disc">No manual OS patching</li></ul><ul id="bf851512-9fc9-4e96-bb58-1c252fe03aa4" class="bulleted-list"><li style="list-style-type:disc">No way to audit the underlying instance</li></ul></details></li></ul></details></li></ul><ul id="18418253-d5db-435f-aa17-775975677dc6" class="toggle"><li><details open=""><summary>Hands On</summary><ul id="75871f8c-10cb-4fc8-8de5-ba5e6b85f822" class="bulleted-list"><li style="list-style-type:disc">Create an RDS database<p id="7abbdfc9-30d2-46da-ad0a-ec2171986bba" class="">RDS → Databases → Create database</p><p id="850d7f23-2af5-444b-a749-3a2ed39d38b3" class="">Engine type: MySQL</p><p id="f536f728-ab50-45e1-b6f4-bb392ab8b3ff" class="">Template: production</p><p id="2da23290-7d8a-4ffd-9423-a56fa9d45968" class="">Credentials: arkalim : guitar123</p><p id="407edc50-173b-4158-979f-d8819f915033" class="">DB instance class: burstable (for free tier)</p><p id="5e4cfd30-dc11-469f-b419-4aeba99c5e52" class="">Instance type: t2micro</p><p id="eb5bb000-fd09-408d-8279-2a3d5d80d273" class="">Storage type: gp2</p><p id="1076cc10-dd38-4d73-8a3e-0e4872f9d161" class="">Public Access: enabled (for accessing via the internet)</p><p id="5cae41db-e3f2-413a-90d9-055038bb8a01" class="">⛔ The security group that you create during the RDS database creation will only allow incoming TCP traffic on <mark class="highlight-yellow">port 3306</mark> (DB port) from your public IP at the time of creating the database. So, if you don’t have a static IP, you need to modify the security group to allow incoming traffic from anywhere.</p></li></ul><ul id="811d61b9-615d-4924-9670-745be91050be" class="bulleted-list"><li style="list-style-type:disc">Connect to RDS database<p id="91fb01fd-0cbd-4f0f-a21f-d86ada2d7d28" class="">Download SQL electron GUI (DB client)</p><p id="82d37f98-5619-4dfc-98f3-5db48d043713" class=""><a href="https://sqlectron.github.io/">Sqlectron - One single DB client for any relational DB</a></p><p id="750fde3e-8283-41ef-821c-72ec92a8811c" class="">Open SQL Electron and create a new connection using the RDS endpoint as the server address.</p><figure id="63578bb2-8444-4a93-b1af-2c83cb8e34a8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2084.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2084.png"/></a></figure><p id="f183c3d2-7277-4554-b3a2-19aa931e49b7" class="">Once connected, we can run SQL queries.</p></li></ul><ul id="759e7a06-0f55-4ca5-a013-6db254b4457b" class="bulleted-list"><li style="list-style-type:disc">Delete an RDS database<p id="54d2082f-094d-4732-b5c4-0521cd295682" class="">Select the DB → Modify → Disable deletion protection → Select the DB → Action → Delete</p></li></ul></details></li></ul></details></li></ul><ul id="a89fb0f1-bc2c-4209-a860-bf019310560a" class="toggle"><li><details open=""><summary>Amazon Aurora (part of RDS)</summary><ul id="c2590c80-850e-4a8d-af48-9e880ebaeaa9" class="toggle"><li><details open=""><summary>Intro</summary><ul id="cf071648-5d00-4870-ae8c-60be251a789d" class="bulleted-list"><li style="list-style-type:disc">Aurora is a proprietary technology from AWS (not open sourced)</li></ul><ul id="7ee8c255-5bc8-42c5-92e5-77d649c2b450" class="bulleted-list"><li style="list-style-type:disc">Postgres and MySQL are both supported as Aurora DB (that means your drivers will work as if Aurora was a Postgres or MySQL database)</li></ul><ul id="b7c1453d-8af7-4caf-84bb-f8dea0ef445a" class="bulleted-list"><li style="list-style-type:disc">Aurora is “AWS cloud optimized” and claims 5x performance improvement over MySQL on RDS, over 3x the performance of Postgres on RDS</li></ul><ul id="9dd4733b-4ed6-4284-93fd-c05e6b6d6be8" class="bulleted-list"><li style="list-style-type:disc">Aurora storage automatically grows in increments of 10GB, up to 128 TB (best feature)</li></ul><ul id="299ba117-10f8-4ecb-800c-270e8b92c63b" class="bulleted-list"><li style="list-style-type:disc">Aurora can have 15 replicas while MySQL has 5, and the replication process is faster (sub 10 ms replica lag)</li></ul><ul id="2096db84-06ab-4e94-af7e-fa1d243dbd2a" class="bulleted-list"><li style="list-style-type:disc">Failover in Aurora is instantaneous</li></ul><ul id="197d9d22-dd71-4131-ad0f-967d704935fb" class="bulleted-list"><li style="list-style-type:disc">Natively supports High Availability</li></ul><ul id="e08a78bf-0adb-4d16-9b79-200d8b6e7533" class="bulleted-list"><li style="list-style-type:disc">Aurora costs more than RDS (20% more) but is more efficient</li></ul></details></li></ul><ul id="c7348c31-dd56-4b9c-88e6-5928857a4c7a" class="toggle"><li><details open=""><summary>High Availability and Read Scaling</summary><p id="60f45e4a-db78-473f-81e9-e1e7166a8e16" class="">In the diagram below, each color square represents a unit of data. So, in total 6 copies of a data is maintained across 3 AZ. Also, one master and 5 read replicas are present.</p><figure id="ab0d41a2-f6ac-4fb5-8345-56de13e742e7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2085.png"><img style="width:384px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2085.png"/></a></figure><ul id="fc1fb832-a77a-4e01-959f-e80664d492ce" class="bulleted-list"><li style="list-style-type:disc">Aurora maintains 6 copies of your data across 3 AZ:<ul id="926aea74-1fc4-4449-b502-dc0e62f3c752" class="bulleted-list"><li style="list-style-type:circle">4 copies out of 6 needed for writes (can still write if 1 AZ completely fails)</li></ul><ul id="2a1044f0-1ad2-4afc-93e5-ccb60620e8a5" class="bulleted-list"><li style="list-style-type:circle">3 copies out of 6 need for reads</li></ul></li></ul><ul id="a52adafa-f168-44d8-bbd5-8117ce42022d" class="bulleted-list"><li style="list-style-type:disc">Self healing with peer-to-peer replication (if some data is corrupted, it will be automatically healed)</li></ul><ul id="a80dfb5a-1023-4628-af79-efdd5ee5075e" class="bulleted-list"><li style="list-style-type:disc">Storage is striped across 100s of volumes (more resilient)</li></ul><ul id="521e44f3-9df0-4320-a829-33e503fe7916" class="bulleted-list"><li style="list-style-type:disc">Only one Aurora instance (master) takes writes. But master + up to 15 Aurora Read Replicas can serve reads</li></ul><ul id="f2837078-2651-4896-8adc-a9978f7d6b79" class="bulleted-list"><li style="list-style-type:disc">Automated failover for master in less than 30 seconds. So, if the master is down, one of the read replicas will replace it as the new master within 30 seconds.</li></ul><ul id="a4bd7de9-c8d5-4d45-be07-b6dcc5b07761" class="bulleted-list"><li style="list-style-type:disc">Support for Cross Region Replication</li></ul></details></li></ul><ul id="5bc2922d-b24e-426d-9d17-88c3d10baeba" class="toggle"><li><details open=""><summary>Aurora DB Cluster</summary><p id="a866c32b-a6d3-407a-8a67-2e8a946edd0d" class="">The Aurora DB cluster consists of a master DB and some read replicas. Only the master is allowed to perform write operations. So, there is a writer endpoint (always pointing to the master) which is used by the client to write data into the DB. The read replicas have auto scaling which can dynamically change the number of read replicas at a given point in time. So, there is load balancing implemented at the connection level (not at the statement level). So, all the read replicas are connected to the reader endpoint which is used by the client to read data from DB.</p><p id="88aed1b0-d6ee-434b-8aee-63e3de9b01c3" class="">⛔ Aurora also features multi-master which allows multiple write instances to be connected to the same storage</p><figure id="23ad8864-c0bf-4599-857b-12807eee011f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2086.png"><img style="width:528px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2086.png"/></a></figure></details></li></ul><ul id="9c0e7a7d-955d-45af-ae46-5da76769f5fb" class="toggle"><li><details open=""><summary>Features of Aurora</summary><ul id="eb885678-e373-4595-bd5a-813f2413f7fd" class="bulleted-list"><li style="list-style-type:disc">Automatic fail-over</li></ul><ul id="3c3e2faf-2653-4761-8792-4d1eb6443cdc" class="bulleted-list"><li style="list-style-type:disc">Backup and Recovery</li></ul><ul id="24e18c6f-ae7a-4304-8387-4257878eb265" class="bulleted-list"><li style="list-style-type:disc">Isolation and security</li></ul><ul id="6cc0caa7-6bf9-4baa-a41f-35c06cbeb216" class="bulleted-list"><li style="list-style-type:disc">Industry compliance</li></ul><ul id="c7e70551-4dfe-4056-86a0-41358f7a6e72" class="bulleted-list"><li style="list-style-type:disc">Push-button scaling</li></ul><ul id="7873e816-c6a6-467b-a5b7-495458ce6c81" class="bulleted-list"><li style="list-style-type:disc">Automated Patching with Zero Downtime</li></ul><ul id="81f67658-2645-4c7f-a38a-d92c09958b25" class="bulleted-list"><li style="list-style-type:disc">Advanced Monitoring</li></ul><ul id="b2c01c40-e41e-41e7-a135-34d2ffe97dca" class="bulleted-list"><li style="list-style-type:disc">Routine Maintenance</li></ul><ul id="89ba03dd-1e36-41fc-875f-26eac325cded" class="bulleted-list"><li style="list-style-type:disc">Backtrack: restore data at any point of time without using backups (amazing feature)</li></ul></details></li></ul><ul id="cc7bfae0-aee2-4762-820e-b52b0790900c" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="2c6b6a54-ca25-4250-97ae-4e95ca6e4d4a" class="toggle"><li><details open=""><summary>Create an Aurora DB</summary><p id="62207030-5884-4402-a799-5b1cec402750" class="">RDS → Create database</p><p id="7798cd83-57b5-4ffa-abdc-abb81900b6bf" class="">Engine type: Aurora</p><p id="538d7893-90af-4dea-b7c5-eb133e1a2905" class="">DB type: t3.small</p><p id="518652cc-9e27-4f76-b807-d0baf564b9ae" class="">Once created, the Aurora cluster will contain 2 instances (reader and writer). Both of these instances will have separate endpoints (reader and writer endpoints) which can be used by the application to read / write data into the DB. Since, I enabled multi AZ instance creation, the reader and writer instances are in different AZs.</p><figure id="8f53f1ab-dda6-4c2b-9c5e-738dddd6aa17" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2087.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2087.png"/></a></figure><p id="12d8da1b-f33b-46a2-9da5-b7189bfa007b" class="">Untitled</p><p id="63dc136d-3b42-4af8-9ca5-7e81d89c4559" class="">We can also add a reader to the cluster or create a cross-region read replica.</p><figure id="9bb377b1-223d-4516-a04c-050aeeab3df2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2088.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2088.png"/></a></figure><p id="796874d5-f230-413a-b3bb-c0b4ee996a68" class="">Untitled</p></details></li></ul><ul id="6f8b76a6-2a38-4b26-874b-a555e34107cd" class="toggle"><li><details open=""><summary>Add replica auto scaling</summary><p id="1df2a85c-1ee7-48bd-9ba7-b6a4008a2949" class="">This allows the read replicas to auto scale horizontally based on the target metric.</p><p id="570c62a3-4222-44ec-92ae-ecee4bdaf080" class="">RDS → Databases → Select database → Actions → Add replica auto scaling</p><figure id="d8f5ab5f-3ebf-4a8f-843e-72f14d0963b7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2089.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2089.png"/></a></figure><p id="18b98f15-7306-4e03-b2f6-58dd61cc0a7d" class="">Untitled</p><figure id="0d5811b2-03e0-4e15-b6ac-ea1ee255dae3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2090.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2090.png"/></a></figure><p id="7944bd61-988a-4a13-b3c9-b300df0d8727" class="">Untitled</p></details></li></ul><ul id="c569cc45-f6b0-4e35-8ae5-d5b44c7fbfe6" class="toggle"><li><details open=""><summary>Delete Aurora DB Cluster</summary><p id="6ecc2d53-2eb0-4565-a27e-54f3a567e7da" class="">Select the cluster → Modify → Disable deletion protection</p><p id="103a6a52-ce03-4ce1-b83e-45c8adb47da8" class="">Delete all the reader and writer instances under the Aurora cluster</p><p id="81648f7e-a70c-4c25-afbb-62562faa4279" class="">This will automatically delete the cluster</p></details></li></ul></details></li></ul><ul id="0c52f57d-09fe-4148-aa14-5242e236707a" class="toggle"><li><details open=""><summary>Advanced Concepts</summary><ul id="3a1614b3-ec26-4eec-b346-5203484d0803" class="toggle"><li><details open=""><summary>Aurora Replicas - Auto Scaling</summary><figure id="c28591b8-bd9f-46f6-809f-cd75e9cd21eb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(382).png"><img style="width:1584px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(382).png"/></a></figure></details></li></ul><ul id="3bcfcf4d-7f38-4928-8135-f3f463d90f0a" class="toggle"><li><details open=""><summary>Custom Endpoints</summary><p id="56d5bba6-2989-4225-b830-dede79b79357" class="">You would create multiple custom endpoints and therefore query a subset of the replicas.</p><figure id="d485f2ec-2e15-4c8f-ad3b-bf23956b5df5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(383).png"><img style="width:1697px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(383).png"/></a></figure></details></li></ul><ul id="713fe116-536a-479b-b8c1-bb5b49af3b68" class="toggle"><li><details open=""><summary>Aurora Serverless</summary><ul id="90b7ef10-2095-4abb-b911-b45e93352964" class="bulleted-list"><li style="list-style-type:disc">Automated database instantiation and auto scaling based on actual usage</li></ul><ul id="a9d6bc8d-4d6c-48ed-be68-98397ee5923d" class="bulleted-list"><li style="list-style-type:disc">Good for infrequent, intermittent or unpredictable workloads</li></ul><ul id="0cd6c800-b8c9-4ade-943f-ba9c3dbcd2df" class="bulleted-list"><li style="list-style-type:disc">No capacity planning needed in advance</li></ul><ul id="7c2efe0d-d469-4eca-8426-cf748487330f" class="bulleted-list"><li style="list-style-type:disc">Pay per second, can be more cost-effective</li></ul><figure id="0e45efac-5a8a-410c-85cd-30f7cfb5eea5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2091.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2091.png"/></a></figure></details></li></ul><ul id="8dc1b559-0440-4c0d-b168-1476a632d04a" class="toggle"><li><details open=""><summary>Aurora Multi-master</summary><ul id="08409aec-8030-4e86-81d0-8cd110eedaaa" class="bulleted-list"><li style="list-style-type:disc">If this is enabled, every node (replica) in the cluster does read and write.</li></ul><ul id="46503b98-7260-4380-abea-993e9458cfbe" class="bulleted-list"><li style="list-style-type:disc">This should be used in case you want immediate failover for write node (high availability in terms of write). If multi-master is disabled and the master node fails, you need to promote a Read Replica as the new master (will take some time).</li></ul><ul id="16c0e077-b015-4868-b57e-42b1524e9eed" class="bulleted-list"><li style="list-style-type:disc">In this case, the client is going to have multiple DB connections for failover.<figure id="38929f7c-0c1f-49fd-9150-c8a1478029a5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2092.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2092.png"/></a></figure></li></ul></details></li></ul><ul id="8f722717-1dac-47ac-845d-9f4dc2fcf45d" class="toggle"><li><details open=""><summary>Global Aurora</summary><p id="d2bdef71-cb29-490d-87fc-4150e6aae186" class="">Aurora Cross Region Read Replicas:</p><ul id="4da94858-c268-4cdc-8468-e2a84bf26d81" class="bulleted-list"><li style="list-style-type:disc">Read replicas are created in other regions</li></ul><ul id="d97acaa4-ccba-4e1d-989f-ba95644b3ee0" class="bulleted-list"><li style="list-style-type:disc">Useful for disaster recovery</li></ul><ul id="9897aeab-8363-4795-ba55-3bd31e2b469e" class="bulleted-list"><li style="list-style-type:disc">Simple to put in place</li></ul><p id="e48ae95e-8aa3-4f79-84bc-44bcfe94880c" class="">Aurora Global Database (recommended):</p><ul id="8baa51df-51f9-4e6e-916f-d5adedf13a20" class="bulleted-list"><li style="list-style-type:disc">Entire database is replicated across regions</li></ul><ul id="def1b6f5-a484-488f-96d4-44ae31b9e081" class="bulleted-list"><li style="list-style-type:disc">1 Primary Region (read / write)</li></ul><ul id="407033ca-9d53-43e0-accc-946d52f78ef9" class="bulleted-list"><li style="list-style-type:disc">Up to 5 secondary (read-only) regions (replication lag &lt; 1 second)</li></ul><ul id="de58864d-472e-484d-a574-f366c1a86876" class="bulleted-list"><li style="list-style-type:disc">Up to 16 Read Replicas per secondary region</li></ul><ul id="3225cffe-0676-4a28-8bb0-551c7640e757" class="bulleted-list"><li style="list-style-type:disc">Helps for decreasing latency (for clients in other geographical regions)</li></ul><ul id="50e8e0b8-61c1-4b35-a0da-eda17f50a14e" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>In case there is a database outage in one region, promoting another region (for disaster recovery) has an RTO (recovery time objective) of less than 1 minute.</strong></mark><figure id="b933d395-398e-4fad-891a-676af16ce753" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2093.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2093.png"/></a></figure></li></ul></details></li></ul><ul id="24345256-53a6-4605-b3d9-3f5b7edcbaf7" class="toggle"><li><details open=""><summary>Machine Learning (ML)</summary><ul id="af0f0a8a-17f3-43fa-8ad2-42bea1045c18" class="bulleted-list"><li style="list-style-type:disc">Enables you to add ML-based predictions to your applications via SQL</li></ul><ul id="db829457-bb0e-46db-81ff-18deebdc5037" class="bulleted-list"><li style="list-style-type:disc">Simple, optimized, and secure integration between Aurora and AWS ML services</li></ul><ul id="b8896648-e11e-458a-8ed0-45debcce09d5" class="bulleted-list"><li style="list-style-type:disc">Supported services<ul id="1695d3fa-bf25-4b3e-850d-e8efa2554ee4" class="bulleted-list"><li style="list-style-type:circle">Amazon Sage Maker (create any ML model in the backend)</li></ul><ul id="85f60e65-ab5c-48e9-ad2c-352ae47df5f7" class="bulleted-list"><li style="list-style-type:circle">Amazon Comprehend (for sentiment analysis)</li></ul></li></ul><ul id="50f011d6-3787-4772-8e16-a5da62b83fe9" class="bulleted-list"><li style="list-style-type:disc">You don’t need to have ML experience</li></ul><ul id="95c51b51-a594-4772-9a78-d2e29dc51a96" class="bulleted-list"><li style="list-style-type:disc">Use cases: fraud detection, ads targeting, sentiment analysis, product recommendations</li></ul><figure id="e3fd2fad-a700-48b0-b04e-674a67426a5f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2094.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2094.png"/></a></figure></details></li></ul></details></li></ul><ul id="081b5c8a-24ee-4d35-bcd5-a964db9a26f7" class="toggle"><li><details open=""><summary>RDS and Aurora - Backup and Monitoring</summary><figure id="f1822629-1b6e-464a-9b7d-992f35d88b07" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(384).png"><img style="width:936px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(384).png"/></a></figure><figure id="e4f29a44-741f-4b38-aab3-31603fe0957b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(385).png"><img style="width:932px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(385).png"/></a></figure><figure id="cde51741-2f52-449c-b217-16df4f8abc25" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(386).png"><img style="width:959px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(386).png"/></a></figure><figure id="25b9844b-8e1f-487d-a134-2f84cf25b1c5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(387).png"><img style="width:914px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(387).png"/></a></figure></details></li></ul><ul id="0e875100-b25d-41d4-a82c-ac02245e1266" class="toggle"><li><details open=""><summary>Security</summary><figure id="bae980b3-7f54-4686-bb37-cc4f7cfb874c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(388).png"><img style="width:929px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(388).png"/></a></figure></details></li></ul><ul id="98a60f37-07a7-4d5d-880e-7f56ddcad31f" class="toggle"><li><details open=""><summary>RDS Proxy</summary><figure id="e0bd2186-ff51-498a-b4b3-e0c88eed3896" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(389).png"><img style="width:624px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(389).png"/></a></figure></details></li></ul></details></li></ul><ul id="ef50535c-da7a-4a89-b1e2-0a1096112f66" class="toggle"><li><details open=""><summary>Amazon ElastiCache</summary><ul id="b859786b-f0fe-47ac-96e6-3cecd116f729" class="toggle"><li><details open=""><summary>Theory</summary><ul id="6352d1c6-c379-4119-bbe9-41a86abc51ef" class="toggle"><li><details open=""><summary>Intro</summary><ul id="88481c8f-5f88-4fe9-8f4c-36aedd06b331" class="bulleted-list"><li style="list-style-type:disc">ElastiCache is a AWS managed caching service</li></ul><ul id="9024c8c8-97ec-4ed6-a981-f98f6423c46c" class="bulleted-list"><li style="list-style-type:disc">It is used to get managed Redis or Memcached</li></ul><ul id="45cef655-838d-40b2-b91c-91c97f00a39d" class="bulleted-list"><li style="list-style-type:disc">The same way RDS is to get managed Relational Databases..…</li></ul><ul id="4e6864f2-9046-47cc-9a44-6d9694170c5a" class="bulleted-list"><li style="list-style-type:disc">Caches are in-memory databases with really high performance and low latency.</li></ul><ul id="d3ed4388-16ef-4c2b-8f4d-23c5a5b6e84d" class="bulleted-list"><li style="list-style-type:disc">Helps reduce load off of databases for read intensive workloads. Common read operations are served from the cache which makes the application faster.</li></ul><ul id="2a29eb2f-018b-4dd1-8f87-5568c47b5d00" class="bulleted-list"><li style="list-style-type:disc">ElastiCache helps make your application stateless because the application doesn’t have to cache locally.</li></ul><ul id="bd7fcf91-3a7a-45e4-bef1-6bed18cbbd42" class="bulleted-list"><li style="list-style-type:disc">AWS takes care of OS maintenance / patching, optimizations, setup, configuration, monitoring, failure recovery and backups</li></ul><ul id="d6364437-39ce-4984-b872-b7481601a479" class="bulleted-list"><li style="list-style-type:disc">Using ElastiCache involves heavy application code changes (setup the application to query the cache before and after querying the database)</li></ul></details></li></ul><ul id="81b8f154-60cf-44a0-a495-40d2606e9f02" class="toggle"><li><details open=""><summary>Usage Architecture</summary><ul id="5ebad508-04b8-4587-b702-1d4742c8449a" class="toggle"><li><details open=""><summary>DB Cache (lazy loading)</summary><p id="12e0f994-c064-46b5-8a37-b16a7fadddb6" class="">Here, ElastiCache is used as a cache for the RDS which reduces read loads on the database. It is called lazy loading because only when we have a cache miss, we load the data into the cache.</p><p id="597bab97-a8f4-492a-8957-44daebdf421d" class="">Cache must have an invalidation strategy to make sure only the most current data is stored in the cache (most difficult problem to solve in caching technologies)</p><figure id="49464bb1-87b8-4ffe-85f4-5c9d7b0e666f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2095.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2095.png"/></a></figure></details></li></ul><ul id="70a99ed7-5016-4bed-83d0-5951ed7c7a5c" class="toggle"><li><details open=""><summary>User Session Store</summary><p id="4bb725d6-a87f-4f15-ba43-c434a94231f4" class="">Using ElastiCache as a session store allows the application to be stateless. The session info can be fetched from ElastiCache when required.</p><ol type="1" id="faed91d3-a66c-4f4a-a2f7-fb8a7a6b95ce" class="numbered-list" start="1"><li>User logs into any of the application</li></ol><ol type="1" id="a5b92e2e-6a56-4bc1-8b6e-eca348de0f81" class="numbered-list" start="2"><li>The application writes the session data into ElastiCache</li></ol><ol type="1" id="9b1c5485-19ef-43b1-8248-e77fa269eb85" class="numbered-list" start="3"><li>The user hits another instance of our application</li></ol><ol type="1" id="cb38ce50-5f8d-4784-a481-bb8fade4d2f7" class="numbered-list" start="4"><li>The instance retrieves the data and the user is already logged in</li></ol><figure id="c90a3eb7-fc86-47ef-bc10-ebdda391a549" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2096.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2096.png"/></a></figure></details></li></ul></details></li></ul><ul id="5c28a0b5-04fe-4e0a-adb3-6b56c8a32163" class="toggle"><li><details open=""><summary><strong>Redis vs Memcached</strong></summary><p id="5d44cfb5-5402-444b-8087-26706f91935f" class="">Amazon ElastiCache for Redis is a blazing fast in-memory data store that provides sub-millisecond latency to power internet-scale real-time applications. Amazon ElastiCache for Redis is a great choice for real-time transactional and analytical processing use cases such as caching, chat/messaging, gaming leaderboards, geospatial, machine learning, media streaming, queues, real-time analytics, and session store. ElastiCache for Redis supports replication, high availability, and cluster sharding right out of the box. Amazon ElastiCache for Redis is also HIPAA Eligible Service.</p><p id="75d5c767-06a3-4917-919b-cc24d3dbf604" class="">Amazon ElastiCache for Memcached is a Memcached-compatible in-memory key-value store service that can be used as a cache or a data store. Amazon ElastiCache for Memcached is a great choice for implementing an in-memory cache to decrease access latency, increase throughput, and ease the load off your relational or NoSQL database. Session stores are easy to create with Amazon ElastiCache for Memcached. Elasticache for Memcached is not HIPAA eligible.</p><figure id="6292a80b-360c-469b-aa67-17379442a12a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2097.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2097.png"/></a></figure><figure id="ce78e4af-a72a-4cc0-998a-d43c1c9b3580" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2098.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2098.png"/></a></figure></details></li></ul></details></li></ul><ul id="cfab89c5-266d-4ad4-a567-f83ff3148dc2" class="toggle"><li><details open=""><summary>Create an ElastiCache</summary><p id="35e52bb7-16cc-4515-86b8-a2eaf711290d" class="">ElastiCache → Redis → Create</p><p id="b44e5845-83cd-433f-a484-ecd349aa8a77" class="">Encryption at rest: Uses KMS</p><p id="373a241e-65de-429d-a0af-3df7e0046149" class="">Encryption in transit:</p><p id="a294d59a-6de0-43c6-b6a7-620835d4d571" class="">We can enable Redis Auth: In this case, we need to create a Redis Auth Token which will be required by our applications to connect to Redis.</p></details></li></ul><ul id="81edccbd-23c5-4bb3-875d-46ea964c3a95" class="toggle"><li><details open=""><summary>Cache Security</summary><ul id="db517e4a-882e-4c31-9fac-59ee7fe6138b" class="bulleted-list"><li style="list-style-type:disc">All caches in ElastiCache do not support IAM authentication. IAM policies on ElastiCache are only used for AWS API-level security such as creating / deleting caches.</li></ul><ul id="371ef4dd-8abb-4082-b1b5-b87804165caa" class="bulleted-list"><li style="list-style-type:disc">To authenticate to Redis, we can use Redis Auth. This requires us to set a “password/token” when we create a Redis cluster. This is an extra level of security for your cache (on top of security groups). It also supports SSL in flight encryption.</li></ul><ul id="23df9c89-2141-434f-8c20-07da98d1634c" class="bulleted-list"><li style="list-style-type:disc">Memcached supports SASL-based authentication (advanced)</li></ul><p id="300248f2-6ba1-420b-9d9f-6c6ca39d1b41" class="">Redis’ security group should only allow EC2 security group for incoming requests. Additionally, Redis Auth can be used for authentication if we are using Redis as the caching engine. SSL encryption is used for in-flight encryption.</p><figure id="9483a142-6520-431b-998c-c74369b71472" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2099.png"><img style="width:192px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%2099.png"/></a></figure></details></li></ul><ul id="c46611d9-f623-4d4a-bf05-c5a62327d094" class="toggle"><li><details open=""><summary>Write patterns for ElastiCache</summary><ul id="8efb480c-dd6d-46ed-98ac-de36152f1ae3" class="bulleted-list"><li style="list-style-type:disc">Lazy Loading: all the read data is cached, data can become stale in cache</li></ul><ul id="fc5e7e3b-ec14-4686-9d4e-76dd2793a249" class="bulleted-list"><li style="list-style-type:disc">Write Through: Add or update data in the cache when written to a DB (no stale data)</li></ul><ul id="9461977a-b7c4-4f79-9b1c-79c32f08bf2a" class="bulleted-list"><li style="list-style-type:disc">Session Store: store temporary session data in a cache and remove the data based on TTL (time to live) for the session data</li></ul></details></li></ul><ul id="5b474360-267e-4826-b3cc-814e4f99b237" class="toggle"><li><details open=""><summary>Gaming Leaderboard using Redis - Use Case</summary><ul id="9a2b513f-3e79-4427-8e35-47aff1da398e" class="bulleted-list"><li style="list-style-type:disc">Gaming Leaderboards are computationally complex</li></ul><ul id="1e43d868-b9a1-48ce-80a0-72906d9e124a" class="bulleted-list"><li style="list-style-type:disc"><strong>Redis Sorted Sets</strong> guarantee both uniqueness and element ordering</li></ul><ul id="f1a893cc-daf5-47c1-90ff-effad5279c6b" class="bulleted-list"><li style="list-style-type:disc">Each time a new element added, it’s ranked in real time, then added in correct order</li></ul><p id="f34a2ef1-c33d-4c67-a249-76b231a0a869" class="">Using the Sorted Sets in a Redis cluster, we can build a real-time leaderboard where every instance of ElastiCache has the same up to date leaderboard.</p><figure id="1547e719-7293-457d-a892-882d131ccd3a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20100.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20100.png"/></a></figure></details></li></ul></details></li></ul><ul id="42a9cf77-ad8b-4b0c-a25d-afbb59d59550" class="toggle"><li><details open=""><summary><strong><strong>List of Ports to be familiar with</strong></strong></summary><p id="1fbb906c-3d98-4567-9de1-ad9f73643f1f" class=""><strong>Important ports:</strong></p><ul id="0060fa29-f97e-401a-a876-c6d40aaa7f62" class="bulleted-list"><li style="list-style-type:disc">FTP: 21</li></ul><ul id="8ff6c33a-fe4d-4a66-962e-7f07a5f007a1" class="bulleted-list"><li style="list-style-type:disc">SSH: 22</li></ul><ul id="cf709c92-ad2b-41a1-b99d-7a30bd3cbcdf" class="bulleted-list"><li style="list-style-type:disc">SFTP: 22 (same as SSH)</li></ul><ul id="ac01b581-f4dd-448b-b0d6-e9bec1e010ac" class="bulleted-list"><li style="list-style-type:disc">HTTP: 80</li></ul><ul id="35d27b07-d704-421c-9100-b55bf6b31d4e" class="bulleted-list"><li style="list-style-type:disc">HTTPS: 443</li></ul><p id="63a0f371-dae8-467b-8498-b421af023ce1" class=""><strong>vs RDS Databases ports:</strong></p><ul id="d0684128-8e14-49c0-a9ac-9c1fbac2157c" class="bulleted-list"><li style="list-style-type:disc">PostgreSQL: 5432</li></ul><ul id="af51caa8-97ae-4cd2-932b-5a9684ba0e18" class="bulleted-list"><li style="list-style-type:disc">MySQL: 3306</li></ul><ul id="b6b5f3dc-1fbb-4a6d-80ff-3d13f2b68d82" class="bulleted-list"><li style="list-style-type:disc">Oracle RDS: 1521</li></ul><ul id="7de5e9fb-c8de-4160-b556-542374b86392" class="bulleted-list"><li style="list-style-type:disc">MSSQL Server: 1433</li></ul><ul id="02f8c9b2-d290-4c90-9dd8-2724692a7eab" class="bulleted-list"><li style="list-style-type:disc">MariaDB: 3306 (same as MySQL)</li></ul><ul id="c7c91c2d-a8c2-498a-8ba6-9177649fcdcc" class="bulleted-list"><li style="list-style-type:disc">Aurora: 5432 (if PostgreSQL compatible) or 3306 (if MySQL compatible)</li></ul></details></li></ul></div><h3 id="52abe438-da56-45f8-a28f-f3466c4db143" class=""><details open=""><summary>Section 10: Route 53</summary></details></h3><div class="indented"><ul id="893ff9f0-0d6a-434c-9949-e9e3dbd808b7" class="toggle"><li><details open=""><summary>DNS</summary><ul id="3d4ef4cc-ea5a-43bb-bf4d-b0151c2d7334" class="toggle"><li><details open=""><summary>Intro</summary><p id="ed4db8e9-45cb-4875-b6a7-d464399bb5b9" class="">Domain Name System (DNS) translates the human friendly hostnames into the machine IP addresses</p><p id="04c47ae4-0858-488f-98ac-ad8e25f5e76d" class="">Example: <a href="http://www.google.com/">www.google.com</a> ⇒ 172.217.18.36</p><ul id="466e4c48-c677-4623-9c3d-cf389dab0278" class="bulleted-list"><li style="list-style-type:disc">DNS uses hierarchical naming structure:<p id="54243cde-0547-4e3a-8868-8a7a1610c51a" class="">.com</p><p id="79378c40-39b0-4b8d-b3f3-28e387100ea0" class="">example.com</p><p id="ed78172d-d70e-4bb3-a72e-bbf1d1da4000" class="">www.example.com</p><p id="efbfac5f-7170-49b9-ad93-26da6ce11e94" class="">api.example.com</p></li></ul></details></li></ul><ul id="68d54a4c-a57c-4ac9-8fc5-3e91de122e3e" class="toggle"><li><details open=""><summary>DNS Terminologies</summary><ul id="ef710cad-ee68-49b4-8d82-f9ae7db2e199" class="bulleted-list"><li style="list-style-type:disc">Domain Registrar: This is where you register your domain names (Amazon Route 53, GoDaddy, etc.)</li></ul><ul id="a33486bb-5c36-44a7-b92e-8574d41076cd" class="bulleted-list"><li style="list-style-type:disc">DNS Records: A, AAAA, CNAME, NS, etc.</li></ul><ul id="65f87611-b64c-4bc5-bf6c-ef6263ab96e1" class="bulleted-list"><li style="list-style-type:disc">Zone File (Hosted Zone): contains DNS records, used to match hostnames to IP addresses</li></ul><ul id="757bc6d8-7d2e-4cba-8dca-68b3c0c266d6" class="bulleted-list"><li style="list-style-type:disc">Name Server: resolves DNS queries (Authoritative or Non-Authoritative)</li></ul><ul id="cca49549-0ee6-45f4-b19e-42c86ac90397" class="bulleted-list"><li style="list-style-type:disc">Top Level Domain (TLD): .com, .us, .in, .gov, .org</li></ul><ul id="2e81471d-e0e2-4b2e-bca8-5e505e3bfefd" class="bulleted-list"><li style="list-style-type:disc">Second Level Domain (SLD): <a href="http://amazon.com/">amazon.com</a>, <a href="http://google.com/">google.com</a>, etc.</li></ul><figure id="75e441c1-c380-4c76-b02f-7a0dca8bbdb6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20101.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20101.png"/></a></figure></details></li></ul><ul id="8818f2cc-0a1e-4d6d-97b0-bfd640b1a280" class="toggle"><li><details open=""><summary>How DNS works</summary><p id="7710592a-d4a7-4b0d-92cd-14f6ca9e6c63" class="">Your web browser wants to access the domain <a href="http://example.com/">example.com</a> which is being served by a server at IP 9.10.11.12. Your browser will first query the local DNS server which if it has that domain cached, it will return it right away. Otherwise, it will ask the same question to the Root DNS server. The root DNS server will extract the TLD (.com) from the domain and direct the local DNS to the TLD DNS Server that can serve .com TLD. The query to the TLD DNS server will be the same. The TLD DNS server returns the IP of the SLD DNS server which can store the IP of web server hosting example.com. Once again the same query is made to the SLD DNS Server which returns the IP 9.10.11.12 instead of NS (named server).</p><figure id="182b7710-c287-4e8a-99da-cad69c107d4b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20102.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20102.png"/></a></figure></details></li></ul></details></li></ul><ul id="773b7736-2b68-4090-adbb-03f3620edf4c" class="toggle"><li><details open=""><summary>Route 53</summary><ul id="789d5239-4fbe-4122-b5b2-3e6625dda88b" class="toggle"><li><details open=""><summary>Theory</summary><ul id="f1ffbd0c-5ea4-4d02-840e-0d2106062520" class="toggle"><li><details open=""><summary>Intro</summary><ul id="db0f39ac-d167-4018-b1b0-9684faf93c51" class="bulleted-list"><li style="list-style-type:disc">Route 53 is a global AWS service.</li></ul><ul id="80c9ca31-b26a-4d97-ac8a-6a8c66a89607" class="bulleted-list"><li style="list-style-type:disc">A highly available, scalable, fully managed and Authoritative DNS provided by AWS (Authoritative means the customer can update the DNS records and have full control over the DNS)</li></ul><ul id="bd254617-4922-4e03-b490-799add8bfbcf" class="bulleted-list"><li style="list-style-type:disc">Route 53 is also a Domain Registrar which we can use to register our domain names</li></ul><ul id="82446c94-7739-426b-b74a-d82b9d743242" class="bulleted-list"><li style="list-style-type:disc">Ability to check the health of your resources</li></ul><ul id="0d218ed1-209a-4bc9-94de-67b41d91e066" class="bulleted-list"><li style="list-style-type:disc">The only AWS service which provides 100% availability SLA</li></ul><ul id="3ca30309-0ac6-4ad1-a572-2c7291c67b77" class="bulleted-list"><li style="list-style-type:disc">Why Route 53? 53 is a reference to the traditional DNS port</li></ul><figure id="5e25148b-465e-4655-9aaa-0265543d646f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20103.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20103.png"/></a></figure></details></li></ul><ul id="9592c8d7-ee00-4b63-8c8b-74b74ffebd12" class="toggle"><li><details open=""><summary>Records</summary><ul id="d13cf7a2-30c5-4d87-96d3-92a6d9898fe3" class="bulleted-list"><li style="list-style-type:disc">In Route 53, we are going to define a bunch of records which define how we want to route traffic for a domain. Each record contains:<ul id="1a023ac6-fd4c-4a5a-968c-9ca23c53bd7b" class="bulleted-list"><li style="list-style-type:circle">Domain / Subdomain Name: e.g. <a href="http://example.com/">example.com</a></li></ul><ul id="5cb86930-9154-4675-90a4-93f588773ae4" class="bulleted-list"><li style="list-style-type:circle">Record Type: e.g. A, AAAA, CNAME etc.</li></ul><ul id="c2238c75-1960-4cbc-8318-0b4a23596fe7" class="bulleted-list"><li style="list-style-type:circle">Value: e.g. 12.34.56.78</li></ul><ul id="eae963bd-ab55-4301-bd71-6d3e3dec088a" class="bulleted-list"><li style="list-style-type:circle">Routing Policy: how Route 53 responds to queries</li></ul><ul id="64bb2ea6-a957-4e84-9372-27b0c7fb7a2f" class="toggle"><li><details open=""><summary>TTL: amount of time the records are cached at DNS Resolvers</summary><ul id="162151f7-568b-467a-801e-29d56ebe1da1" class="bulleted-list"><li style="list-style-type:disc">High TTL (e.g. 24 hr)<ul id="f79ba4bf-6161-41dc-bdaf-4e749261de70" class="bulleted-list"><li style="list-style-type:circle">Less traffic on Route 53</li></ul><ul id="5e5caf73-ee8c-44e0-9f6c-d11e769ebb93" class="bulleted-list"><li style="list-style-type:circle">Possibly outdated records</li></ul></li></ul><ul id="18b1cb24-9ad9-47ac-9acb-2357aef62a2e" class="bulleted-list"><li style="list-style-type:disc">Low TTL e.g., 60 sec.<ul id="39d13535-a71d-4df3-87d7-6beaf93201ae" class="bulleted-list"><li style="list-style-type:circle">More traffic on Route 53 (more cost)</li></ul><ul id="57efebe9-6087-4839-ac96-07ec0b112d70" class="bulleted-list"><li style="list-style-type:circle">Records are outdated for less time</li></ul><ul id="18eb2ac1-f814-4e50-ab20-9ec598bf8f43" class="bulleted-list"><li style="list-style-type:circle">Easy to change records as the change will be updated quickly in the client’s cache.</li></ul></li></ul><ul id="3a692ec4-551a-450c-93cd-ef4a62a8ed3f" class="bulleted-list"><li style="list-style-type:disc">Except for Alias records, TTL is mandatory for each DNS record</li></ul><figure id="d48f3881-d7c0-42cf-926c-fc6d336de478" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20104.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20104.png"/></a></figure></details></li></ul></li></ul><ul id="7810ade5-003a-4dae-b181-ce7103076f9c" class="bulleted-list"><li style="list-style-type:disc">Route 53 supports the following DNS record types:<ul id="012f13c0-8669-4e4d-9933-5d2307c012fd" class="bulleted-list"><li style="list-style-type:circle">Must know: A / AAAA / CNAME / NS</li></ul><ul id="ae2084f4-8810-4a52-ae00-a392733f61ca" class="bulleted-list"><li style="list-style-type:circle">Advanced: CAA / DS / MX / NAPTR / PTR / SOA / TXT / SPF / SRV</li></ul></li></ul></details></li></ul><ul id="91c89175-1e24-41cf-93a2-95e744cf0af3" class="toggle"><li><details open=""><summary>Record Types</summary><ul id="5c32921d-38ab-4210-a427-7fb6429dc71e" class="bulleted-list"><li style="list-style-type:disc">A - maps a hostname to IPv4</li></ul><ul id="2e4af749-815e-4757-8aad-bb7e6adf479f" class="bulleted-list"><li style="list-style-type:disc">AAAA - maps a hostname to IPv6</li></ul><ul id="6739cc25-a15c-4202-8975-d462fb4fd023" class="bulleted-list"><li style="list-style-type:disc">CNAME - maps a hostname to another hostname<ul id="9f2bb1d7-e699-4543-97cb-0d8f5126a232" class="bulleted-list"><li style="list-style-type:circle">The target is a domain name which must have an A or AAAA record</li></ul><ul id="63b6bc7a-c6c7-46c0-b721-4163a1b0996d" class="bulleted-list"><li style="list-style-type:circle">Can’t create a CNAME record for the top node of a DNS namespace (Zone Apex) example: you can’t create CNAME for example.com, but you can create for www.example.com</li></ul></li></ul><ul id="e8fd1f09-3202-47ac-8b6f-1161726abb9c" class="bulleted-list"><li style="list-style-type:disc">NS (Name Servers for the Hosted Zone) - controls how traffic is routed for a domain</li></ul></details></li></ul><ul id="e1eecf4c-6433-4ed0-8246-5083111098cf" class="toggle"><li><details open=""><summary>Hosted Zones</summary><p id="aa937b5d-2c4e-4320-b8e1-ef56c920171c" class="">A hosted zone is a container for records that define how to route traffic to a domain and its subdomains. Hosted zones are queried to get the IP address from the hostname.</p><p id="c32c5a58-d7a7-4dd7-92d8-f18dcc6516b7" class="">There are two types of hosted zones:</p><ul id="4816e4e8-4a8c-4fc7-895e-3b9f75605f18" class="toggle"><li><details open=""><summary>Public Hosted Zones</summary><ul id="8297d15d-ef9e-4763-a87c-cd526716f6f9" class="bulleted-list"><li style="list-style-type:disc">contains records that specify how to route traffic on the Internet (public domain names) example: <a href="http://application1.mypublicdomain.com/">application1.mypublicdomain.com</a></li></ul><ul id="b6283fd4-430b-426a-b178-3e3231c863db" class="bulleted-list"><li style="list-style-type:disc">can be queried by anyone on the internet</li></ul><figure id="00af028d-fc40-4733-9b99-19813c38f389" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20105.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20105.png"/></a></figure></details></li></ul><ul id="d0a51189-ba80-4608-b3ba-76b04abc7069" class="toggle"><li><details open=""><summary>Private Hosted Zones</summary><ul id="dac7828f-65ba-47c0-a782-1a8ebd66a2da" class="bulleted-list"><li style="list-style-type:disc">contain records that specify how you route traffic within one or more VPCs (private domain names) example: applications.company.internal</li></ul><ul id="e3b51c61-c0e6-428f-bce0-3d67fb8bef12" class="bulleted-list"><li style="list-style-type:disc">can only be queried from within the VPC</li></ul><figure id="e1c421a5-4624-4620-9d80-1c6783d20736" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20106.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20106.png"/></a></figure></details></li></ul><p id="a1672fbf-280b-433d-8deb-1d55e54b5f58" class="">You pay $0.50 per month per hosted zone</p></details></li></ul><ul id="3d2957ea-0b15-47c1-bda9-5b66b734f9a7" class="toggle"><li><details open=""><summary>Route 53 TTL (Time To Live)</summary><p id="b19b8dd5-c52c-4e3a-b24c-7bf0fe033859" class="">AWS will cache the DNS request for 60s/24hr</p><figure id="037f40ec-7d4e-41ea-99d4-7fc43e24dda0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(390).png"><img style="width:937px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(390).png"/></a></figure><p id="4d169ac4-466d-4c4a-88d7-15ea0bdf4342" class=""><strong>Hands On</strong></p><p id="2456bcfc-071a-4c16-959d-9d42e33e90f0" class="">Create new Record → record name → record type A for Ipv4 → set value to IP of the EC2 instance we set → TTL set to seconds hours or 1 day → routing policy → create record.</p><p id="a3023308-37c5-425e-ae96-937336437013" class="">Based on TTL if we update the set value IP to a new one it takes the time we set in TTL to reflect the changes due to cache in TTL time period</p><p id="c53c7445-3d72-4ea3-bb2b-e01d472a646e" class="">Check on chrome <a href="http://test.example.com">test.example.com</a> or Cloud Shell dig command</p></details></li></ul><ul id="7bd548fe-a183-4327-9a45-f039da5618db" class="toggle"><li><details open=""><summary>CNAME vs Alias Records</summary><p id="098316b0-9e88-432f-847b-f4a3e151ede9" class="">AWS Resources expose an AWS hostname (example: <a href="http://ib1-1234.us-east-2.elb.amazonaws.com/">Ib1-1234.us-east-2.elb.amazonaws.com</a>). If we want to map this AWS resource to a hostname, we could use:</p><ul id="bbfac61d-b3f5-4d2d-a6e9-6a3dee91fdd9" class="toggle"><li><details open=""><summary>CNAME Records:</summary><ul id="30f65993-e25c-4462-9822-ddb24120eae2" class="bulleted-list"><li style="list-style-type:disc">Points a hostname to any other hostname (<a href="http://app.mydomain.com/">app.mydomain.com</a> ⇒ blabla.<a href="http://anything.com/">anything.com</a>)</li></ul><ul id="4db2d5d9-6569-4ea7-87d7-5363aa2151ac" class="bulleted-list"><li style="list-style-type:disc">Only works for non-root domain names (something.mydomain.com instead of just mydomain.com)</li></ul></details></li></ul><ul id="19af7300-1b70-4953-9fae-aa5d28080f35" class="toggle"><li><details open=""><summary>Alias Records (specific to Route 53)</summary><ul id="6a541bec-24b9-4bdb-907b-d31d49fbdaaf" class="toggle"><li><details open=""><summary>Intro</summary><ul id="e6d6f69c-1109-4bff-90b0-01bac2def108" class="bulleted-list"><li style="list-style-type:disc">Points a hostname to an AWS Resource (<a href="http://app.mydomain.com/">app.mydomain.com</a> ⇒ blabla.<a href="http://amazonaws.com/">amazonaws.com</a>)</li></ul><ul id="7a6328f1-17da-4e55-876b-43d892b09f30" class="bulleted-list"><li style="list-style-type:disc">Works for both root domains (Zone Apex) and non root domains (<a href="http://mydomain.com/">mydomain.com</a> &amp; something.mydomain.com)</li></ul><ul id="f6b60b0e-62e8-41d1-b81b-be8684fd4de4" class="bulleted-list"><li style="list-style-type:disc">Free of cost</li></ul><ul id="23fe0b41-a87e-4e00-a501-2b4ecfc774b3" class="bulleted-list"><li style="list-style-type:disc">Native health check</li></ul><ul id="d971ca0a-c9c4-43ea-bad9-5d1b14efb04a" class="bulleted-list"><li style="list-style-type:disc">Automatically recognizes changes in the AWS resource’s IP addresses</li></ul><ul id="4adfab11-79ec-4c0e-b36f-7f1fdbc7276b" class="bulleted-list"><li style="list-style-type:disc">Alias Record is always of type A/AAAA for AWS resources (IPv4 / IPv6)</li></ul><ul id="e5add6f6-7d47-433c-b9bb-ac462a914625" class="bulleted-list"><li style="list-style-type:disc">You can’t set the TTL manually for Alias records (it is set automatically)</li></ul><figure id="c52511df-4124-4e5f-80f9-311c5bedb92e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20107.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20107.png"/></a></figure></details></li></ul><ul id="9beb24cc-70cb-4665-a9d0-e9edd0f35041" class="toggle"><li><details open=""><summary>Alias Record Targets</summary><figure id="69771a41-5103-47eb-8ad3-5bada5ea489c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20108.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20108.png"/></a></figure></details></li></ul></details></li></ul><ul id="5ec2a1d8-f00d-4dd1-9517-7c11f75cdb51" class="toggle"><li><details open=""><summary>Hands On</summary><ul id="53002586-6f87-431e-b361-879411c19fc1" class="bulleted-list"><li style="list-style-type:disc">Create a Record → record name → type CNAME → set domain name in Value → create record.<p id="f2acfc62-9f3c-4d6b-9710-3838a1857ab8" class="">This is good and work on many domain names, but not AWS native. Since we are redirecting to a ALB we can create a Alias</p></li></ul><ul id="ce5f247b-bce3-4843-9dd0-c1303cc98125" class="bulleted-list"><li style="list-style-type:disc">Create a record → type is A for alias records → enable Alias key → route traffic to from dropdown → select EC2 Region → select the load balancer we created → evaluate target health is selected → create record</li></ul><ul id="b1dbe97f-618d-42ad-855c-f686b7b26511" class="bulleted-list"><li style="list-style-type:disc">To redirect directly → create record → keep record name blank → CNAME as type → value as the load balancer link → create record <mark class="highlight-red">throw a  error</mark></li></ul><ul id="8bed56ab-9874-447e-8ddf-0133b0430a71" class="bulleted-list"><li style="list-style-type:disc">To redirect directly → create record → keep record name blank → Select Alias → Select A as Type → select region and load balancer → create record will work</li></ul></details></li></ul></details></li></ul><ul id="c45d9ae5-f923-4451-841c-52832659abb6" class="toggle"><li><details open=""><summary>Routing Policies</summary><ul id="768b2e27-60c9-4c23-853a-4e173724c27e" class="bulleted-list"><li style="list-style-type:disc">Routing policies define how Route 53 responds to DNS queries</li></ul><ul id="f1b7fda8-fde2-465d-b063-a8522451fdf3" class="bulleted-list"><li style="list-style-type:disc">Don’t get confused by the word “Routing”<ul id="6bff9448-88b5-4e3d-8d7a-4e8cf1b526cb" class="bulleted-list"><li style="list-style-type:circle">It’s not the same as Load balancer routing which routes the traffic through itself</li></ul><ul id="f1f510a5-e491-4f73-8569-c8d6d62b97f6" class="bulleted-list"><li style="list-style-type:circle">DNS does not route any traffic, it only responds to the DNS queries after resolving hostnames</li></ul></li></ul><ul id="9a08db71-d69b-40c0-8282-51dee5815b13" class="bulleted-list"><li style="list-style-type:disc">Route 53 Supports the following Routing Policies<ul id="f2c3d164-e971-4f92-952b-9a33332af83e" class="toggle"><li><details open=""><summary>Simple</summary><ul id="05082778-0f22-41d1-b7f5-afea1c3dd4d7" class="bulleted-list"><li style="list-style-type:disc">Typically, route traffic to a single resource</li></ul><ul id="64f7771c-3fca-479c-a6f5-7a371691a0a7" class="bulleted-list"><li style="list-style-type:disc">Can specify multiple values in the same record (by entering them in new lines). If multiple values are returned, a random one is chosen by the client</li></ul><ul id="cbc6c070-3c86-4211-aac3-77ca53d42f15" class="bulleted-list"><li style="list-style-type:disc">When Alias is enabled in case of a simple routing policy, we can specify only one AWS resource </li></ul><ul id="d8949676-8d55-4b91-8819-edd65f6deea2" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-yellow">Can’t be associated with Health Checks</mark></li></ul><figure id="1486975a-cab7-49f5-87b8-925a6f4feb4a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20109.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20109.png"/></a></figure><p id="c9dd0d36-73ba-4d8b-8d79-8dc222e9d012" class=""><strong>Hands On</strong></p><p id="e6d15f40-7a5f-461e-babb-c0ef1069c59e" class="">create/edit a record → In value use multiple IP</p></details></li></ul><ul id="5fcb3808-360a-4ed0-a8b9-ada8d3ca2c3c" class="toggle"><li><details open=""><summary>Weighted</summary><ul id="9b54dd61-8b76-4df7-8ebb-8f433d98e24e" class="bulleted-list"><li style="list-style-type:disc">Control the % of the requests that go to each specific resource</li></ul><ul id="b4cb029d-278f-4fa6-9ae8-619b7b59658f" class="bulleted-list"><li style="list-style-type:disc">Assign each record a relative weight. These weights don’t need to sum up to 100.<figure id="98c2fa98-ac1d-4104-bc08-38f7c9c6842d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20110.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20110.png"/></a></figure></li></ul><ul id="fbfc343f-57b6-41a0-9074-81467933866c" class="bulleted-list"><li style="list-style-type:disc">Can be associated with Health Checks</li></ul><ul id="52a58db2-f4b4-4645-80d1-c7c0348b4d45" class="bulleted-list"><li style="list-style-type:disc">Use cases: load balancing between regions, testing a new application version by sending a small amount of traffic</li></ul><ul id="32a13da1-75c9-46c9-bc11-1ba95a82ae25" class="bulleted-list"><li style="list-style-type:disc">Assign a weight of 0 to a record to stop sending traffic to a resource</li></ul><ul id="195af6eb-e37e-460f-9d17-de0d26d24dcd" class="bulleted-list"><li style="list-style-type:disc">If all records have weight of 0, then all records will be returned equally</li></ul><ul id="2b4c3e59-71a7-46e1-afae-a93d39566edc" class="bulleted-list"><li style="list-style-type:disc">When creating weighted records, create multiple records with the same name and type, and assign different weights to each.</li></ul><figure id="ef80287c-9b9c-4616-8cb1-0b3e0f22c5cb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20111.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20111.png"/></a></figure><p id="c7815baa-a9ea-4ab8-b06f-23ed44a26a82" class=""><strong>Hands On</strong></p><p id="9d22a258-81d0-40d0-99b6-eb7ebd255405" class="">Create a record → name → A record → policy as weighted → IP as value → weight as 50 → TTL as 3s for this example → record ID → add another record → same except IP as value and weight 20 → add another record → same except IP as value and weight 30</p><figure id="4b9bbd1e-18ef-47c3-8f2d-d3d86bd60397" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20112.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20112.png"/></a></figure></details></li></ul><ul id="bd1e4f5f-66e3-4f1c-9ae1-4473dda2dd30" class="toggle"><li><details open=""><summary>Latency based</summary><ul id="26d576c4-dda5-4549-a90a-ae9809f1c371" class="bulleted-list"><li style="list-style-type:disc">Redirect to the resource that has the least latency (most of the time is the one closest to us)</li></ul><ul id="3afbe765-92e6-484e-abd8-3379839a7ec4" class="bulleted-list"><li style="list-style-type:disc">Super helpful when latency for users is a priority</li></ul><ul id="09817e09-ced3-43e0-921b-f6170d610dc4" class="bulleted-list"><li style="list-style-type:disc">Latency is based on traffic between users and AWS Regions. For example: German users may be directed to the US (if that provides the lowest latency)</li></ul><ul id="6fafe61c-1573-4311-9294-2bac15aec6b9" class="bulleted-list"><li style="list-style-type:disc">Can be associated with Health Checks (has a failover capability)</li></ul><ul id="dc88777a-5c3e-4099-a8d5-e9e8c1afba44" class="bulleted-list"><li style="list-style-type:disc">Need to create multiple records, one for each region that is available and Route 53 will automatically route the clients to the lowest latency region. This can be tested using a VPN.</li></ul><figure id="35d0fec2-7ebb-45b3-8cc4-99201a3a9196" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20113.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20113.png"/></a></figure><p id="8e17aa5f-aa7f-42a7-8959-1759e3ddd3bc" class="">Create a record → same except Routing policy as Latency → When we put a IP we need to specify the region</p><p id="93b98da7-07a4-4dbd-9724-1bda62a4c26b" class="">when we add a record again for a IP we need to specify the region</p><p id="29a338ba-8a59-44a1-a350-6ab6af39604b" class="">We can use VPN to check this by using different places near to set Regions</p><figure id="a203f4ab-0896-4705-a9d2-d53f0c650c00" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20114.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20114.png"/></a></figure></details></li></ul><ul id="8bb8060f-e20d-4361-a201-5077faa37325" class="toggle"><li><details open=""><summary>Failover</summary><p id="8ed7c6eb-9a82-45be-9ace-a322e9592049" class="">Here, we can setup a primary EC2 instance with a mandatory health check. If the health check fails, the Route 53 will route the traffic to the secondary instance.</p><figure id="2053d2ba-73c7-450e-b53d-007b4ce830f5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20115.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20115.png"/></a></figure><p id="678eae5f-c22c-400f-8206-28c9ea2ba912" class=""><strong>To achieve this we need to create two records of type failover in the hosted zone, one will be labelled as primary and the other will be secondary. A health check must be attached to the primary record.</strong></p><figure id="303a48ee-2bea-4eaa-b2f9-6966d941d4a8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20116.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20116.png"/></a></figure></details></li></ul><ul id="d3d5d9bc-19c5-4eaf-8b83-1c4e5771908b" class="toggle"><li><details open=""><summary>Geolocation</summary><ul id="7c034125-fcbe-410b-b30b-2c0797559389" class="bulleted-list"><li style="list-style-type:disc">This routing is based on user location by Continent, Country or by US State (if there’s overlapping, most precise location selected)</li></ul><ul id="f0953732-107c-41ca-b800-6378018e326a" class="bulleted-list"><li style="list-style-type:disc">Should create a “Default” record (in case there’s no match on location)</li></ul><ul id="0b6d159d-eab0-472f-99e9-6946e0f1ca66" class="bulleted-list"><li style="list-style-type:disc">Use cases: website localization, restrict content distribution, load balancing, language preference, etc.</li></ul><ul id="ee13a6c7-aa00-4b65-9ece-184a809c5e9c" class="bulleted-list"><li style="list-style-type:disc">Can be associated with Health Checks</li></ul><figure id="cf6cf188-7c30-4722-ae2f-b4edd4d16262" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20117.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20117.png"/></a></figure><p id="a48b67c3-7154-4f06-befb-aceef18a5d5d" class=""><strong>When creating records, we can select a continent, country or US states. Also, create a record with the location as default for the case when the location doesn’t match any. This can be tested by using a VPN.</strong></p><figure id="4acf0057-88a8-4c37-aea1-5ef7f7c5abdd" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20118.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20118.png"/></a></figure></details></li></ul><ul id="bb45de5d-d00f-4dfc-b2f7-9ddbf2525dfc" class="toggle"><li><details open=""><summary>Geo Proximity (using Route 53 Traffic Flow feature)</summary><ul id="d2361622-ce1e-4b4c-b8bd-6dce02a7fca0" class="bulleted-list"><li style="list-style-type:disc">Route traffic to your resources based on the geographic location of users and resources</li></ul><ul id="cb56add1-6177-4a68-9136-746f62d3656a" class="bulleted-list"><li style="list-style-type:disc">It provides the ability to shift more traffic to resources based on the defined bias. To change the size of the geographic region, specify bias values:<ul id="37c389dc-ab1b-48da-8a65-ee54e2e4e800" class="bulleted-list"><li style="list-style-type:circle">To expand (1 to 99) → more traffic to the resource</li></ul><ul id="60ac05af-16b6-432a-8edc-154826972f1a" class="bulleted-list"><li style="list-style-type:circle">To shrink (-1 to-99) → less traffic to the resource</li></ul></li></ul><ul id="afddf62a-6f2a-49ab-8584-bb3f9ddaa18a" class="bulleted-list"><li style="list-style-type:disc">Resources can be:<ul id="94c37b77-7b3e-46c8-88df-f1b5ed2fc86e" class="bulleted-list"><li style="list-style-type:circle">AWS resources (specify AWS region)</li></ul><ul id="9c46ece5-f244-4bba-9704-b754d6ec8507" class="bulleted-list"><li style="list-style-type:circle">Non-AWS resources (specify Latitude and Longitude)</li></ul></li></ul><ul id="2c954c15-8712-4043-a38c-d556e288e52e" class="bulleted-list"><li style="list-style-type:disc">You must use Route 53 Traffic Flow (advanced) to use this feature</li></ul><ul id="de0fbf96-f9c6-4d6c-bcec-e881513ec349" class="bulleted-list"><li style="list-style-type:disc">No bias means going to the close Region</li></ul><ul id="ec383c85-4403-4dcb-a6a9-e74356fc5e9c" class="bulleted-list"><li style="list-style-type:disc">The higher the bias, the farther the decision boundary will be from that resource.</li></ul><ul id="0c86d453-0826-4211-83e7-6e5a71f66cbc" class="bulleted-list"><li style="list-style-type:disc"><strong>High Bias take more users to that Resource therefore increase the traffic</strong></li></ul><ul id="a59ad4cf-b169-4fe1-a238-7dae8b9f8d3d" class="bulleted-list"><li style="list-style-type:disc"><strong>Low Bias try to remove more users from that Resource, therefore decrease the traffic</strong></li></ul><figure id="d36d3abe-932d-45d9-87ea-332ba8323547" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20119.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20119.png"/></a></figure></details></li></ul><ul id="99e29094-1138-484e-ab22-f3099356b945" class="toggle"><li><details open=""><summary>Multi-Value</summary><ul id="d26ee8cd-9fad-46fc-8fdc-7c328ec3a5f5" class="bulleted-list"><li style="list-style-type:disc">Use when routing traffic to multiple resources</li></ul><ul id="67006bea-6717-4b89-8eeb-f2094af831b2" class="bulleted-list"><li style="list-style-type:disc">Route 53 return multiple (max 8) values / resources</li></ul><ul id="b07fd70d-2ef5-4468-9acb-f8500966baed" class="bulleted-list"><li style="list-style-type:disc">Can be associated with Health Checks (only healthy resources will be returned). It is not possible in case you return multiple values from a simple routing policy since they don’t support health checks. So, some of the returned values in that case may be unhealthy.</li></ul><ul id="84074490-f7a3-4ab4-b303-5d7ec671c4e4" class="bulleted-list"><li style="list-style-type:disc">Multi-Value (client-side load balancing) is not a substitute for having an ELB (server-side load balancing)</li></ul><p id="518b049a-2da8-4f6d-b0ac-d8ca0213a32e" class="">When creating multi-value routing policies, we need to create multiple records in the hosted zone (one for each resource). We can separately attach health check to each instance. The records having the same path will be treated as the multiple options for that path.</p><figure id="9c5b5510-ef57-4feb-a272-a2efca46dc58" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20120.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20120.png"/></a></figure><p id="5db2462f-bb40-4e23-9dcb-8327c693cc41" class="">Querying the route will return multiple endpoints that are healthy.</p><figure id="ab276fb1-b32a-4221-a32c-2516b7bc74e5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20121.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20121.png"/></a></figure></details></li></ul></li></ul></details></li></ul><ul id="024a457d-c420-4495-9b87-5836cdca5d3d" class="toggle"><li><details open=""><summary>Health Checks</summary><ul id="ca080f7a-c0f3-40e1-af32-da4bfe2ff7dc" class="toggle"><li><details open=""><summary>Theory</summary><ul id="622acaa3-fbc3-40f5-9713-a90e44bfe359" class="toggle"><li><details open=""><summary>Intro</summary><ul id="1d1ca216-c027-4200-b4c2-9196533e7247" class="bulleted-list"><li style="list-style-type:disc">HTTP Health Checks are only for public resources</li></ul><ul id="fc6dc82c-119e-47bc-9d73-fb4124fdf985" class="bulleted-list"><li style="list-style-type:disc">Health Check allows for Automated DNS Failover. So, if a region is down, the users will be routed to another region.</li></ul><ul id="f68bc3f5-cfb5-45dc-a862-4c7142c34795" class="bulleted-list"><li style="list-style-type:disc">There are three types of health checks on Route 53:<ol type="1" id="4f84c337-ad6f-47c0-9323-835641244a79" class="numbered-list" start="1"><li>Health checks that monitor an endpoint (application, server, other AWS resource)</li></ol><ol type="1" id="66ce7c30-98bb-4e15-a41e-b7556ada9bcb" class="numbered-list" start="2"><li>Health checks that monitor other health checks (Calculated Health Checks)</li></ol><ol type="1" id="d6533de2-0846-4a9e-b330-5031d7ccc045" class="numbered-list" start="3"><li>Health checks that monitor CloudWatch Alarms (full control) e.g. throttles of DynamoDB, alarms on RDS, custom metrics (helpful for private resources)</li></ol></li></ul><ul id="02830188-b207-453e-a560-0afb3be2c1e4" class="bulleted-list"><li style="list-style-type:disc">Health Checks are integrated with CloudWatch metrics</li></ul><figure id="0878d703-956c-42dc-8f66-07211136416f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20122.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20122.png"/></a></figure></details></li></ul><ul id="b3c558cc-8327-49b7-b1bb-950b8a410584" class="toggle"><li><details open=""><summary>How an endpoint is monitored</summary><ul id="fc53ec4e-d09a-4de5-9b1f-1a790f3f4b06" class="bulleted-list"><li style="list-style-type:disc">About 15 global health checkers will check the endpoint health</li></ul><ul id="3bd79857-6252-4ae0-8542-d9b37829cb47" class="bulleted-list"><li style="list-style-type:disc">Healthy/Unhealthy Threshold: 3 (by default)</li></ul><ul id="9f5a5c05-5717-49c0-a815-b9642cdc7e56" class="bulleted-list"><li style="list-style-type:disc">Health Check Interval: 30 sec (can set to 10 sec but the cost is higher)</li></ul><ul id="1f93975f-fe35-47c4-a604-378eaefa4851" class="bulleted-list"><li style="list-style-type:disc">Supported protocol: HTTP, HTTPS and TCP</li></ul><ul id="c5d09042-2f44-4c78-bc27-537752f42aab" class="bulleted-list"><li style="list-style-type:disc">If &gt; 18% of health checkers report the endpoint is healthy, Route 53 considers it Healthy. Otherwise, it’s Unhealthy</li></ul><ul id="78783a53-1c3f-49ee-83d1-37a8747e0b82" class="bulleted-list"><li style="list-style-type:disc">We have the ability to choose which locations you want Route 53 to use for health checks</li></ul><ul id="f94355ce-97d5-48b6-83ef-1bb01c7df978" class="bulleted-list"><li style="list-style-type:disc">Health Checks pass only when the endpoint responds with the 2xx and 3xx status codes</li></ul><ul id="5d4477a7-d9dc-46c3-859c-0bfccbc554ce" class="bulleted-list"><li style="list-style-type:disc">In case of a text response, Health Checks can be setup to pass / fail based on the text in the first 5120 bytes of the response</li></ul><ul id="6fb04bc6-d02d-41a1-b391-4f3d460a3add" class="bulleted-list"><li style="list-style-type:disc">You must configure your router / firewall to allow incoming requests from the IPs of Route 53 Health Checkers (<a href="https://ip-ranges.amazonaws.com/ip-ranges.json">https://ip-ranges.amazonaws.com/ip-ranges.json</a>)</li></ul><figure id="f2669989-8512-43e8-8658-796572645e76" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20123.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20123.png"/></a></figure></details></li></ul><ul id="f734bb2a-b862-4a7e-bfba-7dbec31b9ece" class="toggle"><li><details open=""><summary>Calculated Health Checks</summary><ul id="ae632998-6541-4627-ab98-5a812a260c11" class="bulleted-list"><li style="list-style-type:disc">Combine the results of multiple Health Checks into a single Health Check. AND, OR or NOT can be used to combine children health checks.</li></ul><ul id="189d90ea-69b2-4a6c-adf4-73076dd5d141" class="bulleted-list"><li style="list-style-type:disc">Can monitor up to 256 Child Health Checks</li></ul><ul id="e2d7f75e-0f7c-4f90-8ef9-a0c32632d69c" class="bulleted-list"><li style="list-style-type:disc">Specify how many of the health checks need to pass to make the parent pass</li></ul><ul id="4aa2073f-d90f-49f5-82a1-a208c76fdedd" class="bulleted-list"><li style="list-style-type:disc">Usage: perform maintenance to your website without causing all health checks to fail</li></ul><figure id="9a0382b8-b0fb-4a8c-8ba4-1b64028dbaf4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20124.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20124.png"/></a></figure></details></li></ul><ul id="9ca03a7e-7d7b-48eb-ac1f-aca132afeec9" class="toggle"><li><details open=""><summary>Health checks for private hosted zones</summary><p id="4d73677a-b197-43cc-bbaf-1f770a6d1a19" class="">Route 53 health checkers are outside the VPC. They are not designed to perform health checks on private resources. They can’t access private endpoints (private VPC or on-premises resource). Instead, you can create a CloudWatch Metric and associate a CloudWatch Alarm to it, then create a Health Check that checks the CW alarm.</p><figure id="f2bed9a1-d142-4980-ad92-515f07a34ab3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20125.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20125.png"/></a></figure></details></li></ul></details></li></ul><ul id="7994decf-4074-458d-890b-4752534ef366" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="3afe10fb-22ce-4f58-8431-6706d4e1009e" class="toggle"><li><details open=""><summary>Create health checks to monitor EC2 instances</summary><p id="e85eddd8-5069-4577-a9c9-ff81843af0ec" class="">Route 53 → Health Checks → Create health check</p><p id="b9d4af7c-c79c-42c8-ac5e-a4405a4cc965" class="">IP address should be of the EC2 instance</p><figure id="c139ec00-a9c3-4f91-ab2d-cb00ab5ad752" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20126.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20126.png"/></a></figure><p id="be5d01d5-c07f-4238-a77f-696a080aec05" class="">Untitled</p></details></li></ul><ul id="49800291-d78a-4e99-8ede-ba56e4f37fde" class="toggle"><li><details open=""><summary>Create a calculated health check</summary><p id="13ff22a7-2248-42a1-b9ec-dae28c33a89c" class="">Since one of the instances is unhealthy, the calculated health check is also unhealthy.</p><figure id="c858d4d5-f681-4359-9f1d-d5eee4dd4c23" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20127.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20127.png"/></a></figure><p id="185f2072-5c02-4a1c-b6fb-f3c668b8db51" class="">Untitled</p></details></li></ul></details></li></ul></details></li></ul><p id="391fe303-3fe7-4d60-9aeb-656585e60aac" class="">
</p><p id="a1d8bda3-fde2-4de6-a71b-e99582bd127d" class="">new →</p><ul id="d842bcf5-9eb6-434c-b7b7-9575d8de1633" class="toggle"><li><details open=""><summary>Traffic Policies</summary><ul id="58067666-3470-4819-8f77-1b7a635fa9ad" class="bulleted-list"><li style="list-style-type:disc">Intro<ul id="17a1bb09-287e-4fbf-84e7-bd7772338649" class="bulleted-list"><li style="list-style-type:circle">Visual editor to manage complex routing decision trees. Simplifies the process of creating and maintaining records in large and complex configurations.</li></ul><ul id="4611277a-bf37-43e7-8b87-7b36f8955ed2" class="bulleted-list"><li style="list-style-type:circle">Configurations can be saved as Traffic Flow Policy<ul id="919c8cdd-2771-4e64-b430-db1fd7f54b4b" class="bulleted-list"><li style="list-style-type:square">Can be applied to different Route 53 Hosted Zones (different domain names)</li></ul><ul id="fbf1dcf8-db61-462e-b780-9b82d79a0781" class="bulleted-list"><li style="list-style-type:square">Supports versioning</li></ul></li></ul><figure id="f275021c-75dc-4d3e-a008-32b14e4d32de" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20128.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20128.png"/></a></figure><p id="56187e92-f685-46a8-a6b2-bdd7782c731f" class="">Untitled</p></li></ul><ul id="51e93d97-91ae-479f-8b83-96d2223c0d50" class="bulleted-list"><li style="list-style-type:disc">Create a traffic policy for Geoproximity based routing<p id="253b0286-0d2b-4fea-8fe7-2cfb3c1d8c09" class="">Route 53 → Traffic Policies → Create traffic policy</p><p id="a1fcebd9-6a6f-431f-9084-39e1ddf8b3f2" class="">GUI is super interactive to use.</p><figure id="306b5478-5175-4f9a-9a5d-e0d70936e322" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20129.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20129.png"/></a></figure><p id="ed43e188-8c34-4a20-886c-7fcbaa77c4a6" class="">Untitled</p></li></ul></details></li></ul></details></li></ul><ul id="64665b73-280c-49b5-a825-8dfcd9d2e71b" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="cba59a23-97c1-450d-983e-a441bdcfae0c" class="bulleted-list"><li style="list-style-type:disc">Registering a domain<p id="1ece1ead-1d20-4df8-876c-f266246b48b9" class="">Route 53 → Registered Domains → Register a domain → Choose the domain → Fill in your contact details</p><p id="d80d6c38-e511-46ad-b5ae-7318d836e281" class="">Enable privacy protection to prevent getting spammed by the internet on your registered contact details.</p><p id="e6f3de22-6627-4e98-b7b0-1aefb0dd0816" class="">Once registered, the domain name will be visible under Hosted Zones. Inside the hosted zone, there will be two records. Here, in case of NS (named server), the values represent the DNS servers that store the IP linked to the registered domain.</p><p id="4f017839-7190-4b19-bb81-59753639700e" class="">⛔ Registering a domain costs money $ 12 for an entire 1 year at a time.</p><figure id="5955aea1-0419-4110-97f8-0efd431f3842" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20130.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20130.png"/></a></figure></li></ul><ul id="dacda8e0-772b-4797-8bbe-5322a8e79824" class="bulleted-list"><li style="list-style-type:disc">Create records in a hosted zone<p id="1311eaea-8c65-4b47-82b9-9786d2ad0ff1" class="">Route 53 → Hosted Zones → Open the hosted zone → Create records</p><p id="91ec92bf-0c0a-4833-9c50-f9d3957ed1c0" class="">In the diagram below, I have routed traffic on <a href="http://about.arkalim.org/">about.arkalim.org</a> to the IP 192.0.0.123 using record type A.</p><figure id="ee8e5258-96ac-4cfc-a6a6-b8f1cd50346e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20131.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20131.png"/></a></figure></li></ul><ul id="b6f6acda-9bd6-4959-b6ab-c8a7411525be" class="bulleted-list"><li style="list-style-type:disc">Query the hosted zone using terminal<p id="af15e026-b293-46e7-98a4-895e78a17135" class=""><code>dig about.arkalim.org</code></p><p id="211e40f9-82cf-4de3-bc83-c46842f561a9" class="">The ANSWER SECTION tells that there is a record for <a href="http://about.arkalim.org/">about.arkalim.org</a> which is of type A and is pointing to 192.0.0.123. Also the number 291 is the time in seconds for which this value is cached in the client.</p><figure id="b10b8997-b82a-488e-8bde-77ce7720ae45" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20132.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20132.png"/></a></figure></li></ul><ul id="b19062f8-22d3-4de8-820f-11d5acebfa3b" class="bulleted-list"><li style="list-style-type:disc">EC2 setup<p id="7e45a4f5-c1b1-4162-b570-4827935776b1" class="">ALB (ap-south-1 | Mumbai) - <a href="http://my-first-alb-1053855370.ap-south-1.elb.amazonaws.com/">my-first-alb-1053855370.ap-south-1.elb.amazonaws.com</a></p><p id="0aabb39b-da2b-4a30-8561-a06fffca0ded" class="">Instance 1 (ap-south-1) - 35.154.11.198</p><p id="6fd0273b-4f8b-4a27-94ea-8c571d91cd85" class="">Instance 2 (us-east-1) - 52.87.202.214</p><p id="b3461328-b190-4718-b738-cad7f7902a51" class="">Instance 3 (eu-central-1) - 18.184.10.179</p><p id="e5c62523-6337-4f1c-96d1-5f58fe50f5fc" class="">Now, if we create a record in the hosted zone pointing to the public IP of any of the instances above, we can open that domain in the web browser to be directed to that public IP.</p><figure id="b3bc8999-d95f-4802-aae5-2312f0e17266" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20133.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20133.png"/></a></figure></li></ul><ul id="b1e3fcca-dfaa-4538-a2dd-e6e965e4ddb0" class="bulleted-list"><li style="list-style-type:disc">Create a CNAME record mapping to an ALB<figure id="8d9343ee-8007-4e92-af10-a5263533a45f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20134.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20134.png"/></a></figure></li></ul><ul id="0a21b17b-d5be-4bac-b982-82a27b1e6e06" class="bulleted-list"><li style="list-style-type:disc">Create an Alias record mapping the Zone Apex to an ALB<p id="95afb40c-4127-439f-81e2-0f97a3fc6841" class="">Only Alias records can be used for this. CNAME records cannot map to root level hostnames.</p><figure id="959e112b-0263-4462-ae87-3cb0f7a236b6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20135.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20135.png"/></a></figure></li></ul><ul id="234f73e0-ea9a-48cc-b326-671e14659545" class="bulleted-list"><li style="list-style-type:disc">Delete a hosted zone<ul id="382955f1-d98e-4f0a-973c-436e6cf475b8" class="bulleted-list"><li style="list-style-type:circle">First delete all the records except the NS and SOA</li></ul></li></ul></details></li></ul></details></li></ul><ul id="8d9c99e7-46e2-416e-afe5-41296abba5f1" class="toggle"><li><details open=""><summary>3rd party Domains and Route 53</summary><ul id="49e0a168-b513-442a-886c-07e57ddafa6f" class="bulleted-list"><li style="list-style-type:disc">Theory<ul id="a348fb28-7c9d-4464-b468-cc35929461c7" class="bulleted-list"><li style="list-style-type:circle">You buy or register your domain name with a Domain Registrar typically by paying annual charges (e.g. GoDaddy, Amazon Registrar, etc.). The Domain Registrar usually provides you with a DNS service to manage your DNS records.</li></ul><ul id="ebc9069c-8cea-4cdf-911f-e5ac26d1c47f" class="bulleted-list"><li style="list-style-type:circle">You can use another DNS service to manage your DNS records. Example: purchase the domain from GoDaddy and use Route 53 to manage your DNS records</li></ul><figure id="25b6cdb6-09ea-4ab6-a36d-9fdf1dd9e7a0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20136.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20136.png"/></a></figure></li></ul><ul id="fb525315-9792-4c03-97db-04f5225e7ede" class="bulleted-list"><li style="list-style-type:disc">Use GoDaddy as registrar and Route 53 as DNS<p id="d56c36f6-736b-46cb-9c97-ca3c5899140c" class="">Once we register a hostname at GoDaddy, we need to update the name servers (NS) of GoDaddy to match the name servers of a public hosted zone created in Route 53. This way, GoDaddy will use Route 53’s DNS.</p><figure id="0f9206f4-3ff4-4f16-b4ad-ff0e9a3ca73c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20137.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20137.png"/></a></figure><figure id="4822443e-7943-4d0c-96c4-6f0c96c4f628" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(397).png"><img style="width:1627px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(397).png"/></a></figure></li></ul></details></li></ul></div><h3 id="42574fd4-6310-4e4b-bd11-ac00621cb94b" class=""><details open=""><summary>Section 11: Classic Solutions Architecture Discussions</summary></details></h3><div class="indented"><ul id="1135b576-a098-4848-a54f-5b7e1f67a6f8" class="toggle"><li><details open=""><summary>Solutions</summary><p id="9d94c7c3-8d3e-42b4-b8a0-9bf1e9cf2298" class="">In this section, we will see how all the technologies we have learned so far connects together to provide a solution. We will look at some case studies:</p><ul id="c4020f8b-912a-41a6-a311-163406b0bbca" class="toggle"><li><details open=""><summary>WhatIsTheTime.com</summary><p id="92e46150-2f03-425c-9e59-38e76c731041" class="">Allows people to know the current time.</p><p id="469aafdd-25d7-4c0e-84db-49898a5ecc4b" class="">Stateless Web App: Database not needed</p><ul id="b26a0772-fc20-4710-92bf-f33fc2170b32" class="toggle"><li><details open=""><summary>Version 1</summary><p id="d378944b-c29f-4c6c-b856-4e347e2da4e3" class="">Single public EC2 instance with an elastic IP to keep it static.</p><p id="fc6a5969-0c58-4b7f-bbe8-99b9c18be832" class="">Problem: if load increases, need to scale vertically.</p><figure id="42e5b081-94e8-4c11-8005-3b6c00ea2bcc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20138.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20138.png"/></a></figure></details></li></ul><ul id="727d9c63-cd64-4d3c-bd09-5cd30c5795d4" class="toggle"><li><details open=""><summary>Version 2</summary><p id="4c16ce6e-3dab-4e0d-a47d-0fcd50037faa" class="">Switched T2 to M5 (scaled vertically)</p><p id="d1576834-000e-4a37-87e7-ea360256438b" class="">Problem: downtime while upgrading to M5 and vertical scaling is limited</p><figure id="0e690af7-f4ae-4a0a-bddb-e06bbd7e7d0b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20139.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20139.png"/></a></figure></details></li></ul><ul id="f71f4497-5623-4af6-b8ca-7afa85ce28d0" class="toggle"><li><details open=""><summary>Version 3</summary><p id="de5bce40-97d3-4201-821f-09df6aabe216" class="">Add more instances (scale horizontally) and attach elastic IPs to each instance.</p><p id="f406916f-bade-4008-88f3-3ff1932c83b8" class="">Problem: Users need to be aware of all the IPs and we can only have 5 elastic IPs max</p><figure id="a58a2b89-c3fc-4d2f-8d8d-190b6f2af43a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20140.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20140.png"/></a></figure></details></li></ul><ul id="4b82cdc1-b8cb-405f-81eb-6f447e785c1f" class="toggle"><li><details open=""><summary>Version 4</summary><p id="f25ab184-9e82-4b0d-95da-2274f4292acd" class="">Instead of using elastic IPs, use Route 53 to return the list of IPs of all the EC2 instances.</p><p id="946654f7-b9aa-4c34-9d82-454511c2fdf3" class="">Problem: if an instance goes down, DNS will take some time to update based on health check (1h), so some users will experience down time. Also, not easy to add or remove instances as DNS takes some time to update.</p><figure id="fe19db8e-4455-4b93-8296-af830085bdea" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20141.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20141.png"/></a></figure></details></li></ul><ul id="766f57ab-12a5-499e-bfb0-2a72fe8ca182" class="toggle"><li><details open=""><summary>Version 5</summary><p id="ebdf3c11-7d8d-4464-9431-03fbd41b46cf" class="">Instead of letting the client select a public EC2 instance, we can do the load balancing on the server side using a load balancer. This will allow the EC2 instances to be private and restricted to be accessed only by the ELB (using security groups). Route 53 will have an alias record pointing to the ELB which using health checks will direct the traffic only to live instances.</p><p id="488e6eca-e08e-495d-8647-4abe7ad6d891" class="">Problem: Horizontal Scaling is still manual</p><figure id="e60aff30-c878-4edc-a379-ebd5d6901178" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20142.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20142.png"/></a></figure></details></li></ul><ul id="68b5c477-b973-48f5-9418-9c2e3e322dcb" class="toggle"><li><details open=""><summary>Version 6</summary><p id="0333ee49-51c4-4ece-8c86-ba01bd8700d7" class="">Auto scaling group is used to dynamically add or remove instances (horizontal scaling) and attach them to ELB.</p><p id="f89a9304-3529-4543-b40b-24c8b336608d" class="">Problem: Since all the instances and ELB are hosted in the same AZ, they might go down in case of a disaster.</p><figure id="9e0ee1d8-befe-48b8-baa6-de6886a41072" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20143.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20143.png"/></a></figure></details></li></ul><ul id="9b9655f9-9bc8-457d-a418-9466ec7f2c1e" class="toggle"><li><details open=""><summary>Version 7</summary><p id="dcfd1ef0-295f-46d5-8e95-51847b49b2c7" class="">Let’s make our app multi-AZ by setting up ELB in all the AZs and making the ASG span all the AZs. This will make our app highly available and resilient to failure.</p><p id="1b36133b-75ea-4542-8713-59dadc3976dc" class="">Problem: Expensive as all the EC2 instances are on-demand even though we know that the minimum number of instances required to be highly available is 2.</p><figure id="4ffbb6d6-bf19-47d9-8f36-5cff7fefb2c8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20144.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20144.png"/></a></figure></details></li></ul><ul id="ff43c6eb-ea2d-4630-9fe5-53af1f494a06" class="toggle"><li><details open=""><summary>Version 8</summary><p id="d152f073-17bc-4ee6-b204-e976fbfd6dde" class="">Reserve 2 EC2 instances in separate AZs for 1 or 3 years to stay highly available while cutting down the cost.</p><figure id="f113a183-593c-4a40-aacd-75ce79811701" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20145.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20145.png"/></a></figure></details></li></ul><ul id="66cb263d-a9a0-4814-98a5-9666227416b4" class="toggle"><li><details open=""><summary>Outro</summary><figure id="5f98657d-17d3-45e8-8e39-0cca257ec3c7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(398).png"><img style="width:1334px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(398).png"/></a></figure></details></li></ul></details></li></ul><ul id="8adfc654-5a46-46f3-bcda-f9745858c125" class="toggle"><li><details open=""><summary>MyClothes.com</summary><p id="af8172ee-1c5d-434c-93a5-f07937f068c5" class="">Allows people to buy clothes online (100s of users at the same time). We need horizontal scalability and keep our web application as stateless as possible. Users should have their address stored in a database (stateful web app).</p><ul id="02a63f3e-33ab-4dde-b811-3fd0da5d922e" class="toggle"><li><details open=""><summary>Version 1</summary><p id="4b05e3d1-c06c-4370-a154-98b178d63c3d" class="">Multi AZ ASG with ELB (horizontally scalable solution)</p><p id="03b3a4c3-ec75-4a04-8fd6-75baa6aff923" class="">Problem: User loses the cart info while navigating the website because ELB routes every request to a different instance.</p><figure id="09b10210-5983-4376-af1a-665a5d5e0048" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20146.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20146.png"/></a></figure><p id="db88f9f7-950d-4b59-988e-77377b16d0b6" class="">Untitled</p></details></li></ul><ul id="4ab6056a-906a-49b5-b244-f109dac62c38" class="toggle"><li><details open=""><summary>Version 2</summary><p id="70f86ced-347e-467c-a854-97418c5d04b0" class="">Implement session affinity (stickiness) at ELB. This will route all of the requests coming from a user to the same EC2 instance. Will solve the lost cart info issue.</p><p id="0e3b8126-4d81-4139-b509-8bf3cd7d07ff" class="">Problem: if the instance serving user goes down, the state info will be lost.</p><figure id="8710205d-6371-41f3-8431-5ca07f85e924" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20147.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20147.png"/></a></figure><p id="f910da93-fc1a-46b4-b903-8169fb457fe3" class="">Untitled</p></details></li></ul><ul id="3b013cdf-5bad-4822-8ca5-377050cc9763" class="toggle"><li><details open=""><summary>Version 3</summary><p id="dfa9d91e-9aec-4154-beaf-1d120178baa6" class="">Instead of storing the cart info at the server end, store them at the client’s end using Web Cookies. So, the in every HTTP request sent by the client, the cookies will be sent too. This will allow our EC2 instances to remain stateless.</p><p id="e4663edc-4bab-4808-9ad6-28f99c272ae6" class="">Problem: Security risk as the cart info in cookies can be altered (cookies must be validated) and cookies size must be less than 4KB</p><figure id="0d6c29b2-11c6-48f0-9a60-329ef5e31bd2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20148.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20148.png"/></a></figure><p id="7bde3462-3813-43e3-b53c-09a82aaf5cac" class="">Untitled</p></details></li></ul><ul id="90b4701a-133f-4b3c-af4d-215f05d4067d" class="toggle"><li><details open=""><summary>Version 4 (Server Session)</summary><p id="bdf9a053-4b92-4c7e-9bfe-b41b7c5402fe" class="">Instead of web cookies, store the cart info in ElastiCache cluster which will give us a sesion id. Store the session id as a user cookie. The session id will be sent in the user request, which will be used by the EC2 instances to access the session data from ElastiCache (sub millisecond latency).</p><p id="049f7098-d156-456f-a008-abe0c24ecf6e" class="">EC2 instances will remain stateless (easily scalable horizontally)</p><p id="aef3d38e-b008-42cd-b125-940fbd5f8e8c" class="">Much more secure as attackers can’t modify the content of the ElastiCache.</p><p id="d841f555-4043-4e5d-9e63-2fa04463a460" class="">DynamoDB can be used as an alternative to ElastiCache.</p><p id="1969c75f-549f-4bd5-8eeb-9d50703310b8" class="">Problem: can’t store catalog and user data (address) permanently</p><figure id="524c6f9f-91ea-4fbc-be31-454fece13b3d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20149.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20149.png"/></a></figure><p id="f92f8ecb-2387-4d47-b4d1-b8861581256a" class="">Untitled</p></details></li></ul><ul id="b8533fbb-ae37-44e3-bf15-5309149fbd52" class="toggle"><li><details open=""><summary>Version 5</summary><p id="e2997ec3-5121-44b7-a084-d5a81a0720d2" class="">Add RDS to store catalog and user data permanently. EC2 remains stateless.</p><p id="c736b8f4-02fb-4b5d-98e0-47d727f87042" class="">Problem: Most of the incoming requests are to read data from the database, so we need to scale the reads.</p><figure id="5ccf0907-9fd7-4b35-bfb9-2270c2a0396a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20150.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20150.png"/></a></figure><p id="ada7c277-52d8-45c5-947a-a849af60f79c" class="">Untitled</p></details></li></ul><ul id="589d2a12-0f79-4b04-8a97-ac504f1bde2c" class="toggle"><li><details open=""><summary>Version 6</summary><p id="137b1fd8-1435-4409-8016-a276d44b7ee4" class="">Add read replicas to scale the reads (upto 5 read replicas).</p><figure id="6a5f3ed2-a96f-42af-8fcd-21fa65e86772" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20151.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20151.png"/></a></figure><p id="3b0888a6-fe4b-4e7b-841f-3fcb208b3a38" class="">Untitled</p></details></li></ul><ul id="07490a02-0495-4d9b-bc51-cab8717b9a8b" class="toggle"><li><details open=""><summary>Version 6 (alternative)</summary><p id="ea58e25c-b6da-4ab2-bbf2-66a940291922" class="">We can implement Write Through</p><p id="868db4e1-73fd-49f8-9b3e-983e2dc59b83" class="">Use elasticache to cache the reads. So, if another EC2 instance reads the same data, it will first be checked in the cache and if it’s a miss, then it will be fetched from the RDS and stored in the cache. Requires cache maintenance on the application side (difficult).</p><figure id="a3a5f259-d156-4d88-b088-aa20b6ada298" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20152.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20152.png"/></a></figure><p id="8b588179-e4e5-4700-929f-8354588ffe5e" class="">Untitled</p></details></li></ul><ul id="02872cbf-fd98-4ae7-a358-f037e0d76dd5" class="toggle"><li><details open=""><summary>Enhancements</summary><p id="3001d8a8-8980-4178-be14-1d4939e4fe96" class="">Enable Multi AZ for ElastiCache and RDS</p><figure id="7f3b04c3-cd33-4d51-a201-ad9c91c44385" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20153.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20153.png"/></a></figure><p id="07d1144e-1099-4687-9c5b-f003e61f302d" class="">Untitled</p><p id="a90cc893-4833-42cc-93bf-33543681abbd" class="">Configure security groups</p><figure id="da10a8be-558a-4341-b9d3-c2c31d0d3372" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20154.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20154.png"/></a></figure><p id="180047e7-1150-4c60-b7d1-a8cc56e4b02f" class="">Untitled</p></details></li></ul><ul id="847b0e5e-fdf0-47db-b5e3-792e2b1dfe7b" class="toggle"><li><details open=""><summary>Outro</summary><figure id="7d4eeac3-edd9-4403-85f1-229f2bbbd64b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(399).png"><img style="width:1428px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(399).png"/></a></figure></details></li></ul></details></li></ul><ul id="b7978cd5-bd6c-4988-9de9-4fd1fc1da377" class="toggle"><li><details open=""><summary>MyWordPress.com</summary><p id="de944183-bab3-4fc4-924b-1a30c08ac3f0" class="">We are trying to create a fully scalable WordPress website. We want that website to access and correctly display picture uploads. Our user data, and the blog content should be stored in a MySQL database.</p><ul id="86913b72-a468-43c1-8719-af36871cad82" class="toggle"><li><details open=""><summary>Version 1</summary><p id="1ae7cf2c-aae9-4792-9e31-4e7b9233c254" class="">Multi-AZ ASG and ELB along with Aurora running MySQL engine instead of RDS because Aurora is easier to scale and operate.</p><p id="ae2a3348-5a28-4dbd-94a6-46559019c995" class="">Problem: Cannot store images in Aurora</p><figure id="f32983fd-076f-4013-b0ef-f6688d348ee5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20155.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20155.png"/></a></figure></details></li></ul><ul id="4e832944-d142-4ca5-aecb-843d29023377" class="toggle"><li><details open=""><summary>Version 2</summary><p id="7c8ee81a-0276-4e13-ac57-fd282167848a" class="">Store the uploaded image into each attached EBS volume of the EC2 instances.</p><p id="0736a0ac-e1b6-4b90-9f98-809960de370a" class="">Problem: EBS volumes are bound to an AZ, so if another instance gets connected to the user at a later point in time, it will not have the uploaded image. So, this approach can work in case of a single instance but scalability is a problem.</p><figure id="e36e2fee-8e7f-4911-9106-48966932c230" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20156.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20156.png"/></a></figure><p id="8216c461-91e9-47fb-94f1-92d52e943861" class="">Untitled</p></details></li></ul><ul id="cf1e909f-76ca-41b6-b6b2-0fae338d1e9a" class="toggle"><li><details open=""><summary>Version 3</summary><p id="cb52df72-7b19-440e-938c-6c05ad0e4ecd" class="">Instead of using EBS (which is bound to an AZ), use EFS (elastic file system) which is a common scalable storage that can be accessed by multiple EC2 instances using ENI (elastic network interfaces). This way, there is a common storage and scalability issue is resolved.</p><figure id="ad4cac4a-8f04-42bf-b7ae-71e0b78113b8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20157.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20157.png"/></a></figure><p id="b730fe1e-1993-49f0-9a91-07bf3a0d1a66" class="">Untitled</p></details></li></ul><ul id="9f6ec7e1-a14b-48ab-a66a-2d18902e51c3" class="toggle"><li><details open=""><summary>Outro</summary><figure id="e48c0b6f-db38-4585-b2b1-0d8a13044b63" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(400).png"><img style="width:1415px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(400).png"/></a></figure></details></li></ul></details></li></ul></details></li></ul><ul id="6bdcb37f-46cd-4c7a-9546-8aaff0002b57" class="toggle"><li><details open=""><summary>Instantiating Applications Quickly</summary><p id="69323941-97eb-4678-bdbf-0f2a445800bd" class="">EC2 Instances:</p><ul id="c6c79e49-0b15-4f99-95cf-95bc4802e8c1" class="bulleted-list"><li style="list-style-type:disc">Use a Golden AMI: Install your applications, OS dependencies etc.. beforehand and launch your EC2 instance from the Golden AMI. This is good for static configurations that will remain the same for every EC2 instances that we want to launch.</li></ul><ul id="d5f72950-9e81-4989-8b67-14a004154ae0" class="bulleted-list"><li style="list-style-type:disc">Bootstrap using User Data: This is good for dynamic configurations that need to be fetched specifically for each EC2 instance. Example private IP, region etc.</li></ul><ul id="07b2c171-c16b-4327-b248-50dcbcdb5c90" class="bulleted-list"><li style="list-style-type:disc">Hybrid: mix of Golden AMI and User Data (Elastic Beanstalk)</li></ul><p id="4458fefd-fbb8-4e21-b734-cb160ccb86a1" class="">RDS Databases:</p><ul id="1a5960f7-a5b4-438f-94c4-a7494f1ec9cc" class="bulleted-list"><li style="list-style-type:disc">Restore from a snapshot: the database will have schemas and data ready!</li></ul><p id="cd4c5671-d75e-44d3-b745-aa55298dd227" class="">EBS Volumes:</p><ul id="4a00320a-617f-4c7c-b4bb-550420db0e79" class="bulleted-list"><li style="list-style-type:disc">Restore from a snapshot: the disk will already be formatted and have data!</li></ul></details></li></ul><ul id="d04f77a8-2a1a-48f1-836b-b40b8299793c" class="toggle"><li><details open=""><summary>Beanstalk</summary><ul id="a6d23c1d-5b2c-49c4-bf14-5cb81554fffd" class="toggle"><li><details open=""><summary>Typical 3-tier Web App Architecture</summary><p id="2f45e0fe-6a40-4303-867f-88868ba2d6b4" class="">This architecture (consisting of a public subnet, private subnet along with some database and cache) will be followed in pretty much every application that we build.</p><figure id="61c59ad1-7b16-49e0-b797-55dc88754c49" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20158.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20158.png"/></a></figure></details></li></ul><ul id="b9368400-ac9a-4cbe-8373-63d4907aca4e" class="toggle"><li><details open=""><summary>Elastic Beanstalk</summary><ul id="7cbc80e6-a9ae-4c0e-87d7-03657e437599" class="toggle"><li><details open=""><summary>Theory</summary><ul id="6b95452b-0a86-4bed-b5c7-a8161669ccb9" class="toggle"><li><details open=""><summary>Intro</summary><ul id="b2e21d43-7082-42a5-99e9-1c4fdef74e1b" class="bulleted-list"><li style="list-style-type:disc">Elastic Beanstalk is a developer centric view of deploying an application on AWS. It re-uses all the components required to setup the web app architecture.</li></ul><ul id="70f665c6-e932-40ce-a8bb-287ec93bfbaf" class="bulleted-list"><li style="list-style-type:disc">Managed by AWS</li></ul><ul id="6cd81b18-5a80-4377-adc3-6e3671bfdc2d" class="bulleted-list"><li style="list-style-type:disc">Automatically handles capacity provisioning, load balancing, scaling, application health monitoring, instance configuration, etc. but we still have full control over the configuration but it will be bundled in a single interface under Beanstalk.</li></ul><ul id="eab1dac8-112b-4de4-8bba-003e1c964721" class="bulleted-list"><li style="list-style-type:disc">Just the application code is the responsibility of the developer</li></ul><ul id="fe0eb64b-ff14-4418-8cce-1eb7cbcd5c44" class="bulleted-list"><li style="list-style-type:disc">Beanstalk is free but you pay for the underlying instances</li></ul></details></li></ul><ul id="ad6983ff-afcd-4749-93ae-69c11db27f0c" class="toggle"><li><details open=""><summary>Components</summary><ul id="a856117c-1f80-46f7-baa2-8a4f1aa7f201" class="bulleted-list"><li style="list-style-type:disc">Application: collection of Elastic Beanstalk components (environments, versions, configurations, etc.)</li></ul><ul id="c4f57307-c109-411a-8735-57ddda341553" class="bulleted-list"><li style="list-style-type:disc">Application Version: an iteration of your application code</li></ul><ul id="e0af21e1-bb34-4966-8222-e80efcba5a1b" class="bulleted-list"><li style="list-style-type:disc">Environment: Collection of AWS resources running an application version (can only have one application version at a time inside an environment). You can create multiple environments (dev, test, prod, etc.)<ul id="42563c92-4e2b-4bca-b7c3-72cf42d8e1f7" class="bulleted-list"><li style="list-style-type:circle">Tiers: Web Server Environment Tier &amp; Worker Environment Tier</li></ul></li></ul></details></li></ul><ul id="46107958-a19a-4ed9-a43d-07593c775cfd" class="toggle"><li><details open=""><summary>Process</summary><figure id="fdba6655-3b34-4e1b-96c0-5fb7025572f4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20159.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20159.png"/></a></figure></details></li></ul><ul id="d1001aad-8cb4-45d4-9fd0-efd1201b28ea" class="toggle"><li><details open=""><summary>Supported Platforms</summary><ul id="110c059f-f288-4f2a-9adc-5381af6f826f" class="bulleted-list"><li style="list-style-type:disc">Go</li></ul><ul id="4cbdfbc6-bf4f-4139-a48d-d1025c1717f8" class="bulleted-list"><li style="list-style-type:disc">Ruby</li></ul><ul id="c56ab70a-66f9-43c1-b65a-9ceadd6a9ec9" class="bulleted-list"><li style="list-style-type:disc">Java SE</li></ul><ul id="74798968-8d4c-4c16-80e4-948cb587fbfb" class="bulleted-list"><li style="list-style-type:disc">Packer Builder</li></ul><ul id="96385df1-5955-4a01-b1f8-7f82ea10d76e" class="bulleted-list"><li style="list-style-type:disc">Java with Tomcat</li></ul><ul id="d1033c75-6210-4f20-b4d7-e512c62df957" class="bulleted-list"><li style="list-style-type:disc">Single Container Docker</li></ul><ul id="3a84a28d-3ed4-48b2-b7dd-8cae292538c3" class="bulleted-list"><li style="list-style-type:disc">NET Core on Linux</li></ul><ul id="bf003c16-777c-4cf2-92f6-b55c1c7c12f1" class="bulleted-list"><li style="list-style-type:disc">Multi-container Docker</li></ul><ul id="3d01d52e-4ed8-4e20-832d-b3dab2220ef0" class="bulleted-list"><li style="list-style-type:disc">NET on Windows Server</li></ul><ul id="d0502d23-e096-48ab-b469-a6da09c4cd76" class="bulleted-list"><li style="list-style-type:disc">Preconfigured Docker</li></ul><ul id="3d941bdf-9595-424d-a2a8-81cd1849eb53" class="bulleted-list"><li style="list-style-type:disc">Node.js</li></ul><ul id="5237c9bf-05da-4bed-a2ce-c6a378de95b7" class="bulleted-list"><li style="list-style-type:disc">PHP</li></ul><ul id="bd1759cc-6a0f-4b36-9edf-05a2b624599f" class="bulleted-list"><li style="list-style-type:disc">Python</li></ul><ul id="841462ea-d434-4626-9bc2-d3bf2d069bd5" class="bulleted-list"><li style="list-style-type:disc">If not supported, you can write your custom platform (advanced)</li></ul></details></li></ul><ul id="18e2a579-243f-450d-be74-8413235c4943" class="toggle"><li><details open=""><summary>Web Server Tier vs Worker Tier</summary><p id="091d6229-5e08-4188-9188-3bb0705ac474" class="">Web Environment (Web Server Tier): clients requests are directly handled by EC2 instances through a load balancer.</p><p id="2f97fffb-b308-444d-b994-e9656ea890b4" class="">Worker Environment (Worker Tier): clients’s requests are put in a SQS queue and the EC2 instances will pull the messages to process them. Scaling depends on the number of SQS messages in the queue.</p><p id="c438fe71-be35-4e70-8152-e49257532a76" class=""><strong>⛔ Web and worker environments can be combined together where the web environment pushes the tasks in the worker environment to complete them.</strong></p><figure id="db0a4ebb-1989-456d-83d2-dfaedbc26826" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20160.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20160.png"/></a></figure></details></li></ul></details></li></ul><ul id="12e9fc8a-6fd9-4a37-bb61-36008ebf9828" class="toggle"><li><details open=""><summary> Create a Beanstalk web-application</summary><p id="ab54a786-527f-407b-a84d-9343077b64a7" class="">Elastic Beanstalk → Create application</p><ul id="78b2d5e5-2bce-440c-8714-4153181a7da5" class="bulleted-list"><li style="list-style-type:disc">Configure more options will allow you to configure the environment.</li></ul><ul id="b5325ee9-fc7f-4746-8acc-75c9c2055ca1" class="bulleted-list"><li style="list-style-type:disc">Single instance application (with an elastic IP) is free-tier enabled.</li></ul><p id="a359cc95-53f3-4265-870a-1d80c06aeed9" class="">Once the application is deployed, all of the required services like ASG, ELB, EC2 along with databases and security groups will be automatically configured.</p><p id="ec3cde64-c83b-44a3-b4e0-653deed1a354" class="">To delete the beanstalk environment, go to actions → terminate environment</p><figure id="a46a1517-b9e7-43e6-9ece-b39c2091bdc0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20161.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20161.png"/></a></figure></details></li></ul></details></li></ul></details></li></ul></div><h3 id="0616a0cd-38c1-4ca7-acbb-43c13b5c6692" class=""><details open=""><summary>Section 12: Amazon S3 Introduction</summary></details></h3><div class="indented"><ul id="baf5b298-927d-4bac-8a53-4002bb0e3de2" class="toggle"><li><details open=""><summary>Intro</summary><ul id="892b6d80-f58f-4f84-9258-c6466b7e8624" class="bulleted-list"><li style="list-style-type:disc">S3 is a global AWS service</li></ul><ul id="edf76487-af83-4ea5-b5b2-6f83a294ccbc" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 allows us to store objects (files) in “buckets” (directories)</li></ul><ul id="6ddc1fe1-67f1-4c26-a2e4-6f4ca9b41e8f" class="bulleted-list"><li style="list-style-type:disc"><strong>Buckets must have a globally unique name</strong></li></ul><ul id="cf63f672-6a04-4ef0-a72f-ab00ae4311c0" class="bulleted-list"><li style="list-style-type:disc"><strong>Buckets are defined at the region level</strong></li></ul><ul id="d4292db8-814b-4083-a684-807d5283c780" class="bulleted-list"><li style="list-style-type:disc">Naming convention<ul id="aa9d264d-6344-4cec-9fc0-e981767cd5e7" class="bulleted-list"><li style="list-style-type:circle">No uppercase</li></ul><ul id="5bf3b815-4ba3-4d4c-83b5-1ff595764c44" class="bulleted-list"><li style="list-style-type:circle">No underscore</li></ul><ul id="ac81e7ba-a204-4202-8ed3-2a8136c1a828" class="bulleted-list"><li style="list-style-type:circle">3-63 characters long</li></ul><ul id="ac239892-7d35-4d85-ac73-7bf2cd659993" class="bulleted-list"><li style="list-style-type:circle">Not an IP</li></ul><ul id="b8e65e63-d9cf-41dd-9c24-23ad43673625" class="bulleted-list"><li style="list-style-type:circle">Must start with lowercase letter or number</li></ul></li></ul><ul id="f99eb1a3-a79d-4b00-bdd5-e987975728b0" class="bulleted-list"><li style="list-style-type:disc">Objects (files) have a key (the full path to the object):<ul id="e38d9370-454a-44f7-9dfe-1170a2408770" class="bulleted-list"><li style="list-style-type:circle">s3://my-bucket/my_file.txt</li></ul><ul id="336205ce-c822-407c-8a58-601ecc37126f" class="bulleted-list"><li style="list-style-type:circle">s3://my-bucket/my_folderl/another_folder/my_file.txt</li></ul></li></ul><ul id="004e67c3-00ec-41e9-90af-d1d539fb3180" class="bulleted-list"><li style="list-style-type:disc">The key is composed of prefix + object name<ul id="e56341db-cda4-4263-a9b6-79d2e6952dc5" class="bulleted-list"><li style="list-style-type:circle">s3://my-bucket/my_folderl/another_folder/my_file.txt</li></ul></li></ul><ul id="98b776ea-a0e1-4f66-93e5-d1da31f15d67" class="bulleted-list"><li style="list-style-type:disc">There’s no concept of “directories” within buckets (just keys with very long names that contain slashes). However, the UI will trick you to think otherwise by displaying S3 buckets as containing folders.</li></ul><ul id="195c33dc-4e2d-43ab-8cc6-6d8f3ba0b05f" class="bulleted-list"><li style="list-style-type:disc">Object values are the content of the body:<ul id="01da066e-9350-4ca0-a464-988fbabc1e5f" class="bulleted-list"><li style="list-style-type:circle">Max Object Size is 5TB, but if uploading an object of more than 5GB, must upload it in parts (multi-part upload).</li></ul><ul id="02350be3-d52d-4f64-b787-92080df4f0a8" class="bulleted-list"><li style="list-style-type:circle">Objects can have Metadata (list of text key / value pairs - system or user metadata)</li></ul><ul id="f64e633f-738a-4fc4-a23f-ae850d1ad66e" class="bulleted-list"><li style="list-style-type:circle">Objects can have Tags (Unicode key / value pair up to 10) - useful for security / lifecycle</li></ul><ul id="9c55f2de-f3be-4613-829f-c715d02d338f" class="bulleted-list"><li style="list-style-type:circle">Objects will have a Version ID (if versioning is enabled)</li></ul></li></ul></details></li></ul><ul id="1b2a57d9-a7fb-4862-8177-285381baf342" class="toggle"><li><details open=""><summary>Buckets &amp; Objects - Hands on</summary><ul id="751f9f25-fa7b-46a9-99f2-db6e356f4045" class="bulleted-list"><li style="list-style-type:disc">Create an S3 bucket<p id="67e29092-7ba6-40cb-97d3-06136bc2121a" class="">S3 → Create bucket</p></li></ul><ul id="b51ce56a-1641-4762-9876-4515a15e52b0" class="bulleted-list"><li style="list-style-type:disc">Upload files<p id="21843b37-5c4b-4754-9c22-51b69aa3155d" class="">Select the bucket → Upload</p></li></ul><ul id="490724a0-dede-4e7b-9cda-d59ebb0ff663" class="bulleted-list"><li style="list-style-type:disc">View uploaded file<p id="c6273af8-d8a8-4cbb-b152-c84945feb7d0" class="">Select the object → Open</p><p id="74eb03d5-40fb-4137-b7cf-7f22927048ae" class="">This will use a pre-signed URL (containing temporary access credentials to allow us to view the file in browser). If we click on the Object URL (unsigned), we will get access denied as the S3 bucket is not public.</p><figure id="318311c4-e2b2-422c-b9fd-b060f27d80d6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20162.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20162.png"/></a></figure></li></ul></details></li></ul><ul id="9bebebcf-4118-4edd-80bc-d941c2a2b38d" class="toggle"><li><details open=""><summary>Security: Bucket Policy</summary><ul id="bb69ff2a-e9df-4b15-b336-c9bad8e1c7d5" class="toggle"><li><details open=""><summary>Intro</summary><p id="11e09ea1-e386-454f-83f4-87d3301025bd" class="">Types of security in S3:</p><ul id="d7e3807a-2f59-46c7-982b-9ca52db0731a" class="bulleted-list"><li style="list-style-type:disc">User based (works using IAM policies that define which API calls should be allowed for a specific user from IAM console)</li></ul><ul id="650809f1-1f7e-4c1a-9ba2-da7e19868d94" class="bulleted-list"><li style="list-style-type:disc">Note: an IAM principal can access an S3 object if<ul id="c91ac580-bde7-4b4b-a1c0-89f2a9e23b27" class="bulleted-list"><li style="list-style-type:circle">The user IAM permissions Allow it OR the resources policy ALLOWS it</li></ul><ul id="3bef7eee-2e8a-49ea-ba36-8b5bf357054e" class="bulleted-list"><li style="list-style-type:circle">AND there’s no explicit Deny</li></ul></li></ul><ul id="dbf68d73-ab0a-4d9b-bdb6-b04449a0e0f0" class="bulleted-list"><li style="list-style-type:disc">Encryption: encrypt objects in Amazon S3 using encryption keys</li></ul><ul id="ac1628aa-0f2c-4219-93b5-5453aab4349f" class="toggle"><li><details open=""><summary>Resource Based</summary><ul id="752bd431-cbd9-4357-a3d1-bc1079f58146" class="toggle"><li><details open=""><summary>Bucket Policies (bucket wide rules from the S3 console) - allows cross account access of S3 resources</summary><ul id="6642b4d5-c634-47d7-9c3d-b951c813a03f" class="toggle"><li><details open=""><summary>JSON based policies</summary><ul id="42e87e8d-3ab6-4a5a-93fc-32297b21647e" class="bulleted-list"><li style="list-style-type:disc">Resources: can be buckets or objects</li></ul><ul id="251eadb2-751c-430f-ba9f-85d6a90c1f89" class="bulleted-list"><li style="list-style-type:disc">Effect: Allow / Deny</li></ul><ul id="0e6297f9-243c-41d3-b972-84cec03c5d71" class="bulleted-list"><li style="list-style-type:disc">Actions: Set of APIs to Allow or Deny</li></ul><ul id="81930857-c3da-4a6d-adb7-4341c0b43ef4" class="bulleted-list"><li style="list-style-type:disc">Principal: The account or user to apply the policy to</li></ul><figure id="9af14658-fd9a-40c4-a7b0-9cc916761b16" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20163.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20163.png"/></a></figure></details></li></ul><ul id="324684d7-9d25-41b7-82d3-c38e0bf97bed" class="toggle"><li><details open=""><summary>Use S3 bucket for policy to:</summary><ul id="96904a6d-80b9-4d21-b415-e5f511efb7b0" class="bulleted-list"><li style="list-style-type:disc">Grant public access to the bucket - Use Bucket Policy<figure id="a95fb5d9-7b37-4310-a690-0b21f76d5a77" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(401).png"><img style="width:830px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(401).png"/></a></figure></li></ul><ul id="465b734e-f604-4597-90af-7626c95e379b" class="bulleted-list"><li style="list-style-type:disc">EC2 Instance access - Use IAM roles<figure id="6837847e-8324-43ce-8b67-1d6ba6faa4e9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(401)%201.png"><img style="width:830px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(401)%201.png"/></a></figure></li></ul><ul id="69407281-8c87-4773-afeb-28d7310ee0d2" class="bulleted-list"><li style="list-style-type:disc">User Access to S3 - IAM permissions<figure id="0336e3d8-cdbe-4fef-8e57-098663f80b4d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(403).png"><img style="width:756px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(403).png"/></a></figure></li></ul><ul id="e2716a29-1c98-4340-b454-13264d719b06" class="bulleted-list"><li style="list-style-type:disc">Grant bucket access to another account (Cross Account)<figure id="09e16116-b7c7-4c97-9541-ed49aef56bc2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(404).png"><img style="width:934px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(404).png"/></a></figure></li></ul><ul id="499a70a0-0844-40f8-ae9e-094c4efd218a" class="bulleted-list"><li style="list-style-type:disc">Bucket setting: Block public access<figure id="fdec2527-f2e2-4eca-a299-aa4016eeccc1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(405).png"><img style="width:814px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(405).png"/></a></figure></li></ul><ul id="57a526a1-2894-40d6-8d49-4d8de7f2a86c" class="bulleted-list"><li style="list-style-type:disc">Force objects to be encrypted at upload</li></ul></details></li></ul><p id="d24b1c1b-8e2e-4a8c-96fa-926e9c34e647" class="">
</p><p id="6aedc4b4-5063-4985-8e7d-f754e0227e46" class="">new →</p><p id="3c35e4e5-8136-4948-900e-2dae4d2993d3" class="">⛔ An IAM principal can access an S3 object if the user lAM permissions allow it OR the resource policy ALLOWS it AND there’s no explicit DENY. Example if the User policy allows the resource to be accessed but if the resource policy explicitly denies it, then access is restricted.</p></details></li></ul><ul id="daa96243-df87-4cba-b4fd-a2c200df5e2e" class="bulleted-list"><li style="list-style-type:disc">Object Access Control List (ACL) - finer grain</li></ul><ul id="8981a90d-061f-41a3-bdaf-5ec21a9bc9c8" class="bulleted-list"><li style="list-style-type:disc">Bucket Access Control List (ACL) - less common</li></ul></details></li></ul><p id="f2588b0c-fc16-40e9-ae3a-c56119ea988d" class="">
</p><p id="49bda525-155c-45d4-a8fd-670c3ad62723" class="">new →</p><ul id="a6ddff22-63be-4085-83b4-bcfa2da16f12" class="bulleted-list"><li style="list-style-type:disc">Public access can be applied at the bucket level or the object level when uploading objects into the bucket</li></ul><p id="c76a5765-a00e-447a-a482-98f5915256a3" class="">Networking:</p><ul id="219de605-4ebc-46f7-a4d0-77aa77dca82b" class="bulleted-list"><li style="list-style-type:disc">Supports VPC Endpoints (to allow resources inside the VPC connect to S3 without public internet)</li></ul><p id="81d76d1e-488b-4a53-ba92-1fbf323220ff" class="">Logging and Audit:</p><ul id="490232a9-2cb3-499e-859a-5484adfc55b5" class="bulleted-list"><li style="list-style-type:disc">S3 Access Logs can be stored in other S3 bucket</li></ul><ul id="824b94a2-7f40-4afe-81e7-e4b44678ca9f" class="bulleted-list"><li style="list-style-type:disc">API calls can be logged in AWS CloudTrail (service to log API calls)</li></ul><p id="433619cd-84fc-437a-8435-6ede792e63b5" class="">User Security:</p><ul id="8f8c616e-5f43-4748-a434-ba702b8544a4" class="bulleted-list"><li style="list-style-type:disc">MFA Delete: MFA can be required in versioned buckets to delete objects</li></ul><ul id="87420c7b-880f-4fcd-988e-8283e9aaa040" class="bulleted-list"><li style="list-style-type:disc">Pre-Signed URLs: URLs that are valid only for a limited time (ex: premium video service for logged in users)</li></ul></details></li></ul><ul id="7569d15f-8aab-45d6-9c42-a819599080bc" class="toggle"><li><details open=""><summary>Bucket settings to Block Public Access</summary><ul id="9d684f76-095d-4abe-be46-e03b1085cc96" class="bulleted-list"><li style="list-style-type:disc">Block public access to buckets and objects granted through<ul id="6c1c4e19-30f9-418a-ae24-920ab6fa87e3" class="bulleted-list"><li style="list-style-type:circle"><em>new</em> access control lists (ACLs)</li></ul><ul id="76181adc-d88a-4f2b-b1bf-b4418988f31a" class="bulleted-list"><li style="list-style-type:circle"><em>any</em> access control lists (ACLs)</li></ul><ul id="639f83d3-8548-4041-9c49-13eb147c485a" class="bulleted-list"><li style="list-style-type:circle">new public bucket or access point policies</li></ul></li></ul><ul id="75e1a8d4-0198-4192-a37e-45a3c6fb4aff" class="bulleted-list"><li style="list-style-type:disc">Block public and cross-account access to buckets and objects through any public bucket or access point policies</li></ul><ul id="c0cd0928-b422-4401-9501-fee25c9a248c" class="bulleted-list"><li style="list-style-type:disc">These settings were created to prevent company data leaks</li></ul><ul id="1afb226c-4ffc-4856-9998-0ce299d69328" class="bulleted-list"><li style="list-style-type:disc">If you know your bucket should never be public, leave these on. These settings can be set at the account level</li></ul></details></li></ul><ul id="803b9429-e9da-4ac4-a463-255479592d2b" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="32941dce-cd19-44d6-a5ac-1168ef58c146" class="toggle"><li><details open=""><summary>Create bucket policy</summary><p id="c0e3d986-1a95-4c80-977e-4594e5da6b7a" class="">Select S3 bucket → Permissions → Bucket Policy → Edit → Policy Generator</p><p id="49e44d9d-3198-43e3-8db8-a3057493eb31" class="">Type of policy: S3 bucket policy</p><ul id="1ffdff6b-36b2-4233-a47e-cfa63c0b34c1" class="bulleted-list"><li style="list-style-type:disc">Statement to deny upload if SSE is disabled during uploading<figure id="a9ac5b5b-fbe8-4b57-b75a-783c873ba8d3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20164.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20164.png"/></a></figure><p id="18b42f4c-20cb-4df0-a714-5e2e6f7cc1db" class="">Untitled</p></li></ul><ul id="a020b3d8-5eec-437f-9592-79c477de8726" class="bulleted-list"><li style="list-style-type:disc">Statement to deny upload if SSE-S3 is not used for SSE during uploading<figure id="0271f187-ae8f-4c76-a0f0-ff5b48eaecd9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20165.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20165.png"/></a></figure><p id="6ea1682c-43c4-4892-9401-042b9c3e6668" class="">Untitled</p></li></ul><p id="bdebad70-3797-40df-8260-b6ed0af8fb23" class="">Copy generated policy and paste it as JSON.</p><p id="a0c5bf88-1ac0-41af-a45c-98f19456ec0d" class="">If we now try to upload without SSE-S3 encryption, we get access denied error.</p></details></li></ul><ul id="80c24f78-c943-498f-bcb6-465ec00ed158" class="toggle"><li><details open=""><summary>Block public access of all S3 buckets in the account</summary><p id="a380baac-4604-45e7-b75c-189d17f07320" class="">S3 → <strong>Block Public Access settings for this account → Edit</strong></p></details></li></ul></details></li></ul></details></li></ul><ul id="1b41140d-4285-4d55-b054-c6981ed14ac4" class="toggle"><li><details open=""><summary>S3 Static Websites</summary><ul id="c1b97199-5759-4f01-9f60-5cf4f78ff364" class="toggle"><li><details open=""><summary>Theory</summary><ul id="08fcb7df-6d3d-4111-9f4d-b79f716e186c" class="bulleted-list"><li style="list-style-type:disc">S3 can host static websites and have them accessible on the public internet</li></ul><ul id="9846c952-d934-43a9-a885-bdc33d85f561" class="bulleted-list"><li style="list-style-type:disc">The website URL will be <code>&lt;bucket-name&gt;.s3-website-&lt;AWS-region&gt;.amazonaws.com</code></li></ul><ul id="2f0fe7bb-999b-43d9-8822-e0986d2251da" class="bulleted-list"><li style="list-style-type:disc">If you get a 403 (Forbidden) error, make sure the bucket policy allows public reads</li></ul></details></li></ul><ul id="95fe67e7-cfb7-4ed5-b333-72ebf10a7daf" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="5cb87040-65c3-40d3-9e79-2332347c2862" class="bulleted-list"><li style="list-style-type:disc">Disable Server side encryption</li></ul><ul id="2d8a02b0-df55-45c7-8711-9bee0395b286" class="bulleted-list"><li style="list-style-type:disc">In the S3 bucket upload:<ul id="e788d831-c747-426c-b473-329ba555741e" class="bulleted-list"><li style="list-style-type:circle">index.html<pre id="a9bae692-6c8e-4e7f-a3cb-731aeecaf260" class="code code-wrap"><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;My First Webpage&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;I love coffee&lt;/h1&gt;
        &lt;p&gt;Hello world!&lt;/p&gt;
    &lt;/body&gt;

    &lt;img src=&quot;coffee.jpg&quot; width=500/&gt;

    &lt;!-- CORS demo --&gt;
    &lt;div id=&quot;tofetch&quot;/&gt;
    &lt;script&gt;
        var tofetch = document.getElementById(&quot;tofetch&quot;);

        fetch(&#x27;http://demo-other-origin-stephane.s3-website.ca-central-1.amazonaws.com/extra-page.html&#x27;)
        .then((response) =&gt; {
            return response.text();
        })
        .then((html) =&gt; {
            tofetch.innerHTML = html
        });
    &lt;/script&gt;
&lt;/html&gt;</code></pre></li></ul><ul id="a618bbc3-8410-4ed7-9155-42ddf4da2494" class="bulleted-list"><li style="list-style-type:circle">error.html<pre id="43b12336-d4bb-4bf8-9cf8-f64c95d20690" class="code code-wrap"><code>&lt;h1&gt;Uh oh, there was an error&lt;/h1&gt;</code></pre></li></ul><ul id="7b8862fb-7a60-4d72-a7fa-4092d42252f1" class="bulleted-list"><li style="list-style-type:circle">coffee.jpg<p id="ee518e0c-5f0e-4b64-bfd0-cdb63e404925" class=""><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/coffee.jpg">coffee.jpg</a></p></li></ul></li></ul><ul id="a9eb3f90-23d1-4627-a3ff-b9021b4261b1" class="bulleted-list"><li style="list-style-type:disc">Properties → Static website hosting → Edit → Enable</li></ul><ul id="3d3c8a50-91ee-40d7-ab80-31556acf92fe" class="bulleted-list"><li style="list-style-type:disc">Permissions → Enable public access (otherwise 403 error)</li></ul><ul id="59b07c0e-ff97-4410-be80-4c94cbe9f3ca" class="bulleted-list"><li style="list-style-type:disc">Permissions → Add policy to allow any principal to read objects from S3<figure id="6626e7f9-edb7-44af-8307-bad9140ce95b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20166.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20166.png"/></a></figure><p id="8f68bff7-e9c9-477e-9066-4b7a1ddaacd2" class="">Untitled</p></li></ul><p id="8b4aa283-ab1f-477e-b3e7-da855559a920" class="">The website link will be available under the Properties tab</p><figure id="53410db7-0b5f-4ec3-997d-68f4acd5b680" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20167.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20167.png"/></a></figure><p id="c7511496-4de0-4a51-bf98-0253c53ed69d" class="">Untitled</p></details></li></ul></details></li></ul><ul id="a669ea98-ff2f-4e31-a9ae-646d3e86f610" class="toggle"><li><details open=""><summary>Versioning</summary><ul id="47773147-00fa-46a0-9d64-b3d8fb3b6e74" class="toggle"><li><details open=""><summary>Theory</summary><ul id="423f6935-0719-426d-8851-a1a4497334e2" class="bulleted-list"><li style="list-style-type:disc">You can version your files in Amazon S3. It is enabled at the bucket level.</li></ul><ul id="34f3afa8-56a3-4e14-b625-5115e0dbb2c4" class="bulleted-list"><li style="list-style-type:disc">When versioning is enabled, if you upload a file with a key that is already existing in the bucket, S3 will increment the version of that file.</li></ul><ul id="8e20887b-2858-46a9-ba77-833951ff6cc6" class="bulleted-list"><li style="list-style-type:disc">It is best practice to version your buckets to protect against unintended deletes.</li></ul><ul id="6a7ab3a9-6d8d-4525-9c21-6a41527d8313" class="bulleted-list"><li style="list-style-type:disc">It also provides the ability to restore to a previous version.</li></ul><ul id="5e6fcd76-5803-4070-bec1-1738db6791d4" class="bulleted-list"><li style="list-style-type:disc">Any file that is not versioned prior to enabling versioning will have version “null”</li></ul><ul id="82f066df-e139-4fde-845b-30ee1c6c089b" class="bulleted-list"><li style="list-style-type:disc">Suspending versioning does not delete the previous versions, it just disables it for the future.</li></ul></details></li></ul><ul id="3debb089-2b56-4d39-9aab-f0da709c0450" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="00c3388e-c397-4233-a6af-60b93b52179d" class="bulleted-list"><li style="list-style-type:disc">Enable versioning for a bucket<p id="be8fd185-b6c9-4886-b173-1d8d2671d483" class="">Select the bucket → Properties → Edit bucket versioning</p><p id="fdbd3bbd-b87b-4cbc-8d91-2e74cc9562a8" class="">We can toggle “List Versions” to view all the versions for the files. Here, coffee.jpg was first uploaded before the versioning was enabled, that’s why the old version has id = null.</p><figure id="bf7a1888-4750-4e85-ba2c-b4684155a03e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20168.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20168.png"/></a></figure><p id="8c5dc383-60e4-4d9e-a9bf-36af68ddd981" class="">Untitled</p></li></ul><ul id="b8b56e87-81be-4e9d-ba73-060545afa21a" class="bulleted-list"><li style="list-style-type:disc">Deleting a versioned file<p id="520c15ad-ab28-4852-b74c-576ab28bc58a" class="">Without the versions of the file listed, delete the file.</p><p id="58265bdc-ec48-4a0c-9d38-657af8f0565e" class="">If a versioned file is deleted, it’s not actually removed from S3, instead it is marked as “Deleted”. To restore the file, view the versions and delete the “Delete marker”.</p><p id="549c83ee-b18c-4a79-8380-d00425102f76" class="">To permanently delete a versioned file, select the current version from the list and delete it.</p><figure id="1fcec1e2-16fa-4b25-94bd-c8507ff400ed" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20169.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20169.png"/></a></figure><p id="dd4adfa0-3633-4bb0-a595-110a286746f2" class="">Untitled</p></li></ul></details></li></ul></details></li></ul><ul id="15da697c-f8d8-4b4c-a357-f0bddb299927" class="toggle"><li><details open=""><summary>S3 Replication</summary><figure id="de24fe17-799e-4684-a07a-0303cdd34f7e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(406).png"><img style="width:939px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(406).png"/></a></figure><figure id="c253a78f-ac55-4f17-92d5-bf2cea75e34f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(407).png"><img style="width:846px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(407).png"/></a></figure></details></li></ul><ul id="21a2abf5-7772-4854-b6a3-475b0003346b" class="toggle"><li><details open=""><summary>S3 Storage Classes</summary><ul id="829e810f-a58f-460b-b610-1340f45e0688" class="toggle"><li><details open=""><summary>Durability and Availability</summary><figure id="1136bb37-092e-4705-8685-3c01b07f998a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(409).png"><img style="width:914px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(409).png"/></a></figure></details></li></ul><p id="8e5acfe0-57a7-45f1-b4e8-008aa17a7007" class="">We can move between classes manually or using S3 lifecycle configurations.</p><p id="2084b817-13ce-43fa-a979-e27f947d9d23" class="">Types of S3 storage classes,</p><ul id="6f1b2d01-739c-45fe-903a-084500acf7c0" class="toggle"><li><details open=""><summary>Amazon S3 Standard - General Purpose</summary><figure id="17c18f74-181e-4b66-be92-5a7ae3bc815c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(410).png"><img style="width:947px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(410).png"/></a></figure></details></li></ul><ul id="8cedcf61-032a-4a4c-a14b-7b858c3a6f81" class="toggle"><li><details open=""><summary>Amazon S3 Standard - Infrequent Access (IA) &amp; One Zone-Infrequent Access</summary><figure id="5c18348e-8a4e-4850-b12e-4b368c7feb4f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(411).png"><img style="width:942px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(411).png"/></a></figure></details></li></ul><ul id="7f62f6e1-badf-493d-ac0d-10a06cc82b5b" class="toggle"><li><details open=""><summary>Amazon S3 Glacier</summary><ul id="5be31cb2-f328-44b6-acf8-080f5bc7b475" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 Glacier Instant Retrieval</li></ul><ul id="56bfbd3e-60ec-4d38-985d-66f742e50ac4" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 Glacier Flexible Retrieval</li></ul><ul id="a96fd8d0-51b1-4abf-a524-a5464cee77f8" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 Glacier Deep Archive</li></ul><figure id="30bb0324-2383-4b2d-87c3-1dbf7c821700" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(412).png"><img style="width:961px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(412).png"/></a></figure></details></li></ul><ul id="b3fda3e8-f8ed-4513-baee-3d9f7d0c106d" class="toggle"><li><details open=""><summary>Amazon S3 Intelligent Tiering</summary><figure id="20667676-ff26-4aa2-98e6-b6207208faee" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(413).png"><img style="width:946px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(413).png"/></a></figure></details></li></ul><ul id="066fbe7e-b81f-418a-b911-43b0163b97b7" class="toggle"><li><details open=""><summary>Outro</summary><figure id="f4f62b9b-c6ae-4295-9aed-90a79b794a71" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(414).png"><img style="width:983px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(414).png"/></a></figure><figure id="ccf10a04-a238-44b1-bf06-c1a78be21c2a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(415).png"><img style="width:1834px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(415).png"/></a></figure></details></li></ul></details></li></ul><ul id="225b408d-ed6b-4d3d-bade-c431f87fabaa" class="toggle"><li><details open=""><summary>Encryption</summary><ul id="1ad8c9ec-469b-425a-abba-764c99599a93" class="toggle"><li><details open=""><summary>Theory</summary><p id="e8f08ac7-ffab-4995-9c36-37a5a653d2d2" class="">Two types of encryption:<div class="indented"><ul id="299d47e4-5a49-4db3-9bc2-4969d41cec03" class="toggle"><li><details open=""><summary>Server Side Encryption (SSE)</summary><ul id="7f8b0a6a-4151-488c-abc6-5c96831f47a9" class="toggle"><li><details open=""><summary>SSE-S3</summary><ul id="8ed27760-3c9f-4c6e-b4d1-811509c84786" class="bulleted-list"><li style="list-style-type:disc">Encrypts S3 objects using keys handled &amp; managed by S3</li></ul><ul id="3e41552f-72be-45af-a44d-42afb07e5d5b" class="bulleted-list"><li style="list-style-type:disc">AES-256 encryption type</li></ul><ul id="2ffbf773-775f-4b18-9f8f-e6880f6d17e5" class="bulleted-list"><li style="list-style-type:disc">HTTP or HTTPS can be used</li></ul><ul id="bfcf8060-7c21-45bc-a0f5-66cd059f00ff" class="bulleted-list"><li style="list-style-type:disc">Must set header: <code>&quot;x-amz-server-side-encryption&quot;: &quot;AES256&quot;</code> in the request to signal S3 to encrypt the send object.</li></ul><figure id="78ab10fe-f3b2-4c14-abec-a74f3dc724da" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20170.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20170.png"/></a></figure><p id="dff4bbb5-588d-4064-b36a-d99b5a904a34" class="">Untitled</p></details></li></ul><ul id="824d3125-104f-4422-86cf-9b7d179cc83b" class="toggle"><li><details open=""><summary>SSE-KMS</summary><ul id="688c2c7f-6f8a-4246-b4ab-14a11adb2e87" class="bulleted-list"><li style="list-style-type:disc">Encryption using keys handled &amp; managed by KMS (Key Management Service)</li></ul><ul id="d6210ad7-744e-411c-92c3-7b375c7f9e95" class="bulleted-list"><li style="list-style-type:disc">HTTP or HTTPS can be used</li></ul><ul id="acc33cb5-d5cf-4ee9-84cc-da41b16a1367" class="bulleted-list"><li style="list-style-type:disc">KMS provides control over who has access to what keys as well as audit trails</li></ul><ul id="7c70d868-a6cc-4e65-a547-75fb7a73485c" class="bulleted-list"><li style="list-style-type:disc">Must set header: <code>&quot;x-amz-server-side-encryption&quot;: &quot;aws:kms&quot;</code></li></ul><figure id="d2d19fa3-2d94-4cc4-8ab4-ee0c96edb9ac" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20171.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20171.png"/></a></figure><p id="65a7fcf4-c5db-46cf-a675-4d73c4427904" class="">Untitled</p></details></li></ul><ul id="2bef06aa-9fc7-493b-b289-6674f893f9a4" class="toggle"><li><details open=""><summary>SSE-C</summary><ul id="9fe0abc2-1c70-4979-95d1-d89a33201b75" class="bulleted-list"><li style="list-style-type:disc">Data keys fully managed by the customer outside of AWS. More work for us.</li></ul><ul id="e6848619-97dd-46aa-a041-65c6210f8750" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 does not store the encryption key you provide for encryption or decryption of the object. After the operation, S3 discards the key.</li></ul><ul id="39522386-68c4-471e-8250-d215c6aa6ada" class="bulleted-list"><li style="list-style-type:disc">HTTPS must be used when sending the request as key (secret) is being transferred.</li></ul><ul id="587e5e09-6425-4299-8e14-b11aab9e1108" class="bulleted-list"><li style="list-style-type:disc">Encryption key must provided in HTTPS headers, for every HTTPS request made as S3 doesn’t store the key for future requests.</li></ul></details></li></ul></details></li></ul><ul id="bbf7502b-8f07-445b-879e-b84f2c985192" class="toggle"><li><details open=""><summary>Client Side Encryption (CSE)</summary><ul id="258716c1-ac8e-483c-975f-835f2c3122a2" class="bulleted-list"><li style="list-style-type:disc">Client encrypts the object before sending it to S3 and decrypts it after retrieving it from S3.</li></ul><ul id="8ceb5e67-c82a-4db9-87ad-e6ae11ffbc58" class="bulleted-list"><li style="list-style-type:disc">Client library such as the Amazon S3 Encryption Client is used to encrypt / decrypt the data on the client’s end.</li></ul><ul id="28648d55-0fdb-4ff0-bb02-c7cf22436c59" class="bulleted-list"><li style="list-style-type:disc">Customer fully manages the keys and encryption cycle.</li></ul><figure id="7863b60f-d643-4b89-a747-788f3d57c9e2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20172.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20172.png"/></a></figure><p id="66657de3-d4c1-44ec-bcc7-04e26eb4a4b8" class="">Untitled</p></details></li></ul></div></p><ul id="35de6a12-b3b1-4bca-bb38-7e8e0e3733df" class="toggle"><li><details open=""><summary>Encryption in Transit</summary><ul id="063ffecc-c2cf-4cb2-b288-f73381a296d4" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 exposes:<ul id="cec5b95e-9b2a-4514-95e1-d66b69194e6a" class="bulleted-list"><li style="list-style-type:circle">HTTP endpoint: non encrypted</li></ul><ul id="0cc747e1-e26a-4f65-8230-ed71c14c7bef" class="bulleted-list"><li style="list-style-type:circle">HTTPS endpoint: encryption in flight</li></ul></li></ul><ul id="6b68ed6e-4044-46e6-adba-a1ed8e126e72" class="bulleted-list"><li style="list-style-type:disc">You’re free to use the endpoint you want, but HTTPS is recommended. Most clients would use the HTTPS endpoint by default.</li></ul><ul id="64471b36-3fc4-441b-b4c1-ea99866f8c67" class="bulleted-list"><li style="list-style-type:disc">HTTPS is mandatory for SSE-C</li></ul><ul id="6f196b72-67a8-4d52-8f6e-977095de1619" class="bulleted-list"><li style="list-style-type:disc">Encryption in flight is also called SSL/TLS</li></ul></details></li></ul></details></li></ul><ul id="3ed3c7ba-dd85-4879-be56-e623f467deb0" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="70e6adec-7a35-469e-8318-e3d48417d2b7" class="toggle"><li><details open=""><summary>Encrypt a file while uploading to S3</summary><p id="337b8922-364b-4029-b6da-c634f88ae2fb" class="">While uploading, Scroll down to properties and enable SSE. This will enable SSE only for this version of the file.</p><figure id="1d266655-7039-4234-9cf9-13e3848237be" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20173.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20173.png"/></a></figure><p id="e42d30dd-64fa-4716-823d-74a451235705" class="">Untitled</p></details></li></ul><ul id="37c04e48-6a8b-4006-b3a0-732161d636c4" class="toggle"><li><details open=""><summary>Enable SSE by default for a bucket</summary><p id="97138925-da70-4b99-999b-811a2d51c8d4" class="">Select bucket → Properties → Edit default encryption</p><p id="531bfc06-ffb3-4295-899c-e3a949e3170e" class="">This will encrypt all the files uploaded to S3 in future by default.</p><figure id="f321e17e-b66f-4047-b34c-fcf1e08cdf65" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20174.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20174.png"/></a></figure><p id="e07cfa65-995d-4c92-adb1-42f8d2c7e26f" class="">Untitled</p></details></li></ul></details></li></ul></details></li></ul><ul id="71cc9890-0503-4150-bdc0-81da2e0acac9" class="toggle"><li><details open=""><summary>Cross Origin Resource Sharing (CORS)</summary><ul id="93f72242-40df-418a-8f1b-7187e221863b" class="toggle"><li><details open=""><summary>Theory</summary><ul id="1bf13014-6b4d-4cb2-ad41-6bec53863f10" class="bulleted-list"><li style="list-style-type:disc">An origin is a combination of scheme (protocol), host (domain) and port. Eg: https://www.example.com (implied port is 443 for HTTPS, 80 for HTTP)</li></ul><ul id="5ef15b66-8c27-4e1e-9ea5-066d095e8723" class="bulleted-list"><li style="list-style-type:disc">Same origin: http://example.com/app1 &amp; http://example.com/app2 Different origins: http://www.example.com &amp; http://other.example.com</li></ul><ul id="992beb55-52cc-4416-93d7-8871148f587a" class="bulleted-list"><li style="list-style-type:disc">CORS is a web browser based security to allow requests to other origins while visiting the main origin only if the other origin allows for the requests from the main origin, using CORS Headers (<code>Access-Control-Allow-Origin</code> &amp; <code>Access-Control-Allow-Methods</code>)</li></ul><ul id="2390e308-7623-4a40-baea-5fa3e61f50d5" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, web browser is on <a href="http://www.example.com/">www.example.com</a> and the server wants to redirect it to <a href="http://www.other.com/">www.other.com</a> In this case, the web browser will first send a preflight request to www.other.com via OPTIONS method, which requests permitted communication options for a given URL or server (www.example.com). The cross origin server responds with the methods that www.example.com is allowed to perform.<figure id="b5f4920a-aa0b-4360-836c-273ff57c09c6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20175.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20175.png"/></a></figure></li></ul></details></li></ul><ul id="18b788a5-f401-4a24-9630-c195ee4f869d" class="toggle"><li><details open=""><summary>S3 CORS</summary><ul id="664fa74a-17b7-4afd-9ae3-29df2900debe" class="toggle"><li><details open=""><summary>Theory</summary><ul id="bf87033f-ec07-45c6-92eb-2f4b47605907" class="bulleted-list"><li style="list-style-type:disc">If a client does a cross-origin request on our S3 bucket, we need to enable the correct CORS headers in the bucket</li></ul><ul id="1f7aef66-ae56-420f-a78f-244c6ed957ce" class="bulleted-list"><li style="list-style-type:disc">You can allow for a specific origin or for * (all origins)</li></ul><p id="907ca90c-5fd2-4957-b647-22d667ad6353" class="">⛔ It’s a popular exam question</p><p id="ddd8d30b-64c7-4848-8ea7-d0a94f98e346" class="">In the diagram below, bucket-html contains all the html files and bucket-assets contains all the assets. Both the buckets are enabled as w ebsites. The web browser gets index.html which has an asset to be fetched from bucket-assets (cross-origin). Thus bucket-assets should allow bucket-html to perform this request (by configuring CORS headers).</p><figure id="c8c2683e-4929-4cc7-9ced-599d0dc472d6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20176.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20176.png"/></a></figure><p id="1955e47e-0ccd-47f0-9282-76f31dbb7b61" class="">Untitled</p></details></li></ul><ul id="11b47edb-b9db-422f-aa24-17bdff6be534" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="4b37cb09-2591-4798-8e3b-b74fc6cdb17b" class="toggle"><li><details open=""><summary>Make two S3 buckets with website enabled</summary><ul id="513f6cb4-4819-40cd-8372-4594c7a092ba" class="bulleted-list"><li style="list-style-type:disc">Main bucket<p id="d75d144c-fe46-444e-a436-8a5f369b78c7" class="">Upload <code>index.html</code> containing</p><p id="8ac0cfec-e539-4be1-ba08-62708fa2c486" class="">Make sure to update <code>&lt;public link to cors.html in the cors bucket&gt;</code></p><pre id="7d48c7fa-c7e0-4b74-aec3-7e91f5a57e05" class="code code-wrap"><code>&lt;html&gt;    &lt;head&gt;        &lt;title&gt;My First Webpage&lt;/title&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;h1&gt;I love coffee&lt;/h1&gt;        &lt;p&gt;Hello world!&lt;/p&gt;    &lt;/body&gt;    &lt;!-- CORS demo --&gt;    &lt;div id=&quot;tofetch&quot;/&gt;    &lt;script&gt;        var tofetch = document.getElementById(&quot;tofetch&quot;);        fetch(&#x27;&lt;public link to cors.html in the cors bucket&gt;&#x27;)        .then((response) =&gt; {            return response.text();        })        .then((html) =&gt; {            tofetch.innerHTML = html        });    &lt;/script&gt;&lt;/html&gt;</code></pre></li></ul><ul id="60e548ac-7033-4eed-abcc-1c9dec93a0d9" class="bulleted-list"><li style="list-style-type:disc">Cross Origin Bucket<p id="888bd33c-3a37-4022-8d92-958222df6bf4" class="">Upload <code>cors.html</code> containing</p><pre id="597c4480-d7ee-4727-aaf3-398768c257b5" class="code code-wrap"><code>&lt;p&gt;This &lt;strong&gt;cors page&lt;/strong&gt; has been successfully loaded!&lt;/p&gt;</code></pre></li></ul></details></li></ul><ul id="ca39356f-fb87-4345-90cb-1f004ab8ef71" class="bulleted-list"><li style="list-style-type:disc">If we open the main bucket website, we won’t see the cors.html part and there will be an error in the console<figure id="c571b4ff-80eb-4d75-b946-2b681ab6d444" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20177.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20177.png"/></a></figure><p id="3a9f6472-f566-45fc-a36d-e35fa083ec62" class="">Untitled</p></li></ul><ul id="764d2d2f-89b3-4310-9d82-010d09614125" class="bulleted-list"><li style="list-style-type:disc">So, we need to allow the main bucket in the CORS settings of cors bucket. Go to cors-bucket → Permissions → CORS → Edit and paste the following.<pre id="bfc035bf-6a33-4bd8-94b6-1cbc335f4553" class="code code-wrap"><code>[    {        &quot;AllowedHeaders&quot;: [            &quot;Authorization&quot;        ],        &quot;AllowedMethods&quot;: [            &quot;GET&quot;        ],        &quot;AllowedOrigins&quot;: [            &quot;&lt;url of first bucket with http://...without slash at the end&gt;&quot;        ],        &quot;ExposeHeaders&quot;: [],        &quot;MaxAgeSeconds&quot;: 3000    }]</code></pre></li></ul><ul id="f3a01790-6e68-45c0-83a9-ff906953642d" class="bulleted-list"><li style="list-style-type:disc">Now, if we open the main bucket website, we get no error and the <code>cors.html</code> part will be fetched successfully.<figure id="6ccda134-c88c-421a-ace1-f8a4008dfaf2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20178.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20178.png"/></a></figure><p id="3f2ea08a-8571-4ecc-b7c6-4936ec898e62" class="">Untitled</p></li></ul></details></li></ul></details></li></ul></details></li></ul><ul id="bf28e034-faaa-4a81-a687-72eb35a34caa" class="toggle"><li><details open=""><summary>S3 Consistency Model</summary><p id="a1d6a971-7d8b-47d5-bc5e-fec180b45dc2" class="">Strong consistency in S3 as of December 2020:</p><p id="da3319ae-bfac-4a07-8827-98d59afff30f" class="">After:</p><ul id="43cfd1b4-1a2f-4980-b170-e8c00cca8226" class="bulleted-list"><li style="list-style-type:disc">successful write of a new object (new PUT)</li></ul><ul id="a0a06a42-e3a1-4737-ac83-e9573825a00c" class="bulleted-list"><li style="list-style-type:disc">overwrite or delete of an existing object (overwrite PUT or DELETE)</li></ul><p id="d437594e-8566-4642-8144-070b98d87d0c" class="">Any:</p><ul id="21f16a5d-c208-497a-aaca-8e66d969aced" class="bulleted-list"><li style="list-style-type:disc">subsequent read request immediately receives the latest version of the object (read after write consistency)</li></ul><ul id="a031b9e0-cb9b-4ef5-bcbf-af092f241c8e" class="bulleted-list"><li style="list-style-type:disc">subsequent list request immediately reflects changes (list consistency)</li></ul><p id="8c24b17e-12e6-4276-9c87-050510e6cd60" class="">Available at no additional cost, without any performance impact</p></details></li></ul></div><h3 id="0db9509e-3285-40c8-8fb4-9d464839515d" class=""><details open=""><summary>Section 13: AWS SDK, IAM Roles &amp; Policies</summary></details></h3><div class="indented"><ul id="b356f459-f984-40ef-b418-315efdbf724b" class="toggle"><li><details open=""><summary>AWS Policy Simulator</summary><p id="bdc37a62-8408-4179-8c30-b84b6bdc8f81" class="">This online tool allows us to check what API calls an IAM User, Group or Role is allowed to perform.</p><p id="ac1ed549-a25e-4865-9b96-e66493059f80" class=""><a href="https://policysim.aws.amazon.com/">https://policysim.aws.amazon.com/</a></p><figure id="b14885d3-7669-4163-baa7-9c789e3ed11d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20179.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20179.png"/></a></figure></details></li></ul><ul id="6d69e58d-bbc1-4b47-ba3d-44b38e685109" class="toggle"><li><details open=""><summary>EC2 Instance Metadata</summary><ul id="b22a4c90-1bee-4c22-bb2c-7a2380dc8c3b" class="toggle"><li><details open=""><summary>Theory</summary><ul id="4be006bf-2b56-4f01-bd98-af290f644570" class="bulleted-list"><li style="list-style-type:disc">AWS EC2 Instance Metadata is powerful but one of the least known features to developers</li></ul><ul id="c414921e-38a2-4575-896d-069d3b9c29b0" class="bulleted-list"><li style="list-style-type:disc">It allows AWS EC2 instances to “learn about themselves” without using an IAM Role for that purpose</li></ul><ul id="6b7e91ac-96f8-4d30-9ede-f2e382d05657" class="bulleted-list"><li style="list-style-type:disc">The URL fetch the metadata is <a href="http://169.254.169.254/latest/meta-data">http://169.254.169.254/latest/meta-data</a> This URL is internal to AWS and can only be hit from the instance.</li></ul><ul id="6260b5bd-319f-46cd-99ba-fe263225da39" class="bulleted-list"><li style="list-style-type:disc">You can retrieve the IAM Role name from the metadata, but you cannot retrieve the IAM Policy.</li></ul><ul id="a6a1e6c3-be25-46f9-8a18-12b741904e14" class="bulleted-list"><li style="list-style-type:disc">Remember the difference: <ul id="88fe1e6c-3671-4477-8bc9-fb14603fa452" class="bulleted-list"><li style="list-style-type:circle">Metadata = Info about the EC2 instance </li></ul><ul id="57d8780c-0a7f-4b48-af21-cbddc7073d5e" class="bulleted-list"><li style="list-style-type:circle">Userdata = launch script of the EC2 instance</li></ul></li></ul></details></li></ul><ul id="80108454-f886-4c03-a970-041819b90e07" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="67b70f6a-65dc-4c02-bc01-e2455bfe1043" class="bulleted-list"><li style="list-style-type:disc"><strong>curl </strong><strong><a href="http://169.254.169.254/latest/meta-data/iam/security-credentials/DemoRoleForEC2">http://169.254.169.254/latest/meta-data/</a></strong></li></ul><ul id="57f20961-31f2-4041-b737-8abba43a4c16" class="bulleted-list"><li style="list-style-type:disc"><strong>curl </strong><strong><a href="http://169.254.169.254/latest/meta-data/iam/security-credentials/DemoRoleForEC2">http://169.254.169.254/latest/meta-data/iam/security-credentials/DemoRoleForEC2</a></strong></li></ul><ul id="140cee4e-79e4-4fcc-8cd3-9bce3f8e9fa4" class="bulleted-list"><li style="list-style-type:disc">curl <a href="http://169.254.169.254/latest/meta-data/identity-credentials/ec2/security-credentials/ec2-instance">http://169.254.169.254/latest/meta-data/identity-credentials/ec2/security-credentials/ec2-instance</a></li></ul><ul id="7c16fae8-2f5e-4a9a-90a6-5a2032a81977" class="bulleted-list"><li style="list-style-type:disc">SSH into your EC2 instance<p id="2319b4a1-321b-405d-81a6-f8204d668d52" class=""><code>ssh -i EC2Tutorial.pem ec2-user@13.234.78.195</code></p></li></ul><ul id="aa65e1f2-4507-49cf-91e8-9606e6ea975c" class="bulleted-list"><li style="list-style-type:disc">Hit the metadata URL<pre id="2e0cfa4f-04f2-486b-98ab-1033f2c7d70d" class="code code-wrap"><code>[ec2-user@ip-172-31-44-172 ~]$ curl http://169.254.169.254/latest/meta-dataami-idami-launch-indexami-manifest-pathblock-device-mapping/events/hibernation/hostnameidentity-credentials/instance-actioninstance-idinstance-life-cycleinstance-typelocal-hostnamelocal-ipv4macmetrics/network/placement/profilepublic-hostnamepublic-ipv4public-keys/reservation-idsecurity-groups</code></pre></li></ul><ul id="8f656b1c-a44a-4d57-bb98-a51fccd5ea7e" class="bulleted-list"><li style="list-style-type:disc">We can modify the curl request to get specific Metadata<pre id="3ae67c64-5f9e-4e97-8034-53d72fc2a0b8" class="code code-wrap"><code>[ec2-user@ip-172-31-44-172 ~]$ curl http://169.254.169.254/latest/meta-data/security-groupslaunch-wizard-1</code></pre></li></ul></details></li></ul></details></li></ul><ul id="2c831dd5-b4b1-4ae0-933d-de7bd67ebafc" class="toggle"><li><details open=""><summary>AWS SDK</summary><ul id="2644368f-5a8a-4434-92b9-dcd9fb1c42b6" class="bulleted-list"><li style="list-style-type:disc">Used to perform actions on AWS directly from the code without using CLI</li></ul><ul id="822e2946-0f5b-4ec7-a727-49e92a6ccbf3" class="bulleted-list"><li style="list-style-type:disc">AWS CLI uses Python SDK (boto3)</li></ul><ul id="f3db8263-2931-4f55-8283-054310733546" class="bulleted-list"><li style="list-style-type:disc">We have to use SDK when coding against AWS services such as DynamoDB</li></ul><ul id="d7967c08-89c9-4bce-b338-35a890026966" class="bulleted-list"><li style="list-style-type:disc">Supported languages<ul id="8d34e435-7216-420d-8f23-d2dfeabdf8d0" class="bulleted-list"><li style="list-style-type:circle">Java</li></ul><ul id="3e5809a3-8cd1-4d94-8867-ddde3252ec2b" class="bulleted-list"><li style="list-style-type:circle">.NET</li></ul><ul id="cf812942-b225-4b21-b974-6b0658ed802c" class="bulleted-list"><li style="list-style-type:circle">Node.js</li></ul><ul id="683d7b46-38b1-4588-8789-eb8df4c43773" class="bulleted-list"><li style="list-style-type:circle">PHP</li></ul><ul id="47f48bb0-065e-4470-ba64-1a7e350d2e89" class="bulleted-list"><li style="list-style-type:circle">Python (named boto3 / botocore)</li></ul><ul id="c119434f-9924-4cd0-b14e-58003dbea86e" class="bulleted-list"><li style="list-style-type:circle">Go</li></ul><ul id="8186b501-215b-4eea-bc71-a16e54d3a9bf" class="bulleted-list"><li style="list-style-type:circle">Ruby</li></ul><ul id="97ab45a8-9e3d-4689-8dbb-72114a61fbc4" class="bulleted-list"><li style="list-style-type:circle">C++</li></ul></li></ul><p id="f611e176-e933-4431-af07-0f3858628c2b" class="">💡 If you don’t specify or configure a default region, then us-east-1 - N. Virginia will be chosen by default by the SDK</p></details></li></ul></div><h3 id="aa636f13-1718-4574-ac4b-b5ef70260e10" class=""><details open=""><summary>Section 14: Advanced Amazon S3</summary></details></h3><div class="indented"><ul id="bcdb6ac2-1654-464e-a85f-2ea2a55025e5" class="toggle"><li><details open=""><summary>S3 Lifecycle Rules (With S3 Analytics)</summary><ul id="08162696-66e7-4e7b-b5e9-058f5ff15a5e" class="toggle"><li><details open=""><summary>Intro</summary><figure id="f9c17159-4f70-4487-8472-8f4e2036e0d6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(416).png"><img style="width:953px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(416).png"/></a></figure><figure id="ce151afa-4cf6-4964-9886-4375220fb8ed" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(417).png"><img style="width:905px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(417).png"/></a></figure></details></li></ul><ul id="9f0d7126-58a9-4971-ac9f-9641b81de925" class="toggle"><li><details open=""><summary>Scenario 1</summary><figure id="4e08946e-b05a-4260-bb49-f71177933313" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(418).png"><img style="width:899px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(418).png"/></a></figure></details></li></ul><ul id="5f9d2e34-ad59-4230-aca1-d561fb7ab33f" class="toggle"><li><details open=""><summary>Scenario 2</summary><figure id="ecc86cf1-2a91-493f-af2c-44d612a94dbc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(419).png"><img style="width:908px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(419).png"/></a></figure></details></li></ul><ul id="db494b76-706f-4889-b4bd-55c7091a8416" class="toggle"><li><details open=""><summary>S3 Analytics</summary><figure id="b556efcb-905b-45b4-b90d-43333e9453a2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(420).png"><img style="width:1757px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(420).png"/></a></figure></details></li></ul></details></li></ul><ul id="7a5b90c4-3469-4b98-980c-0f1ced975fc9" class="toggle"><li><details open=""><summary>S3 Requester Pays</summary><ul id="ba8ca368-6703-45a1-b06a-8507bc98a72d" class="bulleted-list"><li style="list-style-type:disc">In general, bucket owners pay for all Amazon S3 storage and data transfer costs associated with their bucket</li></ul><ul id="4aa62337-a0ca-4022-96fe-1bcea6a9dd96" class="bulleted-list"><li style="list-style-type:disc">With Requester Pays buckets, the requester pays the cost of the request and the data download from the bucket. The bucket owner only pays for the storage.</li></ul><ul id="0aa35f32-4dd0-4201-80d7-33fe85450181" class="bulleted-list"><li style="list-style-type:disc">Helpful when you want to share large datasets with other accounts</li></ul><ul id="81e63bb6-9694-4d0c-b003-a92dcd91bb9c" class="bulleted-list"><li style="list-style-type:disc">The requester must be authenticated in AWS (cannot be anonymous)</li></ul><figure id="c390c471-897c-4030-9feb-141e3acc3e13" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20180.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20180.png"/></a></figure></details></li></ul><ul id="a71ca0c4-1b40-4768-85b7-e7b1f4f4cd49" class="toggle"><li><details open=""><summary>S3 Event Notification</summary><ul id="1aad052e-8825-4b1b-88e5-60beb5897825" class="toggle"><li><details open=""><summary>Theory</summary><ul id="386c1f2b-c73b-4c7a-a1ff-b9706482f8a6" class="bulleted-list"><li style="list-style-type:disc">We can configure S3 to generate events for operations performed on the bucket (ex: S3:ObjectCreated, S3:ObjectRemoved, S3:ObjectRestore, S3: Replication)</li></ul><ul id="909df603-5eb6-4679-8976-f4ff6e40bdd5" class="bulleted-list"><li style="list-style-type:disc">Object name filtering is possible using prefix and suffix matching</li></ul><ul id="ec308245-31b6-4049-9040-b39dc7ba5e71" class="bulleted-list"><li style="list-style-type:disc">Use case: generate thumbnails of images uploaded to S3</li></ul><ul id="2d75c538-af01-46d6-a49d-5f8c25b1d82c" class="bulleted-list"><li style="list-style-type:disc">Can create as many “S3 events” as desired</li></ul><ul id="8a17ee23-f991-45fc-aea2-dea9e14e397c" class="bulleted-list"><li style="list-style-type:disc">S3 event notifications typically deliver events in seconds but can sometimes take a minute or longer</li></ul><ul id="d8511e34-8fc6-49ba-82f4-d97085d6a8e0" class="bulleted-list"><li style="list-style-type:disc">If two writes are made to a single non-versioned object at the same time, it is possible that only a single event notification will be sent. So, if you want to ensure that an event notification is sent for every successful write, you should enable versioning on your bucket.</li></ul><ul id="b9a42755-9425-44bc-bfa0-808d8684cfaf" class="bulleted-list"><li style="list-style-type:disc">Possible targets for S3 event notifications:<ul id="b21a2714-79b2-4741-b1fa-bb666612cba7" class="bulleted-list"><li style="list-style-type:circle">SNS</li></ul><ul id="509ad706-6032-428a-b12e-ff8b3fb4574f" class="bulleted-list"><li style="list-style-type:circle">SQS</li></ul><ul id="a8928dc7-cbfc-44d7-9e14-43df5a9383c3" class="bulleted-list"><li style="list-style-type:circle">Lambda Functions</li></ul><ul id="7826a18f-6dd9-4715-b9ce-4cbdc0c6acbe" class="bulleted-list"><li style="list-style-type:circle">Amazon EventBridge<figure id="7813a795-0324-49fc-9e0c-36c4a3a78284" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(421).png"><img style="width:937px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(421).png"/></a></figure></li></ul></li></ul></details></li></ul><ul id="eed4a3e1-8775-4c09-958b-c2b452400c44" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="087ea63b-3b63-44f9-986e-e81756254e3b" class="bulleted-list"><li style="list-style-type:disc">Create an SQS queue to receive the S3 notifications.</li></ul><ul id="bc8ee334-3b38-43d0-aa83-d860f77255f4" class="bulleted-list"><li style="list-style-type:disc">Edit the access policy of the queue to allow S3 bucket to send messages to the queue.<pre id="bd5b3140-04fc-4cd1-84e9-890ddc62cae8" class="code code-wrap"><code>{  &quot;Id&quot;: &quot;Policy1648391999215&quot;,  &quot;Version&quot;: &quot;2012-10-17&quot;,  &quot;Statement&quot;: [    {      &quot;Sid&quot;: &quot;Stmt1648391992940&quot;,      &quot;Action&quot;: [        &quot;sqs:SendMessage&quot;      ],      &quot;Effect&quot;: &quot;Allow&quot;,      &quot;Resource&quot;: &quot;arn:aws:sqs:ap-south-1:502257142405:s3-notification-queue&quot;,      &quot;Principal&quot;: &quot;*&quot;    }  ]}</code></pre></li></ul><ul id="d98e2113-50ee-47ab-b12d-62a47aa88f2f" class="bulleted-list"><li style="list-style-type:disc">Select bucket → Properties → Event Notifications → Create<p id="78642764-13c2-407d-9a51-3d9739782c70" class="">Specify prefix and suffix to trigger this event based on the object name</p><p id="7b91fab8-3396-40f1-a74c-fb37273db85e" class="">Destination: SQS queue</p></li></ul><ul id="61333034-a465-481d-a688-e7b2b4f12a50" class="bulleted-list"><li style="list-style-type:disc">Now, uploading an object to the S3 bucket will send a notification to the queue<pre id="c5714cc9-af63-4a09-a2f0-2d50a221dbc2" class="code code-wrap"><code>{  &quot;Records&quot;: [    {      &quot;eventVersion&quot;: &quot;2.1&quot;,      &quot;eventSource&quot;: &quot;aws:s3&quot;,      &quot;awsRegion&quot;: &quot;ap-south-1&quot;,      &quot;eventTime&quot;: &quot;2022-03-27T14:41:35.322Z&quot;,      &quot;eventName&quot;: &quot;ObjectCreated:Put&quot;,      &quot;userIdentity&quot;: {        &quot;principalId&quot;: &quot;AWS:AIDAXJ4G3ZKC2IKTBJ3ZT&quot;      },      &quot;requestParameters&quot;: {        &quot;sourceIPAddress&quot;: &quot;49.37.79.214&quot;      },      &quot;responseElements&quot;: {        &quot;x-amz-request-id&quot;: &quot;WT356ZHV6M3C72CF&quot;,        &quot;x-amz-id-2&quot;: &quot;wMTXMM/phl+rNx0EGoWuYCvmAr0Fx4msr70T6kU1guTdI1ZriH0zD+f8Nt9FkysnjJqUiQ3+ycp3pdJWEhU2RFKaqtJp0vlF&quot;      },      &quot;s3&quot;: {        &quot;s3SchemaVersion&quot;: &quot;1.0&quot;,        &quot;configurationId&quot;: &quot;object-created-event&quot;,        &quot;bucket&quot;: {          &quot;name&quot;: &quot;demo-arkalim&quot;,          &quot;ownerIdentity&quot;: {            &quot;principalId&quot;: &quot;AK8ZF569RJE3E&quot;          },          &quot;arn&quot;: &quot;arn:aws:s3:::demo-arkalim&quot;        },        &quot;object&quot;: {          &quot;key&quot;: &quot;wallpapersden.com_small-memory_3840x2160.jpg&quot;,          &quot;size&quot;: 4424844,          &quot;eTag&quot;: &quot;097840a2a79d31dfb78e13b2352ca7de&quot;,          &quot;versionId&quot;: &quot;xXYgQ9xaLoQ5Exq8MQPrr9qfQIvEo.x2&quot;,          &quot;sequencer&quot;: &quot;006240779F29A73D7D&quot;        }      }    }  ]}</code></pre></li></ul></details></li></ul></details></li></ul><ul id="5bf28d35-274d-4fc3-a1b6-18bcfcf24344" class="toggle"><li><details open=""><summary>S3 Performance</summary><ul id="ccb1b7c2-c623-4250-b14b-086c129dd3e7" class="toggle"><li><details open=""><summary>Baseline performance</summary><ul id="3e453e6e-7180-4d31-aaeb-834b798de247" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 automatically scales to high request rates and it has very low latency 100-200 ms for the first byte read</li></ul><ul id="2c8e5a4f-5438-4804-ad2a-c93add172a1b" class="bulleted-list"><li style="list-style-type:disc">Your application can achieve at least 3,500 PUT/COPY/POST/DELETE and 5,500 GET/HEAD requests per second per prefix in a bucket.</li></ul><ul id="eb086c56-6ad2-4213-a9cf-2f35e59d91a1" class="bulleted-list"><li style="list-style-type:disc">There are no limits to the number of prefixes in a bucket.</li></ul><ul id="a1214baf-2bec-49fb-bf16-74153be411a5" class="bulleted-list"><li style="list-style-type:disc">Object path ⇒ Prefix (path between the bucket and the file):<ul id="0a7e36dd-8d73-4413-ac4d-b44b6f728d8c" class="bulleted-list"><li style="list-style-type:circle">bucket/folder1/sub1/file ⇒ /folder1/sub1/</li></ul><ul id="52a5f56f-90ec-4242-9c5e-ce4048081656" class="bulleted-list"><li style="list-style-type:circle">bucket/folder1/sub2/file ⇒ /folder1/sub2/</li></ul><ul id="62e8a89e-fa6d-4c55-bab2-78ac9de12333" class="bulleted-list"><li style="list-style-type:circle">bucket/1/file ⇒ /1/</li></ul><ul id="0cf1bddb-2ea5-45a5-bf75-d781de78ab61" class="bulleted-list"><li style="list-style-type:circle">bucket/2/file ⇒ /2/</li></ul></li></ul><ul id="b2ecff3f-fdc5-434c-a561-35a2431fd265" class="bulleted-list"><li style="list-style-type:disc">If you spread reads across four prefixes evenly, you can achieve 22,000 requests per second for GET and HEAD</li></ul></details></li></ul><ul id="6bc1077e-b240-447a-b925-c7459a677b16" class="toggle"><li><details open=""><summary>Performance optimization</summary><ul id="5770ffb1-f570-4a7d-a9ea-02812835f218" class="toggle"><li><details open=""><summary>Upload</summary><ul id="0cbc70e4-22ec-485b-915f-c74ec9b681cf" class="toggle"><li><details open=""><summary>Multi-part upload</summary><ul id="33275588-2a7a-4aec-abb2-2323b9c39fef" class="bulleted-list"><li style="list-style-type:disc">Recommended for files &gt; 100MB,</li></ul><ul id="02300257-e79b-43cc-8545-0486ddda5ff8" class="bulleted-list"><li style="list-style-type:disc">Must use for files &gt; 5GB</li></ul><ul id="c1092127-8167-44c9-afdf-f9783e81c3ba" class="bulleted-list"><li style="list-style-type:disc">Can help parallelize uploads (speed up transfers)</li></ul><figure id="2d3d3bb0-1bc6-4a18-a040-ca97ede448fc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20181.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20181.png"/></a></figure><p id="b9283e34-0e53-40b8-ad89-9d418cda28ef" class="">Untitled</p></details></li></ul><ul id="cb8d2013-bb29-4e15-9d52-3b69424f9e27" class="toggle"><li><details open=""><summary>S3 Transfer Acceleration</summary><ul id="1bca04f8-2965-4394-b87f-3798fd414f5b" class="bulleted-list"><li style="list-style-type:disc">Increase transfer speed by transferring file to an AWS edge location in the same region using the public internet (fast as the proximity is less) which will forward the data to the S3 bucket in the target region over the high-speed AWS private network (very fast).</li></ul><ul id="be04205b-7277-41ea-bf2e-f59436324dcd" class="bulleted-list"><li style="list-style-type:disc">Compatible with multi-part upload</li></ul><figure id="b668d591-8fb9-4994-9b68-f84c319a05db" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20182.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20182.png"/></a></figure></details></li></ul></details></li></ul><ul id="e30bcf3b-674f-4f3f-adc8-cddf0da37793" class="toggle"><li><details open=""><summary>Download</summary><ul id="e0c3267a-4ec4-4846-a0e9-80c22c535457" class="toggle"><li><details open=""><summary>Byte-range fetches (multi-part download)</summary><ul id="46c4bdef-ddb3-46d9-926b-f82ffcc7b3f3" class="bulleted-list"><li style="list-style-type:disc">Parallelize GET requests by requesting specific byte ranges</li></ul><ul id="b08b0cac-500f-4087-ad8b-6668033b809a" class="bulleted-list"><li style="list-style-type:disc">Better resilience in case of failures since we only need to refetch the failed byte range and not the whole file.</li></ul><ul id="0b36f14f-62e0-4f80-918b-87d92a6eb082" class="bulleted-list"><li style="list-style-type:disc">Speeds up download due to parallel fetches of all the byte ranges or if we need to fetch only a certain byte range, we can do that as well.<figure id="3e770b38-5e6a-4d8c-88ee-9105374efe0c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20183.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20183.png"/></a></figure><p id="66e2ebd1-1c76-47d3-8d39-d328ec24f2bf" class="">Untitled</p></li></ul></details></li></ul></details></li></ul></details></li></ul><p id="3ccdfbcb-9e27-402f-8195-ba73929abc12" class="">
</p><p id="1850b8c6-dc03-46f7-a185-a3056090b1c7" class="">new →</p><ul id="68dfac30-fffa-4a3c-8477-ab1d531763f5" class="toggle"><li><details open=""><summary>KMS Limitation on S3 performance</summary><ul id="404b638d-5c1b-4346-8476-61adfbf79399" class="bulleted-list"><li style="list-style-type:disc">If you use SSE-KMS, you may be impacted by the KMS limits</li></ul><ul id="e9484630-97d0-47e6-978b-5e011fd2e1b0" class="bulleted-list"><li style="list-style-type:disc">When you upload, S3 calls the GenerateDataKey KMS API</li></ul><ul id="d47c15b3-23da-4208-b654-6dfbb050d144" class="bulleted-list"><li style="list-style-type:disc">When you download, S3 calls the Decrypt KMS API</li></ul><ul id="81787fa1-8a55-4184-b72d-2e58ddd48d5a" class="bulleted-list"><li style="list-style-type:disc">The requests made by S3 count towards the KMS quota per second (5500, 10000, 30000 req/s based on region)</li></ul><ul id="89894946-77d8-4711-a8b2-55cef6029f3d" class="bulleted-list"><li style="list-style-type:disc">You can request a quota increase using the Service Quotas Console ensure that KMS doesn’t create a bottleneck in your S3 performance</li></ul><figure id="36c45ccf-0cdb-421b-9705-0b254c6b4b2c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20184.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20184.png"/></a></figure><p id="e6586d3a-1138-4f66-ab48-dd3ab4a15dbb" class="">Untitled</p></details></li></ul></details></li></ul><ul id="760487c1-9d1c-44d5-8bd1-ab3cc40f06af" class="toggle"><li><details open=""><summary>S3 Select &amp; Glacier Select</summary><ul id="64b9b7a3-6a3b-4ce3-9939-3755a5de97e8" class="bulleted-list"><li style="list-style-type:disc">Retrieve less data from files using SQL by performing server side filtering</li></ul><ul id="40619636-9020-4f05-943c-c46851dff490" class="bulleted-list"><li style="list-style-type:disc">Can filter by rows &amp; columns (SQL statements)</li></ul><ul id="45976764-b30d-4809-ba3b-c79c09f1cb23" class="bulleted-list"><li style="list-style-type:disc">Less network transfer, less CPU cost on the client-side</li></ul><p id="75c61960-3303-4467-a721-7d30996c9b60" class="">Example: get some rows from a CSV file on S3</p><figure id="6f40414a-8277-4be3-b1d5-e321c50d3a52" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20185.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20185.png"/></a></figure></details></li></ul><ul id="88ebfae1-2295-4049-8d14-511aa1a8aa14" class="toggle"><li><details open=""><summary>S3 Batch Operations</summary><figure id="16e2c884-38e8-4318-b255-94c6151c08b3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(422).png"><img style="width:1797px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(422).png"/></a></figure></details></li></ul><ul id="c2818e46-c079-4048-a09c-f1687362d5f2" class="toggle"><li><details open=""><summary>S3 Default Encryption</summary><ul id="335361f3-4ece-487c-a48d-2adc13a4fbfb" class="toggle"><li><details open=""><summary>Theory</summary><ul id="ffc2aee5-412b-4fe4-944d-1c20f7fb4419" class="bulleted-list"><li style="list-style-type:disc">One way to “force encryption” is to use a bucket policy and refuse any API call to PUT an S3 object without encryption headers:<figure id="7b819046-81f4-4026-8a00-f20a1f3baf8d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20186.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20186.png"/></a></figure><p id="dc584271-26f5-48aa-802e-8e4bbd2f3d4d" class="">Untitled</p></li></ul><ul id="fb907939-11c4-40f1-a5dd-d845278e6a89" class="bulleted-list"><li style="list-style-type:disc">Another way is to use the “default encryption” option in S3.</li></ul><ul id="7da2bcaf-6508-433e-99e4-7838db640af1" class="bulleted-list"><li style="list-style-type:disc">If default encryption is enabled and you don’t specify any encryption while uploading a file, the default encryption settings will be applied. Else, you can specify the encryption settings to override the default.</li></ul><ul id="802e2780-b8ef-41ac-ad8a-60d1591c3310" class="bulleted-list"><li style="list-style-type:disc">Note: Bucket Policies are evaluated before “default encryption”, so if you want to ensure that the user uses SSE-S3 by blocking other type of encryption, then use bucket policy but if you just want to ensure that all the objects stored to S3 are encrypted, use default encryption.</li></ul></details></li></ul><ul id="89e7a4b9-21ba-4c99-ac8c-504979c3ae91" class="bulleted-list"><li style="list-style-type:disc">Hands on<p id="5bc01ab6-68fa-438f-b56e-245489fceed2" class="">Select bucket → Properties → Default Encryption → Enable</p></li></ul></details></li></ul><ul id="3a09f500-0b5d-44c1-9b79-0bf1b8941137" class="toggle"><li><details open=""><summary>S3 Replication</summary><ul id="c35dd3ef-898d-4f47-bbfa-bb7e0dfc53a1" class="toggle"><li><details open=""><summary>Theory</summary><ul id="b606f485-a93a-4681-9c81-7ef7eeb367d6" class="bulleted-list"><li style="list-style-type:disc">Replicate the contents of an S3 bucket to another bucket possibly in another region and account.</li></ul><ul id="81f7a241-5255-4ca9-8917-45399276f856" class="bulleted-list"><li style="list-style-type:disc">Must enable versioning in source and destination buckets</li></ul><ul id="3ebcee8b-592f-41fa-8230-0b0f8d040398" class="bulleted-list"><li style="list-style-type:disc">Cross Region Replication (CRR)</li></ul><ul id="180ee52e-36bf-4863-b5b4-e3c769cf7230" class="bulleted-list"><li style="list-style-type:disc">Same Region Replication (SRR)</li></ul><ul id="edb73e4c-698e-4d04-b710-7cd4917b3c83" class="bulleted-list"><li style="list-style-type:disc">Buckets can be in different accounts</li></ul><ul id="ed5f6c31-c362-472a-a0d1-719b0157d75f" class="bulleted-list"><li style="list-style-type:disc">Replication is asynchronous but happens very quickly</li></ul><ul id="2d558868-c8e7-43e9-b336-ceacc72e2f82" class="bulleted-list"><li style="list-style-type:disc">Must give proper lAM permissions to S3 buckets</li></ul><ul id="65d9c9f1-3f5e-421c-b5f6-816f39b12057" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="271e1e71-0535-4fca-9173-e19ce953d114" class="bulleted-list"><li style="list-style-type:circle">CRR: compliance, lower latency access, replication across accounts</li></ul><ul id="36500f29-6e65-44cb-ad65-36a8fb4f9f18" class="bulleted-list"><li style="list-style-type:circle">SRR: log aggregation, live replication between production and test accounts</li></ul></li></ul><ul id="b47daf28-b01c-4d73-b036-4b353845662a" class="bulleted-list"><li style="list-style-type:disc">After activating replication, only new objects are replicated (not retroactive)</li></ul><ul id="1a2cac34-0890-4f89-b711-5ad5e19d908b" class="bulleted-list"><li style="list-style-type:disc">For DELETE operations:<ul id="4559bfbe-0d80-4723-a8c6-65ca34d12b17" class="bulleted-list"><li style="list-style-type:circle">Can replicate delete markers from source to target (optional setting)</li></ul><ul id="6f363683-726a-47bf-a37b-c244a8f464bd" class="bulleted-list"><li style="list-style-type:circle">Deletions with a version ID are not replicated (to avoid malicious deletes)</li></ul></li></ul><ul id="28d29fe1-43c9-4624-8d79-4e2ce5026ce7" class="bulleted-list"><li style="list-style-type:disc">There is no “chaining” of replication. So, if bucket 1 has replication into bucket 2, which has replication into bucket 3. Then objects created in bucket 1 are not replicated to bucket 3.</li></ul><figure id="db3b1c33-dbde-4e49-938b-9bab34bbf0b5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20187.png"><img style="width:384px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20187.png"/></a></figure><p id="3a19eba7-868e-4733-90ef-21f6c03d9079" class="">Untitled</p></details></li></ul><ul id="c5ab2ee2-5c99-457f-a7df-34965a29000d" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="ead4dab6-1e7f-4bad-a283-5b3d67b07394" class="bulleted-list"><li style="list-style-type:disc">Create a replica bucket in another region than the origin bucket and enable versioning for both buckets</li></ul><ul id="4b4b7103-f862-4c01-8137-33696fcc159a" class="bulleted-list"><li style="list-style-type:disc">Add a replication rule to the origin bucket<p id="2027a08e-0046-46b7-9da5-35b696366f35" class="">Select the origin bucket → Management → Replication rules → Create</p><p id="d5285423-8958-4083-a25f-143a957aa0db" class="">Rule scope: apply to all objects in this bucket</p><p id="1edc9a5c-799e-49ff-ab68-30e68cf6e598" class="">Destination: replica bucket</p><p id="454d820b-4a98-4f70-b25a-175003983380" class="">IAM Role: Create new</p><p id="f731b714-aba5-4c54-9c45-646f8a05ce21" class="">Delete marker replication: checked</p><figure id="c47d2a93-8ae1-443a-a159-539ff507e2b9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20188.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20188.png"/></a></figure><p id="30c211c8-951b-4337-9493-d3be0d5c79d8" class="">Untitled</p></li></ul><p id="832ba518-3f8e-4dbb-84c5-9fc72b09db36" class="">Now, any file uploaded to the origin bucket will be replicated to replication bucket with the same version Id.</p><p id="c3738da0-251a-4882-be9e-385f1db8082e" class="">If we enable delete marker replication, soft deletion will be replicated too.</p></details></li></ul></details></li></ul><ul id="23b667f7-cb28-4459-a278-261477ab3930" class="toggle"><li><details open=""><summary>S3 Storage Classes</summary><ul id="3fe7013a-49e0-45d6-8950-63d7d90d742b" class="toggle"><li><details open=""><summary>Intro</summary><ul id="76b8ec2a-10fc-4b45-9a04-a6c7f38c990f" class="toggle"><li><details open=""><summary>Durability</summary><ul id="6cb78ddd-e19e-4f46-b909-147263ce6bf1" class="bulleted-list"><li style="list-style-type:disc">Durability is how often does S3 lose data</li></ul><ul id="39107f2d-127a-4803-8443-94b1acfac0dc" class="bulleted-list"><li style="list-style-type:disc">S3 has high durability (99.999999999%, 11 9’s) of objects across multiple AZ (if you store 10,000,000 objects with Amazon S3, you can on average expect to incur a loss of a single object once every 10,000 years)</li></ul><ul id="206504d6-acad-434e-be17-9bbf32446c43" class="bulleted-list"><li style="list-style-type:disc">Durability is the same for all storage classes</li></ul></details></li></ul><ul id="332c6f88-58ec-440b-b882-078f927ee4d2" class="toggle"><li><details open=""><summary>Availability</summary><ul id="bef05e35-5721-4436-beee-7f676dd74ea2" class="bulleted-list"><li style="list-style-type:disc">Availability measures how readily available a service is</li></ul><ul id="ff824766-ad59-4c09-ac61-05edbc4e7000" class="bulleted-list"><li style="list-style-type:disc">Varies depending on storage class (ex: S3 standard has 99.99% availability ⇒ not available 53 minutes a year).</li></ul><ul id="72235602-5541-4730-a5eb-b761870225eb" class="bulleted-list"><li style="list-style-type:disc">Availability has to be taken into account when developing your application.</li></ul></details></li></ul><p id="1db0ac1c-8753-4ee2-a201-87f7b2c294ee" class="">Following are the S3 classes:</p><ul id="9baa090e-e77a-453b-a889-1a6b188507f7" class="toggle"><li><details open=""><summary>S3 Standard General Purpose</summary><ul id="16e89494-f50c-4900-b655-a41ae9f0d2c2" class="bulleted-list"><li style="list-style-type:disc">99.99% Availability</li></ul><ul id="4aeb46cd-96d8-4acd-9c24-d34c098a7b3a" class="bulleted-list"><li style="list-style-type:disc">Used for frequently accessed data</li></ul><ul id="ea8fff7a-99d9-43ee-80cc-ac0bbd4baa46" class="bulleted-list"><li style="list-style-type:disc">Low latency and high throughput</li></ul><ul id="09b6968a-1c9d-43bd-a2df-23e9aa184004" class="bulleted-list"><li style="list-style-type:disc">Sustain 2 concurrent facility failures</li></ul><ul id="97e8a138-f500-4f03-ba16-99efc93bd3ca" class="bulleted-list"><li style="list-style-type:disc">Use Cases: Big Data analytics, mobile &amp; gaming applications, content distribution, etc.</li></ul></details></li></ul><ul id="911f23eb-f3fc-48d7-af39-2e11a941b63f" class="toggle"><li><details open=""><summary>S3 Infrequent Access</summary><ul id="6fe1b186-bb20-4a3e-a5cc-65c527cb490b" class="bulleted-list"><li style="list-style-type:disc">For data that is less frequently accessed, but requires rapid access when needed</li></ul><ul id="6cbe86a2-0794-4350-a1ac-a0818e8299ba" class="bulleted-list"><li style="list-style-type:disc">Data can be moved to IA class after a minimum of 30 days in standard class</li></ul><ul id="eb605bc1-1edb-449e-806b-d7cf70770fe9" class="bulleted-list"><li style="list-style-type:disc">Lower cost than S3 Standard but cost on retrieval<ul id="ffb09797-3557-49b4-8a99-ecca0d3cfcbc" class="bulleted-list"><li style="list-style-type:circle">S3 Standard-Infrequent Access<ul id="b8c52356-10a4-4c5c-a938-0d1d294147e9" class="bulleted-list"><li style="list-style-type:square">99.9% Availability</li></ul><ul id="688db011-515c-4760-8b79-e36fa655142d" class="bulleted-list"><li style="list-style-type:square">Use cases: Disaster Recovery, backups</li></ul></li></ul><ul id="05ff1949-bf49-4541-9089-578e0b2b39e2" class="bulleted-list"><li style="list-style-type:circle">S3 One Zone-Infrequent Access<ul id="aee3eac9-8abc-44a6-a037-294a4bc9c402" class="bulleted-list"><li style="list-style-type:square">High durability (99.999999999%) in a single AZ</li></ul><ul id="c2f86567-fe3f-4b3b-a924-955faf36fd9e" class="bulleted-list"><li style="list-style-type:square">Data lost when AZ is destroyed</li></ul><ul id="bcdc22b2-86b9-493b-8f27-3b11c5e7a6bb" class="bulleted-list"><li style="list-style-type:square">99.5% Availability</li></ul><ul id="c9b85b0d-2271-4728-9e26-97561761d808" class="bulleted-list"><li style="list-style-type:square">Use Cases: Storing secondary backup copies of on-premise data, or data you can recreate</li></ul></li></ul></li></ul></details></li></ul><ul id="a7e5c1d8-f80b-4178-8afc-1f13e20370a4" class="toggle"><li><details open=""><summary>S3 Glacier</summary><ul id="e1141935-6ae3-4941-8f75-a560a0429d4a" class="bulleted-list"><li style="list-style-type:disc">Low-cost object storage meant for archiving / backup</li></ul><ul id="07a8b3a0-d68b-42c0-bab6-298e61a2e56f" class="bulleted-list"><li style="list-style-type:disc">Pricing: price for storage + object retrieval cost<ul id="41f4c3e4-58f0-40e1-8c1b-d93000d81f9a" class="bulleted-list"><li style="list-style-type:circle">S3 Glacier Instant Retrieval<ul id="3217aa15-4deb-4a8c-be1a-6f7f550db334" class="bulleted-list"><li style="list-style-type:square">Millisecond retrieval</li></ul><ul id="fdfc065a-ad5e-44fa-9ab8-17c1a4686da7" class="bulleted-list"><li style="list-style-type:square">Minimum storage duration of 90 days</li></ul><ul id="6aaa3d8b-b4d5-4d07-8fa9-015e25db6775" class="bulleted-list"><li style="list-style-type:square">Great for data accessed once a quarter</li></ul><ul id="744a00c8-abb1-4386-a2a3-7ee880d35ecd" class="bulleted-list"><li style="list-style-type:square">When you want to archive some data but need it instantly</li></ul></li></ul><ul id="e65e90e2-c671-4085-accd-818613466dfd" class="bulleted-list"><li style="list-style-type:circle">S3 Glacier Flexible Retrieval<ul id="c64cd388-f279-48f7-bc1b-da7d2e1879de" class="bulleted-list"><li style="list-style-type:square">Formerly known as Amazon S3 Glacier</li></ul><ul id="bdc9dc2e-bb6a-47d8-9173-a9cee8f45862" class="bulleted-list"><li style="list-style-type:square">3 retrieval flexibility (decreasing order of cost):<ul id="d651329f-0939-4782-86a4-fde17efd1503" class="bulleted-list"><li style="list-style-type:disc">Expedited (1 to 5 minutes)</li></ul><ul id="d562404a-27de-4307-91de-9d58621b13c1" class="bulleted-list"><li style="list-style-type:disc">Standard (3 to 5 hours)</li></ul><ul id="331d2f0c-7873-44cb-b044-66d840c8b5e0" class="bulleted-list"><li style="list-style-type:disc">Bulk (5 to 12 hours) - free</li></ul></li></ul><ul id="799a3263-a170-454c-a146-5ef6b6d63d8a" class="bulleted-list"><li style="list-style-type:square">Minimum storage duration of 90 days</li></ul></li></ul><ul id="c754681c-3de9-464e-8f2a-9a5ed4f1e5db" class="bulleted-list"><li style="list-style-type:circle">S3 Glacier Deep Archive<ul id="3b8bc2eb-fcc6-4e14-9503-b5e4e422d562" class="bulleted-list"><li style="list-style-type:square">2 flexible retrieval:<ul id="42c79811-44b8-45a5-a1c2-d3d455ddb132" class="bulleted-list"><li style="list-style-type:disc">Standard (12 hours)</li></ul><ul id="1c4de314-4638-4794-8d90-4b37448ce945" class="bulleted-list"><li style="list-style-type:disc">Bulk (48 hours)</li></ul></li></ul><ul id="c60610a1-d8ec-44fe-99dd-d5f0aa862623" class="bulleted-list"><li style="list-style-type:square">Minimum storage duration of 180 days</li></ul><ul id="de5f88fc-44a5-4171-aff7-3ac884469b26" class="bulleted-list"><li style="list-style-type:square">Lowest cost</li></ul></li></ul></li></ul><ul id="44a25162-1781-4a80-b3a0-4a0e5ee36abf" class="bulleted-list"><li style="list-style-type:disc">Object cannot be directly accessed, it first needs to be restored which could take some time (depending on the tier) to fetch the object.</li></ul></details></li></ul><ul id="15a85f5d-0a4e-465c-9626-8848da9f87d7" class="toggle"><li><details open=""><summary>S3 Intelligent Tiering</summary><ul id="a84eba71-1bef-41e0-b1c1-af6c4d00a55d" class="bulleted-list"><li style="list-style-type:disc">Moves objects automatically between Access Tiers based on usage</li></ul><ul id="2f6927b8-ef1d-4f02-a877-e3398425b5c8" class="bulleted-list"><li style="list-style-type:disc">Small monthly monitoring and auto-tiering fee</li></ul><ul id="1af705f0-46a6-45a4-a9bc-961fbc86cce4" class="bulleted-list"><li style="list-style-type:disc">No retrieval charges in S3 Intelligent-Tiering</li></ul><ul id="7b0cb1d2-ba53-47b0-93bc-931d61b0bd26" class="bulleted-list"><li style="list-style-type:disc">Access Tiers:<ul id="510030be-c8bb-4738-b5ae-6e3f0801d419" class="bulleted-list"><li style="list-style-type:circle">Frequent Access (automatic): default tier</li></ul><ul id="bbe68983-73a4-4219-b78f-f51a06d9aa48" class="bulleted-list"><li style="list-style-type:circle">Infrequent Access (automatic): objects not accessed for 30 days</li></ul><ul id="475f9b43-701d-4cdf-9f10-8955a5f789e9" class="bulleted-list"><li style="list-style-type:circle">Archive Instant Access (automatic): objects not accessed for 90 days</li></ul><ul id="87f80e34-4969-4ff8-940e-46cda35cf755" class="bulleted-list"><li style="list-style-type:circle">Archive Access (optional): configurable from 90 days to 700+ days</li></ul><ul id="26756a04-8bfe-41fa-9160-938c9fd9fc35" class="bulleted-list"><li style="list-style-type:circle">Deep Archive Access (optional): configurable from 180 days to 700+ days</li></ul></li></ul></details></li></ul><p id="a28325d3-e70d-4f3d-8f7d-fdbb1e69d198" class="">Can move between classes manually or using S3 Lifecycle configurations.</p></details></li></ul><ul id="953ab33f-2d07-4bde-a6a7-e679a5d79d77" class="toggle"><li><details open=""><summary>Comparison</summary><figure id="ef75b913-b383-4c99-98e1-7c50e735c670" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20189.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20189.png"/></a></figure><figure id="c824bf8c-79c7-4179-a2bc-a300531e2415" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20190.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20190.png"/></a></figure></details></li></ul><ul id="0f22f0e5-ca4f-408f-aa2c-9239584f0e6a" class="toggle"><li><details open=""><summary>Hands on</summary><p id="d5fc5bb7-78a1-4437-9b89-a4d8c0c99282" class="">When uploading an object in the S3 bucket, we can specify the storage class.</p><figure id="63597f86-c68f-45a5-89dc-6f27a9b6fbdb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20191.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20191.png"/></a></figure><p id="de5e00ce-b2fe-4e4f-a3b1-a8adc655c72a" class="">Untitled</p></details></li></ul><ul id="6efe4077-a788-42c9-9f4c-cbd454a84e39" class="toggle"><li><details open=""><summary>Moving between storage classes</summary><ul id="3d7c0b3d-4750-425e-a6ef-f45ea4641d4c" class="bulleted-list"><li style="list-style-type:disc">You can transition objects between storage classes based on the image below.</li></ul><ul id="a8869d5a-6447-4538-942a-8e13ea3782ae" class="bulleted-list"><li style="list-style-type:disc">You cannot transition from any class to every other class (ex: cannot transition from glacier to standard IA, it requires restore and copy)</li></ul><ul id="90ef2955-47aa-4ce1-b6a0-fd33f868fb67" class="bulleted-list"><li style="list-style-type:disc">For infrequently accessed object, move them to STANDARD_IA</li></ul><ul id="06f2e934-0a8f-402b-afea-5775dc91d60f" class="bulleted-list"><li style="list-style-type:disc">For archive objects you don’t need in real-time, use GLACIER or DEEP_ARCHIVE</li></ul><ul id="665fc35f-edc4-4ebc-937c-329f91104700" class="bulleted-list"><li style="list-style-type:disc">Moving objects can be automated using a lifecycle configuration (lifecycle rules)</li></ul><figure id="6bb55cfe-4ceb-49f4-b407-e6a3159c1f88" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20192.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20192.png"/></a></figure><p id="a20bc8d1-6747-44b9-8215-e468df6d1db6" class="">Untitled</p></details></li></ul><ul id="436a98bd-d6cb-402b-8717-9bdfbd60064d" class="toggle"><li><details open=""><summary>Lifecycle rules</summary><ul id="d1f765fc-cf00-44bb-9a5b-ce156517c73a" class="toggle"><li><details open=""><summary>Theory</summary><ul id="404d38a6-bc57-426b-a704-26a08127bd1b" class="bulleted-list"><li style="list-style-type:disc">We can specify some rules for our S3 objects to trigger a transition or deletion actions on them.</li></ul><ul id="2b22a08a-7b6c-4ef7-b66d-1ebea39fd97b" class="bulleted-list"><li style="list-style-type:disc">Transition actions: It defines when objects are transitioned to another storage class. Example:<ul id="975c8042-ea72-4f4e-88d9-a0f21f587edb" class="bulleted-list"><li style="list-style-type:circle">Move objects to Standard IA class 60 days after creation</li></ul><ul id="a3747c36-849b-439c-9e3c-8dbc07b75490" class="bulleted-list"><li style="list-style-type:circle">Move to Glacier for archiving after 6 months</li></ul></li></ul><ul id="2812be98-46f2-4fb3-b778-0cd7e1c96166" class="bulleted-list"><li style="list-style-type:disc">Expiration actions: configure objects to expire (delete) after some time<ul id="dd53905d-d07e-4651-83f8-d7516aea9fe7" class="bulleted-list"><li style="list-style-type:circle">Access log files can be set to delete after a 365 days</li></ul><ul id="9cc42e58-e5ac-4574-a63d-55dd9e6c1eab" class="bulleted-list"><li style="list-style-type:circle">Can be used to delete old versions of files (if versioning is enabled)</li></ul><ul id="74bda059-0e7c-45d8-be80-699cf596ad22" class="bulleted-list"><li style="list-style-type:circle">Can be used to delete incomplete multi-part uploads</li></ul></li></ul><ul id="1d9123fa-cf1d-4dca-a241-359afbf6abac" class="bulleted-list"><li style="list-style-type:disc">Rules can be created for a certain prefix (ex <code>s3://mybucket/mp3/*</code>)</li></ul><ul id="9978f860-b731-413e-8e0f-80e14681d233" class="bulleted-list"><li style="list-style-type:disc">Rules can be created for certain objects tags (ex Department: Finance)</li></ul><p id="d1aa82fc-6805-47d1-8788-b2028bb3e82c" class="">Example scenarios:</p><ul id="363bf189-9916-456d-8057-c481f9a7ce2c" class="bulleted-list"><li style="list-style-type:disc">Scenario 1<p id="b9cbab2f-23c3-4db6-9acd-b664fb2c0f12" class="">Your application on EC2 creates images thumbnails after profile photos are uploaded to Amazon S3. These thumbnails can be easily recreated, and only need to be kept for 45 days. The source images should be able to be immediately retrieved for these 45 days, and afterwards, the user can wait up to 6 hours. How would you design this?</p><p id="f7a341b8-5ce8-4bea-ac31-586bac0f207b" class="">S3 source images can be on STANDARD, with lifecycle configuration to transition them to GLACIER after 45 days.</p><p id="894370ee-1050-4980-88a3-2db9913504a1" class="">S3 thumbnails can be on ONEZONE_IA since they can be easily recreated even if the AZ goes down. This will save cost. Also, attach a lifecycle configuration to expire them (delete them) after 45 days.</p></li></ul><ul id="0b6ff94b-db43-40ca-b84c-7f25013531b3" class="bulleted-list"><li style="list-style-type:disc">Scenario 2<p id="b97440b7-6014-4f1f-becd-7956d6bcef2f" class="">A rule in your company states that you should be able to recover your deleted S3 objects immediately for 15 days, although this may happen rarely. After this time, and for up to 365 days, deleted objects should be recoverable within 48 hours.</p><p id="0493ff87-a59c-481f-ac3a-35a1330df682" class="">We need to enable S3 versioning in order to have object versions, so that “deleted objects” are in fact hidden by a “delete marker” and can be recovered. We will transition these “non-current versions” of the object to S3_IA because they are rarely accessed but if they are, they should be fetched instantly. We can transition afterwards these “non-current versions” to DEEP ARCHIVE as it is the most cost-effective solution given the 48h retrieval time.</p></li></ul></details></li></ul><ul id="d2e4abb3-b6ac-416d-a230-982fed2627b1" class="toggle"><li><details open=""><summary>Hands on</summary><p id="f218c55f-b897-4e27-a498-63d68bc5a730" class="">Select the bucket → Management → Lifecycle rules → Create</p><p id="5ebeff10-bd6a-4a85-add6-d51efb2a24d7" class="">Specify a prefix to apply this rule to a folder</p><figure id="01afe399-eb4d-49f2-86f7-2ade29df919d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20193.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20193.png"/></a></figure><p id="4fb6249e-f0ba-4631-b714-57ab8524e17b" class="">Untitled</p></details></li></ul></details></li></ul></details></li></ul><ul id="4937e0bc-7a49-4ba2-ae22-21bf9de918e9" class="toggle"><li><details open=""><summary>S3 Analytics</summary><ul id="2d9a71e4-b699-4675-85e7-64054df57dee" class="bulleted-list"><li style="list-style-type:disc">You can setup S3 Analytics to help determine when to transition objects from Standard to Standard_IA</li></ul><ul id="9fdaeeae-3c42-4816-8ecf-849b1b1d7f77" class="bulleted-list"><li style="list-style-type:disc">Does not work for ONEZONE_IA or GLACIER</li></ul><ul id="7a81e77b-a34e-4244-a00d-4a531acc111e" class="bulleted-list"><li style="list-style-type:disc">Report is updated daily</li></ul><ul id="3deaddd6-4872-47bc-ba6e-4e939849eafd" class="bulleted-list"><li style="list-style-type:disc">Takes about 24h to 48h hours to first start</li></ul><ul id="2d6611d9-be7e-455c-ab88-149115ad5ea2" class="bulleted-list"><li style="list-style-type:disc">Setting up S3 analytics is a good first step to determine the optimal Lifecycle Rules</li></ul></details></li></ul><ul id="a0577757-7d81-4866-a208-b5f1253c3117" class="toggle"><li><details open=""><summary>Amazon Athena</summary><ul id="cfe83aef-cc4e-412a-aab8-4dc5c1136fcd" class="bulleted-list"><li style="list-style-type:disc">Theory<ul id="6197ffec-eba4-42ac-aa26-6331c0a8e393" class="bulleted-list"><li style="list-style-type:circle">Athena is a serverless query service to perform analytics on S3 objects</li></ul><ul id="7569f17b-3ee8-4d76-93c7-ee8de5d216c5" class="bulleted-list"><li style="list-style-type:circle">Uses standard SQL language to query the files.</li></ul><ul id="56e2e15f-984a-4e7d-a937-d53a8b6fe04a" class="bulleted-list"><li style="list-style-type:circle">S3 objects don’t need to be loaded in Athena, it runs directly on S3.</li></ul><ul id="1a7a62d4-27c6-414e-876b-f146d9101eef" class="bulleted-list"><li style="list-style-type:circle">Supports CSV, JSON, ORC, AvI and Parquet file formats (built on Presto engine)</li></ul><ul id="6f8eb747-5df8-4483-9038-e46d2fa616a6" class="bulleted-list"><li style="list-style-type:circle">Pricing: $5.00 per TB of data scanned</li></ul><ul id="52445b3d-d709-4572-89f4-9b83ba7ec8bb" class="bulleted-list"><li style="list-style-type:circle">Use compressed or columnar data for cost-savings (due to less scan)</li></ul><ul id="1c82789b-aa0e-48d2-9e86-6aab7a55e67c" class="bulleted-list"><li style="list-style-type:circle">Use cases: Business intelligence / analytics / reporting, analyze &amp; query VPC Flow Logs, ELB Logs, CloudTrail trails, etc.</li></ul><ul id="56b6ba19-c22b-4b7f-91a1-1483f2954aad" class="bulleted-list"><li style="list-style-type:circle">Exam Tip: Analyze data in S3 using serverless SQL ⇒ Athena</li></ul><figure id="809eb405-a96b-4c7a-876d-4f698140459e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20194.png"><img style="width:336px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20194.png"/></a></figure></li></ul></details></li></ul></div><h3 id="d61e30e3-25fb-4069-bbeb-c24ba9c84476" class=""><details open=""><summary>Section 15: Amazon S3 Security</summary></details></h3><div class="indented"><ul id="cad7b281-3932-4124-905a-6b929ff6f798" class="toggle"><li><details open=""><summary>S3 Encryption</summary><figure id="76ff44bf-a170-4af3-961a-0b0ded8cab53" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(423).png"><img style="width:945px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(423).png"/></a></figure><ul id="b10c70f9-16fb-4466-a578-da5140bd5471" class="toggle"><li><details open=""><summary>Server Side Encryption - SSE S3</summary><figure id="1fcff4f8-0f4a-4392-ac56-178a489ffd14" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(424).png"><img style="width:1586px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(424).png"/></a></figure></details></li></ul><ul id="406b7bb1-c775-441b-bd27-ce735fd2c0e6" class="toggle"><li><details open=""><summary>Server Side Encryption - SSE KMS (Key Management Service)</summary><figure id="aaa8b208-5cbc-43be-900c-0659111a937c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(425).png"><img style="width:1718px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(425).png"/></a></figure><figure id="6a831cb2-87a6-4b98-b6b1-45a7a705092f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(426).png"><img style="width:1705px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(426).png"/></a></figure></details></li></ul><ul id="f397b3ac-3492-42e2-8993-06b847d52ff1" class="toggle"><li><details open=""><summary>Server Side Encryption - SSE C (Customer)</summary><figure id="ad87915f-ca63-4333-9d68-371fab4a3042" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(427).png"><img style="width:1630px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(427).png"/></a></figure></details></li></ul><ul id="5e07733a-fcc8-4450-a32c-0a2cd84c6848" class="toggle"><li><details open=""><summary>Client Side Encryption</summary><figure id="b0ba0150-a8b4-4a3f-a844-a7ea624a3687" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(428).png"><img style="width:1723px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(428).png"/></a></figure></details></li></ul><ul id="d4f75827-69f5-4231-b9ab-482be8eccd9e" class="toggle"><li><details open=""><summary>Encryption in Transit (SSL/TLS)</summary><figure id="a513eaa7-232e-4de2-974c-2f77548f7719" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(429).png"><img style="width:1639px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(429).png"/></a></figure></details></li></ul></details></li></ul><ul id="49d0c1b9-4d95-4bcb-a4a0-1c7898c9a8d3" class="toggle"><li><details open=""><summary>S3 Default Encryption</summary><figure id="b33340c6-a119-4b67-8354-0e60cf661839" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(430).png"><img style="width:1669px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(430).png"/></a></figure></details></li></ul><ul id="78037bec-480d-412d-a94f-2cfc2a99bd29" class="toggle"><li><details open=""><summary>S3 CORS</summary><figure id="ae5b28f2-be47-4aa6-9013-9f5f9ede07ed" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(431).png"><img style="width:930px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(431).png"/></a></figure><figure id="61508363-b2f0-4e42-9aaa-cd6eeee23fd5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(432).png"><img style="width:982px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(432).png"/></a></figure><figure id="20f48ed0-313f-45be-9ef6-5e0766206fca" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(433).png"><img style="width:1792px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(433).png"/></a></figure></details></li></ul><ul id="de3d0eed-791c-4070-bbcd-dd2fd1ff80a2" class="toggle"><li><details open=""><summary>S3 MFA Delete</summary><ul id="a19eeeb3-235c-4a44-b07e-a99c92caa80a" class="toggle"><li><details open=""><summary>Theory</summary><ul id="e97938eb-b3f4-4eb3-a61c-54e610109b7d" class="bulleted-list"><li style="list-style-type:disc">MFA (multi factor authentication) forces user to generate a code on a device (usually a mobile phone or hardware) before doing destructive operations on S3</li></ul><ul id="0a25c265-1ce7-415d-9d3a-24aa5f6ee509" class="bulleted-list"><li style="list-style-type:disc">To use MFA-Delete, first enable Versioning on the S3 bucket</li></ul><ul id="46812ae0-c617-4a6b-ad6c-b949ff527fef" class="bulleted-list"><li style="list-style-type:disc">You will need MFA to<ul id="eb160d57-3eec-4b0b-bfa3-7541d412470d" class="bulleted-list"><li style="list-style-type:circle">permanently delete an object version</li></ul><ul id="c13108f5-0f6b-4968-9938-52538ed1792e" class="bulleted-list"><li style="list-style-type:circle">suspend versioning on the bucket</li></ul></li></ul><ul id="93ae36c9-b27a-4f76-ac6b-adbcb6ec8c71" class="bulleted-list"><li style="list-style-type:disc">You won’t need MFA for<ul id="e307f2dd-2fdf-46bd-aacc-a69ee7b3fbe1" class="bulleted-list"><li style="list-style-type:circle">enabling versioning</li></ul><ul id="49f287d3-88c1-40f7-97c2-7106b1ad898c" class="bulleted-list"><li style="list-style-type:circle">listing deleted versions</li></ul><ul id="911c332a-5203-4a54-a3b8-203b7950aab5" class="bulleted-list"><li style="list-style-type:circle">deleting an object (soft delete / marked as deleted)</li></ul></li></ul><ul id="5ea4c04e-8bee-4e7d-9ea1-952a0ec61c6c" class="bulleted-list"><li style="list-style-type:disc">Only the bucket owner (root account) can enable/disable MFA-Delete. It cannot be done by an IAM user even if they have admin access.</li></ul><ul id="461fdcb7-9396-4a46-b004-169d9dae809b" class="bulleted-list"><li style="list-style-type:disc">MFA-Delete currently can only be enabled using the CLI, SDK or S3 Rest API. It cannot be done through the AWS Console.</li></ul></details></li></ul><ul id="8a518a30-b386-4369-a470-7cd2fd3b0359" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="8885f839-e026-4bda-a0d6-c916c0eeae4a" class="bulleted-list"><li style="list-style-type:disc">Login to your root account on AWS<p id="8f4958af-5260-4b96-a82b-fa16a4252498" class="">User → My Security Credentials →</p><p id="cd60ca10-4d96-4f9a-9f42-d005b7297474" class="">MFA → Copy the ARN for the MFA device (required to enable MFA delete)</p><p id="1ccacb84-b44d-428d-ad47-d026fbe5ee7d" class="">Access Keys → Create new access key (required to configure AWS CLI for root account)</p></li></ul><ul id="96baaad8-3163-4561-b67f-5c194d25c006" class="bulleted-list"><li style="list-style-type:disc">Configure Root profile in CLI<pre id="229944b0-248b-457f-a8a1-4eaace192575" class="code code-wrap"><code>aws configure --profile root-mfa-delete-demo</code></pre></li></ul><ul id="67304f1d-dc80-4aba-98f6-26b29faf45c1" class="bulleted-list"><li style="list-style-type:disc">Enable MFA Delete for S3<pre id="2cf21330-ff76-49f3-860d-b336f38a0ddb" class="code code-wrap"><code>aws s3api put-bucket-versioning --bucket &lt;bucket-name&gt; --versioning-configuration Status=Enabled,MFADelete=Enabled --mfa &quot;&lt;arn-of-mfa-device&gt; &lt;mfa-code&gt;&quot; --profile root-mfa-delete-demo</code></pre></li></ul><ul id="94dcee48-34fc-4a0c-ac91-e231c67c652a" class="bulleted-list"><li style="list-style-type:disc">Disable MFA Delete for S3<pre id="f7eb4be9-f730-4165-b4e5-68a381ba0483" class="code code-wrap"><code>aws s3api put-bucket-versioning --bucket &lt;bucket-name&gt; --versioning-configuration Status=Enabled,MFADelete=Disabled --mfa &quot;&lt;arn-of-mfa-device&gt; &lt;mfa-code&gt;&quot; --profile root-mfa-delete-demo</code></pre></li></ul></details></li></ul></details></li></ul><ul id="ee62056f-dd56-4701-bd2d-3626f9a00536" class="toggle"><li><details open=""><summary>S3 Access Logs</summary><ul id="673a288a-d065-4223-82bb-132df1b4bee5" class="toggle"><li><details open=""><summary>Theory</summary><ul id="be7a98d3-6fde-4c0f-83b1-1931a0bf0486" class="bulleted-list"><li style="list-style-type:disc">For audit purpose, you may want to log all access to S3 buckets</li></ul><ul id="98340cac-5d46-43a2-8a7f-06af8131ba12" class="bulleted-list"><li style="list-style-type:disc">Any request made to S3, from any account, authorized or denied, will be logged into another S3 bucket</li></ul><ul id="7367e50a-465d-4d82-9fde-937af574f2e1" class="bulleted-list"><li style="list-style-type:disc">That data can be analyzed using data analysis tools or Amazon Athena</li></ul><ul id="f83fce98-abf8-4d3f-bcc0-e2d108435481" class="bulleted-list"><li style="list-style-type:disc">Do not set your logging bucket to be the monitored bucket. It will create a logging loop, and your bucket will grow in size exponentially.</li></ul><figure id="67e11de6-0abd-4691-bd31-52b7f8530221" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20195.png"><img style="width:240px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20195.png"/></a></figure><figure id="85d86260-e957-4a7f-9864-b74d50928b9b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20196.png"><img style="width:432px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20196.png"/></a></figure></details></li></ul><ul id="a131a586-5271-4faf-9990-247598edb44b" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="ea4c2973-6c68-4c52-b020-30e3e61d72de" class="bulleted-list"><li style="list-style-type:disc">Create a new bucket for logs</li></ul><ul id="5c9901a0-06c6-481a-900c-a88add35d4dc" class="bulleted-list"><li style="list-style-type:disc">Enable logging for the main bucket<p id="bb1d6982-2353-4400-86a0-992e8ef29ab5" class="">Select bucket → Properties → Server access logging → Edit → Choose the logging bucket → Specify a path to group all the logs for the main bucket under that folder (ex: <code>/logs</code>)</p><p id="9f8a9b6f-1371-4edc-b4d8-6e350e90a8f6" class="">The above step will automatically modify the ACL (access control list) of the logs bucket to allow the main bucket to write log info.</p><figure id="9bafd197-847f-4b63-ab0a-146df4d20b8b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20197.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20197.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="34c6c3ad-5653-45b8-9876-ce088bf6aa79" class="toggle"><li><details open=""><summary>S3 Pre-signed URL</summary><ul id="507eb090-cc88-41b2-9b9d-7833d4206f9f" class="toggle"><li><details open=""><summary>Theory</summary><ul id="01791b46-68bf-4bb6-ae3e-44baa58b1fc9" class="bulleted-list"><li style="list-style-type:disc">Pre-signed URLs for S3 have temporary access token as query string parameters which allow anyone with the URL to temporarily access the resource.</li></ul><ul id="64285174-06bc-45ed-ae06-a250f5730c3f" class="bulleted-list"><li style="list-style-type:disc">Can generate pre-signed URLs using SDK or CLI<ul id="0e26f146-acab-4c08-a388-d82d4a9a1bc2" class="bulleted-list"><li style="list-style-type:circle">Pre-signed URL for Downloads (easy, can use the CLI)</li></ul><ul id="4c68f79e-759b-462c-a064-6e8a43961842" class="bulleted-list"><li style="list-style-type:circle">Pre-signed URL for Uploads (harder, must use the SDK)</li></ul></li></ul><ul id="8dbc0720-7db4-4862-b885-b36150a01e40" class="bulleted-list"><li style="list-style-type:disc">Valid for a default of 3600 seconds (1h), can change timeout with <code>-expires-in [TIME_BY_SECONDS]</code> argument</li></ul><ul id="cf90682a-ba4d-496e-8618-ddb2b1d00ac0" class="bulleted-list"><li style="list-style-type:disc">Users given a pre-signed URL inherit the permissions of the person who generated the URL for GET / PUT request</li></ul><ul id="d182ddbd-fc5b-4b88-97d1-8dc3f83fae43" class="bulleted-list"><li style="list-style-type:disc">Use cases<ul id="fca1f164-6736-42fd-8ff5-2b856066ced4" class="bulleted-list"><li style="list-style-type:circle">Allow only logged-in users to download a premium video on your S3 bucket</li></ul><ul id="bada09c1-9285-4011-be34-07d142129d7e" class="bulleted-list"><li style="list-style-type:circle">Allow an ever changing list of users (difficult to manage permissions) to download files by generating URLs dynamically</li></ul><ul id="659eadcb-7b5b-47a8-b2b6-d97b45839281" class="bulleted-list"><li style="list-style-type:circle">Allow temporarily a user to upload a file to a precise location in our bucket (ex: uploading their profile picture)</li></ul></li></ul></details></li></ul><ul id="a6648985-ba77-447e-82f6-dd68ecba5b67" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="cd3b352f-3699-44cc-9dcc-aa7c7e8c2497" class="bulleted-list"><li style="list-style-type:disc">click on file you want to share → object action → share with pre signed URL → set minutes/hours → create pre signed URL and share it.</li></ul></details></li></ul></details></li></ul><ul id="48d4ba1d-c8cd-40a8-b035-3ba8fb9b3d94" class="toggle"><li><details open=""><summary>Glacier Vault Lock</summary><ul id="45dafdc7-daeb-4be4-ba60-14ad903f1f90" class="bulleted-list"><li style="list-style-type:disc">It allows us to lock the data after writing it once (WORM - Write Once Read Many model)</li></ul><ul id="6c1cb1ca-667e-4f15-bdd7-4a271cf9f95a" class="bulleted-list"><li style="list-style-type:disc">Lock the policy from future edits (no one can change the data or policy)</li></ul><ul id="5db5db02-e192-4b4c-9ab0-adf64b206d3f" class="bulleted-list"><li style="list-style-type:disc">Helpful for compliance and data retention</li></ul></details></li></ul><ul id="d760a6e1-8093-4f10-b5dd-7bd315e7a033" class="toggle"><li><details open=""><summary>S3 Object Lock</summary><ul id="5e8b5dad-8c81-4d48-8daf-96f4b9436049" class="bulleted-list"><li style="list-style-type:disc">Adopt a WORM (Write Once Read Many) model</li></ul><ul id="fc2da2aa-89f9-4cbe-a1a9-8fe86b3cd6a4" class="bulleted-list"><li style="list-style-type:disc">Block an object version deletion for a specified amount of time</li></ul><ul id="dfe86b8f-4a98-491a-8720-e35fec4d2c33" class="bulleted-list"><li style="list-style-type:disc">Object retention can be based on:<ul id="c3f9c67a-af83-49ab-8165-5fbf761a3b16" class="bulleted-list"><li style="list-style-type:circle">Retention Period: specifies a fixed period to secure the S3</li></ul><ul id="5da0fcb7-2638-431c-8267-8caea0603c25" class="bulleted-list"><li style="list-style-type:circle">Legal Hold: same protection but no expiry date/retention period. </li></ul><ul id="80539c59-5cfa-4294-ae2f-ba9b030b1c1f" class="bulleted-list"><li style="list-style-type:circle">Legal Hold can be freely placed and removed using the s3:PutObjectLegalHold IAM permission.</li></ul></li></ul><ul id="78742736-2ef2-4e00-b392-bb5d3bf0a2c6" class="bulleted-list"><li style="list-style-type:disc">Modes:<ul id="7767c4b2-9a0f-4b27-b328-77994b27b48c" class="bulleted-list"><li style="list-style-type:circle">Retention Governance mode: users can’t overwrite or delete an object version or alter its lock settings unless they have special permissions</li></ul><ul id="01c8cc50-34f0-4d72-8022-4492a9edc367" class="bulleted-list"><li style="list-style-type:circle">Retention Compliance mode: a protected object version can’t be overwritten or deleted by any user, including the root user in your AWS account. When an object is locked in compliance mode, its retention mode can’t be changed, and its retention period can’t be shortened.</li></ul></li></ul></details></li></ul><ul id="47c4ba8b-5980-4fdb-b60b-287a2992c844" class="toggle"><li><details open=""><summary>S3 Access Points and Object Lambda</summary><figure id="2ed19cb7-6c58-46ea-8ab9-bcd97a8bafe1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(434).png"><img style="width:957px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(434).png"/></a></figure><figure id="54b438b3-2dc4-4dba-8ded-7d7852dcc1c7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(435).png"><img style="width:1761px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(435).png"/></a></figure></details></li></ul></div><h3 id="32b9b934-4a79-4e86-a8b7-54944e98147c" class=""><details open=""><summary>Section 16: CloudFront &amp; AWS Global Accelerator</summary></details></h3><div class="indented"><ul id="7cd9e098-5bfe-4c56-b9cc-45469b36efb9" class="toggle"><li><details open=""><summary>AWS CloudFront</summary><ul id="ec3a8447-470a-4c50-8202-ef8ca22e9584" class="toggle"><li><details open=""><summary>Intro</summary><ul id="f470b2fc-6480-4782-b2a7-160756b3198c" class="bulleted-list"><li style="list-style-type:disc">Global AWS Service (not tied to a region)</li></ul><ul id="dcec96d0-c5c4-4617-bdc2-34e11fb45606" class="bulleted-list"><li style="list-style-type:disc">Provides a global Content Delivery Network (CDN)</li></ul><ul id="49837b87-7371-4576-b162-fa83ccb7f037" class="bulleted-list"><li style="list-style-type:disc">Present outside the VPC</li></ul><ul id="a6ac30e0-91a8-4f81-a16e-cd7f7e7f9a8b" class="bulleted-list"><li style="list-style-type:disc">Improves read performance, content is cached at the edge locations</li></ul><ul id="3d2f2dde-bdc5-47ed-8bab-190e1e48d22c" class="bulleted-list"><li style="list-style-type:disc">216 Point of Presence globally (edge locations)</li></ul><ul id="c2f330b4-ce8f-4e2b-b919-795d67ead14c" class="bulleted-list"><li style="list-style-type:disc">DDoS (distributed DoS) protection, integration with Shield &amp; AWS Web Application Firewall</li></ul><ul id="e370883e-89da-4710-8f76-594d16f1fd23" class="bulleted-list"><li style="list-style-type:disc">Can expose external HTTPS and can talk to internal HTTPS backends</li></ul><ul id="89584c93-8d11-4b14-98ce-ee9a76ac9cc3" class="bulleted-list"><li style="list-style-type:disc">Supports HTTP/RTMP protocol (does not support UDP protocol)</li></ul><ul id="cb48c04a-2fca-442e-8f81-dc4e7205c51d" class="bulleted-list"><li style="list-style-type:disc">With CloudFront, if a user in NA accesses some file in an S3 bucket in AU, the content will be fetched to an edge location in NA (over the private AWS network) and cached there. This allows the reads to be distributed and therefore reduces load on the main S3 bucket.<figure id="762076a6-3c15-46e7-a92e-98c1e2ce47e8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20198.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20198.png"/></a></figure></li></ul></details></li></ul><ul id="ab068b74-482f-458d-8c8a-05cfa9721ddd" class="toggle"><li><details open=""><summary>Origins for CloudFront</summary><ul id="f8c7a959-64a7-46a9-aeae-1c61e14499df" class="toggle"><li><details open=""><summary>CloudFront working</summary><p id="32b1a819-55c5-4830-a25d-9f3deee20d91" class="">The client sends the request to CloudFront at an edge location which will forward it to the origin (along with the query string and request headers). The fetched file will be cached at the edge location. So, if another user requests the same file, it will be available at the edge location.</p><figure id="44554d97-7e7b-41a3-b11f-975ebe43473d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20199.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20199.png"/></a></figure></details></li></ul><ul id="b0b66583-d01b-4649-a34a-23e5a87ba57a" class="toggle"><li><details open=""><summary>S3 bucket</summary><ul id="88a33137-f9b8-45bf-8d08-c7a3d8916c61" class="bulleted-list"><li style="list-style-type:disc">For distributing files and caching them at edge locations</li></ul><ul id="6277fe03-e1ab-48d6-85e1-cd9522158dfc" class="bulleted-list"><li style="list-style-type:disc">Enhanced security with CloudFront Origin Access Identity (OAl) which allows the S3 bucket to only be accessed by CloudFront.</li></ul><ul id="b7081fe7-dd67-47a5-9587-dd9e79e44bdb" class="bulleted-list"><li style="list-style-type:disc">CloudFront can be used as an ingress (to upload files to S3)</li></ul><figure id="6ae6f7f4-0452-4f79-9fca-e1b0b8f25bf2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20200.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20200.png"/></a></figure></details></li></ul><ul id="23279cdb-d0f3-489b-9484-de93c4710e5d" class="toggle"><li><details open=""><summary>Custom Origin (must use HTTP) ALB or EC2</summary><ul id="520dcc13-8e54-43b6-9c27-53beb28efaea" class="toggle"><li><details open=""><summary>EC2 instance</summary><p id="1eeb0a0c-0545-43ce-947e-5007b3f7e40b" class="">In this case, EC2 instance will fetch the content and deliver it to the edge location.</p><ul id="75c12af1-679a-4c49-97cc-d1e8b60b3696" class="bulleted-list"><li style="list-style-type:disc">EC2 instances need to be publicly accessible on HTTP by public IPs of edge locations (range provided by AWS). This is because edge locations are present outside the VPC.</li></ul><figure id="574de386-ce27-4011-b380-b00235d416a5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20201.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20201.png"/></a></figure><p id="9afbd8fc-1daf-4d01-a9b7-ea58c783319e" class="">Untitled</p></details></li></ul><ul id="1ac5fc8d-a4bc-4f95-af6e-26c4489f27d4" class="toggle"><li><details open=""><summary>Application Load Balancer</summary><p id="2e887519-3834-48c4-83b0-a9ee27f993af" class="">Since ALB only needs to be publicly accessible by the public IPs of edge locations, EC2 instances can be private</p><figure id="6a39d8c8-4c6a-4900-b899-58c15782bcd6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20202.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20202.png"/></a></figure></details></li></ul><ul id="75d7a885-e1c8-4bbf-902a-c4b47bf7e24e" class="bulleted-list"><li style="list-style-type:disc">S3 website (must first enable the bucket as a static S3 website)</li></ul><ul id="b9137593-9962-4a9a-b3d4-2994789c013c" class="bulleted-list"><li style="list-style-type:disc">HTTP backend (on premises)</li></ul></details></li></ul></details></li></ul><ul id="d1270de7-00b5-4a98-b834-563f873c4420" class="toggle"><li><details open=""><summary>CloudFront vs S3 Cross Region Replication</summary><p id="f758ae8c-ff42-4653-a3f1-aa03e7a546ca" class="">CloudFront:</p><ul id="03f65cd7-b899-4335-a696-335b4fb26fb2" class="bulleted-list"><li style="list-style-type:disc">Global Edge network</li></ul><ul id="c0250798-755c-4d02-b589-8dfe386166b5" class="bulleted-list"><li style="list-style-type:disc">Files are cached for a TTL</li></ul><ul id="74e4df07-6db5-4468-b4c4-3c7ef612740f" class="bulleted-list"><li style="list-style-type:disc">Great for static content that must be available everywhere</li></ul><p id="db3b1d31-d30a-4340-8f01-b16f22d514d0" class="">S3 Cross Region Replication:</p><ul id="5a0531ce-43c2-4d23-a61b-3e75e6c59bf6" class="bulleted-list"><li style="list-style-type:disc">Must be setup for each region you want replication to happen</li></ul><ul id="3392fefd-bbae-4ce9-9a8b-616975a66481" class="bulleted-list"><li style="list-style-type:disc">Files are updated in near real-time</li></ul><ul id="c419935f-e6a4-4bb9-9967-09b290200c3e" class="bulleted-list"><li style="list-style-type:disc">Read only</li></ul><ul id="12e3b11b-b0ed-42e1-b5f2-46d7c9b87787" class="bulleted-list"><li style="list-style-type:disc">Great for dynamic content that needs to be available at low-latency in few regions</li></ul></details></li></ul><ul id="b37e602c-2b7e-4a9a-b8ee-b136124b1a63" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="558ed4e5-3b85-47eb-b25b-c135f6aaee73" class="bulleted-list"><li style="list-style-type:disc">Create an S3 bucket<p id="4a7e9180-b50f-4a71-99d7-196872df5356" class="">Upload:</p><ul id="21074f62-b144-484d-aba8-a799c41a9068" class="bulleted-list"><li style="list-style-type:circle">index.html<pre id="746ee1f7-9fe0-4b91-8da6-662d080fd437" class="code code-wrap"><code>&lt;html&gt;    &lt;head&gt;        &lt;title&gt;My First Webpage&lt;/title&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;h1&gt;I love coffee&lt;/h1&gt;        &lt;p&gt;Hello world!&lt;/p&gt;    &lt;/body&gt;    &lt;img src=&quot;coffee.jpg&quot; width=500/&gt;&lt;/html&gt;</code></pre></li></ul><ul id="c668d5fc-1d9c-41da-bf8f-ddb0f3f0c70d" class="bulleted-list"><li style="list-style-type:circle">error.html<pre id="4079eeaa-637c-48e7-a7e6-aa0f67b473ae" class="code code-wrap"><code>&lt;h1&gt;Uh oh, there was an error&lt;/h1&gt;</code></pre></li></ul><ul id="ba1f67c2-b392-4af9-9361-ab9cc5623aa7" class="bulleted-list"><li style="list-style-type:circle">coffee.jpg<p id="6d91656a-7f9e-499f-9a0b-598d32a171a4" class=""><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/coffee.jpg">coffee.jpg</a></p></li></ul><p id="7fb81462-22d7-4014-a437-0ea6e50a85c3" class="">💡 Don’t turn on S3 website</p></li></ul><ul id="b1dd300f-346f-4138-bd07-9e9954ae9c92" class="bulleted-list"><li style="list-style-type:disc">Create a CloudFront distribution<p id="5b392a93-aef3-4724-9da8-36b8b9655873" class="">Select the bucket as the origin, create a new OAI and update the bucket policy to allow CF to get objects from it.</p><p id="244b2d75-12e8-4c7e-a636-c9611fc00101" class="">Default root object: <code>index.html</code></p><figure id="b1d6c574-b35e-4c73-9398-08c9f570ea17" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20203.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20203.png"/></a></figure><p id="462cd341-51a1-4379-b5b4-d7ce060ce31b" class="">Untitled</p></li></ul><p id="35b87419-b9b6-4c09-b659-e8391fef989f" class="">Once the distribution is deployed, the distribution domain name can be used to access the files through the CloudFront network. We can also access individual files using the domain name as the base URL.</p></details></li></ul><ul id="b51e09bd-f13b-4f9c-b781-aee2f34cea09" class="toggle"><li><details open=""><summary>Geo Restriction</summary><ul id="cd28f976-c58e-4e71-ae62-489049fbda35" class="bulleted-list"><li style="list-style-type:disc">You can restrict who can access your distribution based on their location</li></ul><ul id="e4feafda-4d44-403e-8357-b312742d112f" class="bulleted-list"><li style="list-style-type:disc">Whitelist: Allow your users to access your content only if they’re in one of the countries on a list of approved countries.</li></ul><ul id="12415da4-f83c-4e5c-b311-32f79445e6d6" class="bulleted-list"><li style="list-style-type:disc">Blacklist: Prevent your users from accessing your content if they’re in one of the countries on a blacklist of banned countries.</li></ul><ul id="45d91fa8-03bc-409a-8869-240e4c222182" class="bulleted-list"><li style="list-style-type:disc">The “country” is determined using a 3rd party Geo-IP database</li></ul><ul id="3c4b2bfb-fe16-4f16-a763-09e6982e388b" class="bulleted-list"><li style="list-style-type:disc">Use case: Copyright Laws to control access to content</li></ul></details></li></ul><ul id="c600a4a4-af85-4e60-94a4-ae729665ea4f" class="toggle"><li><details open=""><summary>Pricing</summary><ul id="07e3aa58-efee-4a00-9ed5-3ffd360f9d2e" class="bulleted-list"><li style="list-style-type:disc">CloudFront Edge locations are all around the world</li></ul><ul id="89552859-c007-4a8e-b00a-c0db22de30ad" class="bulleted-list"><li style="list-style-type:disc">The cost of data out per edge location varies<figure id="da827658-0c36-473b-914f-3b2b7b1649de" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20204.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20204.png"/></a></figure></li></ul><ul id="b66a1760-1321-4775-91e9-9395a5edeea1" class="bulleted-list"><li style="list-style-type:disc">You can reduce the number of edge locations for cost reduction using price classes:<ul id="848ceb3e-9f82-4d9b-a63e-57dec91eba66" class="bulleted-list"><li style="list-style-type:circle">Price Class All: all regions best performance</li></ul><ul id="d0d0c223-2815-405c-ad7a-95493c118417" class="bulleted-list"><li style="list-style-type:circle">Price Class 200: most regions, but excludes the most expensive regions</li></ul><ul id="36a532da-6bcf-4b41-be58-23540efdacd0" class="bulleted-list"><li style="list-style-type:circle">Price Class 100: only the least expensive regions</li></ul><figure id="f2e00010-5a93-40e3-b1fb-0cc74661702f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20205.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20205.png"/></a></figure></li></ul></details></li></ul><ul id="5ef6d71b-ba4f-4335-901c-2106788204e7" class="toggle"><li><details open=""><summary>Cache Invalidation</summary><figure id="af2bcc8d-936d-4ef2-8f7c-01dcceeedad8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(436).png"><img style="width:1735px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(436).png"/></a></figure></details></li></ul><p id="3fb2564d-3efe-4c24-a49e-475c276d00ef" class="">
</p><p id="28d33566-0011-4a4f-b3ab-6c454e8c8f6c" class="">
</p><ul id="27c732ae-edc8-4d74-b996-5eaf3e68624f" class="toggle"><li><details open=""><summary>Signed URL / Signed Cookies</summary><ul id="00315e2b-4890-4d93-b9ce-f2fcd12c459d" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3cbf193e-c98e-45be-a2a9-e55751b1bb29" class="bulleted-list"><li style="list-style-type:disc">Signed URL / Signed Cookies are used to make a CloudFront distribution private. Ex: You want to distribute paid shared content to premium users over the world.</li></ul><ul id="fba38f75-69a7-41e4-9fd2-15eb02c76186" class="bulleted-list"><li style="list-style-type:disc">Whenever we create a signed URL / cookie, we attach a policy specifying:<ul id="6bd704b7-cc8d-439d-8cc2-45b57bbd60dd" class="bulleted-list"><li style="list-style-type:circle">URL / Cookie expiration</li></ul><ul id="996d54b4-fe27-4e32-b534-0693baea4aea" class="bulleted-list"><li style="list-style-type:circle">IP ranges to access the data from</li></ul><ul id="8b407d4e-0619-48b1-aec8-69ad0f92fed2" class="bulleted-list"><li style="list-style-type:circle">Trusted signers (which AWS accounts can create signed URLs)</li></ul></li></ul><ul id="6c65f571-4b94-4448-a60c-1a31188917bb" class="bulleted-list"><li style="list-style-type:disc">How long should the URL be valid for?<ul id="ddbdc7ca-cfa6-43f2-a9dc-d2dec6b19f54" class="bulleted-list"><li style="list-style-type:circle">Shared content (movie, music): make it short (a few minutes)</li></ul><ul id="82769db9-6253-4518-ab34-48e8065ef959" class="bulleted-list"><li style="list-style-type:circle">Private content (private to the user for long term access): you can make it last for years</li></ul></li></ul><ul id="9cb5a350-60a3-407c-8bc6-98a8a63e0c74" class="bulleted-list"><li style="list-style-type:disc">Signed URL ⇒ access to individual files (one signed URL per file)</li></ul><ul id="10e6a2ae-79fc-4ff7-a691-6a68223ae899" class="bulleted-list"><li style="list-style-type:disc">Signed Cookies ⇒ access to multiple files (one signed cookie for many files)</li></ul></details></li></ul><ul id="06408fc8-b07c-4cc8-b1b3-32e547d1be08" class="toggle"><li><details open=""><summary>Working</summary><p id="68a48efe-2b56-47b3-93d5-313713b02ee4" class="">We have a CloudFront distribution allowed to get objects securely from S3. Clients will first authenticate or authorize through our application which will then use AWS SDK to generate signed URL from CloudFront and give it to the client to provide limited access to the content. The same concept works for signed cookie.</p><figure id="caf78322-59c6-4593-b18c-2a66a81ec454" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20206.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20206.png"/></a></figure><p id="73c7c4a6-5781-490d-a231-e223404215b8" class="">Untitled</p></details></li></ul><ul id="5a186723-bdd4-4f53-aece-b0e89a13724e" class="toggle"><li><details open=""><summary>CloudFront Signed URL vs S3 Pre-Signed URL</summary><figure id="b933b987-e49e-4dff-ba21-b1e17b82af51" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20207.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20207.png"/></a></figure><p id="97f8018f-5f9a-42c2-ab97-de29095d96f0" class="">Untitled</p></details></li></ul></details></li></ul><ul id="c8b7cf8f-9064-40c4-9c50-a9340c234d10" class="toggle"><li><details open=""><summary>Multiple Origin</summary><p id="54333c3a-6bca-432a-a4ad-e2d1aed01b72" class="">To route to different kind of origins based on the content type (based on path pattern). We can configure cache behaviors to route to different origins accordingly.</p><figure id="67fba7d7-8e3d-4e56-89f2-2cd3eaa5b54c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20208.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20208.png"/></a></figure><p id="8361f6d6-9edb-446d-adcf-1072afdad4ab" class="">Untitled</p></details></li></ul><ul id="f574e62e-306d-4cac-be68-2608bd2cd765" class="toggle"><li><details open=""><summary>Origin Groups (for HA)</summary><ul id="d4521272-1edb-42bc-86a2-7eed7eb49aea" class="bulleted-list"><li style="list-style-type:disc">To achieve high-availability and do failover</li></ul><ul id="7ed3368c-a17d-43f3-aa85-505dcab153b1" class="bulleted-list"><li style="list-style-type:disc">Origin Group consists of one primary and one secondary origin. If the primary origin fails, the second one is used.</li></ul><figure id="80578f4c-7353-4578-915e-5ba8979c0d38" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20209.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20209.png"/></a></figure><p id="2846a4a6-f715-4abd-b1d3-330dd8456160" class="">Untitled</p></details></li></ul><ul id="73631e62-11bb-4976-968b-81b40109dcef" class="toggle"><li><details open=""><summary>Field Level Encryption</summary><ul id="47ff9c2c-734c-4ac9-ade8-36959c78d40f" class="bulleted-list"><li style="list-style-type:disc">Used to protect user sensitive information through application stack</li></ul><ul id="8ae7ca3d-3f67-4cf4-b315-1bbfd595e421" class="bulleted-list"><li style="list-style-type:disc">Adds an additional layer of security along with HTTPS</li></ul><ul id="c26e8d32-0679-49de-91e1-009bb998c59b" class="bulleted-list"><li style="list-style-type:disc">Sensitive information sent by the user is encrypted at the edge close to user. This encrypted information can only be decrypted by the web server. None of the intermediate services will be able to see the encrypted info.</li></ul><ul id="831f220a-6025-4c5c-b4a3-46540421a64c" class="bulleted-list"><li style="list-style-type:disc">Uses asymmetric encryption (public &amp; private key)</li></ul><ul id="f15a61f0-a81a-40a9-9279-7a499a6a23ed" class="bulleted-list"><li style="list-style-type:disc">Usage:<ul id="3e22d9d2-ee38-4824-a226-ba69c272c0e7" class="bulleted-list"><li style="list-style-type:circle">Specify set of fields in POST requests that you want to be encrypted (up to 10 fields)</li></ul><ul id="3f612b90-d679-4774-aa98-66e6e7f223bc" class="bulleted-list"><li style="list-style-type:circle">Specify the public key to encrypt them</li></ul></li></ul><ul id="ce20e65f-8c91-4f7e-adcf-4143fc175c2d" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, the client is sending their credit card info as a sensitive field which is being encrypted at the edge location.</li></ul><figure id="aaa4b02c-e1ed-4e7f-8199-5e4a6a313dc5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20210.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20210.png"/></a></figure><p id="73f44c62-7c0b-468b-bb6d-b4904a56b3a9" class="">Untitled</p></details></li></ul></details></li></ul><ul id="5949e124-f5b4-426e-9f4f-dbf477dd19b4" class="toggle"><li><details open=""><summary>AWS Global Accelerator</summary><ul id="55c7033d-e173-4fc0-a923-e745e75eddda" class="toggle"><li><details open=""><summary>Theory</summary><ul id="b8d5fbed-bfd9-426b-9bb1-e84433195338" class="toggle"><li><details open=""><summary>AWS Problem to solve</summary><p id="12f20e4d-087a-4fac-b4a6-9349fcb3c84e" class="">You have deployed an application in a region but have global users who want to access it directly. They will have to use the public internet for this, which can add a lot of latency due to many hops and also increases the chance of lost packets. We wish to go as fast as possible through the private AWS network to minimize latency.</p><figure id="f2f0c0ab-e360-4f38-acd1-9aab72af401b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20211.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20211.png"/></a></figure></details></li></ul><ul id="ca14391b-5dae-4305-afd5-ac110227ea9d" class="toggle"><li><details open=""><summary>Unicast vs Anycast IP</summary><p id="539bc899-3f1a-4148-87ad-05ced01fa77c" class="">Unicast IP: one server holds one IP address</p><p id="91fb3a1d-dff2-4528-afa3-e46e1a5ac849" class="">Anycast IP: all servers hold the same IP address and the client is routed to the nearest one</p></details></li></ul><ul id="ed9b7a17-2080-41f7-8da9-0acc31d6d60f" class="toggle"><li><details open=""><summary>AWS Global Accelerator</summary><figure id="2c2da0bd-414f-4763-bccd-e476064fe421" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20212.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20212.png"/></a></figure><p id="74492169-2c9a-4c6c-b431-3c422490efbb" class="">AWS Global Accelerator is a service that improves the availability and performance of your applications with local or global users. It provides static IP addresses that act as a fixed entry point to your application endpoints in a single or multiple AWS Regions, such as your Application Load Balancers, Network Load Balancers or Amazon EC2 instances. Global Accelerator is a good fit for non-HTTP use cases, such as gaming (UDP), IoT (MQTT), or Voice over IP, as well as for HTTP use cases that specifically require static IP addresses or deterministic, fast regional failover.</p><ul id="1ac0b118-0bda-47aa-9f08-6c5a20a62919" class="bulleted-list"><li style="list-style-type:disc">Used to leverage the AWS internal network to route to your application</li></ul><ul id="0b11a085-221a-4bc4-90f2-a9a82503b89b" class="bulleted-list"><li style="list-style-type:disc">2 anycast public IPs (static) are created for your application globally. Requests from clients hitting these IPs will automatically be routed to the nearest edge location. The Edge locations send the traffic to your application through the private AWS network. The application could be distributed in multiple regions (global).</li></ul><ul id="d8230131-c084-4eef-ad07-95bc17904f0a" class="bulleted-list"><li style="list-style-type:disc">No caching is done by Global Accelerator, it only makes our application globally available.</li></ul><ul id="f092bdc3-81f0-402a-b0c9-12633d123c94" class="bulleted-list"><li style="list-style-type:disc">Works with Elastic IP, EC2 instances, ALB, NLB and can be public or private</li></ul><ul id="d8d73c52-458e-4b39-84ce-054485dee916" class="bulleted-list"><li style="list-style-type:disc">Consistent Performance<ul id="dd31e98c-dc3c-40d3-955e-91dabcd3bbc8" class="bulleted-list"><li style="list-style-type:circle">Intelligent routing to lowest latency edge location and fast regional failover</li></ul><ul id="4bab2329-4f18-4356-b852-37cbc31eb6e4" class="bulleted-list"><li style="list-style-type:circle">Client doesn’t cache anything because the 2 anycast IPs are static</li></ul><ul id="c5cdbc0e-c0f8-4821-b247-06af298fe31f" class="bulleted-list"><li style="list-style-type:circle">Internal AWS network</li></ul></li></ul><ul id="c2ed2745-64d6-49ee-9cea-845188f8b281" class="bulleted-list"><li style="list-style-type:disc">Health Checks<ul id="b39298f9-402b-4a41-8ea6-9ca2e01cd7f4" class="bulleted-list"><li style="list-style-type:circle">Global Accelerator performs a health check of your applications</li></ul><ul id="46bd6356-c9b6-4c4a-b3a8-db473f585ad4" class="bulleted-list"><li style="list-style-type:circle">Helps make your application global (failover less than 1 minute for unhealthy endpoints)</li></ul><ul id="8387a40a-c081-4eea-b96e-ac77f384c3db" class="bulleted-list"><li style="list-style-type:circle">Great for disaster recovery (thanks to the health checks)</li></ul></li></ul><ul id="18451f48-84af-49e2-acd1-a492bce8e1b8" class="bulleted-list"><li style="list-style-type:disc">Security<ul id="0b875737-2ee0-4094-87c2-9a16c24b1369" class="bulleted-list"><li style="list-style-type:circle">only 2 external IP need to be whitelisted</li></ul><ul id="2cc90a49-123a-4ed1-bdc3-06e5c3d95b0d" class="bulleted-list"><li style="list-style-type:circle">DDoS protection is built into the Global Accelerator using AWS Shield</li></ul></li></ul></details></li></ul></details></li></ul><ul id="cbe5fe27-6de0-4acb-bf4d-e2f3ccbed37a" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="06f070c9-a1c2-4559-8f9c-ec0d7536f074" class="toggle"><li><details open=""><summary>Create two EC2 instance in different regions</summary><p id="30b06d33-b072-4e74-be04-d3fca7c71380" class="">User data:</p><pre id="1e5b2bb3-030c-4580-a93d-f431e9fffdf7" class="code code-wrap"><code>#!/bin/bashyum update -yyum install -y httpdsystemctl start httpdsystemctl enable httpdEC2_AVAIL_ZONE=$(curl -s http://169.254.169.254/latest/meta-data/placement/availability-zone)echo &quot;&lt;h1&gt;Hello World from $(hostname -f) in AZ $EC2_AVAIL_ZONE &lt;/h1&gt;&quot; &gt; /var/www/html/index.html</code></pre></details></li></ul><ul id="c07c76f0-833f-4da5-aead-88c4cfd72177" class="toggle"><li><details open=""><summary>Create an accelerator</summary><ul id="c4d1f16b-5c5e-4748-a261-c255b037be99" class="bulleted-list"><li style="list-style-type:disc">Listeners<p id="5a7fdd25-a98f-43c4-8357-45f9d4843f01" class="">Choose port 80 on TCP for HTTP</p><p id="2f67d3e9-5cde-4efb-9bb0-f9199708ea55" class="">Client affinity is the stickiness</p><figure id="77d6dfc7-24c6-425f-8526-396d6e3347a5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20213.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20213.png"/></a></figure><p id="9642e0ef-72d1-4b1d-860d-6aebff07bbe7" class="">Untitled</p></li></ul><ul id="55b5b501-cd3d-4ba7-bf3a-cbc755ef7154" class="bulleted-list"><li style="list-style-type:disc">Endpoint groups<p id="a84ce97e-77d5-426b-9bf3-f34c5151f8a0" class="">Endpoints are grouped into regions</p><p id="d2e92ae6-1d83-4331-b672-b9dd1d36de94" class="">Traffic dial is the percentage of traffic to be sent to that endpoint group.</p><figure id="596fc091-361f-42d6-b5e8-731a1f817e53" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20214.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20214.png"/></a></figure><p id="df75f552-b0a0-4c2d-ade6-9e3f1383c4ec" class="">Untitled</p></li></ul><ul id="98dee3bb-b982-462c-9d09-6fcb7d6c1e6c" class="bulleted-list"><li style="list-style-type:disc">Endpoints<p id="3bfac6c9-304a-4d19-ac41-2e9c7515c5fd" class="">Add endpoints under each endpoint group</p><figure id="e7f9fbe9-0415-4a2b-821d-db565f1a1029" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20215.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20215.png"/></a></figure><p id="9c5b0a38-9f7e-4c19-86a6-ff3f5b5933e1" class="">Untitled</p></li></ul></details></li></ul><p id="3bc1eea7-1ae6-4eda-84ef-aba23e217c82" class="">Once the accelerator is created, we will get 2 static IPs and a DNS name that we can use to hit the EC2 instances. If one of the instances is down, GlobalAccelerator will automatically switch to the other one using health checks.</p><figure id="f079d0f0-4bb2-4c13-8414-997b688d9bc6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20216.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20216.png"/></a></figure><p id="2928d0f7-d062-4e2a-9e65-beaa69edcc7a" class="">Untitled</p></details></li></ul></details></li></ul><ul id="bfe06a07-249e-4c18-82e1-a3035f16b99c" class="toggle"><li><details open=""><summary>Global Accelerator vs CloudFront</summary><p id="ea9bd14f-a0ea-4bca-be41-d836e251d725" class="">Similarities:</p><ul id="78afa0be-b842-4470-9429-d26aa8c10915" class="bulleted-list"><li style="list-style-type:disc">They both use the AWS global network and its edge locations around the world</li></ul><ul id="54decf41-56fd-48e2-abd3-da2d5e8fd01f" class="bulleted-list"><li style="list-style-type:disc">Both services integrate with AWS Shield for DDoS protection.</li></ul><p id="b661940d-ae25-451c-bdc9-d2c8b5c330bc" class="">CloudFront</p><ul id="8eb07fda-79b4-46fb-8944-7cc905134944" class="bulleted-list"><li style="list-style-type:disc">Improves performance for both cacheable content (such as images and videos) and dynamic content (such as API acceleration and dynamic site delivery)</li></ul><ul id="edc07a21-77b0-46d9-904f-76bd5e618cda" class="bulleted-list"><li style="list-style-type:disc">Content is served at the edge location once it is cached</li></ul><p id="48d71666-01ca-4beb-a1ac-4329d0bb9665" class="">Global Accelerator</p><ul id="9b5eead0-d33c-43d2-bfdf-84ac334f412a" class="bulleted-list"><li style="list-style-type:disc">Improves performance for a wide range of applications over TCP or UDP</li></ul><ul id="77274445-08d9-4510-9e16-464c99a7bd87" class="bulleted-list"><li style="list-style-type:disc">Proxying packets at the edge location to applications running in one or more AWS Regions. So, the packets still make up to the final application and they are served from the application as well. They are not cached at the edge location.</li></ul><ul id="b3235ea1-6078-4a86-ba3c-b74f5a541fe1" class="bulleted-list"><li style="list-style-type:disc">Good fit for non-HTTP use cases, such as gaming (UDP), loT (MQTT), or Voice over IP</li></ul><ul id="7c7ed492-6f4b-4fee-b253-644088f1c14f" class="bulleted-list"><li style="list-style-type:disc">Good for HTTP use cases that require static IP addresses</li></ul><ul id="abb2ff08-e8e2-4f3e-ae5b-d58461a21211" class="bulleted-list"><li style="list-style-type:disc">Good for HTTP use cases that required deterministic, fast regional failover</li></ul></details></li></ul></div><h3 id="442f8f78-517e-4932-ae42-1cd61f5af01e" class=""><details open=""><summary>Section 17: AWS Storage Extras</summary></details></h3><div class="indented"><ul id="78fac537-fb96-4b0f-86ff-79e906de8d87" class="toggle"><li><details open=""><summary>AWS Snow Family</summary><ul id="09f63099-d81b-457a-b6f2-64d011c1f690" class="toggle"><li><details open=""><summary>Theory</summary><ul id="e3e642de-225c-468a-b143-890bf1e4b424" class="bulleted-list"><li style="list-style-type:disc">Highly-secure &amp; portable devices for:<ul id="ef2b4c8e-cc63-45c3-8b58-d9500661a0df" class="toggle"><li><details open=""><summary>Data Migration (migrate data into and out of AWS) - Snowcone, Snowmobile, Snowball Edge</summary><ul id="c9782698-b608-406e-ab25-04a2c457fb65" class="toggle"><li><details open=""><summary>Challenges in data migration:</summary><ul id="bb13a57a-9a27-42f2-99de-337b0137ee71" class="bulleted-list"><li style="list-style-type:disc">Limited connectivity &amp; bandwidth</li></ul><ul id="ee6cdde7-7eae-4075-b93c-4c4f885e11ca" class="bulleted-list"><li style="list-style-type:disc">High network cost</li></ul><ul id="91ff05fd-ac29-49f7-ae8a-e6f90a030b92" class="bulleted-list"><li style="list-style-type:disc">Shared bandwidth (can’t max out the network)</li></ul><ul id="fa934820-455a-4ae7-b63a-c8fbd3c65f2e" class="bulleted-list"><li style="list-style-type:disc">Connection instability</li></ul><figure id="f788b0ee-af59-443d-8c6f-335708b11351" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20217.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20217.png"/></a></figure></details></li></ul><ul id="189461d9-7578-4b9f-821f-02e0dd06e4fa" class="toggle"><li><details open=""><summary>Snow family vs Direct migration to S3</summary><p id="32412f17-be24-45e5-8972-9ffe03e9a332" class="">AWS Snow Family contains offline devices to perform data migrations. AWS sends an actual physical device through post on which we upload the data locally. We then have to ship the device back to AWS. They will plug the device in their infrastructure and upload the data to the cloud at a much faster rate.</p><figure id="2458df68-13ee-41e9-b042-ca946faad60b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20218.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20218.png"/></a></figure></details></li></ul><ul id="27017bec-49dd-47db-bf9a-4b2c332a7ed6" class="toggle"><li><details open=""><summary>Snow family devices for Data Migration</summary><figure id="0bbd4f42-27ef-4b29-a510-c802de4f597b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20219.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20219.png"/></a></figure></details></li></ul><ul id="3cdc584a-a300-4530-a322-18d081993973" class="toggle"><li><details open=""><summary>Usage process</summary><ol type="1" id="1a9ec28f-75fd-4dbd-a779-87f2d2b4dce2" class="numbered-list" start="1"><li>Request Snowball devices from the AWS console for delivery</li></ol><ol type="1" id="51cd61b5-0668-403f-8f11-e868c3ad7f92" class="numbered-list" start="2"><li>Install the snowball client / AWS OpsHub on your servers</li></ol><ol type="1" id="bc4f9e03-a9e9-4c63-ae92-c8c6974c3908" class="numbered-list" start="3"><li>Connect the snowball to your servers and copy files using the client</li></ol><ol type="1" id="92948bd3-be98-4bd6-97dd-c25f7aa14fff" class="numbered-list" start="4"><li>Ship back the device when you’re done (goes to the right AWS facility)</li></ol><ol type="1" id="9fdb9bd5-620f-4e7f-b0f2-e701c5939418" class="numbered-list" start="5"><li>Data will be loaded into an S3 bucket</li></ol><ol type="1" id="92da42dd-75d5-44ce-8c1b-31a1a28a58a8" class="numbered-list" start="6"><li>Snowball is completely wiped</li></ol></details></li></ul><p id="9285df5f-89a5-4f65-8c5f-4cfc66b56fde" class="block-color-yellow">💡 Rule of thumb: If it takes more than a week to transfer over the network, use Snowball devices</p></details></li></ul><ul id="f90f6fc4-0ef0-419d-98a8-a39ea589b67a" class="toggle"><li><details open=""><summary>Edge Computing (collect and process data at the edge) - Snowcone, Snowmobile</summary><ul id="21f72c88-1440-4385-a929-4b3875a2ede8" class="toggle"><li><details open=""><summary>What is edge computing</summary><ul id="bb38d796-3bb6-48a3-9b5c-d552a1399ada" class="bulleted-list"><li style="list-style-type:disc">Process data while it’s being created on an edge location. Edge location could be anything that doesn’t have internet or access to cloud (ex: a truck on the road, a ship on the sea, a mining station underground).</li></ul><ul id="d0a496ba-c43c-4136-8fc7-cb5e62e1c018" class="bulleted-list"><li style="list-style-type:disc">These locations may have<ul id="219f84f2-433b-4376-aee8-00ecca1be6a1" class="bulleted-list"><li style="list-style-type:circle">Limited / no internet access</li></ul><ul id="56a05bc4-6046-4600-a2fa-d936fbe9a5ed" class="bulleted-list"><li style="list-style-type:circle">Limited / no easy access to computing power</li></ul></li></ul><ul id="6b314700-8345-4977-b9e8-c27a1fa69032" class="bulleted-list"><li style="list-style-type:disc">We setup a Snowball Edge / Snowcone device to do edge computing</li></ul><ul id="6f0b8076-ab4f-4913-a8bd-47712d3afe55" class="bulleted-list"><li style="list-style-type:disc">Use cases of Edge Computing:<ul id="824c87b5-1bf6-45c9-a9fd-9a6e3c13c9d7" class="bulleted-list"><li style="list-style-type:circle">Preprocess data</li></ul><ul id="d65ea733-719e-4ff3-bb93-6799434e0096" class="bulleted-list"><li style="list-style-type:circle">Machine learning at the edge</li></ul><ul id="b791b7d0-4f59-4f83-9451-e6579b6c9355" class="bulleted-list"><li style="list-style-type:circle">Transcoding media streams</li></ul></li></ul><ul id="09fcac06-c0c0-4b79-b9b1-7422f183e151" class="bulleted-list"><li style="list-style-type:disc">Eventually (if need be) we can ship back the device to AWS (for transferring processed data to the cloud)</li></ul></details></li></ul><ul id="0e86b8e5-4ab6-491e-857c-66b27c9e1626" class="toggle"><li><details open=""><summary>Snow family devices for Edge Computing</summary><ul id="6bab57ba-538d-4d1b-aab9-058933b5f432" class="bulleted-list"><li style="list-style-type:disc">Snowcone (smaller)<ul id="f09d5ef7-ea0b-47fd-93f2-a34f56045976" class="bulleted-list"><li style="list-style-type:circle">2 CPUs, 4 GB of memory, wired or wireless access</li></ul><ul id="3c7b58d5-2c77-46ad-8a32-7ae4df81d735" class="bulleted-list"><li style="list-style-type:circle">USB-C power using a cord or the optional battery</li></ul></li></ul><ul id="31beeb34-9aff-4e60-86eb-03fcfed68ec2" class="bulleted-list"><li style="list-style-type:disc">Snowball Edge - Compute Optimized<ul id="d43f92f3-7c93-4440-b084-e78d00b2aee6" class="bulleted-list"><li style="list-style-type:circle">52 vCPUs, 208 GiB of RAM</li></ul><ul id="ae72e036-b140-4895-b375-a59102d3f1a5" class="bulleted-list"><li style="list-style-type:circle">Optional GPU (useful for video processing or machine learning)</li></ul><ul id="76e507b0-bfcf-4408-8764-4b5902be5094" class="bulleted-list"><li style="list-style-type:circle">42 TB usable storage</li></ul></li></ul><ul id="f483064a-2b02-4bd4-9f5f-ee9b0e2b4ea1" class="bulleted-list"><li style="list-style-type:disc">Snowball Edge - Storage Optimized<ul id="9e923405-0c43-43be-b8e4-6e25c42593ee" class="bulleted-list"><li style="list-style-type:circle">Up to 40 CPUs, 80 GiB of RAM</li></ul><ul id="a5df69ea-5670-41ec-bdf1-85e210da87d9" class="bulleted-list"><li style="list-style-type:circle">Object storage clustering available</li></ul></li></ul><p id="63b98391-9094-4807-9f38-2f754c52f782" class="">💡 All the above can run EC2 Instances &amp; AWS Lambda functions locally (using AWS loT Greengrass) Long-term deployment options for reduced cost: 1 and 3 years discounted pricing</p></details></li></ul></details></li></ul></li></ul><ul id="d8544a76-6c42-4dad-99fe-4f1065b5c10a" class="bulleted-list"><li style="list-style-type:disc">Snow family contains 3 devices:<ul id="00c0da9c-7586-467c-925b-a8a2e898a04f" class="toggle"><li><details open=""><summary>Snowball Edge</summary><ul id="e0fabcad-3a71-4de8-9a0f-85d7a2307f74" class="bulleted-list"><li style="list-style-type:disc">Physical data transport solution: move TBs or PBs of data in or out of AWS</li></ul><ul id="f65edd38-3f63-4cab-88b6-907457703baf" class="bulleted-list"><li style="list-style-type:disc">Alternative to moving data over the network (and paying network fees)</li></ul><ul id="a01e9aae-0c14-4e03-af91-4fa517431b8c" class="bulleted-list"><li style="list-style-type:disc">Pay per data transfer job</li></ul><ul id="f8c41a1c-dc64-468a-930b-d2b43866fdc4" class="bulleted-list"><li style="list-style-type:disc">Provides block storage and Amazon S3-compatible object storage</li></ul><ul id="eb3f45e0-25f6-4191-874d-c1d8ef533172" class="bulleted-list"><li style="list-style-type:disc">Two flavors of Snowball Edge<ul id="c92acc96-f423-4f49-92c8-bef0278e8beb" class="bulleted-list"><li style="list-style-type:circle">Snowball Edge Storage Optimized: 80 TB of HDD capacity for block volume and S3 compatible object storage</li></ul><ul id="5f6a0844-6c9d-43aa-8fab-cfdb5440f796" class="bulleted-list"><li style="list-style-type:circle">Snowball Edge Compute Optimized: 42 TB of HDD capacity for block volume and S3 compatible object storage</li></ul></li></ul><ul id="940999b9-e16e-4371-a382-c13354aea607" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="9168534e-6d8c-4c97-978b-425a76adf22e" class="bulleted-list"><li style="list-style-type:circle">Data cloud migrations</li></ul><ul id="416ececf-e897-48af-b806-8e7733bcf4c2" class="bulleted-list"><li style="list-style-type:circle">Data center decommissioning</li></ul><ul id="b9cbd070-2d58-4428-b83e-e8e94f221967" class="bulleted-list"><li style="list-style-type:circle">Disaster recovery by backing up the data</li></ul></li></ul><figure id="8caf78b2-2af9-4417-9b6e-f13f1deaab66" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20220.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20220.png"/></a></figure></details></li></ul><ul id="012b699a-8963-4518-95de-3122d42067e8" class="toggle"><li><details open=""><summary>Snowcone</summary><ul id="ce2f9241-8ada-471d-a7b4-68b73de9bce6" class="bulleted-list"><li style="list-style-type:disc">Small, portable, rugged &amp; secure device used for edge computing, storage, and data transfer</li></ul><ul id="77df29fb-7566-403b-93b4-fb812e669e8f" class="bulleted-list"><li style="list-style-type:disc">Light (4.5 pounds, 2.1 kg)</li></ul><ul id="be75273f-744b-41a6-9732-e28e0254b0a7" class="bulleted-list"><li style="list-style-type:disc">8 TBs of usable storage</li></ul><ul id="0569a8e4-51ba-42da-839c-9b65191aafe5" class="bulleted-list"><li style="list-style-type:disc">Use Snowcone where Snowball does not fit (space-constrained environment)</li></ul><ul id="cbc52d9c-3f8e-40b2-ad69-82469d4be7d1" class="bulleted-list"><li style="list-style-type:disc">Must provide your own battery / cables</li></ul><ul id="feada813-af03-41d1-997a-fec9d20e5ced" class="bulleted-list"><li style="list-style-type:disc">Can be sent back to AWS offline, or connect it to internet and use AWS DataSync to send data</li></ul><figure id="b16aaeb3-0285-48ec-bbd5-4575960eed5b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20221.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20221.png"/></a></figure></details></li></ul><ul id="2c0e2512-b25c-4d34-99d5-109304862a26" class="toggle"><li><details open=""><summary>Snowmobile</summary><ul id="99127c4a-5c32-44d5-b118-338cfe11f1f0" class="bulleted-list"><li style="list-style-type:disc">Transfer exabytes of data (1 EB = 1,000 PB = 1,000,000 TB)</li></ul><ul id="c33ebcb7-980d-4912-b905-1a98d2c71c41" class="bulleted-list"><li style="list-style-type:disc">Each Snowmobile has 100 PB of capacity (use multiple in parallel if need more)</li></ul><ul id="55a7ce9a-b487-464f-8396-b7f0617ec092" class="bulleted-list"><li style="list-style-type:disc">High security: temperature controlled, GPS, 24/7 video surveillance</li></ul><ul id="1c2233fd-ea2b-4261-8a78-06d84379abd7" class="bulleted-list"><li style="list-style-type:disc">Better than Snowball if you transfer more than 10 PB</li></ul><figure id="0087ca93-7d13-4965-8028-a6030bacf9a3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20222.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20222.png"/></a></figure></details></li></ul></li></ul></details></li></ul><ul id="4204fb91-8dc6-4249-82a6-2cb2dd070086" class="toggle"><li><details open=""><summary>OpsHub</summary><ul id="32978774-a001-45ec-8b6c-ad005e239ae5" class="bulleted-list"><li style="list-style-type:disc">Historically, to use Snow Family devices, you needed a CLI (hard to use for end users)</li></ul><ul id="b5509b7a-f162-4459-8cf1-b22c869b12b9" class="bulleted-list"><li style="list-style-type:disc">Today, you can use AWS OpsHub (a software you install on your computer / laptop) to manage your Snow Family Devices<ul id="cd24f1c3-69db-44db-bab2-2601b19a5a51" class="bulleted-list"><li style="list-style-type:circle">Unlocking and configuring single or clustered devices</li></ul><ul id="36be230c-1a92-408f-9236-68bf5722fd7e" class="bulleted-list"><li style="list-style-type:circle">Transferring files</li></ul><ul id="daecf721-d1a3-4982-962c-921738f019a9" class="bulleted-list"><li style="list-style-type:circle">Launching and managing instances running on Snow Family Devices</li></ul><ul id="34007eb2-e5a5-4b3a-a101-941457d99e23" class="bulleted-list"><li style="list-style-type:circle">Monitor device metrics (storage capacity, active instances on your device)</li></ul><ul id="0ba61c06-f2d2-4488-97e7-0ea70b70cfc1" class="bulleted-list"><li style="list-style-type:circle">Launch compatible AWS services on your devices (ex: Amazon EC2 instances, AWS DataSync, Network File System (NFS)</li></ul><figure id="a06d71dd-a66a-44ab-9714-3409b6afdb48" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20223.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20223.png"/></a></figure></li></ul></details></li></ul><ul id="661cca47-87b8-4657-8bdf-2fd407c4c3c2" class="toggle"><li><details open=""><summary>Hands on</summary><p id="535911ca-01cb-4f81-85be-33bda36871bf" class="">Snow Family → Request a device</p></details></li></ul><ul id="606c567e-e3b1-41a6-a124-28e03191f159" class="toggle"><li><details open=""><summary>Snowball into Galcier</summary><ul id="5a4c2873-6fdc-4add-9740-14d7c685d279" class="bulleted-list"><li style="list-style-type:disc">Snowball cannot import to Glacier directly</li></ul><ul id="c25ab7af-e700-4d6e-becf-eb60fc15ba15" class="bulleted-list"><li style="list-style-type:disc">You must use Amazon S3 first, in combination with an S3 lifecycle policy to transitions the data into Glacier</li></ul><figure id="9e06a97a-6c94-4d78-9b6b-d6484e8c442b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20224.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20224.png"/></a></figure><p id="15d7d8f1-64aa-4d83-8cb2-1e9c170e495c" class="">Untitled</p></details></li></ul></details></li></ul><ul id="be5bb4c3-25e4-4f84-94cf-822f9c68b99e" class="toggle"><li><details open=""><summary>Amazon FSx</summary><ul id="b2efd0f4-0c21-4cf5-9cfc-742e948e8b10" class="toggle"><li><details open=""><summary>Intro</summary><ul id="775cd945-fecc-4d47-98c9-73056132ce80" class="bulleted-list"><li style="list-style-type:disc">It’s a fully-managed AWS service that allows us to launch 3rd party high-performance file systems on AWS.</li></ul><ul id="b0949be0-ae12-4a22-88c2-c0496f2bb6ba" class="bulleted-list"><li style="list-style-type:disc">Useful when we don’t want to use an AWS managed file system like S3.</li></ul><figure id="9db79786-b6ed-4b95-a81a-1bae9604cfa8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(437).png"><img style="width:816px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(437).png"/></a></figure><figure id="ef792b64-eb75-4fc7-91d2-a0c5e8800ded" class="image"><a href="https://www.notion.so"><img src="https://www.notion.so"/></a></figure></details></li></ul><ul id="a223cdac-e559-4809-8e06-0c8c59895efa" class="toggle"><li><details open=""><summary>FSx for Windows (shared file system for windows)</summary><ul id="8fff7d9f-8756-4157-814a-5b261b4e3ac9" class="bulleted-list"><li style="list-style-type:disc">EFS is a shared POSIX system for Linux systems which allows us to create shared file systems on linux. But, we can’t use it for creating shared file system in windows.</li></ul><ul id="f950c7bc-9be6-469d-bc17-e2db50238165" class="bulleted-list"><li style="list-style-type:disc">FSx for Windows is a fully managed Windows file system share drive</li></ul><ul id="1e8120d1-a964-4885-87b7-e736aebc3129" class="bulleted-list"><li style="list-style-type:disc">Supports SMB protocol, Windows NTFS, Microsoft Active Directory integration, ACLs, user quotas</li></ul><ul id="3b57b118-9f55-40e4-8094-b62a6b75b3b6" class="bulleted-list"><li style="list-style-type:disc">can be mounted on Linux EC2 instances</li></ul><ul id="818fd33b-f091-4e74-9ef5-aed7b887a96c" class="bulleted-list"><li style="list-style-type:disc">Support Microsoft Distributed File System (DFS) Namespaces (group files across multiple FS)</li></ul><ul id="589f2b8c-21b7-4f43-bfc6-38a42dbec9f1" class="bulleted-list"><li style="list-style-type:disc">Built on SSD &amp; HDD, scale up to 10s of GB/s, millions of IOPS, 100s PB of data</li></ul><ul id="1cf3318c-a415-4fc1-a4b4-441fcd91f016" class="bulleted-list"><li style="list-style-type:disc">SSD - Latency sensitive workloads (database, media processing, data analytics, …..)</li></ul><ul id="8abba70b-441d-47b7-9c27-02f44293a1ec" class="bulleted-list"><li style="list-style-type:disc">HDD - Broad spectrum of workloads (home directory, CMS,…..)</li></ul><ul id="ead6d4ad-2190-4204-8447-46fec65f069d" class="bulleted-list"><li style="list-style-type:disc">Can be accessed from your on-premise infrastructure</li></ul><ul id="d32f4064-01bd-4808-a476-9f19fccef02d" class="bulleted-list"><li style="list-style-type:disc">Can be configured to be Multi-AZ (high availability)</li></ul><ul id="07ff8792-798c-48db-9918-696ed011e0ec" class="bulleted-list"><li style="list-style-type:disc">Data is backed-up daily to S3</li></ul></details></li></ul><ul id="ae425783-b314-40cc-b26f-c8bee043d3b3" class="toggle"><li><details open=""><summary>FSx for Lustre (shared file system for linux distributed computing and HPC)</summary><ul id="7582336c-91ec-4831-8b11-9353a7bfb3c1" class="bulleted-list"><li style="list-style-type:disc">Lustre is a type of parallel distributed file system, for large-scale computing. The name Lustre is derived from “Linux” and “cluster”.</li></ul><ul id="fbb12ff9-9e18-4ae1-bc42-c11bff295364" class="bulleted-list"><li style="list-style-type:disc"><strong>Used for Machine Learning, High Performance Computing (HPC) tasks like Video Processing, Financial Modeling, Electronic Design Automation</strong></li></ul><ul id="b775790f-0b74-4246-8273-791453443048" class="bulleted-list"><li style="list-style-type:disc">Scales up to 100s GB/s, millions of IOPS, sub-ms latencies</li></ul><ul id="f4ce573f-cc46-468f-afc1-40cb93a849ee" class="bulleted-list"><li style="list-style-type:disc">SSD - low latency, IOPS, intensive workloads, small and random file operations</li></ul><ul id="65fdb778-c3fa-4b48-9b0d-97c8c3ec5e06" class="bulleted-list"><li style="list-style-type:disc">HDD - throughput-intensive workloads, large &amp; sequential file operations</li></ul><ul id="f73fb8cc-4344-4e05-8a3c-bcfa805097a2" class="bulleted-list"><li style="list-style-type:disc">Seamless integration with S3<ul id="dfd0fc65-8d62-4318-b82b-c1d60805645d" class="bulleted-list"><li style="list-style-type:circle">Can read S3 buckets as a file system (through FSx)</li></ul><ul id="2f64282c-9d3a-4116-b79b-1fbbd9aba5d4" class="bulleted-list"><li style="list-style-type:circle"><strong>Can write the output of the computations back to S3 (through FSx)</strong></li></ul></li></ul><ul id="eeffd5fb-299b-45dc-862c-7e4620fdd123" class="bulleted-list"><li style="list-style-type:disc">Can be used from on-premise servers</li></ul></details></li></ul><ul id="137c3cf2-3920-4d7f-9d72-034e36a5b1bc" class="toggle"><li><details open=""><summary>FSx Deployment Options</summary><ul id="06f75bb7-e75a-46f8-ab8b-b984dd36be4d" class="toggle"><li><details open=""><summary>Scratch File System</summary><ul id="7e834a31-8af0-4693-b144-4db58435edfe" class="bulleted-list"><li style="list-style-type:disc">Temporary storage</li></ul><ul id="64183f4e-06b8-470d-91e3-c5417ff7bd6d" class="bulleted-list"><li style="list-style-type:disc">Data is not replicated (data is lost if the file server fails)</li></ul><ul id="44836aa4-c752-4822-9039-54bfa320e2af" class="bulleted-list"><li style="list-style-type:disc">High burst (6x faster than persistent file system, 200MBps per TiB throughput)</li></ul><ul id="4dd3fd99-a427-4daa-954b-cc46031da4ac" class="bulleted-list"><li style="list-style-type:disc">Usage: short-term processing, optimize costs</li></ul><figure id="8614dbb3-41d0-4e1c-bc91-6fbeaaff6bf9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20225.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20225.png"/></a></figure></details></li></ul><ul id="5d20fb2c-d7d8-480f-b8a9-4c2139ff8507" class="toggle"><li><details open=""><summary>Persistent File System</summary><ul id="150465da-3f32-41af-b78e-6e733bd822dd" class="bulleted-list"><li style="list-style-type:disc">Long-term storage</li></ul><ul id="b600f3ff-331c-4c10-8206-50623a92bb47" class="bulleted-list"><li style="list-style-type:disc">Data is replicated within same AZ (multiple copies)</li></ul><ul id="8f80b650-2d35-42a7-8e69-25ac9b14135b" class="bulleted-list"><li style="list-style-type:disc">Failed files are replaced within minutes</li></ul><ul id="7872d307-469f-4106-b47e-26799199ae25" class="bulleted-list"><li style="list-style-type:disc">Usage: long-term processing, sensitive data</li></ul><figure id="b0a8d2cf-2bcf-4318-a224-739666a2413e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20226.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20226.png"/></a></figure><p id="1efd2705-f68e-43d0-9856-c2a9b78cbf09" class="">Untitled</p></details></li></ul></details></li></ul><ul id="f8bf29c3-3f6d-4c27-92ff-ffb0902fe633" class="toggle"><li><details open=""><summary>FSx for NetApp ONTAP</summary><figure id="97a03cf3-036c-4ff4-b63c-963ddf5545b2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(438).png"><img style="width:1763px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(438).png"/></a></figure></details></li></ul><ul id="3e8c0723-2b77-44a3-a77b-1cfb45c716d7" class="toggle"><li><details open=""><summary>FSx for OpenZFS</summary><figure id="1f710f75-7f23-4526-87ac-5b072becd4d3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(439).png"><img style="width:1760px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(439).png"/></a></figure></details></li></ul><ul id="6f1195b4-8dbe-49f5-b71c-6225133e9159" class="toggle"><li><details open=""><summary>Hands on</summary><p id="0a2e6ced-b1a7-4afc-803e-48febac4faa1" class="">FSx → Create file system</p></details></li></ul></details></li></ul><ul id="bfa2a623-ebb4-43a2-8477-d5a073017eb2" class="toggle"><li><details open=""><summary>AWS Storage Gateway</summary><ul id="82508acd-005e-4c4b-8cd7-8e2b72636655" class="toggle"><li><details open=""><summary>Hybrid Cloud</summary><ul id="4f3caaac-4f81-47aa-9994-6da494757345" class="bulleted-list"><li style="list-style-type:disc">AWS is pushing for <strong>hybrid cloud</strong> (part of your infrastructure is on the cloud and the rest is on-premises)</li></ul><ul id="fec52f16-4b2d-416f-9b98-6cbe19e9f8bb" class="bulleted-list"><li style="list-style-type:disc">This can be due to<ul id="7726310a-1af3-4090-a647-9fa98c8200d9" class="bulleted-list"><li style="list-style-type:circle">Long cloud migrations</li></ul><ul id="f7cef19e-7aab-42c1-935a-023cd74cac90" class="bulleted-list"><li style="list-style-type:circle">Security requirements</li></ul><ul id="fb8261f1-c0ec-4c4b-889c-6e2946b81d8c" class="bulleted-list"><li style="list-style-type:circle">Compliance requirements</li></ul><ul id="1d53ac7a-0613-4b32-ae30-b20c8ff5906d" class="bulleted-list"><li style="list-style-type:circle">IT strategy</li></ul></li></ul><ul id="c0717a0b-6b26-42b3-b3d8-7eead57e2033" class="bulleted-list"><li style="list-style-type:disc">Ex: S3 is a proprietary storage technology (unlike EFS / NFS), so to expose S3 data on-premises, we need AWS storage gateway.</li></ul></details></li></ul><ul id="7665a98e-b67c-4199-8622-d10f2233979f" class="toggle"><li><details open=""><summary>AWS Cloud Storage Native Options</summary><ul id="ebb35e0b-4a7b-4dac-9c2d-d885e8ac73d6" class="toggle"><li><details open=""><summary>Block Level</summary><figure id="8b9b9c40-ea56-46a2-8528-68c34b3851de" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20227.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20227.png"/></a></figure></details></li></ul><ul id="7148e07c-fb81-4099-aa20-da0b2da7719e" class="toggle"><li><details open=""><summary>File Level</summary><figure id="577e15a8-671c-4b54-8af6-0fed4c1d5b71" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20228.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20228.png"/></a></figure></details></li></ul><ul id="4cf84916-54aa-4f34-a49a-5d7cf8088c78" class="toggle"><li><details open=""><summary>Object Level</summary><figure id="b31101a0-049c-469c-87c5-5b733b2dafa9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20229.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20229.png"/></a></figure></details></li></ul></details></li></ul><ul id="c1bb8578-2e6a-43f0-b0e0-de7ec774c4f6" class="toggle"><li><details open=""><summary>AWS Storage Gateway</summary><ul id="cf556fc7-7011-4bcd-8b22-875e4be4e8c9" class="toggle"><li><details open=""><summary>Theory</summary><ul id="42fe7e58-371d-489a-aa4b-f99af910b8a4" class="bulleted-list"><li style="list-style-type:disc">Bridge between on-premises data and cloud data in S3</li></ul><ul id="5e6d121d-ed9f-4efc-845e-213fc9f57e6d" class="bulleted-list"><li style="list-style-type:disc">Use cases: disaster recovery, backup &amp; restore, tiered storage</li></ul><ul id="3c197f62-17f8-4a62-9c4f-09d5bee32278" class="bulleted-list"><li style="list-style-type:disc">4 types of Storage Gateway:<ul id="423f840c-e7d6-439b-bd66-32b08eb04464" class="toggle"><li><details open=""><summary>S3 File Gateway</summary><ul id="5ae65ff2-a35f-498b-985f-9a80a6907701" class="bulleted-list"><li style="list-style-type:disc">Configured S3 buckets are accessible using the NFS and SMB protocol</li></ul><ul id="c52202a3-210b-42cc-9f6f-d406e8dc3c8a" class="bulleted-list"><li style="list-style-type:disc">Supports S3 standard, S3 IA, S3 One Zone IA</li></ul><ul id="0725b58a-a3fb-4306-9501-31400ad8c98d" class="bulleted-list"><li style="list-style-type:disc">Transition to S3 Glacier using a Lifecycle Policy</li></ul><ul id="a2be2273-2546-48c6-a2b4-eeadf0d6912e" class="bulleted-list"><li style="list-style-type:disc">Bucket access using lAM roles for each File Gateway</li></ul><ul id="f112493d-8a28-4e8f-a30d-7ed294e517d9" class="bulleted-list"><li style="list-style-type:disc">Most recently used data is cached in the file gateway</li></ul><ul id="f86be78c-286c-46b5-af24-1a30923c7706" class="bulleted-list"><li style="list-style-type:disc">Can be mounted on many servers on-premises</li></ul><ul id="50e65e75-6ef4-4693-9516-b4d4c9aa90ff" class="bulleted-list"><li style="list-style-type:disc">Integrated with Active Directory (AD) for user authentication</li></ul><p id="c1f5233d-86eb-471a-b6b8-af33b58ac449" class="">In the diagram below, the file gateway acts as a bridge between the application server and S3. This allows to expand the available storage by leveraging S3. Also, the most used data will be cached at file gateway for low latency access.</p><figure id="64ea9b84-4ecb-421a-8b27-81290422bdd5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(440).png"><img style="width:812px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(440).png"/></a></figure></details></li></ul><ul id="59056f1a-4e90-4db2-adad-cbc906f0be39" class="toggle"><li><details open=""><summary>FSx File Gateway</summary><ul id="3e8534d1-42c0-4097-a3f8-6d56d6881a26" class="bulleted-list"><li style="list-style-type:disc">Equivalent to S3 File Gateway but for Windows FSx</li></ul><ul id="a7cddd90-b446-4b6a-87b0-48a45b7a8235" class="bulleted-list"><li style="list-style-type:disc">Native access to Amazon FSx for Windows File Server</li></ul><ul id="af05cabb-60c1-4e96-a1b1-e84d9baf0294" class="bulleted-list"><li style="list-style-type:disc">Local cache for frequently accessed data</li></ul><ul id="721c41bc-f625-4785-b52a-73d69a230a93" class="bulleted-list"><li style="list-style-type:disc">Windows native compatibility (SMB, NTFS, Active Directory, etc.)</li></ul><ul id="45d558f3-d378-4605-9ce7-bc40e59ae606" class="bulleted-list"><li style="list-style-type:disc">Useful for group file shares and home directories</li></ul><figure id="f6d42402-858f-4fdc-ad69-5d22baa548df" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20230.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20230.png"/></a></figure></details></li></ul><ul id="32e95a96-cd31-4722-93c9-a4ae93ba1408" class="toggle"><li><details open=""><summary>Volume Gateway</summary><ul id="0b66f948-b4b3-4760-9db9-b62b974ed4a6" class="bulleted-list"><li style="list-style-type:disc">Block storage using iSCSI protocol backed by S3</li></ul><ul id="ec787247-8662-4215-a3ec-96c9eba666dd" class="bulleted-list"><li style="list-style-type:disc">On-premises storage volumes are backed by EBS snapshots which can help restore these volumes later</li></ul><ul id="54d3349d-258a-42ab-b284-ba1182d6167e" class="bulleted-list"><li style="list-style-type:disc">Two kinds of volumes:<ul id="8be688b4-913c-4e5b-80e1-e7f0653a24df" class="bulleted-list"><li style="list-style-type:circle">Cached volumes: low latency access to most recent data</li></ul><ul id="e2c3db4c-7bd9-48af-b51c-b24ed96e39fc" class="bulleted-list"><li style="list-style-type:circle">Stored volumes: entire dataset is on premise, scheduled backups to S3</li></ul></li></ul><p id="6c5c67b5-91df-4021-9ead-a7fa71718710" class="">Here, the primary purpose of cloud storage is to backup on-premises storage volumes</p><figure id="c6cfd8ba-4f89-445f-aa41-f165146db07d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20231.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20231.png"/></a></figure></details></li></ul><ul id="1e70c38a-6af1-4b77-a33b-c79d3c21d466" class="toggle"><li><details open=""><summary>Tape Gateway</summary><ul id="2bafe9b0-9580-4256-8669-b0e3c11a1507" class="bulleted-list"><li style="list-style-type:disc">Some companies have backup processes using physical tapes</li></ul><ul id="ef7cb6b7-7bcd-4e60-bc51-61bc3687ab23" class="bulleted-list"><li style="list-style-type:disc">With Tape Gateway, companies use the same processes but, in the cloud Virtual Tape Library (VTL) is backed by Amazon S3 and Glacier</li></ul><ul id="d4809a2b-2a02-4134-ab7a-0ee665b2680e" class="bulleted-list"><li style="list-style-type:disc">Back up data using existing tape-based processes (and iSCSI interface)</li></ul><ul id="eed6b60e-1578-4707-9163-bb7de6389e54" class="bulleted-list"><li style="list-style-type:disc">Works with leading backup software vendors</li></ul><figure id="5856730f-e228-419e-8700-3c926cd163db" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20232.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20232.png"/></a></figure></details></li></ul></li></ul></details></li></ul><ul id="19a0cbf1-3e2c-4ea1-9083-d9b2e5e2c770" class="toggle"><li><details open=""><summary>Storage Gateway - Hardware appliance</summary><ul id="efbba0fd-55ad-4caf-a009-9162d2a1a55d" class="bulleted-list"><li style="list-style-type:disc">Using Storage Gateway means you need on-premises virtualization. If you don’t have virtualization available, you can use a Storage Gateway - Hardware Appliance. It is a mini server that you need to install on-premises.</li></ul><ul id="61e18092-4fb4-4bf4-9612-81d1ff14d2b9" class="bulleted-list"><li style="list-style-type:disc">You can buy it on <a href="http://amazon.com/">amazon.com</a></li></ul><ul id="84d0cea8-eb98-433c-a955-13ba40fc0963" class="bulleted-list"><li style="list-style-type:disc">Works with File Gateway, Volume Gateway, Tape Gateway (not FSx)</li></ul><ul id="a0f6a045-5a80-4037-9f00-903ed43ee564" class="bulleted-list"><li style="list-style-type:disc">Has the required CPU, memory, network, SSD cache resources</li></ul><ul id="bf10824e-d346-4b9c-90b7-02da5cec63d2" class="bulleted-list"><li style="list-style-type:disc">Helpful for daily NFS backups in small data centers</li></ul><figure id="5b828d05-0cb9-4a4d-b9be-5efe0d6efe9d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20233.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20233.png"/></a></figure><ul id="cae8c957-e6d8-46c6-923a-449b7d9783ba" class="toggle"><li><details open=""><summary>Outro</summary><figure id="6901652a-2c99-42e7-97ed-365a7d570759" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(441).png"><img style="width:1828px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(441).png"/></a></figure></details></li></ul></details></li></ul></details></li></ul></details></li></ul><ul id="ba9ba543-fab1-442a-8f63-01c5a4543d18" class="toggle"><li><details open=""><summary>AWS Transfer Family</summary><ul id="14e81105-4e7d-41d4-bd77-1f8767c0260c" class="bulleted-list"><li style="list-style-type:disc">A fully-managed service for file transfers in and out of S3 or EFS using the FTP protocol (instead of using proprietary methods)</li></ul><ul id="7cfa67d7-bc8a-4510-bfb8-172d941a686b" class="bulleted-list"><li style="list-style-type:disc">Supported Protocols<ul id="fdbab57f-c7f7-4a8c-ba50-088b5ceb1db9" class="bulleted-list"><li style="list-style-type:circle">FTP (File Transfer Protocol) - unencrypted in flight</li></ul><ul id="95781897-2a12-486a-b23d-beb77639d506" class="bulleted-list"><li style="list-style-type:circle">FTPS (File Transfer Protocol over SSL) - encrypted in flight</li></ul><ul id="8b75f57f-40d4-4c16-b6b3-d15b446523c6" class="bulleted-list"><li style="list-style-type:circle">SFTP (Secure File Transfer Protocol) - encrypted in flight</li></ul></li></ul><ul id="09c775c7-6563-4df1-9620-e38b3c61c155" class="bulleted-list"><li style="list-style-type:disc">Managed infrastructure, Scalable, Reliable, Highly Available (multi-AZ)</li></ul><ul id="af133cb4-bbda-40b4-8753-83c9b9123866" class="bulleted-list"><li style="list-style-type:disc">Pay per provisioned endpoint per hour + fee per GB data transfers</li></ul><ul id="2be222e4-eba2-4e3b-836d-d26e89ca18e6" class="bulleted-list"><li style="list-style-type:disc">Store and manage users’ credentials within the service or integrate with existing authentication systems (Microsoft Active Directory, LDAP, Okta, Amazon Cognito or custom authentication system)</li></ul><ul id="eafe1b3f-9ca0-4c1e-a080-38d1e62032f5" class="bulleted-list"><li style="list-style-type:disc">Usage: sharing files, public datasets, CRM, ERP, etc.</li></ul><p id="67b302f6-43f4-4c10-8bd1-0b02eaa94b0b" class="">Clients can either connect directly to the FTP endpoint or optionally through Route 53. Also, Transfer Family will need permission to read or put data into S3 or EFS.</p><figure id="77601b7f-c67c-41de-93ec-5479dea7ceb9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20234.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20234.png"/></a></figure></details></li></ul><ul id="2d066dc6-c49d-401d-8fb6-d3cb27a628d6" class="toggle"><li><details open=""><summary><strong>DataSync</strong></summary><figure id="aae0678e-b01d-4285-a8a8-e7897557e210" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(443).png"><img style="width:938px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(443).png"/></a></figure><figure id="efbcc37b-5ce5-41e1-9aca-4fb16aba9cac" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(444).png"><img style="width:935px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(444).png"/></a></figure><figure id="800b064e-bd29-42a1-a55a-a5bfac83ed09" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(445).png"><img style="width:1544px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(445).png"/></a></figure></details></li></ul><ul id="122d53b1-054c-4d81-a60b-b4671956c63f" class="toggle"><li><details open=""><summary>Storage Comparison</summary><ul id="4c62aab2-9e1c-4bed-ad1b-6f567d7826a9" class="bulleted-list"><li style="list-style-type:disc">S3<ul id="2334831f-9c25-46dc-ae79-463598c58627" class="bulleted-list"><li style="list-style-type:circle">Object storage</li></ul><ul id="88a76ba8-489e-44e4-b077-47f249d3c4a7" class="bulleted-list"><li style="list-style-type:circle">Serverless (auto-scaling)</li></ul><ul id="7bae0c0d-7907-43f3-8c65-f4f42e7820e1" class="bulleted-list"><li style="list-style-type:circle">No need to provision capacity ahead of time</li></ul></li></ul><ul id="bc429584-b636-45d2-a115-12cfb550f6c7" class="bulleted-list"><li style="list-style-type:disc">Glacier<ul id="3eb47d73-8cf5-4c70-a4aa-8d039246ee5c" class="bulleted-list"><li style="list-style-type:circle">Object archival</li></ul><ul id="c8cf5577-327f-4cb9-b32e-ff934fb9239a" class="bulleted-list"><li style="list-style-type:circle">Rare retreival</li></ul></li></ul><ul id="49406d8e-1e59-440c-af54-377d8dacdf7d" class="bulleted-list"><li style="list-style-type:disc">EBS Volumes<ul id="cea255a3-70e6-4418-9ed9-25feb03e5613" class="bulleted-list"><li style="list-style-type:circle">Network storage for one EC2 instance at a time</li></ul><ul id="83b88627-68cd-4966-a970-d5fd68e5a286" class="bulleted-list"><li style="list-style-type:circle">Bound to an AZ (to move to another AZ, need to create a snapshot)</li></ul></li></ul><ul id="2d5fce5d-41c8-42eb-9b99-23be8b6d92fd" class="bulleted-list"><li style="list-style-type:disc">Instance Storage<ul id="b1745301-9ef0-442d-86d1-cbb87805782b" class="bulleted-list"><li style="list-style-type:circle">Physically attached storage to the EC2 instance</li></ul><ul id="8f06b05a-3aaa-4259-99ff-540e8cf2ee87" class="bulleted-list"><li style="list-style-type:circle">Extremely high IOPS</li></ul><ul id="ad190f80-2b66-41f4-8bf0-da078bffa311" class="bulleted-list"><li style="list-style-type:circle">If the instance goes down, data is lost</li></ul></li></ul><ul id="0caa78c1-3c29-4f71-9df3-e9f92ec4de8e" class="bulleted-list"><li style="list-style-type:disc">EFS<ul id="47bcbb29-80b6-416a-b312-00b2ba8ecf28" class="bulleted-list"><li style="list-style-type:circle">Network file system for linux</li></ul><ul id="a302edbf-507e-43d0-9374-94cd267dc823" class="bulleted-list"><li style="list-style-type:circle">POSIX file system</li></ul><ul id="9fc01620-d195-48d0-b5f4-19e8135cf1c7" class="bulleted-list"><li style="list-style-type:circle">Shared across AZ</li></ul></li></ul><ul id="0aea5219-8123-4a1a-9d4b-46000416ebbc" class="bulleted-list"><li style="list-style-type:disc">FSx for Windows<ul id="aa21c100-24a3-4724-9ca1-7761ee6901a6" class="bulleted-list"><li style="list-style-type:circle">Just like EFS but for windows</li></ul></li></ul><ul id="a4813191-d865-45c2-88c4-19bbb8c62830" class="bulleted-list"><li style="list-style-type:disc">FSx for Lustre<ul id="3b2f6ba8-645c-47f0-8c9e-69639ee92acf" class="bulleted-list"><li style="list-style-type:circle">High performance computing (HPC)</li></ul><ul id="2b93c16c-cbf8-4751-b433-2c114e94e4fa" class="bulleted-list"><li style="list-style-type:circle">Supports Linux</li></ul><ul id="8f673146-66f2-472e-95e2-f2bba3220f26" class="bulleted-list"><li style="list-style-type:circle">High IOPS</li></ul><ul id="418fcbc2-1043-457a-abd5-2d2484ec9895" class="bulleted-list"><li style="list-style-type:circle">Integrated with S3 in backend</li></ul></li></ul><ul id="f33e32ee-5d87-46a4-b022-d5f6455f9830" class="bulleted-list"><li style="list-style-type:disc">FSx for NetApp ONTAP<ul id="5b862347-5210-45dd-84c6-fbddd98fa9ec" class="bulleted-list"><li style="list-style-type:circle">High OS compatibility for any Network file system</li></ul></li></ul><ul id="02cac957-c6a3-410f-952b-f3dc1fc5b65b" class="bulleted-list"><li style="list-style-type:disc">FSx for OpenZFS<ul id="1bc0f921-0059-4dda-af58-e184d3712572" class="bulleted-list"><li style="list-style-type:circle">Managed ZFS file system</li></ul></li></ul><ul id="02ab3101-4b21-4a2e-881c-2adb2cfd449e" class="bulleted-list"><li style="list-style-type:disc">Storage Gateway<ul id="106fa5cb-1ac7-4f1b-8338-bb46482cf601" class="bulleted-list"><li style="list-style-type:circle">bridge between on-premises storage and AWS</li></ul></li></ul><ul id="39ae42e5-cd3a-4da8-868b-291171b4e6df" class="bulleted-list"><li style="list-style-type:disc">Transfer Family<ul id="6c58a496-757b-4bd2-9c3b-973e3c571a30" class="bulleted-list"><li style="list-style-type:circle">FTP, FTPS, SFTP interface on top of the amazon S3 or Amazon EFS</li></ul></li></ul><ul id="92dba94b-c563-4b96-b4e7-d90a1e8d4161" class="bulleted-list"><li style="list-style-type:disc">DataSync<ul id="83a218f9-0a1b-4b95-9828-1a292f9df512" class="bulleted-list"><li style="list-style-type:circle">Schedule data sync from on-premises to AWS or AWS to AWS</li></ul></li></ul><ul id="97a719aa-3185-4213-9b60-66da282287e8" class="bulleted-list"><li style="list-style-type:disc">Snow Family<ul id="a823ca9f-2d9d-4325-a88e-0120744b6d2c" class="bulleted-list"><li style="list-style-type:circle">Move large amounts of data physically to the AWS cloud into S3</li></ul></li></ul><ul id="83c24f22-6914-4410-95fd-82855e70c855" class="bulleted-list"><li style="list-style-type:disc">Database<ul id="391b5307-5a66-4867-bad5-fb22eb14158a" class="bulleted-list"><li style="list-style-type:circle">For specific workloads, usually with indexing and querying</li></ul></li></ul></details></li></ul></div><h3 id="0ea30166-d7e7-4345-ae0c-4da8cbb173e6" class=""><details open=""><summary>Section 18: Decoupling applications: SQS, SNS, Kinesis, ActiveMQ</summary></details></h3><div class="indented"><ul id="338166cf-ef64-4a86-8d77-f7fedd3dd848" class="toggle"><li><details open=""><summary>Application Communication</summary><ul id="3633aefe-9254-4913-b728-7f651706bad4" class="bulleted-list"><li style="list-style-type:disc">Deployed services need to communicate with one another to do useful stuff.</li></ul><ul id="e4828cc9-bdbd-4424-a552-080bf72a4fe6" class="bulleted-list"><li style="list-style-type:disc">There are two patterns of application communication<ul id="c2a9eb13-fe68-408d-920b-7037e96a78a3" class="bulleted-list"><li style="list-style-type:circle">Synchronous (application → application)</li></ul><ul id="d43532e8-5c70-4824-9c97-3ff1ff7dae54" class="bulleted-list"><li style="list-style-type:circle">Asynchronous / Event-based (application → queue → application)</li></ul><figure id="72719ff7-e717-4a75-9872-cd75dacf5ce1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20235.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20235.png"/></a></figure></li></ul><ul id="6bbbf20c-4fda-47c0-898b-4c5ef4e1ee31" class="bulleted-list"><li style="list-style-type:disc">Synchronous between applications can be problematic if there are sudden spikes of traffic and one of the services gets overwhelmed. In that case, it’s better to asynchronously decouple your applications. We can use 3 services for this:<ul id="c7c41de2-6956-4167-83aa-c12d575e4d53" class="bulleted-list"><li style="list-style-type:circle">SQS: queue model</li></ul><ul id="382018bf-f6d0-48d8-99c7-4dcfb0bd6b4c" class="bulleted-list"><li style="list-style-type:circle">SNS: pub/sub model</li></ul><ul id="a59d62ef-b46b-4992-baee-5ea59a35b242" class="bulleted-list"><li style="list-style-type:circle">Kinesis: real-time streaming model for large amount of data</li></ul></li></ul><ul id="5ccc2317-f528-4734-ad24-4ad6aa95be4a" class="bulleted-list"><li style="list-style-type:disc">These services can scale independently from our application</li></ul></details></li></ul><ul id="cbefb52c-ba7f-4d7b-9380-c7a58e57ba8a" class="toggle"><li><details open=""><summary>SQS - Simple Queue Service</summary><ul id="e3274cac-1040-4f53-a3db-f38ae4feabb2" class="toggle"><li><details open=""><summary>Decoupling</summary><ul id="33da56ec-3b0f-4a77-9263-1a10488badc2" class="bulleted-list"><li style="list-style-type:disc">SQS acts a buffer that stores message temporarily allowing us to decouple applications</li></ul><ul id="9f5da06f-6fd7-4ae0-a332-8c798b33642e" class="bulleted-list"><li style="list-style-type:disc">Multiple producers can send messages into a queue and multiple consumers can poll the queue for any message</li></ul><ul id="8c9cd30b-52f9-455c-8519-ea2b966650ed" class="bulleted-list"><li style="list-style-type:disc">Once a consumer reads a message from the queue, the consumer deletes that message from the queue.</li></ul><figure id="1bfae6e5-7a0c-46ea-a07f-68a53e983397" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20236.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20236.png"/></a></figure></details></li></ul><ul id="7a9878fb-5ce3-4e5f-b79e-2949d412dab9" class="toggle"><li><details open=""><summary>Intro</summary><ul id="63bfc28e-d222-4d81-958a-3ac9bb5fd97e" class="bulleted-list"><li style="list-style-type:disc">Fully managed service, used to decouple applications</li></ul><ul id="756eced6-1106-4d69-a100-ba1c41ce4452" class="bulleted-list"><li style="list-style-type:disc">Oldest offering (over 10 years old)</li></ul><ul id="1414e97d-f799-4c8e-adce-4352c63b87d8" class="bulleted-list"><li style="list-style-type:disc">Two types:<ul id="cdf67ea8-fe7f-4dc6-9e97-a0e79ab4e339" class="toggle"><li><details open=""><summary>Standard Queue</summary><ul id="a7bfca86-441f-4ab2-abb5-b899366f1d0e" class="bulleted-list"><li style="list-style-type:disc">Unlimited throughput (can publish any number of message per second into the queue)</li></ul><ul id="d228c85a-d177-4473-bd7c-4ef5403f5b51" class="bulleted-list"><li style="list-style-type:disc">Unlimited number of messages in queue</li></ul><ul id="5cc5a3c5-a65e-481e-85f2-a01c622c34b1" class="bulleted-list"><li style="list-style-type:disc">Default retention of messages: 4 days (max: 14 days)</li></ul><ul id="d944c199-e6e6-4648-8740-b76ef0bb7d1b" class="bulleted-list"><li style="list-style-type:disc">Low latency (&lt;10 ms on publish and receive)</li></ul><ul id="9620412a-6c8d-459c-b555-36ec8b3a2e4f" class="bulleted-list"><li style="list-style-type:disc">Max message size: 256KB</li></ul><ul id="54271b92-51ec-48e8-a10c-31881cc2e269" class="bulleted-list"><li style="list-style-type:disc">Can have duplicate messages (at least once delivery)</li></ul><ul id="768daaca-2a64-44d9-a670-a22e75391e3c" class="bulleted-list"><li style="list-style-type:disc">Can have out of order messages (best effort ordering)</li></ul><ul id="28d77603-f37b-45bf-8211-c5a2e8d1f2c4" class="bulleted-list"><li style="list-style-type:disc">Messages are put into the SQS queue using the SendMessage API using the SDK</li></ul><ul id="de3c4218-6be1-492a-b73a-f8b2ce08b6cf" class="bulleted-list"><li style="list-style-type:disc">Consumers could be EC2 instances or Lambda functions</li></ul><ul id="506bc7af-f2c9-4f8f-825b-fa6fb7f45e2f" class="bulleted-list"><li style="list-style-type:disc">Consumers could receive a maximum of 10 messages at a time</li></ul><ul id="5ae0e938-dddb-47ff-b8d4-c0c19fb67a2e" class="bulleted-list"><li style="list-style-type:disc">Only when the consumer has completed processing a message, it is removed from the queue.</li></ul><figure id="4f7659a2-d379-4703-82bf-19fb3ffefabf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20237.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20237.png"/></a></figure></details></li></ul><ul id="fab4b872-9705-4d99-876e-89cd08a59902" class="toggle"><li><details open=""><summary>FIFO Queue</summary><ul id="1fada338-fbf2-40e9-8dbb-4b978e8aec6f" class="bulleted-list"><li style="list-style-type:disc">Unlike standard queues, FIFO queues guarantees ordering of messages</li></ul><ul id="9c3aaf35-f7c7-4e99-b5aa-f729108b96f2" class="bulleted-list"><li style="list-style-type:disc">Limited throughput: 300 msg/s without batching or 3000 msg/s with batching</li></ul><ul id="59e201ee-db04-4032-b88c-d629c34a5cea" class="bulleted-list"><li style="list-style-type:disc">Exactly-once send capability (FIFO queues automatically remove duplicates)</li></ul><ul id="02f0ae45-4026-41c2-84d9-e0a45f63b9bb" class="bulleted-list"><li style="list-style-type:disc">Messages are processed in order by the consumer</li></ul><ul id="4b297cbb-450d-4070-af95-a32783555686" class="bulleted-list"><li style="list-style-type:disc">The queue name must end with <code>.fifo</code> to be considered a FIFO queue</li></ul><ul id="5b750d5b-5967-4e5a-9484-246c1117aa40" class="bulleted-list"><li style="list-style-type:disc">Sending messages to a FIFO queue requires:<ul id="33ef4b6c-9417-493d-a0a5-5e76fee204ee" class="bulleted-list"><li style="list-style-type:circle">Group ID: for ordering of messages</li></ul><ul id="d7f3f236-3ce5-4f33-bcaf-1b7363dc7bb7" class="bulleted-list"><li style="list-style-type:circle">Message deduplication ID: for deduplication of messages</li></ul></li></ul><figure id="f1b17e0f-cdcd-407e-9bfa-5aaaeef8ab70" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20238.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20238.png"/></a></figure><ul id="afc81166-bd75-458a-aa28-ef5aad612467" class="toggle"><li><details open=""><summary>If you don’t use a Group ID, messages are consumed in the order they are sent, with only one consumer</summary><figure id="ccf5f2b6-ba89-4f66-ba6f-1771cbb57452" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20239.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20239.png"/></a></figure></details></li></ul><ul id="ecc4459c-56d0-4920-83fb-5949d66a68e2" class="toggle"><li><details open=""><summary>If you want to scale the number of consumers, you want messages to be “grouped” if they are related to each other. Then you use a Group ID (similar to Partition Key in Kinesis). Messages will be ordered and grouped for each group ID.</summary><figure id="d188d22b-f3d5-4efc-8784-a7cbbb55a9d4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20240.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20240.png"/></a></figure></details></li></ul></details></li></ul></li></ul><ul id="544af9b1-886f-41fb-bd3c-ce6ef261b7ea" class="toggle"><li><details open=""><summary>Producing Messages</summary><figure id="c76aaf1c-da59-408b-8fe9-0a48b836a1f7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(446).png"><img style="width:1699px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(446).png"/></a></figure></details></li></ul><ul id="2d2fb1ee-edec-4319-8aae-79fe2a6ad3e2" class="toggle"><li><details open=""><summary>Consuming Messages</summary><figure id="43ac6839-4701-40b8-a74f-5d3abe291d25" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(447).png"><img style="width:917px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(447).png"/></a></figure></details></li></ul><ul id="e4ee46f5-d60d-4c43-b531-88ab6854d4dc" class="toggle"><li><details open=""><summary>Outro</summary><figure id="ba67ad0b-a1a8-4c29-b099-2fa6d942e808" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(448).png"><img style="width:921px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(448).png"/></a></figure></details></li></ul></details></li></ul><ul id="123f6a96-8a6a-41bd-8702-65adbf64099c" class="toggle"><li><details open=""><summary>SQS with ASG</summary><p id="409f276d-9401-4e11-9844-a721ffaad2ec" class="">We can attach an ASG to the consumer instances which will scale based on the Queue Length (approximate number of messages in the queue) CW metric. If the queue length goes above a certain threshold, a CW alarm will be triggered which will trigger the ASG to scale.</p><figure id="db614296-5db8-4a29-9997-1f868713b7d7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20241.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20241.png"/></a></figure></details></li></ul><ul id="d00f67ce-155a-4a5e-adc4-b6899fde683c" class="toggle"><li><details open=""><summary>Decoupling Application Tiers</summary><p id="6d8e1e04-93e8-45a8-a2e8-f86371dadc57" class="">For a video processing website, we can decouple the front-end and back-end using an SQS queue. This way both front-end and back-end can scale independently of each other within their own ASG. The front-end is only responsible for sending the requests (messages) into the queue. The back-end is only responsible for polling the messages and processing the video. Since, SQS has unlimited capacity and throughput. This system is reliable.</p><figure id="69fa5b5a-580c-4da8-a3a8-63a544daca47" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20242.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20242.png"/></a></figure></details></li></ul><ul id="945a8f29-3181-42d8-a807-2345aa074d7b" class="toggle"><li><details open=""><summary>Security</summary><ul id="a5a88249-6240-4a84-bb00-8006696b68f2" class="toggle"><li><details open=""><summary>Encryption:</summary><ul id="094aa788-eee4-42d5-b915-71c5fd3b2d01" class="bulleted-list"><li style="list-style-type:disc">In-flight encryption using HTTPS API</li></ul><ul id="c89b5320-f0bd-44e3-9c2e-b40dc9baddaa" class="bulleted-list"><li style="list-style-type:disc">At-rest encryption using KMS keys</li></ul><ul id="714b1ffd-7748-4d1d-a00e-9613bdd82e25" class="bulleted-list"><li style="list-style-type:disc">Client-side encryption if the client wants to perform encryption / decryption themselves</li></ul></details></li></ul><ul id="8d440ea2-c892-42c7-b1c5-e90465521aa8" class="toggle"><li><details open=""><summary>Access Controls:</summary><ul id="fbb42fd4-45e9-4982-9688-51fba870c4e6" class="bulleted-list"><li style="list-style-type:disc">IAM policies to regulate access to the SQS API</li></ul><ul id="79c03caa-6f9a-42fa-a021-f35a6da9ae78" class="bulleted-list"><li style="list-style-type:disc">SQS Access Policies (similar to S3 bucket policies)<ul id="6001b60d-744c-498b-ae27-6e66fc350dc8" class="bulleted-list"><li style="list-style-type:circle">Useful for cross-account access to SQS queues</li></ul><ul id="31b4f0db-f7f1-4a00-b437-8943c6e45ea0" class="bulleted-list"><li style="list-style-type:circle">Useful for allowing other services (SNS, S3, etc.) to write to an SQS queue</li></ul></li></ul></details></li></ul></details></li></ul><ul id="5fc53b65-16bd-4099-8868-6e9f9629ff03" class="toggle"><li><details open=""><summary>Message Visibility Timeout</summary><ul id="f0489f62-f6e0-481c-a5ff-2bd6cdc09672" class="bulleted-list"><li style="list-style-type:disc">After a message is polled by a consumer, it becomes invisible to other consumers</li></ul><ul id="8aeb3bd5-b4d4-4b12-9f53-a059e4adebb5" class="bulleted-list"><li style="list-style-type:disc">By default, the “message visibility timeout” is 30 seconds which means the message has 30 seconds to be processed by a consumer otherwise it will be visible in the queue and may get picked by another consumer.</li></ul><ul id="55f66304-90de-42c3-8e9e-1daf1a518c07" class="bulleted-list"><li style="list-style-type:disc">After the message visibility timeout is over, the message is visible in the SQS queue</li></ul><ul id="beb8f0bf-d0cb-4b99-9e78-10a4f6fe18f8" class="bulleted-list"><li style="list-style-type:disc">If a message is not processed within the visibility timeout, it will be processed twice. However, a consumer could call the <strong>Change MessageVisibility API</strong> to change the visibility timeout for that specific message. This will get the consumer more time to process the message.</li></ul><ul id="09a8e7d5-034d-4ff5-8492-38df1dcfcf01" class="bulleted-list"><li style="list-style-type:disc">Visibility timeout can be configured for the entire queue also:<ul id="eba90c03-2053-49ca-9ebe-af769f6ae0ac" class="bulleted-list"><li style="list-style-type:circle">If visibility timeout is high (hours), and the consumer crashes, re-processing of the pending message will take a lot of time</li></ul><ul id="128117fa-0fa3-4136-84ee-862999f1f7f9" class="bulleted-list"><li style="list-style-type:circle">If visibility timeout is too low (seconds), we may get duplicate processing of messages</li></ul></li></ul><figure id="0676606b-e34b-4bf1-acc0-5fc89a9c3c87" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20243.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20243.png"/></a></figure></details></li></ul><ul id="8e26cb11-ba89-4963-8807-b93d7e3f36ee" class="toggle"><li><details open=""><summary>Long Polling</summary><ul id="4a3391bd-29a9-404f-ad85-1ab68c10b17e" class="bulleted-list"><li style="list-style-type:disc">When a consumer requests messages from the queue, it can optionally “wait” for messages to arrive if there are none in the queue. This is called Long Polling.</li></ul><ul id="8c83ab98-0c47-4ff4-ae47-ea737b2525f3" class="bulleted-list"><li style="list-style-type:disc">LongPolling decreases the number of API calls made to SQS</li></ul><ul id="5ce8d48d-f061-470e-bda7-a9963ca8c87e" class="bulleted-list"><li style="list-style-type:disc">It also reduces the latency of your application as any incoming message during the polling will be read instantaneously.</li></ul><ul id="3485ae7b-0aa5-4c2e-b841-86825b498361" class="bulleted-list"><li style="list-style-type:disc">The wait time can be between 1 sec to 20 sec (20 sec preferable)</li></ul><ul id="d2556a10-6c41-4a2e-90a4-0fe032daaff1" class="bulleted-list"><li style="list-style-type:disc">Long Polling is preferable to Short Polling</li></ul><ul id="e77495ca-3e7c-4b90-a2f3-58c226d97b72" class="bulleted-list"><li style="list-style-type:disc">Long polling can be enabled at the queue level or at the API level by the consumer using <strong>WaitTimeSeconds</strong><figure id="9f51a9df-5483-49c3-9974-4e205dea563c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20244.png"><img style="width:240px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20244.png"/></a></figure></li></ul></details></li></ul><ul id="b99582cd-4982-4eb9-8a4b-1f467ded6c6a" class="toggle"><li><details open=""><summary>SQS + ASG</summary><figure id="0f1d7c70-bfe8-448a-9385-b6c83aeaac82" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(449).png"><img style="width:861px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(449).png"/></a></figure><figure id="68d72b5a-9ec9-4340-b14f-69d745d7f09b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(450).png"><img style="width:984px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(450).png"/></a></figure><figure id="27ccae91-c640-41e2-bd8f-eb1ef3af4d72" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(451).png"><img style="width:878px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(451).png"/></a></figure></details></li></ul><ul id="5d8e1543-9bff-434a-84e3-ec976d2d788e" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="f4f39cc3-d322-4daf-9b17-c3128a7c70dd" class="bulleted-list"><li style="list-style-type:disc">Create Queue<p id="2eddf386-8a48-4548-bc18-9d81ae1e3e49" class="">SQS → Create Queue</p><p id="8cb8383a-885a-4cb5-b09c-c90cea0d3162" class="">In-transit encryption is enabled by default, we can configure at-rest encryption as well.</p><figure id="54e98c6c-e279-48c9-a094-9bf6be3c8d68" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20245.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20245.png"/></a></figure><p id="aa159077-57c6-4359-b26c-1fbdd7f06226" class="">Untitled</p></li></ul><ul id="aafa8382-c37a-46e2-be05-2147db40a610" class="bulleted-list"><li style="list-style-type:disc">Send messages<p id="01a5946a-4207-4a0b-ab73-e56fa201a93a" class="">Select queue → Send and receive messages</p><p id="15a8bdbe-2d3f-41f1-a32f-a31e190d2cfe" class="">Attributes allow us to send key-value pairs of data along with the stringified message.</p><figure id="61eb52ff-6b1e-44ff-aca5-44f112c0aa43" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20246.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20246.png"/></a></figure><p id="89b62716-d67f-437c-942a-47e3d581d972" class="">Untitled</p></li></ul><ul id="e19b4d95-bb8a-49b0-8e4b-1ae483dc1098" class="bulleted-list"><li style="list-style-type:disc">Receive messages<p id="72693357-6683-4c9e-b897-bcd938833f78" class="">To receive messages present in the queue, click on “poll for message”</p><p id="d48d9c37-cbf1-4760-b0f0-c5878d74db35" class="">If we don’t delete the messages, they will remain in the queue and will be received every time we poll.</p><figure id="1e687ef8-7fae-44d2-bdbd-4fd48ce659ed" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20247.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20247.png"/></a></figure><p id="7197c597-b6e5-402f-b741-c570d6938cfc" class="">Untitled</p></li></ul><ul id="f4fe6dde-dea4-4062-be19-653c2e2d3b2a" class="bulleted-list"><li style="list-style-type:disc">Purge queue<p id="622fad3f-59c5-42b6-9221-3d1cfa616e04" class="">Empties the queue of all the messages.</p></li></ul><ul id="94e771c3-031b-47ee-88b4-9a732c6cd7d3" class="bulleted-list"><li style="list-style-type:disc">Publish S3 events into SQS<ul id="42513367-954d-44bd-8ce3-ca9ba2381ae8" class="bulleted-list"><li style="list-style-type:circle">Create S3 bucket</li></ul><ul id="c19593e8-6780-4764-80e0-6f76ff19c527" class="bulleted-list"><li style="list-style-type:circle">Modify SQS access policy to allow the S3 bucket to send messages to it<p id="bb2d8cae-9de2-4d9e-b2f7-89a876b47e80" class="">To modify:</p><ul id="d49b1c28-16de-4959-b94d-7c2e2516caab" class="bulleted-list"><li style="list-style-type:square">Resource: queue ARN</li></ul><ul id="915e879d-1e89-41fc-a738-7f87ed613844" class="bulleted-list"><li style="list-style-type:square"><code>aws:SourceArn</code> : change the bucket name</li></ul><ul id="96382d6d-7902-4437-ac64-6a635e9d4ba6" class="bulleted-list"><li style="list-style-type:square"><code>aws:SourceAccount</code> : account ID (top right hand corner)</li></ul><pre id="e0bd4194-509a-4253-b56a-fa3dd8d7fab8" class="code code-wrap"><code>{    &quot;Version&quot;: &quot;2012-10-17&quot;,    &quot;Id&quot;: &quot;example-ID&quot;,    &quot;Statement&quot;: [        {            &quot;Sid&quot;: &quot;example-statement-ID&quot;,            &quot;Effect&quot;: &quot;Allow&quot;,            &quot;Principal&quot;: {                &quot;Service&quot;: &quot;s3.amazonaws.com&quot;            },            &quot;Action&quot;: [                &quot;SQS:SendMessage&quot;            ],            &quot;Resource&quot;: &quot;arn:aws:sqs:us-east-1:502257142405:arkalim-queue&quot;,            &quot;Condition&quot;: {                &quot;ArnLike&quot;: {                    &quot;aws:SourceArn&quot;: &quot;arn:aws:s3:*:*:arkalim-demo-bucket&quot;                },                &quot;StringEquals&quot;: {                    &quot;aws:SourceAccount&quot;: &quot;502257142405&quot;                }            }        }    ]}</code></pre><p id="e718a14a-9ce0-4658-8d65-ff415dabc501" class="">The sample policy JSON can be found by googling</p><p id="5bd8638f-a143-4fe7-9860-21580a0f54b3" class=""><a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/grant-destinations-permissions-to-s3.html">Granting permissions to publish event notification messages to a destination</a></p></li></ul><ul id="c57fd71b-1484-4045-9d6f-bc1d68480379" class="bulleted-list"><li style="list-style-type:circle">Enable S3 notifications with the SQS queue as destination (will not work if the previous step is missed)</li></ul><ul id="89379d2a-4d54-4045-99cd-6f86ac1b6aa2" class="bulleted-list"><li style="list-style-type:circle">Upload anything in the bucket and poll the queue for messages</li></ul></li></ul><ul id="733e7560-ef3b-4fc9-9058-2469b88351cb" class="bulleted-list"><li style="list-style-type:disc">Dead Letter Queues<ul id="335c80dd-2179-4d1e-9fdd-dd4c878d3a34" class="bulleted-list"><li style="list-style-type:circle">Create another SQS queue with a high message retention period</li></ul><ul id="ef10120e-ad95-41fe-a778-a09e671d409a" class="bulleted-list"><li style="list-style-type:circle">Edit the original queue to configure the DQL<figure id="f01483d1-f150-470a-9f22-7a83edc71ac0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20248.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20248.png"/></a></figure><p id="e5c0fbec-df03-4377-a54e-df7411239dce" class="">Untitled</p></li></ul><p id="abca41be-09d7-46d7-8c3e-5839e17569db" class="">Now, if a message doesn’t get processed even after appearing 3 times in polling, it will be removed from the original queue and put into DLQ.</p></li></ul><ul id="40b8d088-f2da-4d0b-bdd6-65bcca04209e" class="bulleted-list"><li style="list-style-type:disc">Delay Queues<p id="aa081114-15bb-4f13-8d7f-ee910494b85d" class="">Set the Delivery Delay parameter to a non-zero value for any SQS queue.</p></li></ul></details></li></ul><ul id="4638ef38-36f5-4cfb-bc74-94b91668a61e" class="toggle"><li><details open=""><summary>Delay Queue</summary><ul id="86d8f02c-735a-4a6d-928d-1e27594689bf" class="bulleted-list"><li style="list-style-type:disc">Delay a message (consumers don’t see it immediately) (max delay: 15 minutes)</li></ul><ul id="f7ef41c8-ced7-40b4-be51-2147aa374185" class="bulleted-list"><li style="list-style-type:disc">Default is 0 seconds (message is available right away)</li></ul><ul id="97549271-cb9f-434b-a8b7-01afe04018f6" class="bulleted-list"><li style="list-style-type:disc">Delivery delay parameter can be set at the queue level</li></ul><ul id="05c1e3df-090d-438e-b983-0a8f72641103" class="bulleted-list"><li style="list-style-type:disc">Can override the default queue delay for a specific message using the <strong>DelaySeconds</strong> parameter in the message.</li></ul><figure id="aa1b68f8-6a16-4344-884d-c767141a57eb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20249.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20249.png"/></a></figure></details></li></ul><ul id="61aec2fb-398b-43cf-81cd-275434f30ca4" class="toggle"><li><details open=""><summary>Dead Letter Queue</summary><ul id="fbc47590-c5dd-4f16-81ea-67252d384a4b" class="bulleted-list"><li style="list-style-type:disc">It is just a normal SQS queue which is used to store failing to be processed messages in another queue.</li></ul><ul id="ae49dc93-cbc2-458a-ac2b-38c24dee2d1e" class="bulleted-list"><li style="list-style-type:disc">If a consumer fails to process a message within the Visibility Timeout, the message goes back to the queue. We can set a threshold of how many times a message can go back to the queue. After the MaximumReceives threshold is exceeded, the message goes into a dead letter queue (DLQ). This prevents unnecessary resource wastage on that specific message which might be corrupted in the first place.</li></ul><ul id="feb0c5d1-130f-4883-9cc5-934bab0facf7" class="bulleted-list"><li style="list-style-type:disc">Useful for debugging</li></ul><ul id="739060be-6f2d-4035-9301-0e78ad1a09c5" class="bulleted-list"><li style="list-style-type:disc">Make sure to process the messages in the DLQ before they expire (good to set a retention of 14 days in the DLQ)</li></ul><figure id="578facf7-dee0-4938-bf11-e2f22d36d27d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20250.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20250.png"/></a></figure><p id="87a594d9-be58-49ae-ba50-0b5f26043423" class="">Untitled</p></details></li></ul><ul id="01f2e2ee-c8d6-4c98-b743-5324c0935b5f" class="toggle"><li><details open=""><summary>SQS with ASG</summary><p id="0b18f974-56f2-4c0b-a8c7-054539654e16" class="">SQS doesn’t provide any metric for scaling out of the box. We need to create a custom CW metric = Queue length / Number of EC2 instances. If the number is high ⇒ number of pending messages in the queue is too high or number of instances are too low. We can set CW alarms for different thresholds to step scale the ASG.</p><figure id="0433ad41-527c-466c-bdfe-5b3535cc41ac" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20251.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20251.png"/></a></figure><p id="9acb274b-6577-457e-ac66-e9b5131abdaa" class="">This allows us to make responders scalable using ASG.</p><figure id="3886880c-5ddd-44d9-a180-7ade8b1ce217" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20252.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20252.png"/></a></figure></details></li></ul><ul id="96744a21-7013-46e8-b9d2-760e0286b993" class="toggle"><li><details open=""><summary>Access Policy</summary><ul id="61eba4d3-ec54-43c0-8ce7-2144fdef2705" class="toggle"><li><details open=""><summary>Cross-account access</summary><p id="98a0b8ad-dcc5-4b27-a7db-bdc73eb3ac8c" class="">Example: EC2 service in another AWS account polling for messages in the queue.</p><p id="a5702582-7ee6-4ce0-8ae4-462750a71b13" class="">Principal <code>{ “AWS”: [11112223333] }</code> means allow anyone from that account.</p><figure id="b93fad0a-20e6-411e-b482-328e2c9d9e96" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20253.png"><img style="width:432px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20253.png"/></a></figure></details></li></ul><ul id="5444f3d3-9a97-494b-aac7-ae6c42fa0d84" class="toggle"><li><details open=""><summary>Publish S3 notifications to an SQS queue</summary><p id="ef17bfd6-5a81-4f27-8d78-72edd0c96706" class="">Example: When an object is uploaded to an S3 bucket, the S3 notification should be sent to the queue.</p><p id="71032e20-2992-4fa6-a900-f900235222ce" class="">Here, the principal allows all the AWS accounts to access the queue but the condition restricts it to that bucket (unique globally) and the bucket owner account.</p><figure id="b7ec9ab3-249b-4898-b47b-85dd176f6a85" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20254.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20254.png"/></a></figure></details></li></ul></details></li></ul><ul id="148f8989-9957-4f0d-b0b2-1eb400e41660" class="toggle"><li><details open=""><summary>Request-Response System</summary><p id="72970c84-99c4-4c72-8c24-9d1250a85de8" class="">The idea is to build a request-response system where both the requesters and responders can scale independently. The requester sends the request into a request queue with attributes “correlation ID” and “reply to”. This request will be picked by one of many responders in an ASG. The request will be processed and it will be sent to the right response queue along with the same “correlation ID”. The “correlation ID” will help the requester identify which response corresponds to their request.</p><p id="73d0ccb4-f13a-4bd9-a782-1bf1b3b90d2a" class="">To implement this pattern: use the <strong>SQS Temporary Queue Client</strong> which leverages virtual queues instead of creating / deleting SQS queues (cost-effective).</p><figure id="d9795f83-5524-4abc-954a-222fa6cd19e7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20255.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20255.png"/></a></figure></details></li></ul></details></li></ul><ul id="4e8203ce-1ad4-492a-bb9f-bcbf9bc29692" class="toggle"><li><details open=""><summary>SNS - Simple Notification Service</summary><ul id="008f66d9-4fb0-43a4-ac2c-dc587953e27d" class="toggle"><li><details open=""><summary>Broadcastings message</summary><p id="a6178695-8004-40cd-9ef5-8a8478f42bc1" class="">If we want to broadcast a message to multiple receivers, we write direct integrations where the sender individually sends to every receiver. But this is cumbersome and difficult to build. Also, if the sender fails to send this message to one of the receivers, this could cause imbalance.</p><p id="f52955b1-e59e-4587-bc34-b2f5fa55ac09" class="">SNS provides a publisher - subscriber model where the publisher publishes a message to an SNS topic and all the subscribers will instantly receive these messages.</p><figure id="7c11528f-c106-40c4-b618-b17391a2d35f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20256.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20256.png"/></a></figure></details></li></ul><ul id="961b160e-2e43-4093-bea3-63a88d3a92eb" class="toggle"><li><details open=""><summary>SNS Intro</summary><ul id="de8bad42-a8b0-4457-a625-6624e8b1adb9" class="bulleted-list"><li style="list-style-type:disc">The “event producer” only sends message to one SNS topic</li></ul><ul id="07c67aa3-d30a-4717-91fe-2665d5a3c7fc" class="bulleted-list"><li style="list-style-type:disc">Each subscriber to the topic will get all the messages (note: new feature to filter messages)</li></ul><ul id="d2351c2e-8395-4a3e-9c51-9002d1966717" class="bulleted-list"><li style="list-style-type:disc">Up to 100,000 topics limit</li></ul><ul id="68f29829-41a4-4904-84a5-34a2ad6eb15e" class="bulleted-list"><li style="list-style-type:disc">Up to 12,500,000 subscriptions per topic</li></ul><ul id="a6d466e8-fbf5-47b8-9d78-4292dd02a83e" class="bulleted-list"><li style="list-style-type:disc">Subscribers can be:<ul id="301f7e19-e268-450a-980e-828181b80039" class="bulleted-list"><li style="list-style-type:circle">SQS</li></ul><ul id="88eb253a-a152-499a-8a75-20f47877a0cb" class="bulleted-list"><li style="list-style-type:circle">HTTP / HTTPS (need to specify how many times the delivery should be retried in case of failure)</li></ul><ul id="f8db7c10-be9a-47b0-8df4-860a4f80fcde" class="bulleted-list"><li style="list-style-type:circle">Lambda</li></ul><ul id="9fe966c5-8aa4-4f83-bfb3-22925a6293d2" class="bulleted-list"><li style="list-style-type:circle">Emails</li></ul><ul id="ff362ff1-add1-49af-bc80-b1c46a022fb9" class="bulleted-list"><li style="list-style-type:circle">SMS messages</li></ul><ul id="3db222b5-acd9-4511-9c93-69b3766a6e45" class="bulleted-list"><li style="list-style-type:circle">Mobile Notifications</li></ul></li></ul><ul id="b22aa3b3-5977-48f4-bcd8-91bb37c785fa" class="bulleted-list"><li style="list-style-type:disc">Many AWS services can send data directly to SNS for notifications (some are listed below:<figure id="c4a08c03-68dd-490a-8658-c36d5dfd8439" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(452).png"><img style="width:1580px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(452).png"/></a></figure></li></ul></details></li></ul><ul id="cd03b8ed-4875-4004-8e75-987b5b8e409d" class="toggle"><li><details open=""><summary>Publishing Messages</summary><ul id="490d8051-e3de-4076-bd84-434a4ab7a1ed" class="bulleted-list"><li style="list-style-type:disc">Topic Publish (using the SDK)<ul id="bcdaa0bf-6187-47e2-8b62-6ae710c14adb" class="bulleted-list"><li style="list-style-type:circle">Create a topic</li></ul><ul id="c441f087-2742-484b-b54f-26127c27fb94" class="bulleted-list"><li style="list-style-type:circle">Create subscriptions</li></ul><ul id="f64c3e8e-b853-4012-9844-0af187ec22c9" class="bulleted-list"><li style="list-style-type:circle">Publish to the topic</li></ul></li></ul><ul id="4a8e23ac-a8b8-4b45-ad46-980d503d251a" class="bulleted-list"><li style="list-style-type:disc">Direct Publish (for mobile apps SDK)
Works with Google GCM, Apple APNS, Amazon ADM, etc. to publish mobile notifications<ul id="b756b93f-b63c-4293-b72f-24c4770f20e1" class="bulleted-list"><li style="list-style-type:circle">Create a platform application</li></ul><ul id="63d0d4f2-b570-44f9-8b33-1b3a08c5f558" class="bulleted-list"><li style="list-style-type:circle">Create a platform endpoint</li></ul><ul id="642dd4fa-5d3a-444f-a11a-268dd4b761fc" class="bulleted-list"><li style="list-style-type:circle">Publish to the platform endpoint</li></ul></li></ul></details></li></ul><ul id="0f83b6a8-5e2d-4c93-8b29-738aa465ab45" class="toggle"><li><details open=""><summary>Security</summary><ul id="dc3ec50d-eff7-4431-b791-d3b8defc0235" class="bulleted-list"><li style="list-style-type:disc">Encryption:<ul id="3b26f75e-b03a-42ff-8f04-cebd1e5713c4" class="bulleted-list"><li style="list-style-type:circle">In-flight encryption by default using HTTPS API</li></ul><ul id="bf732953-2902-4f1c-86e7-8f63bcaf9f5f" class="bulleted-list"><li style="list-style-type:circle">At-rest encryption using KMS keys (optional)</li></ul><ul id="526b24e0-e227-4224-b199-cdfe158ca2d2" class="bulleted-list"><li style="list-style-type:circle">Client-side encryption if the client wants to perform encryption/decryption themselves</li></ul></li></ul><ul id="5f860735-3d6b-4d37-8be2-f6001842c013" class="bulleted-list"><li style="list-style-type:disc">Access Controls:<ul id="0bd48efa-c2db-467d-bfb5-e170a675cc6a" class="bulleted-list"><li style="list-style-type:circle">lAM policies to regulate access to the SNS API</li></ul><ul id="176fb97f-770a-4e7d-8c5b-4bb0f4f61ff7" class="bulleted-list"><li style="list-style-type:circle">SNS Access Policies (similar to SQS access policies)<ul id="a9b23235-1afc-4330-9edf-9bfcaba37ca7" class="bulleted-list"><li style="list-style-type:square">Useful for cross-account access to SNS topics</li></ul><ul id="9e84070e-2da0-4699-a8cb-0aa25a8f0e69" class="bulleted-list"><li style="list-style-type:square">Useful for allowing other AWS services (like S3) to write to an SNS topic</li></ul></li></ul></li></ul></details></li></ul><ul id="4162b187-c8d1-42b4-a55b-76b3f28aba7b" class="toggle"><li><details open=""><summary>SNS + SQS Fanout Pattern</summary><ul id="00814ce5-16a4-4fc2-8fe2-7051971b44c8" class="bulleted-list"><li style="list-style-type:disc">Intro<figure id="68a3b1f9-dea8-434a-8b59-9c4ae24deea5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20257.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20257.png"/></a></figure><ul id="1a26325a-370c-4f55-8e96-8ef4c03e059f" class="bulleted-list"><li style="list-style-type:circle">If the publisher sends message individually to each SQS queue without the use of SNS, there might be failure in between when the publisher application crashes after sending the message to just 1 or 2 queues.</li></ul><ul id="af0c7de1-944a-4ac5-a833-80cb03836d55" class="bulleted-list"><li style="list-style-type:circle">Fully decoupled, no data loss</li></ul><ul id="629523e9-f3b1-4510-9793-c4fd0f8fb406" class="bulleted-list"><li style="list-style-type:circle">SQS allows for: data persistence, delayed processing and retries of work</li></ul><ul id="31bb8f6d-f41f-4c0e-adc4-fa692aa3dcaf" class="bulleted-list"><li style="list-style-type:circle">Ability to add more SQS subscribers over time</li></ul><ul id="af15f77b-b5ce-4d7b-bec8-6383c045d9ee" class="bulleted-list"><li style="list-style-type:circle">Make sure your SQS queue access policy allows for SNS to write</li></ul></li></ul><ul id="26f2fcb0-6bd2-4d54-a09c-3822510579a8" class="bulleted-list"><li style="list-style-type:disc">S3 events to multiple queues<ul id="fc5b6ff0-7bf1-4c11-8ad4-a939e971184f" class="bulleted-list"><li style="list-style-type:circle">For the same combination of: event type (e.g. object create) and prefix (e.g. images/) you can only have one S3 Event rule. In simple terms, S3 events cannot be fanned out directly.</li></ul><ul id="fe5fb149-8f44-47c6-b456-e9f946ad05aa" class="bulleted-list"><li style="list-style-type:circle">If you want to send the same S3 event to multiple SQS queues and other AWS services, use SNS.</li></ul><figure id="104a420f-fcc7-4193-ab09-4360769e59de" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20258.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20258.png"/></a></figure></li></ul><ul id="80cb1233-ef4d-463d-938c-d2a58c6f8749" class="bulleted-list"><li style="list-style-type:disc">SNS FIFO + SQS FIFO fan out<p id="1cd65725-6739-4021-bba6-f80377af52cb" class="">Fan out with ordering or messages and deduplication.</p><figure id="93cded50-a47d-4d5f-a9a3-a48e06e2e67f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20259.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20259.png"/></a></figure><figure id="941732f0-b618-4694-9dec-ce55efc6e689" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(453).png"><img style="width:859px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(453).png"/></a></figure></li></ul></details></li></ul><ul id="19dc1e91-cb94-4dc1-b353-8bb94eb17427" class="toggle"><li><details open=""><summary>FIFO Topic</summary><ul id="b0ebaaa7-5a22-43c3-a386-474fba52e477" class="bulleted-list"><li style="list-style-type:disc">FIFO topic guarantees ordering of messages in the topic.</li></ul><ul id="04e7600a-3087-40f0-8080-fb056d17e6d6" class="bulleted-list"><li style="list-style-type:disc">Similar features as SQS FIFO:<ul id="3880a9cb-c498-4bdf-a867-79b2c1bb8e03" class="bulleted-list"><li style="list-style-type:circle">Ordering by Message Group ID (all messages in the same group are ordered)</li></ul><ul id="318d46a2-fc93-4a77-9fad-8a0b567a3b71" class="bulleted-list"><li style="list-style-type:circle">Deduplication using a Deduplication ID or Content Based Deduplication</li></ul></li></ul><ul id="7d9d3c87-ad85-4f45-9644-6a2ca8cfe6d8" class="bulleted-list"><li style="list-style-type:disc">Can only have SQS FIFO queues as subscribers</li></ul><ul id="7eeb9870-2f39-4da7-ac70-4f319efa7db4" class="bulleted-list"><li style="list-style-type:disc">Limited throughput (same throughput as SQS FIFO) because only SQS FIFO queues can read from FIFO topics.</li></ul><ul id="5f6210eb-e931-43d5-9a99-108c43649942" class="bulleted-list"><li style="list-style-type:disc">The topic name must end with <code>.fifo</code></li></ul><figure id="db682ed3-e931-420f-815c-5116bce5efab" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20260.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20260.png"/></a></figure><figure id="5e10e2d7-86ec-4a57-9b36-9be2a5868b94" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(455).png"><img style="width:712px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(455).png"/></a></figure></details></li></ul><ul id="c3309f17-cc18-4d13-b6c3-ca70721773ff" class="toggle"><li><details open=""><summary>Message Filtering</summary><ul id="00981934-f467-4e07-9ab0-2d8cfe528192" class="bulleted-list"><li style="list-style-type:disc">JSON policy used to filter messages sent to SNS topic’s subscriptions.</li></ul><ul id="180c8dd8-30a2-465c-85f0-39e385963dcd" class="bulleted-list"><li style="list-style-type:disc">Each subscriber will have its own filter policy.</li></ul><ul id="4ea6009a-2480-47eb-a5fc-d0253a84159a" class="bulleted-list"><li style="list-style-type:disc">If a subscription doesn’t have a filter policy, it receives every message</li></ul><figure id="c477c156-42a2-47b8-81ff-2e8e23915416" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20261.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20261.png"/></a></figure></details></li></ul><ul id="3b698b18-e97c-40fa-8961-f549572d5b57" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="a57b61a6-25bf-41b0-8fdf-6d65915e1935" class="bulleted-list"><li style="list-style-type:disc">Create an SNS Topic<p id="2c4068eb-7902-467a-903b-3bdb2251789c" class="">SNS → Create Topic</p></li></ul><ul id="9aaa23af-440e-4f42-b233-1ad579d8563e" class="bulleted-list"><li style="list-style-type:disc">Create Subscription<p id="b6f481f0-8cce-4b68-8e82-b815b7735d50" class="">Select the topic → Create subscription</p><p id="c88f26f9-67d6-4701-a70c-5ba0a7a17631" class="">Protocol: email</p><p id="c0eca5bf-bb4c-445c-a712-edbdebca4cce" class="">Subscription filter policy: configure if you want to filter messages received by this subscriber</p></li></ul></details></li></ul></details></li></ul><ul id="6b04174b-93a4-438f-abe5-ffa963472f4b" class="toggle"><li><details open=""><summary>Kinesis</summary><ul id="b3792026-9b33-43d9-9474-08361ce83d51" class="toggle"><li><details open=""><summary>Intro</summary><p id="a8daff8d-54ce-413a-a8e4-fcef9a681f87" class="">Amazon Kinesis Data Streams (KDS) is a massively scalable and durable real-time data streaming service. It can continuously capture gigabytes of data per second from hundreds of sources such as website clickstreams, database event streams, financial transactions, social media feeds, IT logs, and location-tracking events.</p><ul id="07f50810-dee5-480c-9404-367f47b40df9" class="bulleted-list"><li style="list-style-type:disc">Makes it easy to collect, process, and analyze streaming data in real-time</li></ul><ul id="30d46eca-de61-46a9-98da-69de8cc2c4f7" class="bulleted-list"><li style="list-style-type:disc">Ingest real-time data such as: Application logs, Metrics, Website clickstreams, loT telemetry data, etc.</li></ul><ul id="32dc78e4-c5e7-4eb4-b9ca-33758d1c7858" class="bulleted-list"><li style="list-style-type:disc">Four services:<figure id="b56c936d-e2e9-4799-bd2b-9aab18dc54be" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20262.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20262.png"/></a></figure></li></ul></details></li></ul><ul id="2c78ac03-c8f3-45c0-ac86-a4a29ef10780" class="toggle"><li><details open=""><summary>Kinesis Data Streams</summary><ul id="8309c993-15aa-4bfb-a6c9-521f768ebb96" class="bulleted-list"><li style="list-style-type:disc">Kinesis streams scale their throughput using shards. The more the number of shards, higher the throughput (manual scaling).</li></ul><ul id="66f3f535-ae51-42eb-9066-406b0a67cc85" class="bulleted-list"><li style="list-style-type:disc">Mostly used to ingest data in real time</li></ul><ul id="3a34913b-3185-47f6-b496-af41084895a3" class="bulleted-list"><li style="list-style-type:disc">Producers could be applications, or client. They use the SDK, Kinesis Producer Library (KPL) or Kinesis Agent to publish a record on the stream. A record consists of a partition key (used to partition data coming from multiple publishers) and data blob (max 1MB).</li></ul><ul id="5c918b87-4997-435d-ab0a-93605740090b" class="bulleted-list"><li style="list-style-type:disc">Throughput of publishing on a stream will be 1MB/sec per shard or 1000 msg/sec per shard.</li></ul><ul id="849701b7-5716-4423-b994-5758bbb98f8f" class="bulleted-list"><li style="list-style-type:disc">Consumers use the SDK or Kinesis Client Library (KCL) to consume the records. Consumption throughput could be of two types as mentioned below (second one has higher throughput but more expensive).</li></ul><ul id="445f673b-0917-4a47-ad80-2186d7f83269" class="bulleted-list"><li style="list-style-type:disc">Billing is per shard provisioned, can have as many shards as you want</li></ul><ul id="ad4895f3-55b7-4889-a664-5c4a142428f0" class="bulleted-list"><li style="list-style-type:disc">Retention between 1 day (default) to 365 days</li></ul><ul id="a333c491-a614-48db-90ef-03b056be89cf" class="bulleted-list"><li style="list-style-type:disc">Ability to reprocess (replay) data</li></ul><ul id="e9c425b2-0be3-49de-9be8-05f094eef1ce" class="bulleted-list"><li style="list-style-type:disc">Once data is inserted in Kinesis, it can’t be deleted (immutability)</li></ul><ul id="5839610a-546a-4bfb-a2ea-de41fc5bb40f" class="bulleted-list"><li style="list-style-type:disc">Data that shares the same partition goes to the same shard (ordering)</li></ul><figure id="9c1e9dfe-29d3-44a7-884d-024b7f253c57" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20263.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20263.png"/></a></figure><figure id="155ed8ed-c210-46d6-9386-3eae24438432" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(456).png"><img style="width:1678px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(456).png"/></a></figure><figure id="1d7877b9-b23f-4613-b0a1-c672f1ab9172" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(457).png"><img style="width:946px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(457).png"/></a></figure></details></li></ul><ul id="f13c482e-144e-4d9b-858c-02f8b89165a2" class="toggle"><li><details open=""><summary>Kinesis Data Firehose</summary><ul id="1ddeba46-ebef-4b01-afcd-9f149fdadb03" class="bulleted-list"><li style="list-style-type:disc">Firehose is used to store data into a target location.</li></ul><ul id="f39309e7-e762-4e0f-8be8-ee983d8ce4b5" class="bulleted-list"><li style="list-style-type:disc">Firehose writes data in batches efficiently (not real time).</li></ul><ul id="8cca1fa8-febd-4a0e-a21f-efa7bdaffbc3" class="bulleted-list"><li style="list-style-type:disc">Fully Managed Service, no administration required, automatic scaling, serverless</li></ul><ul id="487090b1-f204-4dbe-bca0-44d1f08671a0" class="bulleted-list"><li style="list-style-type:disc">Destinations:<ul id="83e046a5-34d2-4caf-b392-aba345a4f325" class="bulleted-list"><li style="list-style-type:circle">AWS: Redshift, Amazon S3, ElasticSearch</li></ul><ul id="29fb2692-3320-46b4-a9be-d5c961a07b33" class="bulleted-list"><li style="list-style-type:circle">3rd party partner: Splunk, MongoDB, DataDog, NewRelic, etc.</li></ul><ul id="57b6761a-b0c8-4027-b856-9365a3677fd6" class="bulleted-list"><li style="list-style-type:circle">Custom: send to any HTTP endpoint</li></ul></li></ul><ul id="78c28995-7486-4b0e-9bf7-55a403d9ca8e" class="bulleted-list"><li style="list-style-type:disc">Pay for data going through Firehose, provisioning not required</li></ul><ul id="6a5e341d-80d9-4f67-b673-0b0e392726fc" class="bulleted-list"><li style="list-style-type:disc">Near Real Time (60 seconds latency minimum) for non full batches (limited throughput) or if the data is &lt; 1 MB. These number can be configured, but these are the minimum values. Higher the buffer size (batch size), higher the write efficiency.</li></ul><ul id="156bc99d-1dfe-4471-98b4-d2b36dc3a3aa" class="bulleted-list"><li style="list-style-type:disc">Supports many data formats, conversions, transformations, compression</li></ul><ul id="d089f861-36d0-40ec-a3b8-9cad669e2e23" class="bulleted-list"><li style="list-style-type:disc">Supports custom data transformations using AWS Lambda</li></ul><ul id="74d96472-cabe-4b43-8df5-2391eeb1a38d" class="bulleted-list"><li style="list-style-type:disc">Can send failed or all data to a backup S3 bucket</li></ul><figure id="f55228d2-f404-4245-a8fb-59fd70fc17c7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20264.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20264.png"/></a></figure></details></li></ul><ul id="0c1db692-8a04-4fe1-b836-4effdf75ac77" class="toggle"><li><details open=""><summary>Data Stream vs Firehose</summary><figure id="ae522473-5f12-442f-b74e-33756b7a887d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20265.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20265.png"/></a></figure></details></li></ul><ul id="d750b75f-91f0-48e2-977a-2406a5b1b462" class="toggle"><li><details open=""><summary>Ordering data into Kinesis</summary><p id="fede5d1b-f218-4a0f-acf6-2f4f2c626cd3" class="">Imagine you have 100 trucks each having unique ID (truck_1 truck_2, truck_100) on the road sending their GPS positions regularly into AWS. You want to consume the data in order for each truck, so that you can track their movement accurately. How should you send that data into Kinesis?</p><p id="5f6c35fd-36ce-4d00-a50d-9b7e0d22d079" class="">Answer: send using a “Partition Key” = value of the “truck id”. The same key will always go to the same shard. Which key should go to which shard is determined by Kinesis using a hash function. Data will be ordered in each shard.</p><p id="78aea692-3612-401b-8b0f-72d542ee7942" class="">💡 Number of consumers = number of shards (one consumer per shard)</p><figure id="87e9df4b-93e0-4289-9210-2ab31b6d6ee8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20266.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20266.png"/></a></figure><p id="f16178c9-02a0-44b1-ab44-b999de4d4347" class="">It’s better to solve the above problem using a SQS FIFO queue.</p><ul id="f8dd3291-cc62-4e83-affa-a30fa004ee79" class="bulleted-list"><li style="list-style-type:disc">You only have one SQS FIFO queue<ul id="eec60c76-ecb6-4ce1-b9bf-a38ab09346bb" class="bulleted-list"><li style="list-style-type:circle">You will have 100 Group ID</li></ul><ul id="f625d2d3-2a38-43e8-b309-3044811262d1" class="bulleted-list"><li style="list-style-type:circle">You can have up to 100 Consumers (due to the 100 Group ID)</li></ul><ul id="05c3ab37-e199-42ac-91a8-a52b4c336d6a" class="bulleted-list"><li style="list-style-type:circle">You have up to 300 messages per second (or 3000 if using batching) - throughput limitation</li></ul></li></ul><figure id="b3009615-5be4-47ac-a018-8f57eb12b829" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(458).png"><img style="width:819px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(458).png"/></a></figure></details></li></ul><ul id="2341cbc2-5cc8-41e7-aef0-f53333d0dd53" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="b60d8469-6a4b-4d6d-ac22-46c0517f7a1e" class="bulleted-list"><li style="list-style-type:disc">Create a Kinesis Data Stream</li></ul><ul id="0b3b5361-1a6e-4c49-bae3-3915f1ee917b" class="bulleted-list"><li style="list-style-type:disc">Create a Kinesis Firehose and configure it to read data from the data stream and write into an S3 bucket.</li></ul></details></li></ul></details></li></ul><ul id="7df373e5-5d90-48ae-a59f-2380e101930c" class="toggle"><li><details open=""><summary>SQS vs SNS vs Kinesis</summary><figure id="45ce66d1-db67-4f32-87e9-91fb3d302289" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20267.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20267.png"/></a></figure></details></li></ul><ul id="2d18bcdd-e8a4-4621-bad7-a39a848d39d8" class="toggle"><li><details open=""><summary>Amazon MQ</summary><ul id="b3891b54-7546-4a08-a390-1f3913b66823" class="bulleted-list"><li style="list-style-type:disc">SQS &amp; SNS are “cloud-native” services, and they’re using proprietary protocols from AWS that are not standards in the market.</li></ul><ul id="41f6583e-d1d1-4a89-b94a-437c5f9e2e2e" class="bulleted-list"><li style="list-style-type:disc">If you have some traditional applications running from on-premise, they may use open protocols such as: MQTT, AMQP, STOMP, Openwire, WSS, etc.</li></ul><ul id="15aa0adb-443a-42df-adcd-4c835fba3f6a" class="bulleted-list"><li style="list-style-type:disc">When migrating to the cloud, instead of re-engineering the application to use SQS and SNS, we can use Amazon MQ (managed Apache ActiveMQ)</li></ul><ul id="70735383-494f-4080-a91b-14875f635198" class="bulleted-list"><li style="list-style-type:disc">Amazon MQ is a managed message broker service for RabbitMQ, Active MQ</li></ul><ul id="2a9bab72-c443-4d9a-bc56-a0f78e07442f" class="bulleted-list"><li style="list-style-type:disc">Amazon MQ doesn’t “scale” as much as SQS / SNS because it is provisioned</li></ul><ul id="f0c98f02-3dba-4592-99e6-79678d8c307a" class="bulleted-list"><li style="list-style-type:disc">Amazon MQ runs on a dedicated machine, can run in HA (high availability) with failover</li></ul><ul id="bc825d3c-0ba3-4769-8e02-c9495bd71ee9" class="bulleted-list"><li style="list-style-type:disc">Amazon MQ has both queue feature (SQS) and topic features (SNS)</li></ul><ul id="af0376e3-e936-42d9-a726-82b724a8bb33" class="bulleted-list"><li style="list-style-type:disc">High availability in Amazon MQ works by leveraging MQ broker in multi AZ (active and standby). EFS (NFS that can be mounted to multi AZ) is used to keep the files safe in case the main AZ is down. If the main AZ is down, failover happens.<figure id="dd055589-5ccf-4c19-9b0a-f4664e483452" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20268.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20268.png"/></a></figure></li></ul></details></li></ul></div><h3 id="ec188381-d2ee-4cf8-906d-651d986df79d" class=""><details open=""><summary>Section 19: Containers on AWS: ECS, Fargate, ECR &amp; EKS</summary></details></h3><div class="indented"><ul id="f0c72085-56ec-4462-9b4b-a8e36a9e4b35" class="toggle"><li><details open=""><summary>Docker</summary><ul id="495a1f9d-1d79-4b78-b409-f53fea242780" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3111db5b-f021-4178-b9d9-178001f101f9" class="bulleted-list"><li style="list-style-type:disc">Docker is a software development platform to deploy apps</li></ul><ul id="c92feb61-f46e-4f24-aedf-18d6ff224b80" class="bulleted-list"><li style="list-style-type:disc">Apps are packaged in containers that can be run on any OS</li></ul><ul id="a41f3833-27d0-4555-8b85-da260c9ad3f4" class="bulleted-list"><li style="list-style-type:disc">Apps run the same, regardless of where they’re run<ul id="3d1e97cd-d968-41b3-ac25-f9ca685abdb5" class="bulleted-list"><li style="list-style-type:circle">Any machine</li></ul><ul id="05db65f1-a718-4125-b15a-f1d4dc523180" class="bulleted-list"><li style="list-style-type:circle">No compatibility issues</li></ul><ul id="3b4a7a28-2d76-4ced-b329-37b0cbc57a07" class="bulleted-list"><li style="list-style-type:circle">Predictable behavior</li></ul><ul id="45c77603-3ce5-47a4-ac46-778c877f884b" class="bulleted-list"><li style="list-style-type:circle">Less work</li></ul><ul id="550e88d3-2f7c-46f6-8d06-a6077414f816" class="bulleted-list"><li style="list-style-type:circle">Easier to maintain and deploy</li></ul><ul id="21839a4e-3f5b-4ddd-b5ea-2a947fa90a40" class="bulleted-list"><li style="list-style-type:circle">Works with any language, any OS, any technology</li></ul></li></ul><ul id="d582444d-d0ad-44df-990a-cad0dfdaf7af" class="bulleted-list"><li style="list-style-type:disc">We can run a bunch of Docker containers on an EC2 instance. These docker containers could internally be running anything. But from the EC2 instance’s perspective, it only sees docker containers.<figure id="e22c20aa-c9a3-430e-9511-f9af836cbe76" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20269.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20269.png"/></a></figure></li></ul><ul id="61eb26b2-3b32-42af-9665-16526614ef50" class="bulleted-list"><li style="list-style-type:disc">Docker containers are created from Docker images which are stored in Docker Repositories.</li></ul><ul id="3873d1f7-97fc-43e1-aa63-158fbf54444f" class="bulleted-list"><li style="list-style-type:disc">Docker Repositories:<ul id="b1880aaf-15f9-4d91-8915-92ad8f3ca250" class="bulleted-list"><li style="list-style-type:circle">Public:<ul id="685b94ea-7ced-4d6b-bf94-216e6bed0301" class="bulleted-list"><li style="list-style-type:square">Docker Hub <a href="https://hub.docker.com/">https://hub.docker.com/</a> where we can find base images for many technologies or OS like Ubuntu, Java, MySQL, NodeJS, etc.</li></ul><ul id="ca894aec-3d66-4a6e-a1f9-c4a0d6c98659" class="bulleted-list"><li style="list-style-type:square">Public: Amazon ECR Public</li></ul></li></ul><ul id="1fc3dfe5-2778-4917-8151-39361f5774aa" class="bulleted-list"><li style="list-style-type:circle">Private:<ul id="b360c8d7-db21-416c-b9c5-d252e32406d6" class="bulleted-list"><li style="list-style-type:square">Amazon ECR (Elastic Container Registry)</li></ul></li></ul></li></ul></details></li></ul><ul id="a1a6d57a-7d91-419e-882e-7ae9a3431ce9" class="toggle"><li><details open=""><summary>Docker vs VM</summary><ul id="7b5907f4-f56c-4d31-8f73-4638b3db792d" class="bulleted-list"><li style="list-style-type:disc">Docker is “sort of” a virtualization technology, but not exactly</li></ul><ul id="933cdf6f-adc0-4621-ae59-20a378ee510c" class="bulleted-list"><li style="list-style-type:disc">In case of VMs, every virtual OS is isolated from each other. They don’t share resources.</li></ul><ul id="61cb2989-79c2-4407-9dd2-b7c2fca99aba" class="bulleted-list"><li style="list-style-type:disc">In case of Docker, many lightweight containers share the same resource. So, we can run many containers on the same hardware.</li></ul><figure id="c6c05c04-cef3-4c2c-82a8-65d51677fcde" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20270.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20270.png"/></a></figure></details></li></ul><ul id="0ab5a97f-f34f-44e9-9fb1-c667b2eee82a" class="toggle"><li><details open=""><summary>Docker lifecycle</summary><ul id="7d20e3f0-cf3c-49f6-886e-bac49410a082" class="bulleted-list"><li style="list-style-type:disc">First create a docker file</li></ul><ul id="38fbdf82-3cc6-40f1-b46d-383ba202a9f5" class="bulleted-list"><li style="list-style-type:disc">Building the docker file will give docker image</li></ul><ul id="1c73223a-4861-456d-9b9b-a8f3be147874" class="bulleted-list"><li style="list-style-type:disc">Running the docker image will give docker container</li></ul><ul id="96cfbc3a-8ac6-4aa5-b589-ea7df864b2a3" class="bulleted-list"><li style="list-style-type:disc">Optionally, you can push the docker image to a repository and pull from there and run.</li></ul><figure id="3b18458d-bc1b-4f4a-b7c4-5bbb21c992dc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20271.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20271.png"/></a></figure></details></li></ul></details></li></ul><ul id="6a44e8ed-7ece-47fe-b6d9-a1f62a661431" class="toggle"><li><details open=""><summary>ECS - Elastic Container Service</summary><ul id="0400b9a1-b138-45a4-97df-aea6e210a4da" class="toggle"><li><details open=""><summary>Intro</summary><ul id="dfbae679-6db1-4320-9907-214e676d5beb" class="bulleted-list"><li style="list-style-type:disc">Allows us to launch Docker containers on AWS</li></ul><ul id="fffb601d-be57-40fa-b191-5cc1667c0847" class="bulleted-list"><li style="list-style-type:disc">You must provision &amp; maintain the infrastructure (EC2 instances)</li></ul><ul id="994d8d3b-e33c-495f-b1f1-26f80a71930a" class="bulleted-list"><li style="list-style-type:disc">AWS takes care of starting / stopping containers</li></ul><ul id="44f0749b-ec4c-4016-b2a0-bf177541e9bc" class="bulleted-list"><li style="list-style-type:disc">ECS has integrations with ALB</li></ul><ul id="21427ce3-43a2-41a2-bbc5-97fba7f34f84" class="bulleted-list"><li style="list-style-type:disc">The EC2 instances will be the underlying hardware for containers to run. When a new container is to be launched, ECS will check all the available EC2 instances to check for available resources to determine where to launch the container.<figure id="0a6cae03-e51b-43ae-abab-226b2061e9ba" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20272.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20272.png"/></a></figure></li></ul></details></li></ul><ul id="d6e1ac87-dde8-4b82-b3a6-f559f4665467" class="toggle"><li><details open=""><summary>Launch Types</summary><ul id="5cc8be3b-3ab6-4b84-b595-4b586685ccff" class="toggle"><li><details open=""><summary>Amazon EC2 launch type for ECS</summary><figure id="1dfccc2d-507c-492c-afab-cbcc178b8a76" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(459).png"><img style="width:1755px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(459).png"/></a></figure><p id="d5cfcafd-bd0e-4535-93d1-fea051efbcf1" class="">
</p><p id="a22aff0c-c5e7-4975-b2e4-2b0d86bd42b7" class="">new →</p><p id="f2bb5e4c-d323-4952-9f7f-833a3eff66cf" class="">Inside a VPC spanning multiple AZ, there is an ECS cluster spanning multiple AZ. Inside the ECS cluster, there will be an ASG responsible for launching container instances (EC2). On every EC2 instance, ECS agent will be running (happens automatically if you choose the AMI for ECS when launching the instance) which registers these instances to the ECS cluster. This will allow the ECS cluster to run Docker containers (ECS tasks) on these instances.</p><figure id="0b3e4886-315a-4e59-8f35-ff22455e11cf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20273.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20273.png"/></a></figure></details></li></ul><ul id="470778ba-78d7-4069-bdfe-b1ae9d7cba0b" class="toggle"><li><details open=""><summary>Fargate launch type for ECS</summary><figure id="71faeb96-070a-4537-af34-d6782bf4e20a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(460).png"><img style="width:930px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(460).png"/></a></figure><p id="d5f0715e-abca-4035-a21d-afc56f0d7a25" class="">
</p><p id="644b24b5-9861-4c6c-90c5-d44601c20079" class="">new →</p><p id="85937c72-bddc-4e38-a11a-80b795c4e07d" class="">VPC and ECS cluster are setup the same way as in EC2 launch type, but instead of using ASG with EC2 instances, we have a Fargate cluster spanning multiple AZ. The fargate cluster will run ECS tasks anywhere within the cluster and attach an ENI (with a unique private IP) to each task. So, if we have a lot of ECS tasks, we need sufficient free private IPs.</p><figure id="28e15e25-bb5d-44bd-b2d4-58a39f9504ff" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20274.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20274.png"/></a></figure></details></li></ul></details></li></ul><ul id="746a5021-2568-4b16-bc07-4c3350ce3589" class="toggle"><li><details open=""><summary>Fargate</summary><ul id="723cf5cf-220e-44e7-a894-7a179f320c6f" class="bulleted-list"><li style="list-style-type:disc">Launch Docker containers on AWS without worrying about infrastructure management</li></ul><ul id="3e31ca4d-6742-444d-91ae-8631451ca998" class="bulleted-list"><li style="list-style-type:disc">You do not provision the infrastructure (no EC2 instances to manage) - simpler</li></ul><ul id="ad0f2ee6-4064-4413-9b0c-8759a8684aba" class="bulleted-list"><li style="list-style-type:disc">Serverless</li></ul><ul id="5d9a2df7-7351-4828-a3a9-7844bba7a96f" class="bulleted-list"><li style="list-style-type:disc">AWS just runs containers for you based on the CPU / RAM you need. You won’t know where these containers are running.</li></ul><figure id="a414f8e4-2f00-4e34-b2f8-aa5bb1074317" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20275.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20275.png"/></a></figure></details></li></ul><ul id="d9129d34-7adc-4705-b5ed-603c1b868b0c" class="toggle"><li><details open=""><summary>IAM Roles for ECS tasks</summary><ul id="d7c45ed2-f6f3-4b47-889b-e1a2de5dff12" class="toggle"><li><details open=""><summary>EC2 Instance Profile (IAM role for the EC2 instance):</summary><ul id="b45d5e48-3eba-4799-83ca-8285ed5abe64" class="bulleted-list"><li style="list-style-type:disc">Used by the ECS agent to:<ul id="b8aa578f-d37c-43d5-9649-242c85e9d280" class="bulleted-list"><li style="list-style-type:circle">Make API calls to ECS service</li></ul><ul id="4938be6a-9599-40be-9def-df5c24b4687b" class="bulleted-list"><li style="list-style-type:circle">Send container logs to Cloud Watch Logs</li></ul><ul id="f2eb2fb7-da6c-4c9b-9995-75b9100a94c8" class="bulleted-list"><li style="list-style-type:circle">Pull Docker image from ECR</li></ul><ul id="7ac4d2bf-6a7c-4ee6-90b6-8534d7650462" class="bulleted-list"><li style="list-style-type:circle">Reference sensitive data in Secrets Manager or SSM Parameter Store</li></ul></li></ul></details></li></ul><ul id="1e926e72-c7f6-47c1-8168-986eeff6eea2" class="toggle"><li><details open=""><summary>ECS Task Role:</summary><ul id="c4434d32-b35e-4ee8-825f-b924d684f2b3" class="bulleted-list"><li style="list-style-type:disc">ECS Task Role allows the ECS tasks to access resources within AWS.</li></ul><ul id="dd0deded-500e-430c-ab91-c3f7bcf55d7b" class="bulleted-list"><li style="list-style-type:disc">Allow each task to have a specific role</li></ul><ul id="af9068fb-5d4b-49fb-8338-8a38ae18696d" class="bulleted-list"><li style="list-style-type:disc">Use different roles for the different ECS Services you run</li></ul><ul id="335f6cfb-3c57-424e-bc69-0bbc0040a884" class="bulleted-list"><li style="list-style-type:disc">Task Role is defined in the task definition</li></ul></details></li></ul><figure id="49ddd600-322e-4202-b2d2-1c50f18e7dd8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(461).png"><img style="width:411px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(461).png"/></a></figure></details></li></ul><ul id="476320bb-398e-4039-bf3d-8ac2d8be9a9b" class="toggle"><li><details open=""><summary>Load Balancing</summary><ul id="09403dfa-1c5e-4554-b495-b906f9a0a5e8" class="toggle"><li><details open=""><summary>Load Balancing for EC2 launch type</summary><ul id="06e9ebec-9c1f-4879-a098-75c0b056ce9c" class="bulleted-list"><li style="list-style-type:disc">Dynamic port is assigned to randomly ECS tasks</li></ul><ul id="5db1ca10-9b35-4571-bd73-bd6e91462cc6" class="bulleted-list"><li style="list-style-type:disc">Once the ALB is registered to a service in the ECS cluster, it will find the right port on your EC2 Instances</li></ul><ul id="523beeda-2249-4110-bdd3-b5b6138e7011" class="bulleted-list"><li style="list-style-type:disc">You must allow on the EC2 instance’s security group any port from the ALB security group because it may attach on any port.</li></ul><figure id="281604c4-c506-4b4c-8de3-606dfa6cf71f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20276.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20276.png"/></a></figure></details></li></ul><ul id="5a0dd50f-babf-4e7f-8a42-e9662271da6d" class="toggle"><li><details open=""><summary>Load Balancing for Fargate launch type</summary><ul id="c5e5d79b-26a8-4117-93c7-057bcf0575a8" class="bulleted-list"><li style="list-style-type:disc">Each task has a unique IP but same port (80)</li></ul><ul id="8268c5ea-b502-416c-9e7d-89d8d0ad188c" class="bulleted-list"><li style="list-style-type:disc">You must allow on the ENI’s security group the task port (80) from the ALB security group</li></ul><figure id="94bb128e-47b7-49c1-ad17-c2dd069ace8d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20277.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20277.png"/></a></figure></details></li></ul></details></li></ul><ul id="af744de0-5646-4ecf-9d07-8942892d4218" class="toggle"><li><details open=""><summary>ECS + EFS</summary><ul id="c1bb71e1-f7c5-4eec-91d8-6b3d845f71b4" class="bulleted-list"><li style="list-style-type:disc">EFS volumes are used as storage for ECS tasks</li></ul><ul id="ffd8e09a-8a1b-4fb9-9c2a-3a296a27c56c" class="bulleted-list"><li style="list-style-type:disc">Works for both EC2 Tasks and Fargate tasks</li></ul><ul id="b947a84b-d03b-40bf-8aea-70716a2abc10" class="bulleted-list"><li style="list-style-type:disc">Ability to mount EFS volumes onto tasks</li></ul><ul id="afac9e09-5eef-4463-8292-322c82059e27" class="bulleted-list"><li style="list-style-type:disc">Tasks launched in any AZ will be able to share the same data in the EFS volume since EFS spans multi AZ.</li></ul><ul id="1dcab1aa-1dcc-4ed1-9bea-fcde49ba8191" class="bulleted-list"><li style="list-style-type:disc">Fargate + EFS ⇒ serverless + data storage without managing servers</li></ul><ul id="b07dcbc8-e88b-4eac-bc2a-4753aa019b4d" class="bulleted-list"><li style="list-style-type:disc">Use case: persistent multi-AZ shared storage for your containers</li></ul><ul id="54a8002a-1607-43e8-8968-ab774d847b2d" class="bulleted-list"><li style="list-style-type:disc">AWS S3 cannot be mounted as a file system.<figure id="644a0441-7e3c-472e-bc17-42c776836aa7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(462).png"><img style="width:336px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(462).png"/></a></figure></li></ul></details></li></ul><ul id="1e904c51-081e-4285-8700-27f30fce3dc7" class="toggle"><li><details open=""><summary>Scaling</summary><ul id="64a411a9-1f09-4da2-82e8-b218ef9b6486" class="toggle"><li><details open=""><summary>ECS Service Auto Scaling</summary><figure id="84646edf-3a5a-47f1-a092-990994c22a95" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(463).png"><img style="width:927px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(463).png"/></a></figure><figure id="89ecda59-a49c-4ad7-9166-f5d555523381" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(464).png"><img style="width:920px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(464).png"/></a></figure><figure id="c3a67385-acda-49c9-95c0-24dd1a7858b2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(465).png"><img style="width:1782px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(465).png"/></a></figure></details></li></ul><p id="8145981e-4b32-497e-bca7-1b441327c54f" class="">
</p><p id="69701420-69ae-4cf9-a131-7f3f366aece8" class="">new →</p><ul id="d603df46-9678-41c1-842f-c0e2672b4877" class="toggle"><li><details open=""><summary>Fargate - on Service CPU usage</summary><p id="e5c813a2-5ca8-43c3-8c39-6ff78b813df9" class="">Only need to scale the service by adding more tasks</p><figure id="650a2b6f-8205-4269-9a67-fe8b244a7fd6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20278.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20278.png"/></a></figure><p id="9253bfb9-6fd9-4b46-8ba7-2ed6d4989bed" class="">Untitled</p></details></li></ul><ul id="9a41f512-d0b6-40ba-a5c6-040147826eab" class="toggle"><li><details open=""><summary>EC2 - on Service CPU usage</summary><p id="76265b39-e8a9-4999-90d4-da7a707e16a3" class="">Along with the service, we also need to scale the ECS cluster by adding more EC2 instances otherwise we will run out of resources to run new tasks.</p><figure id="c635273a-2ee7-403b-98e2-e33cfbdbab10" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20279.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20279.png"/></a></figure><p id="7b53c6f3-e755-4f1e-bceb-7482e216ee92" class="">Untitled</p></details></li></ul><ul id="b5ea81cb-5547-41dd-a71f-305040eed6cf" class="toggle"><li><details open=""><summary>Fargate - on SQS queue length</summary><figure id="66602043-a2ad-407a-84a8-60c0eeeab495" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20280.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20280.png"/></a></figure><p id="64d2a521-09c7-4151-8e34-ee4c987344d3" class="">Untitled</p></details></li></ul><ul id="6876c4da-9df4-4009-ab32-cd57fc1a38c7" class="toggle"><li><details open=""><summary>EC2 - on SQS queue length</summary><figure id="0a4e4e00-278d-499a-9d19-a4e2e75478c0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20281.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20281.png"/></a></figure><p id="65a023a2-92ac-49d2-8387-579d0a0fbe0f" class="">Untitled</p></details></li></ul></details></li></ul><ul id="1877bb37-37c7-42e9-bfe6-413adce750af" class="toggle"><li><details open=""><summary>ECS Tasks invoked by EventBridge</summary><p id="1a9ba3de-bb3e-43e8-bbb9-fa52a7f50c83" class="">Example: When the user uploads an object to S3, create an ECS task to process the object and store the result in DynamoDB.</p><figure id="628fb9e5-809a-4657-bd8e-c7db234366cc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20282.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20282.png"/></a></figure><figure id="b76f9c55-22bc-4a99-924b-5bc4bf6b8344" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(466).png"><img style="width:872px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(466).png"/></a></figure><figure id="f5991592-1565-460c-9266-f862d8b7bd59" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(467).png"><img style="width:885px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(467).png"/></a></figure></details></li></ul><p id="a09582ae-6a3a-4131-885f-a7fe18b8da65" class="">
</p><p id="e5a5ad4d-db7a-43ba-a6d7-4a8abf0ddaae" class="">new →</p><ul id="2a13dc15-9e4e-4b57-96cd-8ef1bf724464" class="toggle"><li><details open=""><summary>ECS Services &amp; Tasks</summary><p id="bcd0a828-cbf2-445a-bf5c-cfeaaa31128d" class="">Inside the ECS cluster, we can have multiple services running which span multiple instances each running some tasks. We can use ALBs to send requests to each of these tasks.</p><figure id="48dfd9ab-b6e0-404e-9334-fd387ee35efa" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20283.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20283.png"/></a></figure></details></li></ul><ul id="98e4a0fa-5490-493b-bb53-33c7a631aa60" class="toggle"><li><details open=""><summary>Rolling Updates</summary><p id="d8746ca6-08cd-43a9-b138-4ceacd118315" class="">When we need to update an ECS service, we need to do it gradually to avoid system downtime.</p><p id="131ec04f-61ba-4f5e-9f1d-48489cfb613f" class="">In the ECS service update screen, we have two settings:</p><ul id="fd7eb1c5-e387-4daf-9f79-3730d8d1f57f" class="bulleted-list"><li style="list-style-type:disc">Minimum healthy percentage - determines how many tasks, running the current version, we can terminate while staying above the threshold.</li></ul><ul id="c7477689-1440-4cc8-ac89-113e39d9d0bd" class="bulleted-list"><li style="list-style-type:disc">Maximum percentage - determines how many new tasks, running the new version, we can launch while staying below the threshold.</li></ul><figure id="686046bb-b48a-4da6-bb9f-d82bfb12006d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20284.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20284.png"/></a></figure><p id="68ba68f4-ec65-4c32-b1f4-759186c98726" class="">Untitled</p><p id="659f9f43-0172-4889-8ac0-33416fded92e" class="">Example: Min: 50% and Max: 100% and starting number of tasks 4</p><figure id="ee615aed-91c3-4676-ac04-22bf3abb5922" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20285.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20285.png"/></a></figure><p id="ebc19dbe-4a86-4f4d-a0f6-1e44c44b2205" class="">Untitled</p><p id="8281d97f-0b5d-44c3-974f-54e435e2841b" class="">Example: Min: 100% and Max: 150% and starting number of tasks 4</p><figure id="714e15ae-e1c3-4f37-bfdc-0e9758feaa2d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20286.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20286.png"/></a></figure><p id="0a0da1f1-2f2b-4c28-8b42-de0bcccd1905" class="">Untitled</p></details></li></ul><ul id="eb2127d0-5759-4586-a92d-86a8075e78fd" class="toggle"><li><details open=""><summary>Hands on</summary><p id="5d6b5803-aac9-49bb-941d-a92ad85af594" class="">ECS → Get started → Create a sample app</p><p id="985f1817-6dd1-4197-8b8e-165d40a4f528" class="">This will create an ECS cluster.</p><p id="5b81f66e-f76b-44b7-963f-eeeb547a1c32" class="">Once ready, the public IP of the task can be used to request the container on port 80.</p><figure id="b0e22228-7ac8-4e36-af8e-c4f1a9e4d6e0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20287.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20287.png"/></a></figure><p id="3165cc7a-8e12-49b6-a8fa-6a196870f3a4" class="">Untitled</p></details></li></ul></details></li></ul><ul id="a0700365-aabd-4df8-ac21-b81f955b70f0" class="toggle"><li><details open=""><summary>ECR - Elastic Container Registry</summary><ul id="9534c4d7-b4c4-46c6-89a0-35e8de5f0a47" class="bulleted-list"><li style="list-style-type:disc">It is a AWS managed Docker repository</li></ul><ul id="d2efb9a8-3b84-4e3b-bce2-c545d97a34cf" class="bulleted-list"><li style="list-style-type:disc">Store, manage and deploy containers on AWS</li></ul><ul id="a7e669a5-0c3f-4ca9-a624-55270c30a974" class="bulleted-list"><li style="list-style-type:disc">Only pay for the storage you use to store docker images</li></ul><ul id="60ecf60e-b669-4d63-a49f-ecb26002144e" class="bulleted-list"><li style="list-style-type:disc">Fully integrated with ECS &amp; IAM for security</li></ul><ul id="634a22ea-c865-47f3-8b56-add957dad433" class="bulleted-list"><li style="list-style-type:disc">Storage is backed by Amazon S3</li></ul><ul id="a94b9e11-e51e-4036-b084-2fc467840e79" class="bulleted-list"><li style="list-style-type:disc">Supports image vulnerability scanning, version, tag, image lifecycle</li></ul><ul id="f29c1434-f08b-4553-b3b0-3523317e8338" class="bulleted-list"><li style="list-style-type:disc">Whenever a task has to be created, the image is pulled from the ECR. IAM role is used for security.</li></ul><ul id="7c53439d-8ca5-49ee-a6cc-b6a7aac07568" class="bulleted-list"><li style="list-style-type:disc">We can upload Docker images on ECR manually from our systems or we can use a CICD service like CodeBuild.<figure id="86bf9e01-0543-4bc6-8488-fa65701a856d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20288.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20288.png"/></a></figure></li></ul></details></li></ul><ul id="3c26ce4d-d6ea-4012-bf5c-be5c84f68ba4" class="toggle"><li><details open=""><summary>EKS - Elastic Kubernetes Service</summary><ul id="f0d03da4-6000-41f2-940c-c9116752d948" class="bulleted-list"><li style="list-style-type:disc">Amazon’s managed Kubernetes (open source)</li></ul><ul id="1f6b3cca-bcda-460f-8b0f-9104a775bc6b" class="bulleted-list"><li style="list-style-type:disc">It is a way to launch managed Kubernetes clusters on AWS</li></ul><ul id="9cea9369-833f-4698-ad47-94048c088175" class="bulleted-list"><li style="list-style-type:disc">Kubernetes is an open-source system for automatic deployment, scaling and management of containerized (usually Docker) applications</li></ul><ul id="688e05e2-120d-44c3-8444-070fd38ce04c" class="bulleted-list"><li style="list-style-type:disc">It’s an alternative to ECS, similar goal but different API</li></ul><ul id="79fce6c2-3e23-487c-95cc-029f189d9429" class="bulleted-list"><li style="list-style-type:disc">EKS supports EC2 if you want to to deploy worker nodes or Fargate to deploy serverless containers inside the EKS cluster</li></ul><ul id="87a1a50d-f4d1-41bf-b855-6cc6a5b71036" class="bulleted-list"><li style="list-style-type:disc">Use case: if your company is already using Kubernetes on-premises or in another cloud, and wants to migrate to AWS using Kubernetes</li></ul><ul id="6c1a1ea9-02cf-49d3-a047-08444620b388" class="bulleted-list"><li style="list-style-type:disc">Kubernetes is cloud-agnostic (can be used in any cloud provider). So, it is much more standardized.</li></ul><ul id="694ebf68-b2a4-4fff-967e-6a1fe99ae77d" class="bulleted-list"><li style="list-style-type:disc">Inside the EKS cluster, we have EKS nodes (EC2 instances) and EKS pods (tasks) within them. We can use a private or public load balancer to access these EKS pods.</li></ul><figure id="622a4e0c-49ea-41d4-819e-c9a22ac30b39" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20289.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20289.png"/></a></figure><figure id="b42c48c1-9fc5-49c2-bffe-ae8c98ac3244" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(468).png"><img style="width:840px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(468).png"/></a></figure><figure id="ce12f663-096f-4f78-995c-0772653368e2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(469).png"><img style="width:873px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(469).png"/></a></figure></details></li></ul><ul id="d8f2b0a2-e7aa-4ec6-83b2-7b8ba9d7e9db" class="toggle"><li><details open=""><summary>AWS App Runner</summary><figure id="62f7b327-170f-4539-9ae1-75b47767f4c2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(470).png"><img style="width:1798px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(470).png"/></a></figure></details></li></ul></div><h3 id="f81c4697-48b7-4fed-8ef3-20f1e61766fc" class=""><details open=""><summary>Section 20: Serverless Overview from a Solution Architect Perspective</summary></details></h3><div class="indented"><ul id="18e40e28-b045-4983-92f7-5c887c229b1a" class="toggle"><li><details open=""><summary>Serverless</summary><ul id="ac806d88-5288-4671-89dc-ceb7e99a752c" class="bulleted-list"><li style="list-style-type:disc">Serverless is a new paradigm in which the developers don’t have to manage servers. They just deploy code.</li></ul><ul id="994bc96b-444f-4c50-9ae7-fa19aff5fad6" class="bulleted-list"><li style="list-style-type:disc">Serverless does not mean there are no servers, it means you just don’t manage / provision / see them.</li></ul><ul id="141392ab-787b-44c4-8f51-74684923ceaa" class="bulleted-list"><li style="list-style-type:disc">Initially, serverless was just about deploying function as a service (FaaS).</li></ul><ul id="6d295419-bc9e-4185-9e6a-ca22d2e6557c" class="bulleted-list"><li style="list-style-type:disc">Serverless was pioneered by AWS Lambda but now also includes anything that’s not required to be managed by the developers such as:<ul id="862bd16e-86f2-4fd1-b426-e3648c983ba0" class="bulleted-list"><li style="list-style-type:circle">AWS Lambda</li></ul><ul id="feebe0e7-ddba-4113-8adf-2c2fa61e34fb" class="bulleted-list"><li style="list-style-type:circle">DynamoDB</li></ul><ul id="ee775ae2-b6ab-4c59-839a-6c5432f26125" class="bulleted-list"><li style="list-style-type:circle">AWS Cognito</li></ul><ul id="5aaaae26-9bb2-4798-ae43-6d9430769385" class="bulleted-list"><li style="list-style-type:circle">AWS API Gateway</li></ul><ul id="c34066f3-fe79-4c4f-9ffc-4f8732660519" class="bulleted-list"><li style="list-style-type:circle">Amazon S3</li></ul><ul id="b12d4b04-e56a-4e2b-a882-d473eff8219a" class="bulleted-list"><li style="list-style-type:circle">AWS SNS &amp; SQS</li></ul><ul id="cb7c1e3e-b75c-495e-a089-1ade7068b4ac" class="bulleted-list"><li style="list-style-type:circle">AWS Kinesis Data Firehose</li></ul><ul id="9a4d5ae8-1469-4d05-a508-957588d1f914" class="bulleted-list"><li style="list-style-type:circle">Aurora Serverless</li></ul><ul id="2c865a7d-f6b2-47d4-8b5a-7831988f9231" class="bulleted-list"><li style="list-style-type:circle">Step Functions</li></ul><ul id="15a4ac8e-b867-43ab-80c7-b2cc83bc03a5" class="bulleted-list"><li style="list-style-type:circle">Fargate<figure id="77ef1f22-71fd-4b21-8050-b24c76df0520" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(472).png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(472).png"/></a></figure></li></ul></li></ul></details></li></ul><ul id="b0a093cf-7b82-4adc-b300-7ec0ff9f895b" class="toggle"><li><details open=""><summary>Lambda</summary><ul id="9d2b2d33-d565-4f85-8d3e-a7464d170a8e" class="toggle"><li><details open=""><summary>Intro</summary><ul id="4c1b19e6-dc8f-477a-8ed4-0688c674c80e" class="bulleted-list"><li style="list-style-type:disc">Virtual functions - no servers to manage</li></ul><ul id="2d981aa2-c515-4137-8c25-6363080f112d" class="bulleted-list"><li style="list-style-type:disc">Limited by time - short executions (max 15 mins)</li></ul><ul id="7ba15a1d-3e54-45e2-a433-65f06e5842d4" class="bulleted-list"><li style="list-style-type:disc">Run on-demand</li></ul><ul id="668991ba-900d-479b-91d2-39d7650a677e" class="bulleted-list"><li style="list-style-type:disc">Scaling is automated, AWS automatically adds more functions to scale horizontally.</li></ul><ul id="7e567762-8e24-4b86-a4b4-9132d991ca27" class="bulleted-list"><li style="list-style-type:disc">Inexpensive Pricing<ul id="919d048a-0a5e-4b06-a83b-695da613c7f2" class="bulleted-list"><li style="list-style-type:circle">Pay per request (number of invocations) and compute time</li></ul><ul id="c68a4b8c-6cfb-4ec8-a4a7-aa8e65a18d6b" class="bulleted-list"><li style="list-style-type:circle">Free tier of 1,000,000 AWS Lambda requests and 400,000 GBs of compute time</li></ul><ul id="cd442e14-51d7-4c55-8c18-e04e668ce0ac" class="bulleted-list"><li style="list-style-type:circle">Pay per lambda invocation:<ul id="fabf61ba-f9dd-4e92-a7b6-bc13c180c935" class="bulleted-list"><li style="list-style-type:square">First 1,000,000 requests are free</li></ul><ul id="0ea1c1cb-7dd5-409b-8ea1-1b7d27710c15" class="bulleted-list"><li style="list-style-type:square">$0.20 per million requests thereafter ($0.0000002 per request)</li></ul></li></ul><ul id="0cbac2f4-e9d2-4612-ad09-a0c0144ef355" class="bulleted-list"><li style="list-style-type:circle">Pay per duration: (in increment of ms)<ul id="332644b8-c57a-4365-aeaf-153fd09e0b1e" class="bulleted-list"><li style="list-style-type:square">400,000 GBs (400,000 seconds of execution at 1 GB RAM consumption) of compute time per month for free</li></ul><ul id="7a652230-e882-425d-9db6-28e2b9f15611" class="bulleted-list"><li style="list-style-type:square">After that $1.00 for 600,000 GBs</li></ul></li></ul><ul id="330eb260-8062-4caa-addd-6d6d05a92db1" class="bulleted-list"><li style="list-style-type:circle">It is usually very cheap to run AWS Lambda, so it’s very popular</li></ul></li></ul><ul id="b73c8e04-e4a7-4344-92c1-4a5de4871f9f" class="bulleted-list"><li style="list-style-type:disc">Integrated with the whole AWS suite of services<ul id="8e92886a-1ed2-412e-8970-1a9cee4485c6" class="bulleted-list"><li style="list-style-type:circle">API Gateway - to build REST APIs to invoke lambda functions</li></ul><ul id="cdda1193-e9f1-45a8-af25-b3bd066503ad" class="bulleted-list"><li style="list-style-type:circle">Kinesis - to perform transformations on Kinesis streams</li></ul><ul id="4305871a-1de3-42ad-b85c-cdf392ce8ec7" class="bulleted-list"><li style="list-style-type:circle">DynamoDB - to take some action based on a DynamoDB event</li></ul><ul id="f968baed-90f1-45c1-8605-7b043fd8217d" class="bulleted-list"><li style="list-style-type:circle">S3 - to take some action based on an S3 notification</li></ul><ul id="9eb347dc-639b-4611-8f3c-998a831dc0d4" class="bulleted-list"><li style="list-style-type:circle">EventBridge - to take some action based on an EB event</li></ul><ul id="1f00da8d-3f87-4e8a-bf2d-24ee8ba1456c" class="bulleted-list"><li style="list-style-type:circle">CloudWatch - to get logs for Lambda functions</li></ul><ul id="2ab89b88-5150-41c4-9e4e-2a4f51393bcd" class="bulleted-list"><li style="list-style-type:circle">SNS - to react to a notification</li></ul><ul id="9c9d0cca-5b98-488b-9d86-7c90f99bc938" class="bulleted-list"><li style="list-style-type:circle">SQS - to poll for messages in the queue and process them</li></ul><ul id="777dbb9c-536a-45d6-a831-7d9eadc6920a" class="bulleted-list"><li style="list-style-type:circle">Cognito - to take some action if a user logs in</li></ul></li></ul><ul id="99ec2541-08e8-4011-a3b2-39aa6b9daa52" class="bulleted-list"><li style="list-style-type:disc">Supports many programming languages<ul id="33016fce-371e-47cf-87b2-2f0cafe7d64a" class="bulleted-list"><li style="list-style-type:circle">Node.js (JavaScript)</li></ul><ul id="3af2c15c-6ccf-4150-a918-656dc62457c9" class="bulleted-list"><li style="list-style-type:circle">Python</li></ul><ul id="1431634e-936a-4194-aedd-446e24e51385" class="bulleted-list"><li style="list-style-type:circle">Java (Java 8 compatible)</li></ul><ul id="07a4443d-432e-48c4-a03c-242d2c7e7914" class="bulleted-list"><li style="list-style-type:circle">C# (.NET Core)</li></ul><ul id="de2ec8bf-476c-482f-9198-06571cb3fb45" class="bulleted-list"><li style="list-style-type:circle">Golang</li></ul><ul id="132c2ab5-6e07-4111-8971-899afe5d1c80" class="bulleted-list"><li style="list-style-type:circle">C# / Powershell</li></ul><ul id="c5c85de3-39c8-4790-aa28-27a0e51751cf" class="bulleted-list"><li style="list-style-type:circle">Ruby</li></ul><ul id="69c0cb6b-e0b5-4166-8bdd-8f18dd5d7f7c" class="bulleted-list"><li style="list-style-type:circle">any other language using Custom Runtime API (community supported, example Rust)</li></ul></li></ul><ul id="499a9641-401b-411a-8eab-60dbda57397e" class="bulleted-list"><li style="list-style-type:disc">Easy monitoring through AWS CloudWatch</li></ul><ul id="b2110194-076b-4334-9725-caf54374e95d" class="bulleted-list"><li style="list-style-type:disc">Easy to get more resources per functions (up to 10GB of RAM)</li></ul><ul id="d99110dd-e7d8-405c-a61b-b874c07c9689" class="bulleted-list"><li style="list-style-type:disc">Increasing RAM will also improve CPU and network</li></ul><ul id="7424658c-7657-4835-816f-18711575c380" class="bulleted-list"><li style="list-style-type:disc">In order to use containers on lambda, the container image must implement the Lambda Runtime API, otherwise it is preferred to be run on ECS / Fargate. Docker is not designed for Lambda, but for Fargate and ECS.</li></ul></details></li></ul><ul id="b6851853-112b-4398-836b-b58d442e3ff7" class="toggle"><li><details open=""><summary>Serverless thumbnail creation</summary><figure id="7818a9d1-17a1-4836-9115-ce18ea925258" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20290.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20290.png"/></a></figure></details></li></ul><ul id="a5422abd-6089-4846-acf2-285d67f63ecd" class="toggle"><li><details open=""><summary>Serverless CRON Job</summary><p id="23ce03d9-c1e1-4545-b499-12d3e4497b8f" class="">Instead of running the CRON on an EC2 instance which runs full time. We can setup an EventBridge rule to trigger an event every 1 hour. This event will trigger a lambda function.</p><figure id="0d3a4854-180d-43ae-819e-29b0bc17ab35" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20291.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20291.png"/></a></figure></details></li></ul><ul id="4b7d18bb-0d03-475e-ab57-7aaa8f8e5e63" class="toggle"><li><details open=""><summary>Limits</summary><ul id="3f73d430-f7bd-46b5-85ad-7947c9a98f85" class="bulleted-list"><li style="list-style-type:disc">Execution:<ul id="990a941c-e3ee-4bf3-90d3-dea04d5c56b2" class="bulleted-list"><li style="list-style-type:circle">Memory allocation: 128 MB - 10GB (1 MB increments)</li></ul><ul id="952a0483-b904-4811-9393-389055d8b6d5" class="bulleted-list"><li style="list-style-type:circle">Maximum execution time: 900 seconds (15 minutes)</li></ul><ul id="db2e368e-05cc-40bd-bd1a-de3ab25df444" class="bulleted-list"><li style="list-style-type:circle">Environment variables: 4 KB</li></ul><ul id="ac3a6934-50e4-421b-b1f4-2b3e3dd666a4" class="bulleted-list"><li style="list-style-type:circle">Disk capacity in the “function container” (in /tmp): 512 MB to 10 GB</li></ul><ul id="d80c5b1a-c187-449d-b8fb-fdf816b6e095" class="bulleted-list"><li style="list-style-type:circle">Concurrent executions: 1000 (can be increased by requesting AWS)</li></ul></li></ul><ul id="845e81d1-ec36-4424-bc98-cb218f269dbc" class="bulleted-list"><li style="list-style-type:disc">Deployment:<ul id="9df17f09-7907-4d84-9788-138d9de54814" class="bulleted-list"><li style="list-style-type:circle">Lambda function deployment size (compressed .zip): 50 MB</li></ul><ul id="44fbb02f-6940-4324-b986-a7538d9915a1" class="bulleted-list"><li style="list-style-type:circle">Size of uncompressed deployment (code + dependencies): 250 MB</li></ul><ul id="54f7e6fb-f61f-4681-8856-9ccaf7bc9bb9" class="bulleted-list"><li style="list-style-type:circle">If more space is needed, can use the <code>/tmp</code> directory to load other files at startup</li></ul><ul id="40e00193-70aa-4f3f-9ca1-2efafabcf800" class="bulleted-list"><li style="list-style-type:circle">Size of environment variables: 4 KB</li></ul></li></ul></details></li></ul><ul id="d0e6faef-38bb-4195-a6e4-62392bde5ad2" class="toggle"><li><details open=""><summary>Lambda@Edge</summary><ul id="e17af141-5556-418d-b291-77f4a69766bf" class="bulleted-list"><li style="list-style-type:disc">You have deployed a CDN using CloudFront. What if you wanted to run a global AWS Lambda alongside each edge location to filter requests before reaching your application?</li></ul><ul id="197141cd-3eb5-43d7-8e8b-4dd7e0d46945" class="bulleted-list"><li style="list-style-type:disc">For this, you can use Lambda@Edge:<ul id="9ba89824-6d59-4b4f-a98a-46d96f88dc74" class="bulleted-list"><li style="list-style-type:circle">Deploy Lambda functions alongside your CloudFront CDN</li></ul><ul id="9b098cc9-3f38-40e5-bea4-20d0ec52085c" class="bulleted-list"><li style="list-style-type:circle">Customize the CDN content using Lambda</li></ul><ul id="4b289eb8-2cd7-4013-90da-43afbd4cb12d" class="bulleted-list"><li style="list-style-type:circle">Build more responsive applications</li></ul><ul id="ebdc6672-938a-460a-9699-ad0ed93555e1" class="bulleted-list"><li style="list-style-type:circle">You don’t manage servers, Lambda is deployed globally</li></ul><ul id="2d8888c7-82f6-4f27-b3b0-0b5da3531008" class="bulleted-list"><li style="list-style-type:circle">Pay for what you use, no provisioning needed</li></ul></li></ul><ul id="6764da3c-d691-4451-97bc-29e520a2c5d0" class="bulleted-list"><li style="list-style-type:disc">You can use Lambda to modify CloudFront requests and responses (4 types). You can also generate responses to viewers without ever sending the request to the origin.<figure id="e0a9d2c5-3ad9-475c-84a6-7e161e933089" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20292.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20292.png"/></a></figure></li></ul><ul id="756483b6-ff9c-4bc0-a2e3-e37e7c700cab" class="bulleted-list"><li style="list-style-type:disc">We can create a global application using Lambda@Edge where S3 hosts a static website which uses client side JS to send requests to CF which will process the request in a lambda function in that edge location to perform some operation like fetching data from DynamoDB.<figure id="a6f32d49-903b-4ae9-af40-4cc9ccf35983" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20293.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20293.png"/></a></figure></li></ul><ul id="2693f8ab-936c-4f46-a428-f9f1e81ba9fd" class="bulleted-list"><li style="list-style-type:disc">Use cases<ul id="e401ed9f-10b2-40b7-929e-2f1ff1913c18" class="bulleted-list"><li style="list-style-type:circle">Website Security and Privacy</li></ul><ul id="ba10626b-d3f4-48f2-b2e1-5bdab04c7250" class="bulleted-list"><li style="list-style-type:circle">Dynamic Web Application at the Edge</li></ul><ul id="3101a9c6-ab3e-4be9-9ed2-27676c8a2720" class="bulleted-list"><li style="list-style-type:circle">Search Engine Optimization (SEO)</li></ul><ul id="8ca1d95d-8ecd-4c14-a7a5-997fb941580e" class="bulleted-list"><li style="list-style-type:circle">Intelligently Route Across Origins and Data Centers</li></ul><ul id="045c5135-fee9-4459-86b6-9f087adfd126" class="bulleted-list"><li style="list-style-type:circle">Bot Mitigation at the Edge</li></ul><ul id="b36cb459-82ba-4a96-adfd-fc29f090e673" class="bulleted-list"><li style="list-style-type:circle">Real-time Image Transformation</li></ul><ul id="6478115f-3b4b-4b6c-9e48-88be124deb65" class="bulleted-list"><li style="list-style-type:circle">A/B Testing</li></ul><ul id="b500d2df-8e13-4347-a150-05828cccbbad" class="bulleted-list"><li style="list-style-type:circle">User Authentication and Authorization</li></ul><ul id="38bd1b6b-f623-48bb-8385-2c407697c306" class="bulleted-list"><li style="list-style-type:circle">User Prioritization</li></ul><ul id="f9480e20-3320-488b-bcca-b3dec0a7e3d5" class="bulleted-list"><li style="list-style-type:circle">User Tracking and Analytics</li></ul></li></ul><figure id="b0deac8e-85f7-4d41-a874-15c2b6d77c42" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(473).png"><img style="width:901px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(473).png"/></a></figure><figure id="e3ff3a2e-6bba-48d2-8664-d0b6e8e03bfc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(474).png"><img style="width:924px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(474).png"/></a></figure></details></li></ul><ul id="4dab4b29-643a-4b9a-b014-b5628e42e1b8" class="toggle"><li><details open=""><summary>Lambda in VPC</summary><figure id="198dd7c9-d25b-4f5a-b1c8-8d61b95adf50" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(475).png"><img style="width:938px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(475).png"/></a></figure><figure id="1da98531-6806-4727-bcd0-dcbdb5392d77" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(476).png"><img style="width:1685px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(476).png"/></a></figure><figure id="6bf9740c-aa1f-4524-94cf-1d6f228ad543" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(477).png"><img style="width:1703px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(477).png"/></a></figure></details></li></ul></details></li></ul><ul id="1cad0b7f-5a22-4f13-8e45-26cb6280d710" class="toggle"><li><details open=""><summary>DynamoDB</summary><ul id="60c56d62-1837-45bc-8e24-32ef5464d4c3" class="toggle"><li><details open=""><summary>Intro</summary><ul id="f0ec19a1-562a-464b-930d-08bece1176fd" class="bulleted-list"><li style="list-style-type:disc">Fully managed, highly available NoSQL DB with replication across multiple AZs</li></ul><ul id="31baf838-2300-44ce-844b-533a2b5e1c24" class="bulleted-list"><li style="list-style-type:disc">Not good for joins and aggregations</li></ul><ul id="989117b1-cc87-4ebb-bf07-9e765360cb5f" class="bulleted-list"><li style="list-style-type:disc">Scales to massive workloads (distributed database)</li></ul><ul id="1a4065ef-4b35-4f38-92e6-00080148a45a" class="bulleted-list"><li style="list-style-type:disc">Millions of requests per seconds, trillions of row, 100s of TB of storage</li></ul><ul id="514da347-93c0-427b-91a8-75f90a5b2fc7" class="bulleted-list"><li style="list-style-type:disc">Fast and consistent in performance (low latency on retrieval)</li></ul><ul id="bfd5efb4-d318-4b4e-afc3-15961ae55c18" class="bulleted-list"><li style="list-style-type:disc">Integrated with IAM for security, authorization and administration</li></ul><ul id="ba83c806-c0a5-4da0-b7f8-1c0397d8629d" class="bulleted-list"><li style="list-style-type:disc">Enables event driven programming with DynamoDB Streams</li></ul><ul id="575caab6-7ab9-429f-9933-994672cd895f" class="bulleted-list"><li style="list-style-type:disc">Auto-scaling capabilities, no prior provisioning of storage</li></ul><ul id="d7518c99-89f6-4632-a8e3-495acff97403" class="bulleted-list"><li style="list-style-type:disc">Low cost</li></ul><ul id="6729c9a7-809c-42fc-b9d1-0a4ef1bc5028" class="bulleted-list"><li style="list-style-type:disc">We only create tables in DynamoDB, not databases since it is serverless.</li></ul></details></li></ul><ul id="6e6750e2-8896-43dd-b8c7-da1c11eafcb9" class="toggle"><li><details open=""><summary>Structure</summary><ul id="93231b7b-932e-4da6-b0e7-18186b118ed0" class="bulleted-list"><li style="list-style-type:disc">DynamoDB is made of Tables<ul id="12e5fbe1-2618-4b8f-8ff1-f7577d874c40" class="bulleted-list"><li style="list-style-type:circle">Each table has a Primary Key (must be decided at creation time)</li></ul><ul id="2182b317-3844-439a-ad6f-ca4deba310d5" class="bulleted-list"><li style="list-style-type:circle">Each table can have an infinite number of items (rows)</li></ul><ul id="e3cbdf50-a56c-4dcb-b832-e531aba53652" class="bulleted-list"><li style="list-style-type:circle">Each item has attributes (can be added over time, can be null)</li></ul><ul id="4f9c8b2b-8ab3-49ec-a16e-c753c61d9c95" class="bulleted-list"><li style="list-style-type:circle">Maximum size of an item is 400KB (not good for storing large objects)</li></ul><ul id="d85daa35-38df-4db8-95bd-2dc4873de08b" class="bulleted-list"><li style="list-style-type:circle">Data types supported are:<ul id="fec88df2-7932-4252-9704-5c270d1361a4" class="bulleted-list"><li style="list-style-type:square">Scalar Types: String, Number, Binary, Boolean, Null</li></ul><ul id="f9cffc71-55ee-4177-9c09-111ddde8a17e" class="bulleted-list"><li style="list-style-type:square">Document Types: List, Map</li></ul><ul id="1ec2978d-1810-46ad-a8c1-b9e9a36fdf8c" class="bulleted-list"><li style="list-style-type:square">Set Types: String Set, Number Set, Binary Set</li></ul></li></ul><ul id="8cfaf716-1025-4b4a-8914-02ea94f17939" class="bulleted-list"><li style="list-style-type:circle">Primary key can be a single field or a pair of fields (partition key and sort key)</li></ul><figure id="ca307821-36b8-497d-bdeb-73f9a4afb414" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20294.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20294.png"/></a></figure></li></ul></details></li></ul><ul id="e17b548b-c575-4981-a8bc-3cdcc0e88c9f" class="toggle"><li><details open=""><summary>Read/Write Capacity</summary><ul id="7cfe7342-39dc-415b-b642-71276fd62d47" class="bulleted-list"><li style="list-style-type:disc">Control how you manage your table’s capacity (read/write throughput)</li></ul><ul id="34b6ce8f-f5cc-4b5f-9f65-6e85dded7755" class="bulleted-list"><li style="list-style-type:disc">Provisioned Mode (default)<ul id="eb5c8db0-d3ef-40ca-a79f-645a24f180ae" class="bulleted-list"><li style="list-style-type:circle">Specify the number of reads/writes per second</li></ul><ul id="b0985b64-143c-463a-9ccb-91e123c70754" class="bulleted-list"><li style="list-style-type:circle">Need to plan capacity beforehand</li></ul><ul id="517e5c1e-8634-4281-b2d1-c2c9a5737cb9" class="bulleted-list"><li style="list-style-type:circle">Pay for provisioned Read Capacity Units (RCU) &amp; Write Capacity Units (WCU)</li></ul><ul id="b5e13d2d-7a97-40d8-9ccf-30550f126f62" class="bulleted-list"><li style="list-style-type:circle">Great for predictable workloads</li></ul><ul id="ed2e823c-92bd-4904-b43c-533b31f418d8" class="bulleted-list"><li style="list-style-type:circle">Possibility to add auto-scaling mode for RCU &amp; WCU (eg. set RCU and WCU to 80% and the capacities will be scaled automatically based on the workload to match the set values)</li></ul></li></ul><ul id="c261482f-6385-4c84-9c04-5d7568fa9d5b" class="bulleted-list"><li style="list-style-type:disc">On-Demand Mode<ul id="ae722400-fb5b-46f8-82ba-a53b32e62c9f" class="bulleted-list"><li style="list-style-type:circle">Read/writes automatically scale up/down with your workloads</li></ul><ul id="18d62c57-f067-49cf-9280-c874cb0b9ea6" class="bulleted-list"><li style="list-style-type:circle">No capacity planning needed</li></ul><ul id="06a2cda7-6fc4-4cb7-b0a7-edad9de9b7bb" class="bulleted-list"><li style="list-style-type:circle">Pay for what you use, more expensive</li></ul><ul id="c0f583d1-3f3f-4adf-9716-f2a9657c8a74" class="bulleted-list"><li style="list-style-type:circle">Great for unpredictable workloads, steep sudd</li></ul></li></ul></details></li></ul><ul id="45308aaa-72f3-4ca8-bf8a-ec0f1f8c7dbd" class="toggle"><li><details open=""><summary>DynamoDB Accelerator (DAX)</summary><ul id="996534ba-dad4-429a-83d8-6cde7eee3a41" class="toggle"><li><details open=""><summary>Intro</summary><p id="80d4c3fc-3e16-4d17-a937-6950e8cf814b" class="">DynamoDB Accelerator (DAX) is a fully managed, highly available, in-memory cache for DynamoDB that delivers up to 10x performance improvement. It caches the most frequently used data, thus offloading the heavy reads on hot keys off your DynamoDB table, hence preventing the “ProvisionedThroughputExceededException” exception.</p><ul id="4f043939-846f-4ced-964d-c1c278838153" class="bulleted-list"><li style="list-style-type:disc">Fully-managed, highly available, seamless in-memory cache for DynamoDB</li></ul><ul id="bd294ceb-d761-4c01-b6a5-3c67b34970d9" class="bulleted-list"><li style="list-style-type:disc">Help solve read congestion by caching</li></ul><ul id="203117ba-8eaf-480c-acb8-9154e397b323" class="bulleted-list"><li style="list-style-type:disc">Microseconds latency for cached data</li></ul><ul id="6391af17-a9a4-4edc-89d6-77b975efd739" class="bulleted-list"><li style="list-style-type:disc">Doesn’t require application logic modification (compatible with existing DynamoDB APIs)</li></ul><ul id="914f5d9d-9252-4f3a-9cef-eb992bf72471" class="bulleted-list"><li style="list-style-type:disc">5 minutes TTL for cache (default)<figure id="21e54ec5-fec8-4dd1-89af-767c8c859400" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20295.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20295.png"/></a></figure></li></ul></details></li></ul><ul id="c07a782d-435e-49b2-8a2e-71534db8d233" class="toggle"><li><details open=""><summary>DAX vs ElastiCache</summary><ul id="e4b9ea55-6cb8-4da4-a0b9-d56a3c9302ab" class="bulleted-list"><li style="list-style-type:disc">DAX is designed to cache the query and scan of DynamoDB items (objects) to make reads faster.</li></ul><ul id="8494157d-16b3-44cf-9981-1418bddeeabc" class="bulleted-list"><li style="list-style-type:disc">ElastiCache is good for caching computation results (eg. result of computation of dynamodb item after fetching)</li></ul><figure id="753dfaa0-8158-446e-8910-afc2c91e0b6c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20296.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20296.png"/></a></figure></details></li></ul></details></li></ul><ul id="545a21ba-972e-4c0e-91c0-763edb695829" class="toggle"><li><details open=""><summary>DynamoDB Streams</summary><ul id="427a4983-a551-4cbb-a50e-0b26b4e22a11" class="bulleted-list"><li style="list-style-type:disc">Ordered stream of notifications of item-level modifications (create/update/delete) in a table</li></ul><ul id="e4a653f5-4453-40f3-8b13-5900f1c00ea0" class="bulleted-list"><li style="list-style-type:disc">Stream records can be<ul id="e968b2c8-4b81-4131-9777-a1ae19d89af7" class="bulleted-list"><li style="list-style-type:circle">Sent to Kinesis Data Streams</li></ul><ul id="d64e3548-607f-4050-b294-ec737bf6273a" class="bulleted-list"><li style="list-style-type:circle">Read by AWS Lambda</li></ul><ul id="b3e081bf-cd7a-481f-858c-a6504a17a9ae" class="bulleted-list"><li style="list-style-type:circle">Read by Kinesis Client Library applications</li></ul></li></ul><ul id="29c4c097-7ec2-43c7-b42c-8460354cda28" class="bulleted-list"><li style="list-style-type:disc">Data Retention for up to 24 hours</li></ul><ul id="78d90633-d9b2-46d7-8b57-73f68d59e905" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="77c93b94-bfc0-43fb-9a1e-06132e5a49c5" class="bulleted-list"><li style="list-style-type:circle">React to changes in real-time (eg. welcome email to users once they are added into the table)</li></ul><ul id="c2e5b82d-c28b-4cfd-884d-352eb07bf88c" class="bulleted-list"><li style="list-style-type:circle">Analytics</li></ul><ul id="e5156de3-0ae1-4e02-96de-9fead4d21064" class="bulleted-list"><li style="list-style-type:circle">Insert into derivative tables</li></ul><ul id="2488a50d-b52c-4102-8865-42fa481e46d1" class="bulleted-list"><li style="list-style-type:circle">Insert into ElasticSearch</li></ul><ul id="d4f3541f-afea-4880-9ed8-889fca764e94" class="bulleted-list"><li style="list-style-type:circle">Implement cross-region replication</li></ul></li></ul><figure id="13ab92bc-64fd-4149-a0cd-16e4519d0e46" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20297.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20297.png"/></a></figure></details></li></ul><ul id="ad478394-0bbe-4964-83b7-036969e5b482" class="toggle"><li><details open=""><summary>DynamoDB Global Table</summary><ul id="54ee5aca-d294-4ab5-b343-71415a1ec98c" class="bulleted-list"><li style="list-style-type:disc">Make a DynamoDB table accessible with low latency in multiple-regions</li></ul><ul id="372c273b-a1ae-4555-a4b9-1eec22e0d401" class="bulleted-list"><li style="list-style-type:disc">Active-Active replication</li></ul><ul id="f8f92e1f-06f3-474e-a50c-54df9b71278e" class="bulleted-list"><li style="list-style-type:disc">Applications can READ and WRITE to the table in any region and the change will automatically be replicated to other tables.</li></ul><ul id="4dbbe9d4-627d-43ba-9415-dbdddecc9c50" class="bulleted-list"><li style="list-style-type:disc">Must enable DynamoDB Streams as a pre-requisite</li></ul><figure id="f491b157-35b8-4809-9c07-bef287fb188e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20298.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20298.png"/></a></figure></details></li></ul><ul id="29eeae83-626b-45af-89b7-69e70e5cdb11" class="toggle"><li><details open=""><summary>Time to Live (TTL)</summary><ul id="f85fd011-5ace-413e-84fd-e4b40ae2144a" class="bulleted-list"><li style="list-style-type:disc">Automatically delete items after an expiry timestamp</li></ul><ul id="7a84f43e-8b62-4f52-a258-94bd0b1f3e76" class="bulleted-list"><li style="list-style-type:disc">Use cases: reduce stored data by keeping only current items, adhere to regulatory obligations, etc.</li></ul><figure id="37d41852-79ef-4fa3-ac7c-4fb8d72c2470" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20299.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20299.png"/></a></figure></details></li></ul><ul id="376cc0e2-ec79-44d0-a08b-56c291403b21" class="toggle"><li><details open=""><summary>Backups for disaster recovery</summary><figure id="cec3f891-39a6-4285-ab88-d45abe8760e1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(479).png"><img style="width:480px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(479).png"/></a></figure></details></li></ul><ul id="ca682d8a-2cda-4912-8a05-2572061790ce" class="toggle"><li><details open=""><summary>DynamoDB - Integration with Amazon S3</summary><figure id="d3268f83-e33f-4ee4-b346-cc219d04befb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(480).png"><img style="width:957px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(480).png"/></a></figure></details></li></ul><p id="85d4bafb-84bd-441f-baff-138582c7509a" class="">
</p><p id="dc8be274-418e-4a93-b112-4f49818fd74f" class="">new → </p><ul id="b9610ddc-84e6-4e6a-ad66-eac8c9506a94" class="toggle"><li><details open=""><summary>Indexes</summary><ul id="e3e78e6a-9c31-4d97-b682-747cd0b0e169" class="bulleted-list"><li style="list-style-type:disc">Global Secondary Indexes (GSI) &amp; Local Secondary Indexes (LSI)</li></ul><ul id="5c3c8075-dcbf-411a-933c-fbdc43e297a4" class="bulleted-list"><li style="list-style-type:disc">Indexes allow us to query on attributes other than the Primary Key</li></ul><figure id="f186660e-c5d8-4048-95e9-9efa08e4fd30" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20300.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20300.png"/></a></figure></details></li></ul><ul id="3c700fa0-ff65-4756-ba2c-5017e2480f8f" class="toggle"><li><details open=""><summary>Transactions</summary><p id="3875aa29-bc0f-4b28-bcd6-aef6a42ed8a5" class="">Transactions allow us to either write to multiple tables or write to none.</p><figure id="0afb4c7c-af12-4fa4-8fce-e0b78324b2d5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20301.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20301.png"/></a></figure></details></li></ul></details></li></ul><ul id="020d1fb7-35f0-49b5-be1f-1888ba0d6d0a" class="toggle"><li><details open=""><summary>API Gateway</summary><ul id="7e062470-ddfe-4ca6-bb83-7715602c4ece" class="toggle"><li><details open=""><summary>Intro</summary><ul id="8a842fb8-840c-4ee4-86c6-882f12b734ad" class="bulleted-list"><li style="list-style-type:disc">Serverless offering from AWS to build REST APIs</li></ul><ul id="42f6c658-3a2c-4144-9226-d5507bc65ccc" class="bulleted-list"><li style="list-style-type:disc">Using this, we can reach our lambda functions through REST APIs and API gateway will proxy the request to lambda.</li></ul><ul id="2e984577-ab86-4493-8926-0706f5c45414" class="bulleted-list"><li style="list-style-type:disc">Support for the WebSocket Protocol</li></ul><ul id="83bdb860-2811-4b80-8ab2-6f29e41ab71d" class="bulleted-list"><li style="list-style-type:disc">Handle API versioning (v1, v2…)</li></ul><ul id="3e0269e9-035f-4c68-8ad8-30dda47f4c8a" class="bulleted-list"><li style="list-style-type:disc">Handle different environments (dev, test, prod)</li></ul><ul id="b9f27b35-5f59-4f8c-aa69-c3da9680f42c" class="bulleted-list"><li style="list-style-type:disc">Handle security (Authentication and Authorization)</li></ul><ul id="b75b0a20-29a4-43e4-9014-c36ea354a01d" class="bulleted-list"><li style="list-style-type:disc">Create API keys</li></ul><ul id="d0fb32fd-1c23-4610-802e-d3bb7a47953d" class="bulleted-list"><li style="list-style-type:disc">Rate limiting (throttle requests if too many clients are connecting at once)</li></ul><ul id="c13c44f7-7d1a-43fe-a37f-f2f75a6f388e" class="bulleted-list"><li style="list-style-type:disc">Support to import/export to common API standards like Swagger / Open API</li></ul><ul id="a6e72ec8-c946-42a8-bba0-b8f1d73d5863" class="bulleted-list"><li style="list-style-type:disc">Transform and validate requests and responses</li></ul><ul id="404cb465-f43d-4315-a9f4-18565eb110e1" class="bulleted-list"><li style="list-style-type:disc">Cache API responses</li></ul><ul id="006b6de6-7d6a-41f0-8467-73d87fd63fff" class="bulleted-list"><li style="list-style-type:disc">Generate SDK and API specifications</li></ul><ul id="549246d4-6331-4f0b-8fe3-8074469b5653" class="bulleted-list"><li style="list-style-type:disc">Using API Gateway, Lambda and DynamoDB, we can build a serverless CRUD application.</li></ul></details></li></ul><figure id="d8bb306a-c1dc-43e4-aa0f-95a316a3728f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20302.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20302.png"/></a></figure><ul id="baf035bb-a01f-4905-97a3-7c8d4c352440" class="toggle"><li><details open=""><summary>Integration</summary><ul id="61b4df64-29ac-4fa5-8705-bb5c3e97fab7" class="bulleted-list"><li style="list-style-type:disc">Lambda Function<ul id="70985794-f99e-44bd-9919-507d48af01dc" class="bulleted-list"><li style="list-style-type:circle">Invoke Lambda function</li></ul><ul id="a377d7ea-47c6-4f63-a954-da53174056b7" class="bulleted-list"><li style="list-style-type:circle">Easy way to expose REST API backed by AWS Lambda</li></ul></li></ul><ul id="6ed41ab9-b718-4ad4-bb6f-ac57355a972a" class="bulleted-list"><li style="list-style-type:disc">HTTP<ul id="ab3404df-0f0e-4fb0-b528-70a9077d2e04" class="bulleted-list"><li style="list-style-type:circle">Expose HTTP endpoints in the backend to leverage features like rate limiting, caching, user authentications, API keys, etc.</li></ul><ul id="25897c75-910a-4771-ab82-e9739de955a2" class="bulleted-list"><li style="list-style-type:circle">Example: internal HTTP API on premise, Application Load Balancer, etc.</li></ul></li></ul><ul id="bc6fe460-5557-4485-894c-7a227f5c55e5" class="bulleted-list"><li style="list-style-type:disc">AWS Service<ul id="b29ffda4-e0fa-4d3f-b11b-8c590e2d611c" class="bulleted-list"><li style="list-style-type:circle">Expose any AWS API through the API Gateway to add authentication, deploy publicly, rate control, etc.</li></ul><ul id="2139da91-b7a7-49c5-9861-d3cbb06898cc" class="bulleted-list"><li style="list-style-type:circle">Example: start an AWS Step Function workflow, post a message to SQS, etc.</li></ul></li></ul><figure id="15f0cd5c-523b-4faa-8eab-94ee941431fe" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(481).png"><img style="width:1668px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(481).png"/></a></figure></details></li></ul><ul id="e3a4c613-6b5d-4c88-8ccd-3cb2d474eb36" class="toggle"><li><details open=""><summary>Endpoint types</summary><p id="ca6b4a67-5726-4df4-9d69-46b7cae5b71f" class="">API Gateway can be deployed in three ways:</p><ul id="75a20792-5229-483f-a1ef-a17879bbd63c" class="bulleted-list"><li style="list-style-type:disc">Edge-Optimized (default)<ul id="403be885-43a6-4b73-bebf-a498531f2a59" class="bulleted-list"><li style="list-style-type:circle">For global clients</li></ul><ul id="7ba0ea00-8bfc-4a32-a106-9d5dbbbd0b4f" class="bulleted-list"><li style="list-style-type:circle">Requests are routed through the CloudFront Edge locations (improves latency)</li></ul><ul id="d903cafc-873f-41c8-b836-7fa1eebe1366" class="bulleted-list"><li style="list-style-type:circle">The API Gateway still lives in only one region but it is accessible efficiently through edge locations.</li></ul></li></ul><ul id="6deeb9eb-b15d-4010-ad70-cde6eae3f351" class="bulleted-list"><li style="list-style-type:disc">Regional<ul id="846619cf-3af4-4f00-9da4-2972846ec7ad" class="bulleted-list"><li style="list-style-type:circle">For clients within the same region</li></ul><ul id="d541172b-aea0-456d-97b3-c0b12ebfd674" class="bulleted-list"><li style="list-style-type:circle">Could manually combine with your own CloudFront distribution for global deployment but this way you will have more control over the caching strategies and the distribution.</li></ul></li></ul><ul id="3b9f8599-9d2d-4450-bd4b-2944e000d90a" class="bulleted-list"><li style="list-style-type:disc">Private<ul id="1017a1ac-a789-4798-a1e6-a7e3a3f4d5ba" class="bulleted-list"><li style="list-style-type:circle">Can only be accessed from your VPC using an interface VPC endpoint (ENI)</li></ul><ul id="2b5d62fb-1c22-4c91-9ff5-f9250e30aa3d" class="bulleted-list"><li style="list-style-type:circle">Use a resource policy to define access</li></ul></li></ul></details></li></ul><ul id="2854f53a-d05b-4f13-a230-733a9ff9255e" class="toggle"><li><details open=""><summary>Hands on</summary><p id="a27374d2-2652-497c-9be7-ee02e20cd9f8" class="">API Gateway → Create REST API → New API</p><p id="95c8f0c3-989b-4323-90e1-a632a72494d4" class="">Actions:</p><ul id="8984ad49-a3ab-4a42-b0bf-8ab9edb41f14" class="bulleted-list"><li style="list-style-type:disc">Add method: add a method at the current route</li></ul><ul id="fae709e9-23b3-4c1a-8f91-beb5d5c5f2ae" class="bulleted-list"><li style="list-style-type:disc">Add resource: create a new sub route</li></ul><ul id="e85dc5ca-64db-4994-bbb5-83c63a18f555" class="bulleted-list"><li style="list-style-type:disc">Deploy API: deploy the API for use. Once deployed, invoke URL can be used as the base route.</li></ul></details></li></ul><ul id="94207d4c-560f-42de-9675-700604073880" class="toggle"><li><details open=""><summary>Security</summary><ul id="043633f1-3c04-41f3-b348-07e71381c179" class="toggle"><li><details open=""><summary>IAM Permissions</summary><ul id="880e4403-7d99-4675-902f-42950ec0077d" class="bulleted-list"><li style="list-style-type:disc">Create an IAM policy authorization and attach to User / Role to allow it to call an API</li></ul><ul id="76330aa6-dc67-4af5-a5d9-87feba6bd486" class="bulleted-list"><li style="list-style-type:disc">API Gateway verifies IAM permissions passed by the calling application</li></ul><ul id="40ebb2eb-5124-4413-a427-e19a2b6f72f4" class="bulleted-list"><li style="list-style-type:disc">Good to provide access within your own infrastructure (users or roles within your account)</li></ul><ul id="16c72cd0-6ab7-4b48-aa53-33af66390033" class="bulleted-list"><li style="list-style-type:disc">Leverages “Sig v4” capability where lAM credential are in headers. If the IAM policy check passes, the API gateway will call the backend.<figure id="6cb01c8d-7390-420c-b583-974e5e390262" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20303.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20303.png"/></a></figure><p id="859dd6f6-0a2d-43a4-a63b-e31c4520d4df" class="">Untitled</p></li></ul></details></li></ul><ul id="08176aa2-d6f4-41ad-b396-f5cf16187c46" class="toggle"><li><details open=""><summary>Lambda Authorizer (formerly Custom Authorizer)</summary><ul id="b3434ca8-dfaa-4037-9f33-0b912f3b6472" class="bulleted-list"><li style="list-style-type:disc">Uses AWS Lambda to validate the token being passed in the header and return an lAM policy to determine if the user should be allowed to access the resource.</li></ul><ul id="50a498d0-177e-4f08-87d7-d93360899824" class="bulleted-list"><li style="list-style-type:disc">Option to cache result of authentication, so the authorizer lambda will not be called repeatedly for the same client.</li></ul><ul id="40ef54f7-d433-492e-9130-5de274f00e02" class="bulleted-list"><li style="list-style-type:disc">Helps to use OAuth / SAML / 3rd party type of authentication</li></ul><figure id="959bb519-8ed6-4848-a9f4-b960f01d2f12" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20304.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20304.png"/></a></figure><p id="6f9b9366-9391-4c20-9341-cf5ed4d9d3f1" class="">Untitled</p></details></li></ul><ul id="a85946ae-adb7-40ef-bb62-c5d91eb600ad" class="toggle"><li><details open=""><summary>Cognito User Pools</summary><ul id="b418cbba-e06e-46fa-9872-50d14d384eaf" class="bulleted-list"><li style="list-style-type:disc">Cognito fully manages user lifecycle</li></ul><ul id="afcb7be2-fcf1-49eb-92f3-3fc9c159b6cf" class="bulleted-list"><li style="list-style-type:disc">You manage your own user pool (can be backed by FB, Google, etc.)</li></ul><ul id="8e37cf5b-0094-43b4-b3d7-9fdcef9c9af9" class="bulleted-list"><li style="list-style-type:disc">API gateway verifies identity automatically from AWS Cognito</li></ul><ul id="97d07436-c961-43b6-95a2-0ece2d5cd990" class="bulleted-list"><li style="list-style-type:disc">No custom implementation (eg. authorization lambda) is required</li></ul><ul id="7aad6a0d-5b7e-46ab-9069-9e34b6410bc7" class="bulleted-list"><li style="list-style-type:disc">Cognito only helps with authentication, not authorization</li></ul><ul id="6103237f-a6bb-4367-8d36-4f55d76a8df5" class="bulleted-list"><li style="list-style-type:disc">Authorization pattern must be implemented in the backend.</li></ul><ul id="04061165-2e52-48d4-b3e8-07122b4c77b2" class="bulleted-list"><li style="list-style-type:disc">The client (user) first authenticates with Congnito and gets the access token which it passes in the header to API gateway. API gateway validates the token using Cognito and then hits the backend if the token is valid.<figure id="78adfeca-018f-443e-a4f9-d9e426c9287a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20305.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20305.png"/></a></figure></li></ul></details></li></ul><figure id="3a573438-4634-40f0-b612-c250ea6348a9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(482).png"><img style="width:922px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(482).png"/></a></figure></details></li></ul></details></li></ul><ul id="57f0540a-8fab-4869-a80d-84bd9b9e1199" class="toggle"><li><details open=""><summary>Step Function</summary><figure id="64aebcbb-e7b9-4ec0-be95-3a1c69b30658" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(483).png"><img style="width:1759px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(483).png"/></a></figure></details></li></ul><ul id="fb3aeed1-cffa-4c7b-a7bf-86b62817a1f7" class="toggle"><li><details open=""><summary>Cognito</summary><p id="c8f2833b-108b-4489-9bb5-12e236cc98f5" class="">Amazon Cognito lets you add user sign-up, sign-in, and access control to your web and mobile apps quickly and easily. Amazon Cognito scales to millions of users and supports sign-in with social identity providers, such as Apple, Facebook, Google, and Amazon, and enterprise identity providers via SAML 2.0 and OpenID Connect.</p><p id="d575498d-3284-4d6a-a2e9-4e07cf108fdf" class="">It is used when we want to give our users an identity so that they can interact with our application.</p><ul id="70b729d9-22f9-43f9-b967-112e0026fda3" class="toggle"><li><details open=""><summary>Cognito User Pools (CUP):</summary><ul id="c8ca7267-44be-4054-96e8-7f9f840ecd76" class="bulleted-list"><li style="list-style-type:disc">It is an identity provider (provides sign in functionality for app users)</li></ul><ul id="57d73f9e-d6ba-4cd6-aa2f-bd3247821139" class="bulleted-list"><li style="list-style-type:disc">Serverless database of user for your mobile apps</li></ul><ul id="b5f22eb6-0f94-4654-9b6b-7bd6a69857c7" class="bulleted-list"><li style="list-style-type:disc">Simple login: Username (or email) / password combination</li></ul><ul id="7b8e7c05-2042-446c-9dd6-82caf04d6319" class="bulleted-list"><li style="list-style-type:disc">Possibility to verify emails / phone numbers and add MFA</li></ul><ul id="422d244d-f291-4fc1-96f9-009394a22eb8" class="bulleted-list"><li style="list-style-type:disc">Can enable Federated Identities allowing users to authenticate via third party identity provider like Facebook, Google, SAML, etc.</li></ul><ul id="99ef6658-69d5-4792-99b6-f195b0a34f61" class="bulleted-list"><li style="list-style-type:disc">Sends back a JSON Web Tokens (JWT) which is used to verify the identity of the user.</li></ul><ul id="66273457-d041-459a-a037-5567f789d8bb" class="bulleted-list"><li style="list-style-type:disc">Can be integrated with API Gateway for authentication</li></ul><figure id="5b5cfc49-2739-4ff6-96d0-20a5d313929d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20306.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20306.png"/></a></figure><p id="af453483-ff56-42e1-80a0-3607da921fd9" class="">Untitled</p></details></li></ul><ul id="a905178e-9af8-401c-8a48-1329dbdabfe6" class="toggle"><li><details open=""><summary>Cognito Identity Pools (Federated Identity):</summary><ul id="1fcfe4df-ce51-4c0b-a9cb-8dc8103ee8e6" class="bulleted-list"><li style="list-style-type:disc">Provide AWS credentials to users (clients) so they can access AWS resources directly</li></ul><ul id="73ff9e97-2d58-4519-b018-5b67ee5527a2" class="bulleted-list"><li style="list-style-type:disc">Integrate with Cognito User Pools as an identity provider</li></ul><ul id="e05d2202-9c18-472a-8719-f23937a0df47" class="bulleted-list"><li style="list-style-type:disc">Process<ul id="c4e18ff7-7bc6-43fb-b2e5-d306bd0f7e46" class="bulleted-list"><li style="list-style-type:circle">Log in to federated identity provider or remain anonymous. The identity provider will return a token.</li></ul><ul id="324e6936-ff2a-4042-8218-2c28b8d3fad7" class="bulleted-list"><li style="list-style-type:circle">Use this token to authenticate to FIP. The FIP will verify the token.</li></ul><ul id="d48825e2-191c-4560-bd81-c7d558bb7197" class="bulleted-list"><li style="list-style-type:circle">Once verified, FIP will get the temporary credentials from STS service and send it to user.</li></ul><ul id="85de85d3-58c5-4619-bff8-32a183d2b7d6" class="bulleted-list"><li style="list-style-type:circle">These credentials come with a pre-defined IAM policy stating their permissions</li></ul></li></ul><ul id="4fc073d3-e0fa-4d12-be8f-85e08af65dad" class="bulleted-list"><li style="list-style-type:disc">Example: provide temporary access to write to an S3 bucket after authenticating the user via FaceBook.</li></ul></details></li></ul><ul id="2346ddd7-e699-452b-802e-47241d9748b7" class="toggle"><li><details open=""><summary>Cognito Sync (deprecated):</summary><ul id="3129a711-5464-481c-9f93-0c854ef55535" class="bulleted-list"><li style="list-style-type:disc">Deprecated (use AWS AppSync now)</li></ul><ul id="7e22e3d3-f661-477c-bc0c-dd195a887cff" class="bulleted-list"><li style="list-style-type:disc">Store user preferences, configuration, state of app</li></ul><ul id="88bcacbe-ba80-4d91-9c5f-335bc825922b" class="bulleted-list"><li style="list-style-type:disc">Cross device synchronization (any platform iOS, Android, etc.)</li></ul><ul id="02920026-6630-45fc-9599-c71f50dd8b79" class="bulleted-list"><li style="list-style-type:disc">Offline capability (synchronization when back online)</li></ul><ul id="9299c4d8-49f2-4e7b-883a-8c752e4851f3" class="bulleted-list"><li style="list-style-type:disc">Requires Federated Identity Pool in Cognito (not User Pool)</li></ul><ul id="66cda0eb-3593-4297-8b35-858937444801" class="bulleted-list"><li style="list-style-type:disc">Store data in datasets (up to 1MB)</li></ul><ul id="27ad4f74-5ae4-4dca-be71-9d15d7f3eb26" class="bulleted-list"><li style="list-style-type:disc">Upto 20 datasets to synchronize</li></ul></details></li></ul></details></li></ul><ul id="44601368-de7e-47e9-86db-c037a3704cb6" class="toggle"><li><details open=""><summary>Serverless Application Model (SAM)</summary><ul id="58ab2675-2d82-494a-897f-182f40aa6d83" class="bulleted-list"><li style="list-style-type:disc">Framework for developing and deploying serverless applications</li></ul><ul id="a0132cd9-dee1-4753-80e2-213ec89d17a6" class="bulleted-list"><li style="list-style-type:disc">All the configuration is YAML code<ul id="3842b2d6-7e30-4e79-bbe3-4df47f6c8242" class="bulleted-list"><li style="list-style-type:circle">Lambda Functions</li></ul><ul id="506f886f-80e9-43d0-926b-5113b1ec8c6c" class="bulleted-list"><li style="list-style-type:circle">DynamoDB tables</li></ul><ul id="e41db6da-3915-4d25-960c-e249626f9149" class="bulleted-list"><li style="list-style-type:circle">API Gateway</li></ul><ul id="6c132dbd-a916-409b-a53d-640ce2a871eb" class="bulleted-list"><li style="list-style-type:circle">Cognito User Pools</li></ul></li></ul><ul id="5b5f3d59-2ac1-4c79-a35d-dd11dbe7af13" class="bulleted-list"><li style="list-style-type:disc">SAM can help you to run Lambda, API Gateway, DynamoDB locally for development and debugging</li></ul><ul id="dd29c8d5-9f18-469b-aab3-1a142096a1e5" class="bulleted-list"><li style="list-style-type:disc">SAM can use CodeDeploy to deploy Lambda functions</li></ul></details></li></ul></div><h3 id="42b7d92e-8f0a-4bf6-be25-fd771503144c" class=""><details open=""><summary>Section 21: Serverless Solution Architecture Discussions</summary></details></h3><div class="indented"><ul id="cf2c0b7e-3953-49ae-9d62-dc2963395cfa" class="toggle"><li><details open=""><summary>ToDo List App</summary><ul id="10ab88d9-3af1-4182-b9e5-45c6c4207aba" class="bulleted-list"><li style="list-style-type:disc">Requirements<ul id="b6674364-52d8-4fbc-b88b-c7ca969e8138" class="bulleted-list"><li style="list-style-type:circle">Expose as REST API with HTTPS</li></ul><ul id="b6ffc789-628a-4aac-ad26-1d4196c15120" class="bulleted-list"><li style="list-style-type:circle">Serverless architecture</li></ul><ul id="c2006dcb-0f59-4667-a344-40f3e2369739" class="bulleted-list"><li style="list-style-type:circle">Users should be able to directly interact with their own folder in S3</li></ul><ul id="146e174f-201c-4a25-a43d-fb8ab573aa4c" class="bulleted-list"><li style="list-style-type:circle">Users should authenticate through a managed serverless service</li></ul><ul id="5f718e46-15a9-46ab-b4f0-3bd218d60325" class="bulleted-list"><li style="list-style-type:circle">Users can write and read to-dos, but they mostly read them</li></ul><ul id="9260e872-4739-4cce-9d80-3ff81dc80dbb" class="bulleted-list"><li style="list-style-type:circle">The database should scale, and have some high read throughput</li></ul></li></ul><ul id="7a5dcfa8-f84d-416a-a259-f603a6395a4b" class="bulleted-list"><li style="list-style-type:disc">REST API Layer<figure id="52234829-a6f4-4bda-a079-633e0fb21bd5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20307.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20307.png"/></a></figure></li></ul><ul id="aabce8a9-5444-464e-a691-44cca4e7b983" class="bulleted-list"><li style="list-style-type:disc">Giving users access to a folder in S3<p id="b93ff424-3906-4b88-83f1-d11d56ce0b5f" class="">Cognito Identity Pool can be used to get temporary credentials after authenticating using CUP.</p><p id="38c221ce-1f49-451a-9241-a8327f126ea5" class="">Pre-signed URL isn’t used since we need to provide access to the bucket and not an object.</p><figure id="c178cab7-9d31-4d54-be99-8fe9a60b1162" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20308.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20308.png"/></a></figure></li></ul><ul id="921daced-2763-493c-b7cd-76cd6be89c45" class="bulleted-list"><li style="list-style-type:disc">Improving read throughputs<p id="5a026bf2-0fe5-4d76-9d0e-8c7518f81ec2" class="">We can implement a DAX layer to cache DynamoDB queries.</p><p id="55d11db1-5b38-4684-8c2d-115f57d764a1" class="">Caching can also be implemented as the API gateway level if the read responses don’t change much.</p><figure id="c4d9a09d-29a4-4d32-ba0c-31cc066daf3d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20309.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20309.png"/></a></figure></li></ul></details></li></ul><ul id="cc34ea38-8fed-478c-9006-2064a6747309" class="toggle"><li><details open=""><summary>Blogging Website</summary><ul id="07c9d20a-1b5e-47df-b871-722306277626" class="bulleted-list"><li style="list-style-type:disc">Requirements<ul id="51afebc7-052b-4c32-880c-0a2735e37bee" class="bulleted-list"><li style="list-style-type:circle">This website should scale globally</li></ul><ul id="36858705-5dfd-4d41-9dbb-e8085cc385b8" class="bulleted-list"><li style="list-style-type:circle">Blogs are rarely written, but often read</li></ul><ul id="01418de8-4ad6-4205-b75a-2812be8bb863" class="bulleted-list"><li style="list-style-type:circle">Some of the website is purely static files, the rest is a dynamic REST API (public)</li></ul><ul id="7f2acb17-2651-43c0-8905-5c8063083d09" class="bulleted-list"><li style="list-style-type:circle">Caching must be implement where possible</li></ul><ul id="e1bdff94-56ea-4c1f-ae71-8d4e4cc6a558" class="bulleted-list"><li style="list-style-type:circle">Any new users that subscribes should receive a welcome email</li></ul><ul id="31b9fd18-c01c-4e90-a700-84ba27dbc79f" class="bulleted-list"><li style="list-style-type:circle">Any photo uploaded to the blog should have a thumbnail generated</li></ul></li></ul><ul id="0af9ebef-d526-4021-b6c9-ac18acc6cbc7" class="bulleted-list"><li style="list-style-type:disc">Serve content globally<p id="7887ff08-559b-4ade-9077-2031055ec444" class="">CF will distribute the content globally.</p><p id="4a5e6527-ce52-4282-9e4d-68d7f1e2a8ab" class="">Using OAI, S3 bucket policy will only allow CF to access the data in S3. Client’s cannot connect to S3 directly.</p><figure id="60a8bfe2-e1af-4c80-91a8-ed7de3b560d4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20310.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20310.png"/></a></figure></li></ul><ul id="d2dc3d02-2ae5-4e3d-b28c-acf7959f7adf" class="bulleted-list"><li style="list-style-type:disc">REST APIs<p id="a43625a7-1e40-4985-82ae-981c35ae3fda" class="">Since the website will be accessed globally, use DynamoDB global tables.</p><figure id="1724a2ee-b52d-44f3-8fff-a1e0e86db101" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20311.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20311.png"/></a></figure></li></ul><ul id="3d916d07-5537-429c-ae70-637591e673ec" class="bulleted-list"><li style="list-style-type:disc">Welcome email<p id="c3470107-b443-4221-a19a-cd6afdc622c5" class="">Use DynamoDB streams to capture item insertion events to invoke a lambda which uses SDK to send emails using Simple Email Service.</p><figure id="4d5b79c4-4a6a-4fe6-a2c0-18057f60b371" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20312.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20312.png"/></a></figure></li></ul><ul id="d67914ef-0835-45a3-8e6f-557b563d22c3" class="bulleted-list"><li style="list-style-type:disc">Thumbnail Generation<p id="cabfb35e-b87d-4684-ab9d-17b2adc43298" class="">User can upload images directly to S3 or through CF (transfer acceleration).</p><figure id="7b791063-5161-4a89-a806-afd3bf308ad3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20313.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20313.png"/></a></figure></li></ul></details></li></ul><ul id="774af09a-e4cb-4d2c-9e9e-a92942db862c" class="toggle"><li><details open=""><summary>Micro-services Architecture</summary><ul id="b0d4ba02-1deb-4b41-8494-58822a8b305b" class="bulleted-list"><li style="list-style-type:disc">Many services interact with each other directly using a REST API</li></ul><ul id="b8d02f2f-0737-4feb-a52e-fa131a4f09f6" class="bulleted-list"><li style="list-style-type:disc">The architecture for each micro service may vary in form and shape</li></ul><ul id="363f8f12-c0e3-493a-ac14-680ab263e038" class="bulleted-list"><li style="list-style-type:disc">Micro-service architecture allows us to have a leaner development lifecycle for each service</li></ul><figure id="50a70dfc-d3fa-4074-b1e1-e6a13ef3e794" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(484).png"><img style="width:816px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(484).png"/></a></figure><ul id="1a38fcfa-aa66-41d7-9785-21bd87a681a6" class="bulleted-list"><li style="list-style-type:disc">Each service can scale independently of each other</li></ul><ul id="c9c73507-c170-42f7-a641-70f39bee1617" class="bulleted-list"><li style="list-style-type:disc">Each service has a separate code repository</li></ul><ul id="f378ad03-88a4-45d7-a05d-dc156061ee4e" class="bulleted-list"><li style="list-style-type:disc">Communication between services:<ul id="fb2c68a8-bb87-47d6-89b9-04d10ae2aef7" class="bulleted-list"><li style="list-style-type:circle">Synchronous patterns: API Gateway, Load Balancers</li></ul><ul id="c9ff1455-0139-4a27-8e0c-bc0cf8298bad" class="bulleted-list"><li style="list-style-type:circle">Asynchronous patterns: SQS, Kinesis, SNS</li></ul></li></ul><ul id="01d00a7f-722e-4335-8db4-1c357e0d5f75" class="bulleted-list"><li style="list-style-type:disc">Challenges with micro-services:<ul id="136a9687-fab8-477e-8701-ea74df5f7141" class="bulleted-list"><li style="list-style-type:circle">Repeated overhead for creating each new microservice</li></ul><ul id="c7512033-c5d8-4977-8bca-b7eca48420f0" class="bulleted-list"><li style="list-style-type:circle">Issues with optimizing server density/utilization</li></ul><ul id="3d924178-5dce-4f04-9be1-45563e68355b" class="bulleted-list"><li style="list-style-type:circle">Complexity of running multiple versions of multiple microservices simultaneously</li></ul><ul id="1e9868d1-e861-40e3-97c9-aeb309c76d82" class="bulleted-list"><li style="list-style-type:circle">Proliferation of client-side code requirements to integrate with many separate services.</li></ul></li></ul><ul id="b8cfc636-3800-4e95-864a-5b202adbb930" class="bulleted-list"><li style="list-style-type:disc">Some of the challenges are solved by Serverless patterns:<ul id="b6bb14a9-d042-4665-9668-085c21e0d436" class="bulleted-list"><li style="list-style-type:circle">API Gateway, Lambda scale automatically and you pay per usage</li></ul><ul id="4fad1ad6-8785-4cf9-9b97-744d19944e10" class="bulleted-list"><li style="list-style-type:circle">You can easily clone API, reproduce environments</li></ul><ul id="fe1c47d8-9c8a-4681-a15d-f5a39824aed3" class="bulleted-list"><li style="list-style-type:circle">Generated client SDK through Swagger integration for the API Gateway</li></ul></li></ul></details></li></ul><ul id="715b423d-45b2-4e96-a8ee-00350e33891e" class="toggle"><li><details open=""><summary>Software updates distribution</summary><ul id="019704be-0a1f-4932-b754-6b7f44aa9d99" class="bulleted-list"><li style="list-style-type:disc">Requirements<ul id="487db45a-fcb3-4d7e-8a60-c75cb8481453" class="bulleted-list"><li style="list-style-type:circle">We have an application running on EC2, that distributes software updates once in a while</li></ul><ul id="d7147041-fa8d-42ef-9eb1-d2120b951947" class="bulleted-list"><li style="list-style-type:circle">When a new software update is out, we get a lot of request and the content is distributed in mass over the network. It’s very costly</li></ul><ul id="320f17ce-dd96-4eb1-a2a4-e0db152a8a7f" class="bulleted-list"><li style="list-style-type:circle">We don’t want to change our application, but want to optimize our cost and CPU</li></ul></li></ul><ul id="eb85029e-0875-4846-a5b6-8318ffd588ed" class="bulleted-list"><li style="list-style-type:disc">Current state of application<p id="27414470-147c-4867-a569-4c8f0a359ba7" class="">ALB along with EC2 instances in multi AZ with ASG attached for scaling. EFS volume is mounted to each instance as a network storage.</p><figure id="eeffbf95-8978-48ad-bfc2-f2c294b12658" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20314.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20314.png"/></a></figure></li></ul><ul id="8f0109bb-6c0c-4e0c-bc38-c5b5679f779c" class="bulleted-list"><li style="list-style-type:disc">Optimized solution<p id="d35aab71-8e7b-4156-8128-d8d4fdacde63" class="">Just add CF as the CDN. It will cache the static updates at the edge and will save a lot of cost. Even though the EC2 instances are not serverless, cloudFront is, and will scale for us. Our ASG will not scale as much, and we’ll save tremendously in EC2 costs. We’ll also save in availability, network bandwidth cost, etc.</p><p id="96c690a5-4b2b-45c6-8447-556f25f7d8d0" class="">CF is such an easy way to make an existing application more scalable and cheaper!</p><figure id="95fb4ebd-7b84-4ef2-a2d7-c83a02d79ef1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20315.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20315.png"/></a></figure></li></ul></details></li></ul><ul id="b48f504b-7a30-4a39-aea3-f1a3c025fac4" class="toggle"><li><details open=""><summary>Premium video downloading website</summary><ul id="f99570c5-a5da-4ec5-8f39-a3847a78ce48" class="bulleted-list"><li style="list-style-type:disc">Requirements<ul id="0889a4e7-42de-4dcd-b7c0-32c5a127d5c7" class="bulleted-list"><li style="list-style-type:circle">We sell videos online and users have to pay to buy videos</li></ul><ul id="ca8f3fc1-4790-44cf-a4ba-93709bf4f606" class="bulleted-list"><li style="list-style-type:circle">Each video can be bought by many different customers</li></ul><ul id="296ceca4-73ae-4699-afe6-d7656103c9c1" class="bulleted-list"><li style="list-style-type:circle">We only want to distribute videos to users who are premium users</li></ul><ul id="6e842958-122e-4031-9f1b-c0f3533c5f7f" class="bulleted-list"><li style="list-style-type:circle">We have a database of premium users</li></ul><ul id="842c31cc-c8f1-4e90-bbe1-c73e138c53e1" class="bulleted-list"><li style="list-style-type:circle">Links we send to premium users should be short lived</li></ul><ul id="fb8882b1-1c25-42d0-8041-dd208cfc8e4a" class="bulleted-list"><li style="list-style-type:circle">Our application is global</li></ul><ul id="3408d810-d2fd-4e38-95c7-9ebfaac73c3d" class="bulleted-list"><li style="list-style-type:circle">We want to be fully serverless</li></ul></li></ul><ul id="3bffa03c-d275-49e9-a0d2-7c4cce5c7215" class="bulleted-list"><li style="list-style-type:disc">Premium Service<p id="5e7000b4-c6f9-406f-8603-a75f5b174268" class="">Since the user must login to view premium videos, we can use Cognito for authentication. If the user is authenticated, API gateway will send the login info to Lambda which can query the DynamoDB to check whether the authenticated user is premium or not.</p><figure id="51256362-1d53-4cf3-bcbc-ddc807fe048a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20316.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20316.png"/></a></figure></li></ul><ul id="6784a4e4-6c36-4fdf-a148-70b2d707d7a0" class="bulleted-list"><li style="list-style-type:disc">Distribute paid content to premium users<p id="b0af38b9-2982-48f5-a6d6-88becfdcf231" class="">We need to use another API endpoint to get signed URL from CloudFront. The API gateway after verifying the authentication of the client using Cognito, will invoke a lambda function that will query the DB to check if the user is premium. If so, it will use SDK to generate CF pre-signed URL and return it to client. The client will use the signed URL to access paid content via CF.</p><p id="5be7a5f9-3a4a-428a-b963-a4c9dd806740" class="">We are not using S3 signed URL as they are not optimized for global access.</p><p id="6debd022-9645-4dd9-8f0e-51759b7a8e47" class="">💡 CloudFront signed URLs also have IP restriction security.</p><figure id="5df9ea61-69c4-43fb-97c7-a897dd22a39e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20317.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20317.png"/></a></figure></li></ul></details></li></ul><ul id="97d45a1b-27b3-4593-b52e-c33a0e30e2f5" class="toggle"><li><details open=""><summary>Data ingestion pipeline</summary><ul id="03f287d3-bb16-4651-b7e5-0f4df71a50b5" class="bulleted-list"><li style="list-style-type:disc">Requirements<ul id="98bca175-fc3c-478d-a6f4-2b5108ce7e72" class="bulleted-list"><li style="list-style-type:circle">We want the ingestion pipeline to be fully serverless</li></ul><ul id="a9a5c054-0f18-4efe-90b0-e0cab8cd8364" class="bulleted-list"><li style="list-style-type:circle">We want to collect data in real time</li></ul><ul id="ad042ff0-f7d6-40d5-8df3-8a3c2766c331" class="bulleted-list"><li style="list-style-type:circle">We want to transform the data</li></ul><ul id="4d912d21-95fb-4008-a3f6-cb8436ca8662" class="bulleted-list"><li style="list-style-type:circle">We want to query the transformed data using SQL</li></ul><ul id="9d52510a-7297-465d-b9d4-0c2f38fd2e04" class="bulleted-list"><li style="list-style-type:circle">The reports created using the queries should be in S3</li></ul><ul id="14e51a3b-99e2-4ace-a66e-07257f1f93f8" class="bulleted-list"><li style="list-style-type:circle">We want to load that data into a warehouse and create dashboards</li></ul></li></ul><ul id="6e278d1a-a6da-4588-bd8a-8e63f9cfd389" class="bulleted-list"><li style="list-style-type:disc">Solution<p id="5a75b14f-47a4-4fa6-a72d-eabaaf86684f" class="">In the example below, data is published by IoT devices. The data go to KDS and then into KDF with a lambda for transformation. KDF writes data into S3 in batches. S3 notifications invoke a lambda that triggers Athena to query the transformed data and store the query results in another S3 bucket for further analysis.</p><figure id="716f96bd-9511-4374-b3ad-20f4203546dc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20318.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20318.png"/></a></figure></li></ul></details></li></ul></div><h3 id="3fc5b6f6-2d3c-4c89-abd1-660c80f68217" class=""><details open=""><summary>Section 22: Database in AWS</summary></details></h3><div class="indented"><ul id="9ab7e7d9-6ad8-4eb4-ba8c-1018cc47e9c1" class="toggle"><li><details open=""><summary>Intro</summary><figure id="a613c298-8f97-422f-a22c-6cea814d24f3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(485).png"><img style="width:890px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(485).png"/></a></figure><figure id="cf020d16-02f6-409c-9154-e90447b70629" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(486).png"><img style="width:1739px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(486).png"/></a></figure></details></li></ul><ul id="003919da-9dfd-4a93-bc1e-c815847b6f76" class="toggle"><li><details open=""><summary>RDS</summary><figure id="fde04f7f-e564-4a70-93e9-6ff9897b908b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(488).png"><img style="width:1717px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(488).png"/></a></figure></details></li></ul><ul id="0d46ae10-e95c-42c4-9264-6a3e889d6876" class="toggle"><li><details open=""><summary>Aurora</summary><figure id="a5ac4843-3a4d-467a-a471-cd0b06d64459" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(489).png"><img style="width:1714px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(489).png"/></a></figure></details></li></ul><ul id="0de95104-1c4d-4ca5-91c6-7599a35dc808" class="toggle"><li><details open=""><summary>ElastiCache</summary><figure id="bb0ca648-0c81-4312-958b-7cca4e60641a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(490).png"><img style="width:1761px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(490).png"/></a></figure></details></li></ul><ul id="90e0bfa8-72de-44c0-b5b2-ad40879dd47b" class="toggle"><li><details open=""><summary>DynamoDB</summary><figure id="686170b0-f2cb-458a-ad76-50b41243b059" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(491).png"><img style="width:1753px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(491).png"/></a></figure></details></li></ul><ul id="9d794ef3-aa13-4a08-9c35-a4861a7791b4" class="toggle"><li><details open=""><summary>S3</summary><figure id="91800ff0-a424-4e37-adac-02012f1a07c8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(492).png"><img style="width:1801px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(492).png"/></a></figure></details></li></ul><ul id="3c6f33cf-1474-4a59-a976-b517f03d0cb7" class="toggle"><li><details open=""><summary>DocumentDB</summary><figure id="3cab7b63-12e3-4867-8c9c-e5d22495a5e3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(493).png"><img style="width:1745px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(493).png"/></a></figure></details></li></ul><ul id="2983ccaf-20b2-49c2-854b-8407f3176057" class="toggle"><li><details open=""><summary>Neptune</summary><figure id="9ffc13f0-a64a-468f-9417-9e203c85bf32" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(494).png"><img style="width:672px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(494).png"/></a></figure></details></li></ul><ul id="35c24f97-53cf-4ff9-b27c-5603e306e869" class="toggle"><li><details open=""><summary>Keyspaces for Apache Cassandra</summary><figure id="cc204ab2-96c2-460d-a860-bf81eed5817b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(495).png"><img style="width:1745px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(495).png"/></a></figure></details></li></ul><ul id="7c6edfac-563e-4875-bc40-e77f97010b86" class="toggle"><li><details open=""><summary>QLDB</summary><figure id="a05ad513-8b2c-466f-b238-0b3f8ae81dbe" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(496).png"><img style="width:1613px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(496).png"/></a></figure></details></li></ul><ul id="3b7bf3ec-8882-44f6-8245-17bfac30ed84" class="toggle"><li><details open=""><summary>Timestream</summary><figure id="e4fa078e-f571-4a57-af14-5baec83b5690" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(497).png"><img style="width:1712px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(497).png"/></a></figure><figure id="bbeae14d-9d4e-4aac-b83e-f6b6939997ee" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(498).png"><img style="width:954px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(498).png"/></a></figure></details></li></ul></div><h3 id="96cfe735-fb6c-4b79-9faf-b0a6397d1672" class=""><details open=""><summary>Section 23: Data &amp; Analytics</summary></details></h3><div class="indented"><ul id="e65f1704-92de-4ca6-80fc-7d10ddc1d856" class="toggle"><li><details open=""><summary>Athena</summary><figure id="5a5be117-dc17-408c-af1a-66ec73585d59" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(500).png"><img style="width:1769px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(500).png"/></a></figure><figure id="8f25f79f-e4ca-4a94-b735-b9e3b0765eaf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(501).png"><img style="width:1711px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(501).png"/></a></figure><figure id="87fcf10f-e23d-4fcf-aecc-42dac221e5b5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(502).png"><img style="width:1788px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(502).png"/></a></figure></details></li></ul><ul id="2d288180-24c6-49d6-90eb-042889dcabde" class="toggle"><li><details open=""><summary>RedShift</summary><figure id="eafbc01d-cb0d-447c-90c0-dbd30b56cfc9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(503).png"><img style="width:1789px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(503).png"/></a></figure><figure id="506ea301-7944-455b-98a8-0ba5c5605d03" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(504).png"><img style="width:1856px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(504).png"/></a></figure><figure id="2b03d2aa-3f42-4a95-87cd-4996163976ad" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(505).png"><img style="width:1739px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(505).png"/></a></figure><figure id="394ab942-8699-465d-afba-781f9d60610f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(506).png"><img style="width:1888px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(506).png"/></a></figure><figure id="db7a9c72-3e81-4cc2-9b4a-fb3ffa28bc58" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(508).png"><img style="width:1765px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(508).png"/></a></figure></details></li></ul><ul id="3f14a61f-f1b1-4521-8ff5-ccabd16fd0f5" class="toggle"><li><details open=""><summary>OpenSearch</summary><figure id="a15acc76-d720-4445-8457-fa9712ebae8d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(509).png"><img style="width:932px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(509).png"/></a></figure><figure id="7436cb0c-c17f-4276-b012-faccd0df0170" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(510).png"><img style="width:878px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(510).png"/></a></figure><figure id="25b68f5c-4ad7-4b4f-b9a2-b47c13b4f666" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(511).png"><img style="width:1622px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(511).png"/></a></figure></details></li></ul><ul id="e762040e-7844-4bd3-9b3c-03b655816bf8" class="toggle"><li><details open=""><summary>EMR</summary><figure id="129d5542-3d97-465a-8d65-0668ac50e1bb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(512).png"><img style="width:932px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(512).png"/></a></figure><figure id="122a4bcb-3551-4a6a-951b-2ba798ac9cef" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(513).png"><img style="width:942px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(513).png"/></a></figure></details></li></ul><ul id="184f0172-4b48-4504-ae88-436d0eb342c9" class="toggle"><li><details open=""><summary>QuickSight</summary><figure id="c0ab07ad-ca8f-4779-95ca-674d955709d0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(514).png"><img style="width:1920px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(514).png"/></a></figure><figure id="6db6af3c-fb5b-4046-9efe-6635539ee0a6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(515).png"><img style="width:941px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(515).png"/></a></figure><figure id="ec9a7c0c-1b69-45fc-baf9-86e043c265c4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(516).png"><img style="width:890px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(516).png"/></a></figure></details></li></ul><ul id="8837ab44-edf2-4cdb-bca9-695387f0df18" class="toggle"><li><details open=""><summary>AWS Glue</summary><figure id="32023077-3494-4305-a760-5a866dd1fdce" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(518).png"><img style="width:945px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(518).png"/></a></figure><figure id="d672f02a-64e5-4689-b5d2-280e77058802" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(519).png"><img style="width:954px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(519).png"/></a></figure><figure id="c00abf32-0f84-4c46-926b-678bb4fca13a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(520).png"><img style="width:953px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(520).png"/></a></figure><figure id="389c943f-e5d9-42aa-a624-eae5e16cb247" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(521).png"><img style="width:913px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(521).png"/></a></figure></details></li></ul><ul id="da762279-355c-4697-9aad-4ea458347a09" class="toggle"><li><details open=""><summary>Lake Formation</summary><figure id="680d6393-a020-480b-a39c-010f4fa36bd1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(522).png"><img style="width:945px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(522).png"/></a></figure><figure id="69085cd8-6ff0-4c1b-9fe2-274f186c61c2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(523).png"><img style="width:1728px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(523).png"/></a></figure><figure id="9c7826c3-fd5a-41e1-9e94-e9ff2057e14c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(524).png"><img style="width:1791px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(524).png"/></a></figure></details></li></ul><ul id="4b069ab2-fa9a-45ff-a510-26117782ed51" class="toggle"><li><details open=""><summary>KDA</summary><ul id="706bfc21-5a87-43a3-8e39-ee7d0e8d91ab" class="toggle"><li><details open=""><summary>Kinesis Data Analytics for SQL</summary><ul id="46874c12-0270-44bc-b591-638e8a20b2ba" class="bulleted-list"><li style="list-style-type:disc">Perform real-time analytics on Kinesis Streams using SQL</li></ul><ul id="f2e0d959-c2ed-48c0-b4ab-faca49ddffb7" class="bulleted-list"><li style="list-style-type:disc">Fully managed, no servers to provision</li></ul><ul id="ad2fc766-b651-4187-b20f-b2a6d289c430" class="bulleted-list"><li style="list-style-type:disc">Automatic scaling</li></ul><ul id="08609749-cbc5-4c02-9062-420a2ce50b75" class="bulleted-list"><li style="list-style-type:disc">Real-time analytics</li></ul><ul id="46bbdda3-e815-4015-8522-1da7489e6400" class="bulleted-list"><li style="list-style-type:disc">Pay for actual consumption rate (data processed)</li></ul><ul id="67ce83bf-938b-4091-afb4-c0fda3fc95e2" class="bulleted-list"><li style="list-style-type:disc">Output:<ul id="0540af19-8f58-4c48-83bb-58e4fcb03b31" class="bulleted-list"><li style="list-style-type:circle">Kinesis Data Stream</li></ul><ul id="35da8a05-c548-4889-8a94-fed911fda5f6" class="bulleted-list"><li style="list-style-type:circle">Kinesis Data Firehose</li></ul></li></ul><ul id="7b00c074-ca4f-4aca-85dd-a061542f5f76" class="bulleted-list"><li style="list-style-type:disc">Can create streams out of the real-time queries</li></ul><ul id="aa638215-389f-4861-89d0-f6ff8652759a" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="2043e6da-2fe7-4469-bc7d-44f352ce6213" class="bulleted-list"><li style="list-style-type:circle">Time-series analytics</li></ul><ul id="c017ad63-96ed-499c-9ecf-1f63259c2171" class="bulleted-list"><li style="list-style-type:circle">Real-time dashboards</li></ul><ul id="ce19ffe1-d872-4e3e-9309-c0d027f15b45" class="bulleted-list"><li style="list-style-type:circle">Real-time metrics</li></ul></li></ul><figure id="0f68cde9-a5bb-47bf-a614-c938c40ce803" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20319.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20319.png"/></a></figure></details></li></ul><ul id="7d20e0f2-df51-44db-9353-21aaf8a8a8fb" class="toggle"><li><details open=""><summary>Kinesis Data Analytics for Apache Flink</summary><figure id="ba9a8534-c745-4a9f-89f3-47d4dcdfcd5b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(525).png"><img style="width:1616px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(525).png"/></a></figure></details></li></ul></details></li></ul><ul id="4b2d5a28-e6b7-4b99-a240-a7ae0e3f1109" class="toggle"><li><details open=""><summary>MSK</summary><figure id="9ff77860-e563-4cd4-8a5f-9b618169c1f3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(526).png"><img style="width:920px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(526).png"/></a></figure><figure id="039c8e67-cbef-459b-a89e-ea937e6639b5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(527).png"><img style="width:984px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(527).png"/></a></figure><figure id="69a37778-c620-409b-8d88-4de119cdb5e6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(528).png"><img style="width:939px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(528).png"/></a></figure><figure id="9b7ca937-5afe-4dcc-a6ac-5f61d8b957f0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(529).png"><img style="width:1554px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(529).png"/></a></figure></details></li></ul><ul id="bcb3f27f-63d0-4496-a332-4026db4d6a84" class="toggle"><li><details open=""><summary>Big Data Ingestion Pipeline</summary><figure id="7da5352d-cdae-4ddd-93fe-0d42b150f257" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(530).png"><img style="width:890px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(530).png"/></a></figure><figure id="2bcb01f5-e1c6-45b6-8400-0d73f35eef7c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(531).png"><img style="width:1882px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(531).png"/></a></figure><figure id="6ec3830e-59ff-4144-82dc-f63e504eef39" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(532).png"><img style="width:913px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(532).png"/></a></figure></details></li></ul></div><h3 id="42685cfb-4962-4bce-bfe7-5baf1a654477" class=""><details open=""><summary>Section 24: Machine Learning</summary></details></h3><div class="indented"><ul id="410c4189-a490-4990-9af0-7db59124a048" class="toggle"><li><details open=""><summary>Rekognition</summary><figure id="94101c7c-8549-4f6a-9928-f0aafa99c414" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(533).png"><img style="width:945px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(533).png"/></a></figure><figure id="e3e55414-9632-452a-acf6-646783a5340f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(534).png"><img style="width:1710px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(534).png"/></a></figure></details></li></ul><ul id="b3fdece9-70b6-43aa-8ffa-52f07281d456" class="toggle"><li><details open=""><summary>Transcribe</summary><figure id="294915c5-0370-45ed-aa5e-aec75600ec88" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(535).png"><img style="width:926px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(535).png"/></a></figure></details></li></ul><ul id="f35f81bf-6880-44d8-a7cf-e1d50ec71ee7" class="toggle"><li><details open=""><summary>Polly</summary><figure id="29bc3dcf-8542-45c3-b7ee-3289201ac32d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(536).png"><img style="width:915px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(536).png"/></a></figure><figure id="88a37e6b-a416-452d-a0fd-6f75cd0a9acb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(537).png"><img style="width:908px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(537).png"/></a></figure></details></li></ul><ul id="672e512f-da1d-435e-bf12-315b765c63e4" class="toggle"><li><details open=""><summary>Translate</summary><figure id="22a0fc4f-4e8f-474f-b120-621e6a97a285" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(538).png"><img style="width:1762px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(538).png"/></a></figure></details></li></ul><ul id="f1036163-8ea8-4cc7-9da2-0456b77b1818" class="toggle"><li><details open=""><summary>Lex + Connect</summary><figure id="14efb22e-5fca-42eb-9818-f59473e62d39" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(539).png"><img style="width:1706px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(539).png"/></a></figure></details></li></ul><ul id="fbd829ff-7b23-41ac-b872-ef9ef7bf7082" class="toggle"><li><details open=""><summary>Comprehend</summary><figure id="707db12e-fe88-42e8-99b6-b99ac3821f1e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(540).png"><img style="width:1742px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(540).png"/></a></figure></details></li></ul><ul id="e34a2780-31ad-4868-944e-cde78504d55a" class="toggle"><li><details open=""><summary>Comprehend Medical</summary><figure id="365835ac-24ad-4834-8e59-b632fc235cae" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(541).png"><img style="width:939px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(541).png"/></a></figure></details></li></ul><ul id="dc9bea21-a844-403b-812d-c5661977a06e" class="toggle"><li><details open=""><summary>SageMaker</summary><figure id="9bf4b135-efeb-43c0-99cd-78bff6a680f9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(542).png"><img style="width:1814px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(542).png"/></a></figure></details></li></ul><ul id="34aa9289-bfca-4d51-b9fd-f3c9e2fd2b38" class="toggle"><li><details open=""><summary>Forecast</summary><figure id="d6c6e642-427c-4e36-b919-62e14c23fcf0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(543).png"><img style="width:1822px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(543).png"/></a></figure></details></li></ul><ul id="52d2173c-8d8d-40dd-82c7-23ccb450a22b" class="toggle"><li><details open=""><summary>Kendra</summary><figure id="c5dc7757-48a0-41dd-8e4d-4503cc85f13d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(544).png"><img style="width:1755px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(544).png"/></a></figure></details></li></ul><ul id="6b86123c-88b4-457e-8f72-cefefb577d55" class="toggle"><li><details open=""><summary>Personalize</summary><figure id="fd00516e-086d-4efb-a3ca-762c304d8d28" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(545).png"><img style="width:1774px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(545).png"/></a></figure></details></li></ul><ul id="b7da3356-8cfe-453c-80d4-87b3c101a11d" class="toggle"><li><details open=""><summary>Textract</summary><figure id="363428b6-941b-477a-9877-6eebf6423f55" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(546).png"><img style="width:1717px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(546).png"/></a></figure></details></li></ul><ul id="2d7195c0-de2d-4074-a0ba-36b62a912c2d" class="toggle"><li><details open=""><summary>ML Summary</summary><figure id="7eee00f4-ddb3-401a-af90-04869ffc2f5f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(547).png"><img style="width:1412px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(547).png"/></a></figure><p id="0486e270-ab06-4ac2-a683-c74658e8796f" class="">/ima</p></details></li></ul></div><h3 id="e90bb24c-d051-4d52-9b2d-feb0e7a036ee" class=""><details open=""><summary>Section 25: AWS Monitoring &amp; Audit: CloudWatch, CloudTrail &amp; Config</summary></details></h3><div class="indented"><ul id="5ec7c83e-9f02-4ef1-82d1-50360d3142e8" class="toggle"><li><details open=""><summary>CloudWatch</summary><ul id="5f0affe4-c7b9-404b-a4ca-b7d58282e51d" class="toggle"><li><details open=""><summary>Metrics</summary><ul id="2daf7c76-eaf5-4e05-a267-b60362fdeff5" class="toggle"><li><details open=""><summary>Intro</summary><ul id="2b9c4079-d7b1-4458-95af-6c451f5fd0a9" class="bulleted-list"><li style="list-style-type:disc">CloudWatch provides metrics for every service in AWS</li></ul><ul id="8d2d6d11-9621-467b-9aea-c0c4fe6ec20f" class="bulleted-list"><li style="list-style-type:disc">Metric is a variable to monitor (CPUUtilization, etc.)</li></ul><ul id="5fa95757-f293-46b6-83e2-0989fe10298b" class="bulleted-list"><li style="list-style-type:disc">Metrics are segregated by namespaces (which AWS service they monitor)</li></ul><ul id="57555993-a816-4511-8fb7-cc3a164efe9f" class="bulleted-list"><li style="list-style-type:disc">Dimension is an attribute of a metric (instance id, environment, etc.)</li></ul><ul id="c6c3f2f3-67cb-4da5-ac0f-a5bfab02c8bd" class="bulleted-list"><li style="list-style-type:disc">Up to 10 dimensions per metric</li></ul><ul id="8d6369f9-d7f1-43da-a2d7-9ac6e9457262" class="bulleted-list"><li style="list-style-type:disc">Metrics have timestamps</li></ul><ul id="fe93fd39-c983-447f-8693-08497244f19c" class="bulleted-list"><li style="list-style-type:disc">We can create CloudWatch dashboards of metrics</li></ul></details></li></ul><ul id="8ba32306-bc75-4325-9b42-81322244bc74" class="toggle"><li><details open=""><summary>EC2 Monitoring</summary><ul id="f6ba57d3-77ac-4936-8cca-6e0bd68d535e" class="bulleted-list"><li style="list-style-type:disc">EC2 instance metrics have metrics “every 5 minutes”</li></ul><ul id="f44d8681-f4bc-4cc3-bfa2-91e8337e5c87" class="bulleted-list"><li style="list-style-type:disc">With detailed monitoring (for a cost), you get a data “every 1 minute”</li></ul><ul id="0caacfd5-4eea-4ce0-993f-b67bc61e0f0e" class="bulleted-list"><li style="list-style-type:disc">Use detailed monitoring if you want to react faster to changes (eg. scale faster for your ASG)</li></ul><ul id="38fe2d8e-90fd-4b0e-8b31-2306810011d4" class="bulleted-list"><li style="list-style-type:disc">The AWS Free Tier allows us to have 10 detailed monitoring metrics</li></ul><ul id="e8f83ca6-4ec7-403e-b1a5-9931c3821cf9" class="bulleted-list"><li style="list-style-type:disc">Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric)</li></ul></details></li></ul><ul id="31444438-cf2c-4da5-b0b4-f85ab3f122e7" class="toggle"><li><details open=""><summary>Custom Metrics</summary><ul id="26d0726f-f699-40d8-8f34-d86bbe8c7f99" class="bulleted-list"><li style="list-style-type:disc">Possibility to define and send your own custom metrics to CloudWatch</li></ul><ul id="4655337b-b03b-40f4-9bf0-d598d5b4d599" class="bulleted-list"><li style="list-style-type:disc">We can create a custom namespace with custom dimensions (attributes) to segment metrics (eg. instanceId, environmentName, etc.)</li></ul><ul id="f1e19b72-b78c-4b5e-a232-aec9610682aa" class="bulleted-list"><li style="list-style-type:disc">Example: memory (RAM) usage, disk space, number of logged in users</li></ul><ul id="f0ad0ed2-7e33-4fc9-9f07-08a2acee2101" class="bulleted-list"><li style="list-style-type:disc">Use API call PutMetricData to send metrics data to CloudWatch</li></ul><ul id="4d62e141-1d24-4ce0-8345-7528bafc2c52" class="bulleted-list"><li style="list-style-type:disc">Metric resolution (StorageResolution API parameter) - frequency of sending metric data:<ul id="29a7a572-ecc9-4297-b878-e17657a2b899" class="bulleted-list"><li style="list-style-type:circle">Standard: 1 minute (60 seconds)</li></ul><ul id="ddc04292-6a99-4267-b2e2-3159e8039c00" class="bulleted-list"><li style="list-style-type:circle">High Resolution: 1/5/10/30 second(s) - higher cost</li></ul></li></ul><ul id="af2d74ea-40d4-415b-b6dc-8c08e10db9c4" class="bulleted-list"><li style="list-style-type:disc">Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC2 instance time correctly)</li></ul></details></li></ul></details></li></ul><ul id="a1cfe2e3-6d39-42a1-9fd3-2fe5eec1dd22" class="toggle"><li><details open=""><summary>Logs</summary><ul id="68ff4fb8-e87b-44e9-b3d5-803ef9b052b2" class="toggle"><li><details open=""><summary>Intro</summary><ul id="faa48b3f-84bc-4fe7-a289-7490f2ebdf23" class="bulleted-list"><li style="list-style-type:disc">Used to store generated logs in our application</li></ul><ul id="2d2ca101-2f80-43d4-b7de-30d620044af6" class="bulleted-list"><li style="list-style-type:disc">Regional service</li></ul><ul id="1260c1e5-e91e-4387-8610-f728bc7faa97" class="bulleted-list"><li style="list-style-type:disc">Log groups: arbitrary name, usually representing an application</li></ul><ul id="8b1ed1f2-994a-4759-8a0b-a29019eefaa0" class="bulleted-list"><li style="list-style-type:disc">Log stream: instances within application / log files / containers</li></ul><ul id="e6d81f30-6a93-4b3f-b309-df87cfbddc54" class="bulleted-list"><li style="list-style-type:disc">Can define log expiration policies (never expire, 30 days, etc..)</li></ul><ul id="81eda5cf-58fe-4541-a45c-f330757926a6" class="bulleted-list"><li style="list-style-type:disc">CloudWatch Logs can send logs to:<ul id="2146c809-c7ef-4f1b-bba7-4a930bef4dcb" class="bulleted-list"><li style="list-style-type:circle">Amazon S3 (exports)</li></ul><ul id="e81bc987-f77c-45ca-84d5-5f3a681ac6a4" class="bulleted-list"><li style="list-style-type:circle">Kinesis Data Streams</li></ul><ul id="a3445af1-6271-4366-9d7c-dade2f1fe691" class="bulleted-list"><li style="list-style-type:circle">Kinesis Data Firehose</li></ul><ul id="e0cc3b2d-e01e-436b-b2d4-17950bbaccbf" class="bulleted-list"><li style="list-style-type:circle">AWS Lambda</li></ul><ul id="5d9ec200-1095-40ec-b6c1-0c27cad078cc" class="bulleted-list"><li style="list-style-type:circle">ElasticSearch</li></ul></li></ul><ul id="f2cc9a8d-74fe-4574-8f11-30a8e526e8e4" class="bulleted-list"><li style="list-style-type:disc">Logs can be written using SDK, CloudWatch Logs Agent, CloudWatch Unified Agent (deprecated)</li></ul><ul id="c987d71f-7841-4a8a-a0f6-7d547b9a5859" class="bulleted-list"><li style="list-style-type:disc">These services automatically log data in CloudWatch logs:<ul id="daaec399-e8c3-483b-82f6-e57cf744afae" class="bulleted-list"><li style="list-style-type:circle">Elastic Beanstalk: collection of logs from application</li></ul><ul id="bcdf979f-8096-4321-bf6b-259ebd77f3fd" class="bulleted-list"><li style="list-style-type:circle">ECS: collection from containers</li></ul><ul id="f759fb32-59f4-40b0-9c8e-facca7886a32" class="bulleted-list"><li style="list-style-type:circle">AWS Lambda: collection from function logs</li></ul><ul id="90ae0d05-8cb3-4d3d-a05c-8eace9688d37" class="bulleted-list"><li style="list-style-type:circle">VPC Flow Logs: VPC specific logs</li></ul><ul id="6d6bd2bf-51aa-4bd6-a2bc-bbb5c76ba2d9" class="bulleted-list"><li style="list-style-type:circle">API Gateway</li></ul><ul id="57f63460-5919-4486-b6bd-0cdffdcb242c" class="bulleted-list"><li style="list-style-type:circle">CloudTrail based on filter</li></ul><ul id="52454035-90d1-4eb0-8a96-d1b02dc63655" class="bulleted-list"><li style="list-style-type:circle">Route53: Log DNS queries</li></ul></li></ul><ul id="6755773c-044a-4fe2-b728-c1b03434b777" class="bulleted-list"><li style="list-style-type:disc">CloudWatch Logs have metric filters which can be used to filter expressions and use the count to trigger CloudWatch alarms. Example filters:<ul id="62a6f71c-ed43-4945-a11d-6a48496832c9" class="bulleted-list"><li style="list-style-type:circle">find a specific IP inside of a log</li></ul><ul id="709d7fe2-887f-4b55-b436-b7a2f518c86a" class="bulleted-list"><li style="list-style-type:circle">count occurrences of “ERROR” in your logs</li></ul></li></ul><ul id="0d6ec47e-8920-47ae-a402-ecdfc1efe866" class="bulleted-list"><li style="list-style-type:disc">Cloud Watch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards</li></ul></details></li></ul><ul id="ad935a84-e29b-49f0-b198-6ada3ebd6cc4" class="toggle"><li><details open=""><summary>S3 Export</summary><ul id="6b263768-5012-4b88-b652-c86a3e40cf08" class="bulleted-list"><li style="list-style-type:disc">Log data can take up to 12 hours to become available for export (not near-real time or real-time)</li></ul><ul id="7b39606c-2b2d-4749-a4ad-c86aaf29ffda" class="bulleted-list"><li style="list-style-type:disc">The API call is CreateExportTask</li></ul><ul id="40a35861-16d8-4ba3-83e7-eb2cfff9f9cb" class="bulleted-list"><li style="list-style-type:disc">If you want to stream logs from CloudWatch, use Logs Subscriptions instead</li></ul></details></li></ul><ul id="6480805e-c97a-4957-b367-2516e05ec314" class="toggle"><li><details open=""><summary>Logs Subscriptions</summary><ul id="9d8a3ce2-d089-4579-abc8-54b97964eb7a" class="bulleted-list"><li style="list-style-type:disc">S3 export is non real-time</li></ul><ul id="5b9f6fe9-4441-4363-833b-fbb1b697d2a9" class="bulleted-list"><li style="list-style-type:disc">To stream logs, we can apply a subscription filter on logs and then send them to various services in real time.</li></ul><figure id="7b62af12-c25d-4c01-b3f2-569cf5447e3e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20320.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20320.png"/></a></figure></details></li></ul><ul id="c8e4cc53-87f1-4755-8175-1acebb5c0a2a" class="toggle"><li><details open=""><summary>Logs Aggregation (multi-account &amp; multi-region)</summary><p id="eebc6156-5f83-4ad0-9cc5-3a9ddd7751a8" class="">Logs from multiple accounts and regions can be aggregated using logs subscription.</p><figure id="40d5e658-1f38-414a-9a21-0f333df5694b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20321.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20321.png"/></a></figure></details></li></ul></details></li></ul><ul id="f6583c2b-9f56-4e55-80e4-a6140dd67814" class="toggle"><li><details open=""><summary>CloudWatch Unified Agent &amp; CloudWatch Logs Agent</summary><ul id="f6b11fe7-3246-4a4b-8366-9354106f3959" class="bulleted-list"><li style="list-style-type:disc">By default, no logs from your EC2 machine will go to CloudWatch</li></ul><ul id="7ca9a5c3-5a57-42ea-8a5a-fcc57a5b5b44" class="bulleted-list"><li style="list-style-type:disc">You need to run a CloudWatch agent on EC2 to push the log files</li></ul><ul id="80105167-cf03-4a7c-b701-a2aa96fd5206" class="bulleted-list"><li style="list-style-type:disc">Make sure lAM permissions allow the instance to push logs to CloudWatch</li></ul><ul id="323aaa7f-fe79-4d50-a7ad-d15687d40687" class="bulleted-list"><li style="list-style-type:disc">The Cloud Watch logs agent can be setup on-premises too</li></ul><ul id="cfedb48e-1ec9-4f8c-962f-1d21e8f80d72" class="bulleted-list"><li style="list-style-type:disc">Both are used to send logs for virtual servers (EC2 instances, on-premise servers, etc.)</li></ul><ul id="eb2e566d-d270-4395-90ae-8b89ebf9e492" class="bulleted-list"><li style="list-style-type:disc">CloudWatch Logs Agent<ul id="48e756f0-2225-4a39-82f3-4568b64a2d03" class="bulleted-list"><li style="list-style-type:circle">Old version</li></ul><ul id="8d01dda5-97d5-40ab-bd01-818648aeb2cd" class="bulleted-list"><li style="list-style-type:circle">Can only send logs to CloudWatch</li></ul></li></ul><ul id="0b4cfafd-850d-49e1-a70c-6c94109367ee" class="bulleted-list"><li style="list-style-type:disc">Cloud Watch Unified Agent<ul id="b55f2c82-20a1-497b-a12d-552392e9f3bb" class="bulleted-list"><li style="list-style-type:circle">Can send logs &amp; additional system-level metrics such as:<ul id="4a36b5ce-49c5-4b86-8ba9-638399f49092" class="bulleted-list"><li style="list-style-type:square">CPU (active, guest, idle, system, user, steal)</li></ul><ul id="253beedb-adaa-4e21-a76f-16e41c8854aa" class="bulleted-list"><li style="list-style-type:square">Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops)</li></ul><ul id="1c4ccaf5-d585-4368-8538-a222d8aa76dc" class="bulleted-list"><li style="list-style-type:square">RAM (free, inactive, used, total, cached)</li></ul><ul id="62fdfc07-5468-4734-8e8b-e1b2c7af14f0" class="bulleted-list"><li style="list-style-type:square">Netstat (number of TCP and UDP connections, net packets, bytes)</li></ul><ul id="2fc508d3-0ee5-4b36-a515-fc9ec8fc9eb0" class="bulleted-list"><li style="list-style-type:square">Processes (total, dead, bloqued, idle, running, sleep)</li></ul><ul id="d979b71d-4842-4f23-b30f-dac5a9b41cb8" class="bulleted-list"><li style="list-style-type:square">Swap Space (free, used, used %)</li></ul></li></ul><ul id="70a64351-e501-4497-8436-c62e0b6dc175" class="bulleted-list"><li style="list-style-type:circle">Centralized configuration using SSM Parameter Store</li></ul></li></ul></details></li></ul><ul id="29c34b26-fdb6-4829-a563-ff35ef6f58fc" class="toggle"><li><details open=""><summary>Alarms</summary><ul id="b092403c-ee71-436a-b9b7-2bd2db889e9a" class="toggle"><li><details open=""><summary>Intro</summary><ul id="918d8624-ec3b-4377-b7a4-9dd19e26b72e" class="bulleted-list"><li style="list-style-type:disc">Alarms are used to trigger notifications for any metric</li></ul><ul id="c8eac866-6b18-4023-828d-51d41155ff85" class="bulleted-list"><li style="list-style-type:disc">Various options to trigger alarm (sampling, %, max, min, etc.)</li></ul><ul id="0a53215c-ec70-4c6d-9c33-5ad3cf571dd4" class="bulleted-list"><li style="list-style-type:disc">Alarm States:<ul id="b6a63ab8-23ea-4906-af31-5d2a558bd98b" class="bulleted-list"><li style="list-style-type:circle">OK</li></ul><ul id="e925471c-6af4-43ee-8766-9156d90119cd" class="bulleted-list"><li style="list-style-type:circle">INSUFFICIENT_DATA</li></ul><ul id="5840c9c6-47dd-4b9a-b90d-20ec8fb516b9" class="bulleted-list"><li style="list-style-type:circle">ALARM</li></ul></li></ul><ul id="d52527a1-07af-4ad5-834d-8e3b0792db5b" class="bulleted-list"><li style="list-style-type:disc">Period:<ul id="2c489c73-a488-42ef-8c00-a92c3694aa00" class="bulleted-list"><li style="list-style-type:circle">Length of time in seconds to evaluate the metric before triggering the alarm</li></ul><ul id="3ba89688-ead3-44a4-a8a4-784914183a7e" class="bulleted-list"><li style="list-style-type:circle">High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec</li></ul></li></ul><ul id="17b53a4c-835c-4c17-bc43-800a3d029abe" class="bulleted-list"><li style="list-style-type:disc">Targets:<ul id="bd215474-446f-4ca0-b6b6-66c76db19e47" class="bulleted-list"><li style="list-style-type:circle">Stop, Terminate, Reboot, or Recover an EC2 Instance</li></ul><ul id="7db06c8f-abfb-4dc2-a109-1aeb885259af" class="bulleted-list"><li style="list-style-type:circle">Trigger Auto Scaling Action (ASG)</li></ul><ul id="c670384a-c678-473a-a548-391bdf5c9681" class="bulleted-list"><li style="list-style-type:circle">Send notification to SNS (from which you can do pretty much anything)</li></ul></li></ul><ul id="1c4d1056-0aba-475a-aa3f-1bf257ff6d2d" class="bulleted-list"><li style="list-style-type:disc">Alarms can be created based on Cloud Watch Logs Metrics Filters<figure id="d0d6671c-8830-4f24-9d85-e4acf78bca56" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20322.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20322.png"/></a></figure></li></ul><ul id="fe30f7a8-0745-435b-b3cd-b530c4080620" class="bulleted-list"><li style="list-style-type:disc">To test alarms and notifications, set the alarm state to Alarm using CLI<pre id="9a971b28-575e-4989-8448-439787348700" class="code code-wrap"><code>aws cloudwatch set-alarm-state --alarm-name &quot;myalarm&quot; --state-value ALARM --state-reason &quot;testing purposes&quot;</code></pre></li></ul></details></li></ul><ul id="60302a55-4094-4ce0-9063-b0c1fee19842" class="toggle"><li><details open=""><summary>EC2 Instance Recovery using CloudWatch Alarms</summary><p id="a4d05560-a459-4e76-9ad1-fa89057d9c2b" class="">EC2 Status Checks:</p><ul id="c9e8e29c-6a6f-4757-982f-628ad43d4aa6" class="bulleted-list"><li style="list-style-type:disc">Instance status - check the EC2 VM</li></ul><ul id="7fe1de41-87eb-4f51-b3f4-8a85435d7c41" class="bulleted-list"><li style="list-style-type:disc">System status - check the underlying hardware</li></ul><p id="7793834d-fda2-42c4-a2fe-b8b71d47178b" class="">If either of the two status checks fail, the EC2 instance is down. At this time, CW alarm will be triggered which will perform instance recovery.</p><p id="767ad5ad-f153-4caf-bde2-8d1bbf96b5cd" class="">During recovery, the private IP, public IP, elastic IP, metadata and placement group of the instance is preserved.</p><p id="a754c8a6-895a-4dda-b4f2-315c15206b03" class="">The alarm can also write to an SNS topic, signifying that the EC2 instance is being recovered.</p><figure id="676b4a5c-846a-46f2-9346-a07145d23ea6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20323.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20323.png"/></a></figure></details></li></ul><ul id="5f23abbb-3161-4242-9e70-f196b903d8c7" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="20ab921e-23c2-4466-bb44-eac25bddae88" class="bulleted-list"><li style="list-style-type:disc">Launch an EC2 instance</li></ul><ul id="8630b5fb-c34c-498c-b4d8-bd9cf8ea9aca" class="bulleted-list"><li style="list-style-type:disc">Create a CloudWatch alarm for max CPU utilization<p id="6a33e415-8a87-441d-93b5-5a008b3da6c1" class="">CloudWatch → Alarms → Create alarm</p><p id="0108cc20-0821-4ad5-a711-1bf9d25b39a2" class="">Namespace: EC2</p><p id="f03f7c09-6363-45be-8018-60da843185ef" class="">Metrics: paste the EC2 instance ID → If the metric CPU Utilization doesn’t appear, wait for some time → Once appeared, select the metric</p><p id="728b594f-3b8f-4248-8e94-864f5904c960" class="">Configure the metric</p><figure id="89f133f4-7393-4c8d-b92c-f740fec4bf27" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20324.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20324.png"/></a></figure><p id="92f7dfb5-7204-439d-8b14-f31a218fdf63" class="">If the CPU Utilization is greater than 95% for 3 data points (separated by 5 mins), trigger the alarm.</p><figure id="daca24e9-29dd-4426-8fa7-7dfa137a2105" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20325.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20325.png"/></a></figure><p id="afec2083-fb91-4f56-9938-bd30005a27c8" class="">Action will be to stop the EC2 instance.</p><figure id="aa3c3d35-1180-4fec-9115-9137d5cc08ba" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20326.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20326.png"/></a></figure></li></ul><ul id="079c220b-0c88-45b4-bff2-1de00029f112" class="bulleted-list"><li style="list-style-type:disc">Set the alarm state to ALARM using AWS CloudShell to trigger the alarm<pre id="33edc5d3-cdd9-4b0c-a02d-abb7468e44b6" class="code code-wrap"><code>aws cloudwatch set-alarm-state --alarm-name TerminateEc2OnCpuLoad --state-value ALARM --state-reason testing</code></pre><figure id="4bc44c44-e2e9-44fb-a142-27855cfc090a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20327.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20327.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="be6c271f-6ccb-40e7-b363-3d976875d78e" class="toggle"><li><details open=""><summary>Dashboards</summary><ul id="d1329972-52bb-49f8-934f-a2ce7c64baa8" class="bulleted-list"><li style="list-style-type:disc">Great way to setup custom dashboards for quick access to key metrics and alarms</li></ul><ul id="f7cb604b-e8d7-47c5-8260-37230b611867" class="bulleted-list"><li style="list-style-type:disc">Dashboards are global</li></ul><ul id="e72c7132-59d3-4817-857c-3f8b04de7954" class="bulleted-list"><li style="list-style-type:disc">Dashboards can include graphs from different AWS accounts and regions</li></ul><ul id="734e1c16-2a08-422e-a678-b1f7aa652f52" class="bulleted-list"><li style="list-style-type:disc">You can change the time zone &amp; time range of the dashboards</li></ul><ul id="e3cefee4-d5b1-4a0c-9e0b-1e989dca9524" class="bulleted-list"><li style="list-style-type:disc">You can setup automatic refresh (10s, 1 m, 2m, 5m, 15m)</li></ul><ul id="7a29055a-0d1b-414f-bf9c-c7a8a572367f" class="bulleted-list"><li style="list-style-type:disc">Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito)</li></ul><ul id="650b5f48-4271-483b-97a9-5bb0bc02bac9" class="bulleted-list"><li style="list-style-type:disc">Pricing: 3 dashboards (up to 50 metrics) for free, $3/dashboard/month afterwards</li></ul><ul id="cd0e0105-0f98-4660-b621-90ba60b28b0c" class="bulleted-list"><li style="list-style-type:disc">To create a dashboard: CloudWatch → Dashboards → Create For each graph you add to the dashboard, you can choose the region, service and metric.</li></ul></details></li></ul><p id="66fd0e9c-bbdd-4642-a671-b5e11a272bcb" class="">
</p><p id="abc4f27d-6dbe-4959-a59a-51f1dfb89797" class="">new →</p><ul id="e620ac14-96d9-469d-9060-a5d89b4e9fd2" class="toggle"><li><details open=""><summary>Events (now EventBridge)</summary><ul id="996e3140-7577-434c-aa06-72f41f6faa04" class="bulleted-list"><li style="list-style-type:disc">Event Pattern: Intercept events from AWS services (Sources)</li></ul><ul id="33efd03d-d479-4751-960c-2174b949b88c" class="bulleted-list"><li style="list-style-type:disc">Example sources: EC2 Instance Start, CodeBuild Failure, S3, Trusted Advisor</li></ul><ul id="8606d5b0-532f-446d-b4e2-dce19a4200f4" class="bulleted-list"><li style="list-style-type:disc">Can intercept any API call with Cloud Trail integration</li></ul><ul id="df552873-97b9-4ca7-bcff-7306a571f944" class="bulleted-list"><li style="list-style-type:disc">Schedule or Cron to create events on a schedule (example: create an event every 4 hours)</li></ul><ul id="38b3671f-b171-4b7b-b2a9-1456f0634b6c" class="bulleted-list"><li style="list-style-type:disc">A JSON payload is created from the event and passed to a target which could be<ul id="39924490-4d2b-45e7-95b5-9e952b9c71ca" class="bulleted-list"><li style="list-style-type:circle">Compute: Lambda, Batch, ECS task</li></ul><ul id="f4285894-b24f-441a-aecf-7fe9767751a4" class="bulleted-list"><li style="list-style-type:circle">Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose</li></ul><ul id="f3bc7e83-d997-4b0b-af9e-43fec8e393c5" class="bulleted-list"><li style="list-style-type:circle">Orchestration: Step Functions, CodePipeline, CodeBuild</li></ul><ul id="7822fa35-e93e-48c5-ba87-159f469b5d0b" class="bulleted-list"><li style="list-style-type:circle">Maintenance: SSM, EC2 Actions</li></ul></li></ul><ul id="e2c6b2ba-1b21-4137-80d6-5a909ab6fd05" class="bulleted-list"><li style="list-style-type:disc">Uses default event bus (custom &amp; partner event buses are not supported)</li></ul></details></li></ul></details></li></ul><ul id="664b920b-b97f-4e7b-9caf-30b7e440de59" class="toggle"><li><details open=""><summary>EventBridge</summary><ul id="874f9676-aafd-4b96-bba1-84c6a810fd45" class="toggle"><li><details open=""><summary>Intro</summary><figure id="be3e212d-662c-4da9-b21b-8198598731e3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(548).png"><img style="width:931px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(548).png"/></a></figure><figure id="cd8259ed-521e-4463-b20d-bbf2b2a81568" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(549).png"><img style="width:1852px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(549).png"/></a></figure></details></li></ul><ul id="c75143c4-b8a8-4469-9e7c-2c9da317e2dc" class="toggle"><li><details open=""><summary>Schema Registry</summary><figure id="1908c4aa-7b27-42c6-ad00-60414042e88d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(550).png"><img style="width:918px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(550).png"/></a></figure><figure id="0031ad11-ef54-4c7e-8cba-c893357de030" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(551).png"><img style="width:918px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(551).png"/></a></figure></details></li></ul><ul id="b6456197-707f-414a-9f6f-7a476e22477c" class="toggle"><li><details open=""><summary>Resource based policy</summary><figure id="897743a3-55d0-4405-9a8d-e952b86e32c6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(552).png"><img style="width:624px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(552).png"/></a></figure></details></li></ul></details></li></ul><ul id="9b3e3fe3-cb22-4692-b0cd-91000517db31" class="toggle"><li><details open=""><summary>CloudWatch Insights and Operational Visibility</summary><figure id="51d4e2d3-f7ba-4109-bc5c-87ebebcde58f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(553).png"><img style="width:1767px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(553).png"/></a></figure><figure id="164a4e59-5684-47da-9edc-893ab60e5e19" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(554).png"><img style="width:940px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(554).png"/></a></figure><figure id="f79fa279-6d40-4c9e-b740-ec1d6708a9f7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(555).png"><img style="width:1751px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(555).png"/></a></figure><figure id="5ab2b40f-0fe0-47fe-afbf-f078521f254c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(556).png"><img style="width:924px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(556).png"/></a></figure><figure id="4366fb0e-f77d-4fc3-b95a-3dac344975c1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(557).png"><img style="width:924px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(557).png"/></a></figure></details></li></ul><ul id="3f48810e-05f3-4a30-86b9-4c9d3cf71d5f" class="toggle"><li><details open=""><summary>CloudTrail</summary><ul id="634ae9aa-5970-48d0-8b0b-d4809ffc9fac" class="toggle"><li><details open=""><summary>Intro</summary><ul id="405ce877-f7c3-441b-9ff7-224519bd5a81" class="bulleted-list"><li style="list-style-type:disc">Provides governance, compliance and audit for your AWS Account</li></ul><ul id="dc262420-2b95-4880-9b5a-3d2f55eaddad" class="bulleted-list"><li style="list-style-type:disc">CloudTrail is enabled by default</li></ul><ul id="17131a8c-dfec-47cd-815a-45de17a1b847" class="bulleted-list"><li style="list-style-type:disc">Get a history of events / API calls made within your AWS account by:<ul id="83e4647e-3344-4a8a-a873-13a5f0f3c124" class="bulleted-list"><li style="list-style-type:circle">Console</li></ul><ul id="3004e01c-bb64-425d-a118-d6fc861c6081" class="bulleted-list"><li style="list-style-type:circle">SDK</li></ul><ul id="7dec084f-9861-4b75-ae48-96463ff1c8a6" class="bulleted-list"><li style="list-style-type:circle">CLI</li></ul><ul id="ada4bef3-3e96-49b9-9e3e-a5b2d37f849d" class="bulleted-list"><li style="list-style-type:circle">all AWS Services</li></ul></li></ul><ul id="0c530c2f-2f15-424b-98a7-a080b6d2412b" class="bulleted-list"><li style="list-style-type:disc">Can put logs from CloudTrail into CloudWatch Logs or S3</li></ul><ul id="32e1fdbd-7991-4f29-9450-05dae11ee8db" class="bulleted-list"><li style="list-style-type:disc">A trail can be applied to All Regions (default) or a single Region to accumulate them into a single bucket.</li></ul><ul id="2cae1c43-2a4a-4ee2-aa40-c52e1b245ee3" class="bulleted-list"><li style="list-style-type:disc">Use: if a resource is deleted in AWS, investigate CloudTrail first</li></ul><figure id="124749cc-1cbb-4770-a3e6-a2081ce115b5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20328.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20328.png"/></a></figure></details></li></ul><ul id="4f4fe4a6-e277-41e6-82da-00ad4a19c8a3" class="toggle"><li><details open=""><summary>Event types</summary><ul id="f72dcbe2-4a7a-40b7-93be-4894b3dd1869" class="toggle"><li><details open=""><summary>Management Events</summary><ul id="26b53f79-280a-4bd2-aaed-9048b632eb89" class="bulleted-list"><li style="list-style-type:disc">Operations that are performed on resources in your AWS account</li></ul><ul id="49afe86c-bb7e-4eb2-b8ac-dc6f7da028cb" class="bulleted-list"><li style="list-style-type:disc">Examples<ul id="2f99ce6a-ce3f-41e6-8c6b-c869e20ee5e2" class="bulleted-list"><li style="list-style-type:circle">Configuring security (IAM AttachRolePolicy)</li></ul><ul id="ee3e71ec-fdbf-4a09-ad74-63fa4203d9e2" class="bulleted-list"><li style="list-style-type:circle">Configuring rules for routing data (Amazon EC2 CreateSubnet)</li></ul><ul id="4b3ea88d-5eba-4a5d-b37d-b37d084f3d01" class="bulleted-list"><li style="list-style-type:circle">Setting up logging (AWS CloudTrail CreateTrail)</li></ul></li></ul><ul id="c2389e8b-a2d2-46c9-b027-309c28627021" class="bulleted-list"><li style="list-style-type:disc">By default, trails are configured to log management events.</li></ul><ul id="a804b6fd-1de0-425b-a02d-d22d3f859697" class="bulleted-list"><li style="list-style-type:disc">Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources)</li></ul></details></li></ul><ul id="e98be23c-6fd1-427d-9404-dde18413e0db" class="toggle"><li><details open=""><summary>Data Events</summary><ul id="89ce47e5-45af-41bf-975b-06951f39ada9" class="bulleted-list"><li style="list-style-type:disc">By default, data events are not logged into CloudTrail (because high volume operations)</li></ul><ul id="fea91656-d040-400e-9b92-fa1bbaef1885" class="bulleted-list"><li style="list-style-type:disc">Amazon S3 object-level activity (ex: Get0bject, Delete0bject, Put0bject): can separate Read and Write Events</li></ul><ul id="a30006d2-ce5e-4813-aad6-24ab3c5ac6f6" class="bulleted-list"><li style="list-style-type:disc">AWS Lambda function execution activity (the Invoke API)</li></ul></details></li></ul><ul id="da483a58-5b06-4cfb-b4b4-8df0785cb2f4" class="toggle"><li><details open=""><summary>Insight Events (for CloudTrail Insights)</summary><ul id="9d57e7d5-d223-4f6f-b338-9102e7737594" class="bulleted-list"><li style="list-style-type:disc">Enable CloudTrail Insights to detect unusual activity in your account<ul id="f3e2c353-c29e-491c-9207-b86b106b0ae3" class="bulleted-list"><li style="list-style-type:circle">inaccurate resource provisioning</li></ul><ul id="ad5c8bf9-e1d1-46d6-b3f6-c7a43cff9229" class="bulleted-list"><li style="list-style-type:circle">hitting service limits</li></ul><ul id="5c001fa7-cb10-459e-9a52-6a4d1e5879ab" class="bulleted-list"><li style="list-style-type:circle">bursts of AWS IAM actions</li></ul><ul id="74affb17-cd4d-4dac-b339-f850257ecd31" class="bulleted-list"><li style="list-style-type:circle">gaps in periodic maintenance activity</li></ul></li></ul><ul id="8f7b0a91-bec5-450e-a5af-ea32e8a83aeb" class="bulleted-list"><li style="list-style-type:disc">CloudTrail Insights analyzes normal management events to create a baseline and then continuously analyzes write events to detect unusual patterns. If that happens, CloudTrail generates insight events that<ul id="ed816d74-269d-4c5b-9f32-5f71bb9f43d3" class="bulleted-list"><li style="list-style-type:circle">show anomalies in the Cloud Trail console</li></ul><ul id="6d4b697a-2308-4087-8209-2840fdb8d83a" class="bulleted-list"><li style="list-style-type:circle">can can be logged to S3</li></ul><ul id="9409d8c0-96d6-4f00-9dd9-8b7f9d40c5c4" class="bulleted-list"><li style="list-style-type:circle">can trigger an EventBridge event for automation</li></ul><figure id="73477f0d-231d-442d-8f76-1df785949410" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20329.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20329.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="333a8bed-0dc0-4654-a999-1b291a7b2a4f" class="toggle"><li><details open=""><summary>Event Retention</summary><ul id="5f7ce88f-a844-454b-b1d8-3c0d1be10d09" class="bulleted-list"><li style="list-style-type:disc">Events are stored for 90 days in Cloud Trail, after that they are deleted automatically</li></ul><ul id="648dcf24-599e-4af1-b8c3-92d99d4bd191" class="bulleted-list"><li style="list-style-type:disc">To keep events beyond this period, log them to S3 and use Athena to analyze them when needed</li></ul><figure id="6cc49e3e-2f56-454b-8b01-d2e28c965148" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20330.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20330.png"/></a></figure><figure id="0e95599e-7f6e-4b83-bec8-2c5f589a56cf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(558).png"><img style="width:871px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(558).png"/></a></figure></details></li></ul><ul id="7c281c10-89f8-4f45-a081-6698df78bdf6" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="ab435e6d-7e52-40f6-a7af-96a2c17c2730" class="bulleted-list"><li style="list-style-type:disc">View Events History<p id="6e01f789-5a30-4e0a-a0c5-f7b7aca66acc" class="">Cloudtrail → Dashboard → Event History</p></li></ul><ul id="fff0236b-83b7-45d6-8620-7613ca0d200b" class="bulleted-list"><li style="list-style-type:disc">Create a trail to send events to an S3 bucket and CloudWatch logs<p id="5ae452a9-21c3-4187-be0c-d0b724c99d4f" class="">CloudTrail → Trails → Create trail</p><p id="bfc5d870-8ccf-4fb9-9d8d-88e4b3d62af2" class="">After some time, the events will appear in the S3 bucket and CloudWatch</p></li></ul></details></li></ul></details></li></ul><ul id="64d5f759-d44d-4ab0-b1f9-a8f215f7fba4" class="toggle"><li><details open=""><summary>AWS Config</summary><ul id="fea158af-112d-46fd-b35b-151ab9915702" class="toggle"><li><details open=""><summary>Intro</summary><ul id="94453805-6f04-4f02-91fc-b12dccd499c7" class="bulleted-list"><li style="list-style-type:disc">Helps record configurations and changes over time to rollback the infrastructure if required.</li></ul><ul id="b8b88d26-218d-4194-9bbf-a801fa41ccca" class="bulleted-list"><li style="list-style-type:disc">Questions that can be solved by AWS Config:<ul id="6a2e04c4-d9c4-4b02-9be8-a7c4b4c49a52" class="bulleted-list"><li style="list-style-type:circle">Is there unrestricted SSH access to my security groups?</li></ul><ul id="822950ef-13db-431e-9e6c-0fe66ab70ef5" class="bulleted-list"><li style="list-style-type:circle">Do my buckets have any public access?</li></ul><ul id="fb6c751e-d4e2-4da9-b5f0-5dc31a4f72ff" class="bulleted-list"><li style="list-style-type:circle">How has my ALB configuration changed over time?</li></ul></li></ul><ul id="c7b7345a-1a86-4b08-ad68-6ca92ff823b3" class="bulleted-list"><li style="list-style-type:disc">You can receive alerts (SNS notifications) for any changes</li></ul><ul id="e02a5abd-633a-4a55-9950-6b3d7e142875" class="bulleted-list"><li style="list-style-type:disc">AWS Config is a per-region service</li></ul><ul id="426fad3a-b4c9-4938-8c69-9afe4a266825" class="bulleted-list"><li style="list-style-type:disc">Can be aggregated across regions and accounts</li></ul><ul id="3354d70b-e7d2-4df3-a38d-49b7c56bcc2e" class="bulleted-list"><li style="list-style-type:disc">Possibility of storing the configuration data into S3 (analyzed by Athena)</li></ul><ul id="9395cd83-5114-4dac-9c29-a40e283d15c2" class="bulleted-list"><li style="list-style-type:disc">Can use AWS managed config rules (over 75)</li></ul><ul id="18d40087-4ad0-4500-9229-c45fee72f52d" class="bulleted-list"><li style="list-style-type:disc">Can make custom config rules (must be defined in AWS Lambda) such as:<ul id="ccb7cc1d-fe98-47f3-91a2-b614dd521738" class="bulleted-list"><li style="list-style-type:circle">Check if each EBS disk is of type gp2</li></ul><ul id="3bdaba0c-c677-4200-a331-4b947b49ff68" class="bulleted-list"><li style="list-style-type:circle">Check if each EC2 instance is t2.micro</li></ul></li></ul><ul id="bbed1964-4f8f-4c27-8ed6-0a87554b7fc7" class="bulleted-list"><li style="list-style-type:disc">Rules can be evaluated / triggered:<ul id="d2df834e-121a-415b-8693-a11c3a4e286c" class="bulleted-list"><li style="list-style-type:circle">For each config change (ex. configuration of EBS volume is changed, evaluate the rule)</li></ul><ul id="2ab20aed-46e1-4133-ae10-6c893d4423e6" class="bulleted-list"><li style="list-style-type:circle">And / or: at regular time intervals (ex. every 2 hours, evaluate the rule)</li></ul></li></ul><ul id="ae70cf5d-da31-4a97-8b01-6cb361a97bf6" class="bulleted-list"><li style="list-style-type:disc">AWS Config Rules are used only to evaluate the compliance of resources over time, does not prevent actions from happening (no deny)</li></ul><ul id="43375a7b-2199-48ce-9458-4659b4671b72" class="bulleted-list"><li style="list-style-type:disc">Pricing: no free tier, $0.003 per configuration item recorded per region, $0.001 per config rule evaluation per region</li></ul></details></li></ul><ul id="9cd38b5b-8812-41df-a8a7-d787a0c98a3d" class="toggle"><li><details open=""><summary>Applications</summary><p id="7f038404-3e07-4ea9-b205-0eda899d724d" class="">Link AWS Config with CloudTrail to get a full picture of the change in configuration and compliance overtime.</p><figure id="962cafc3-fb7d-451a-ad9e-1bcc73293f03" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20331.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20331.png"/></a></figure></details></li></ul><ul id="95e97cc1-94bf-419f-b240-7607824c4a6b" class="toggle"><li><details open=""><summary>Remediations</summary><ul id="670fdfea-e36b-4d92-aabf-b91b140942ec" class="bulleted-list"><li style="list-style-type:disc">Automate remediation of non-compliant resources using SSM Automation Documents</li></ul><ul id="a209e778-a514-42da-8618-877818cae51e" class="bulleted-list"><li style="list-style-type:disc">Use AWS-Managed Automation Documents or create custom Automation Documents</li></ul><ul id="5269a531-b607-4ec0-a5d8-423b7ee8faa4" class="bulleted-list"><li style="list-style-type:disc">Tip: you can create custom Automation Documents that invokes Lambda function to automate something</li></ul><ul id="f64d61e7-cc1c-466c-963d-e324a16c482f" class="bulleted-list"><li style="list-style-type:disc">You can set Remediation Retries if the resource is still non-compliant after auto remediation</li></ul><ul id="f3f97fbe-a7af-4ea0-972c-2c34d61224fe" class="bulleted-list"><li style="list-style-type:disc">Ex. if IAM access key expires (non-compliant), trigger an auto-remediation action to revoke unused IAM user credentials.<figure id="b541a01e-bf54-46f3-abf0-5642455da3e4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20332.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20332.png"/></a></figure></li></ul></details></li></ul><ul id="038d622d-27a1-4c58-a874-e60766fcfb52" class="toggle"><li><details open=""><summary>Notifications</summary><ul id="f0953f4b-3127-40f6-8217-8f7c6b862cc4" class="bulleted-list"><li style="list-style-type:disc">Use EventBridge to trigger notifications when AWS resources are non-compliant<figure id="b2911723-c1e4-4e71-9cdf-80e6fb53ac44" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20333.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20333.png"/></a></figure></li></ul><ul id="0c6f5f30-4cc3-4f6f-9f4f-b8324a2f22bb" class="bulleted-list"><li style="list-style-type:disc">Ability to send configuration changes and compliance state notifications to SNS (all events or use SNS Filtering or filter at client-side)<figure id="19bf3fd1-6dc0-4385-870b-295feb2b6162" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20334.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20334.png"/></a></figure></li></ul></details></li></ul><ul id="55cacf5c-0657-4dce-828d-ad2003a68608" class="toggle"><li><details open=""><summary>Hands on</summary><p id="6ed3cb1c-26fb-46c1-9861-e34d1e897331" class="">Config → Create rules</p><ul id="7fd7ea3b-464e-433b-9107-40c85e8f841d" class="bulleted-list"><li style="list-style-type:disc">We can specify rules that evaluate on resource configuration change to check for things like<ul id="3f253e35-322e-4fef-8136-e026b3faec88" class="bulleted-list"><li style="list-style-type:circle">whether or not all the EC2 instances were booted from a specific AMI. If they are not, we can set a remediation policy to terminate those instance.</li></ul><ul id="57845728-cd4b-436c-bce0-0a15060d3942" class="bulleted-list"><li style="list-style-type:circle">whether or not all the security groups restrict HTTP access from the public internet. Those security groups that do are displayed as non-compliant.</li></ul></li></ul></details></li></ul></details></li></ul><ul id="690e241f-e703-4264-ab77-61b6f8e537a9" class="toggle"><li><details open=""><summary>CloudWatch vs CloudTrail vs Config</summary><ul id="97a8f400-d8a5-451f-80cb-6fbec2e29360" class="toggle"><li><details open=""><summary>Theory</summary><ul id="67c7d08c-c405-47fb-a1c5-4a6b65be54b5" class="bulleted-list"><li style="list-style-type:disc">CloudWatch<ul id="23fa0dab-c10b-41f8-a0b8-733b46d3049d" class="bulleted-list"><li style="list-style-type:circle">Performance monitoring (metrics, CPU, network, etc..) &amp; dashboards</li></ul><ul id="23e01a1a-48df-4d40-86b2-bcd08edda054" class="bulleted-list"><li style="list-style-type:circle">Events &amp; Alerting</li></ul><ul id="82e94af7-b9ae-4396-bbba-ced46ad5c85d" class="bulleted-list"><li style="list-style-type:circle">Log Aggregation &amp; Analysis</li></ul></li></ul><ul id="f544b792-3dee-42fc-9000-0c72d907ee24" class="bulleted-list"><li style="list-style-type:disc">CloudTrail<ul id="14585318-e4e8-4a14-8928-7bdb0ecc5071" class="bulleted-list"><li style="list-style-type:circle">Record API calls made within your Account by everyone</li></ul><ul id="23a6f02b-4c55-4071-8e16-d9f42b62c5a4" class="bulleted-list"><li style="list-style-type:circle">Can define trails for specific resources</li></ul><ul id="d6d71337-bf50-4fca-9769-d3e823ae0753" class="bulleted-list"><li style="list-style-type:circle">Global Service</li></ul></li></ul><ul id="a22b1d35-b524-4297-9081-f99c13225668" class="bulleted-list"><li style="list-style-type:disc">Config<ul id="3ef784e9-d305-4e86-b263-b29058c99f6f" class="bulleted-list"><li style="list-style-type:circle">Record configuration changes</li></ul><ul id="2942e6bc-af3d-40a4-8234-5c40919f734e" class="bulleted-list"><li style="list-style-type:circle">Evaluate resources against compliance rules</li></ul><ul id="16c2d482-5d72-4d84-94eb-15aeb03db806" class="bulleted-list"><li style="list-style-type:circle">Get timeline of changes and compliance</li></ul></li></ul></details></li></ul><ul id="ea4662c5-8d08-4100-8dbe-1845a2e43eb3" class="toggle"><li><details open=""><summary>ELB example</summary><ul id="2335a309-b977-46fe-81c7-57c35e9ea92c" class="bulleted-list"><li style="list-style-type:disc">CloudWatch:<ul id="2e6b51e4-7892-41ab-a6b1-6266b7fae21d" class="bulleted-list"><li style="list-style-type:circle">Monitoring Incoming connections metric</li></ul><ul id="ce9a3613-4259-4287-b28d-c64b4b0bd3d0" class="bulleted-list"><li style="list-style-type:circle">Visualize error codes as % over time</li></ul><ul id="5c41fd58-2a0e-4dad-b244-a433cec5ca43" class="bulleted-list"><li style="list-style-type:circle">Make a dashboard to get an idea of your load balancer performance</li></ul></li></ul><ul id="bdc1f115-5024-4d29-9fa5-ac3417ec45bf" class="bulleted-list"><li style="list-style-type:disc">CloudTrail:<ul id="03766081-d2f9-4255-9d22-7377f603d49f" class="bulleted-list"><li style="list-style-type:circle">Track who made any changes to the Load Balancer with API calls</li></ul></li></ul><ul id="d4007867-76bc-4260-a403-179b5a62a1b8" class="bulleted-list"><li style="list-style-type:disc">Config:<ul id="1e40252f-dfe6-41c3-9f54-6e1b41652766" class="bulleted-list"><li style="list-style-type:circle">Track security group rules for the Load Balancer</li></ul><ul id="131ad9eb-ea90-4728-8e10-f29eab60d3f2" class="bulleted-list"><li style="list-style-type:circle">Track configuration changes for the Load Balancer</li></ul><ul id="6b1342e6-b6f8-4c05-9894-aa9d3a536b9c" class="bulleted-list"><li style="list-style-type:circle">Ensure an SSL certificate is always assigned to the Load Balancer (compliance)</li></ul></li></ul></details></li></ul></details></li></ul></div><h3 id="25026c14-1b11-460c-a2af-d13e83a3dd2b" class=""><details open=""><summary>Section 26: Identity and Access Management (IAM) - Advanced</summary></details></h3><div class="indented"><ul id="34d44539-6b5f-4486-81ec-8bd35653b041" class="toggle"><li><details open=""><summary>AWS Organizations</summary><ul id="b01fca69-d219-455c-8bfe-ae9bd1aac777" class="toggle"><li><details open=""><summary>Intro</summary><ul id="80c806d3-56d0-45f4-8d6f-f424dc9ecd13" class="bulleted-list"><li style="list-style-type:disc">Global service</li></ul><ul id="c8eacefa-ee1f-4c1e-8601-db198eee0bfa" class="bulleted-list"><li style="list-style-type:disc">Allows to manage multiple AWS accounts</li></ul><ul id="a18477fd-481b-4789-bd34-2861358b03fb" class="bulleted-list"><li style="list-style-type:disc">The main account is the master account, you can’t change it</li></ul><ul id="aab4dcec-e82f-48bc-8490-b9b6c531208a" class="bulleted-list"><li style="list-style-type:disc">Other accounts are member accounts</li></ul><ul id="bdebaf3d-8ac3-4573-9daf-3f1db2a5ce32" class="bulleted-list"><li style="list-style-type:disc">Member accounts can only be part of one organization</li></ul><ul id="ca2e9589-9dbc-44f0-bd1e-6dd6d5c3a066" class="bulleted-list"><li style="list-style-type:disc">Consolidated Billing across all accounts - single payment method</li></ul><ul id="8291932a-4c18-49a0-9134-de1ec66d99c2" class="bulleted-list"><li style="list-style-type:disc">Pricing benefits from aggregated usage (volume discount for EC2, S3, etc.)</li></ul><ul id="9ac93d9c-4e9e-4c91-a2d9-c51cda2a9636" class="bulleted-list"><li style="list-style-type:disc">API is available to automate AWS account creation (on demand account creation)</li></ul></details></li></ul><ul id="6b03ef25-3fe3-4784-872d-5bc5367dc1ba" class="toggle"><li><details open=""><summary>Multi-account strategies</summary><ul id="b03a61eb-6c75-47a6-9c97-7f594321e2f8" class="bulleted-list"><li style="list-style-type:disc">Create accounts:<ul id="562f2832-15fc-4e91-92ad-f64354a3117a" class="bulleted-list"><li style="list-style-type:circle">per department</li></ul><ul id="ea65d0ea-ef99-4b39-ae50-6e620fd220b3" class="bulleted-list"><li style="list-style-type:circle">per cost center</li></ul><ul id="215540d5-40f4-4f20-9672-10cb604100ad" class="bulleted-list"><li style="list-style-type:circle">per env (dev / test / prod)</li></ul><ul id="f537c415-fcae-4872-93fd-27c1e667dfa7" class="bulleted-list"><li style="list-style-type:circle">based on regulatory restrictions (using SCP)</li></ul><ul id="5e6dc8fb-2869-41c0-8ebc-35c9d41ed799" class="bulleted-list"><li style="list-style-type:circle">for better resource isolation (ex: VPC so that resources in different accounts can’t talk to one another)</li></ul><ul id="b8a0e7a5-aabe-45cd-a57f-1e0b7f6852b5" class="bulleted-list"><li style="list-style-type:circle">to have separate per-account service limits</li></ul><ul id="b8603dd7-8343-4ada-80d8-90107520404b" class="bulleted-list"><li style="list-style-type:circle">for isolated account for logging</li></ul></li></ul><ul id="86a90dba-41e4-412a-b1f2-36000e8d34d9" class="bulleted-list"><li style="list-style-type:disc">Use tagging standards for billing purposes</li></ul><ul id="061b66a2-29ae-4450-9d15-29eb2ab8bff1" class="bulleted-list"><li style="list-style-type:disc">Enable CloudTrail on all accounts, send logs to central S3 account</li></ul><ul id="feb190cb-b61a-4edd-915a-ae65c9ed0a5d" class="bulleted-list"><li style="list-style-type:disc">Send CloudWatch Logs to central logging account</li></ul><ul id="0a39bf87-47fb-4746-bcb2-5f37e856d91b" class="bulleted-list"><li style="list-style-type:disc">Establish Cross Account Roles for Admin purposes where the master account can assume an admin role in any of the children accounts</li></ul></details></li></ul><ul id="b6dd2bf7-7969-4c22-98eb-d4e979cd1dae" class="toggle"><li><details open=""><summary>Organizational Units (OU)</summary><ul id="102f041e-8300-42b6-b2af-3eae48491a19" class="bulleted-list"><li style="list-style-type:disc">We organize all the accounts using OUs.<figure id="74e0e4b7-37a4-4213-8e8a-a4978b46adfc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20335.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20335.png"/></a></figure></li></ul><ul id="e4a5c417-ec57-4231-9b0c-f397d6badd69" class="bulleted-list"><li style="list-style-type:disc">Can nest OUs inside other OUs.<figure id="f9146e6f-6dcc-4dc6-b5c8-37a7f5d5aa06" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20336.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20336.png"/></a></figure></li></ul></details></li></ul><ul id="2d20c088-7687-46d1-b559-d1eeba9a434f" class="toggle"><li><details open=""><summary>Service Control Policies (SCP)</summary><ul id="54d5fd11-75f2-4032-aebf-89e75104326e" class="toggle"><li><details open=""><summary>Intro</summary><ul id="51f6a4b4-3d06-4d72-adfa-384fde045557" class="bulleted-list"><li style="list-style-type:disc">Whitelist or blacklist IAM actions applied at the OU or Account level</li></ul><ul id="6d31dc16-3e86-4c1e-a3fb-250fdf096043" class="bulleted-list"><li style="list-style-type:disc">Does not apply to the Master Account</li></ul><ul id="c2d7a143-5d7c-4476-8b87-3cf80ce77a83" class="bulleted-list"><li style="list-style-type:disc">SCP is applied to all the Users and Roles of the Account, including root user. So, if something is restricted for that account, even the root user of that account won’t be able to do it.</li></ul><ul id="90d37807-9b89-4714-bcbf-e32183fd2996" class="bulleted-list"><li style="list-style-type:disc">The SCP does not affect service-linked roles (service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs)</li></ul><ul id="839be9a1-7106-41ca-b66e-b7797b19251a" class="bulleted-list"><li style="list-style-type:disc">SCP must have an explicit Allow (does not allow anything by default)</li></ul><ul id="7e571a81-1845-4c32-8716-5e5d8f03cbe1" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="fc664a8e-816a-41c2-9d8a-c1468b61e00e" class="bulleted-list"><li style="list-style-type:circle">Restrict access to certain services (for example: can’t use EMR)</li></ul><ul id="ffec78f3-114a-44e4-898d-d74dabf0f5cc" class="bulleted-list"><li style="list-style-type:circle">Enforce PCI compliance by explicitly disabling services</li></ul></li></ul><figure id="1d5fb26d-7518-4eca-a5cc-4deef8488dad" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20337.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20337.png"/></a></figure></details></li></ul><ul id="ecc675f3-ef3a-45a2-b0b5-54e75fe298fe" class="toggle"><li><details open=""><summary>Example</summary><figure id="5913f4fa-29f4-4b2c-b08e-4f426d5ca466" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20338.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20338.png"/></a></figure><ul id="07dad27c-0e7b-4f6a-93d7-520c1b1c8e3b" class="bulleted-list"><li style="list-style-type:disc">The Root OU explicitly allows full AWS access, that’s why every account can access anything except the explicit denies.</li></ul><ul id="75fd591d-c263-4ef9-880f-bb56f163ca64" class="bulleted-list"><li style="list-style-type:disc">Master account will inherit the FullAWSAccess SCP from Root OU. Since, it is the master account, no SCP applies explicitly to it. So, DenyAccessAthena won’t apply to master account.</li></ul><ul id="95689cbb-016d-42ce-9c7e-3c95163048c3" class="bulleted-list"><li style="list-style-type:disc">“Deny” takes precedence over “Allow”. So, even though Account A has Redshift authorized, the explicit deny from Prod OU will take precedence.</li></ul></details></li></ul></details></li></ul><ul id="5f794dd5-78dc-452f-a28c-43496a6c38c1" class="toggle"><li><details open=""><summary>Migrating accounts between organizations</summary><ul id="9708f622-03e0-4781-a872-1fd87d69e4b8" class="bulleted-list"><li style="list-style-type:disc">To migrate accounts from one organization to another<ol type="1" id="cfb2df49-0317-4d4f-b061-82e784fbece8" class="numbered-list" start="1"><li>Remove the member account from the old organization</li></ol><ol type="1" id="859a6bd0-8221-4534-ad7c-41256e553634" class="numbered-list" start="2"><li>Send an invite to the member account from the new organization</li></ol><ol type="1" id="bf9b4dd0-9f5e-4c51-a3ef-b4b63b880c24" class="numbered-list" start="3"><li>Accept the invite to the new organization from the member account</li></ol></li></ul><ul id="2897dbd5-fac7-44e6-963a-d92c1a09a396" class="bulleted-list"><li style="list-style-type:disc">To migrate the master account<ol type="1" id="94aa5ea0-bc4a-4951-91a9-560e6720d716" class="numbered-list" start="1"><li>Remove the member accounts from the organizations using procedure above</li></ol><ol type="1" id="fbd45545-96d4-4e4c-8038-464ae2eedddd" class="numbered-list" start="2"><li>Delete the old organization</li></ol><ol type="1" id="7e1c2d18-3678-4235-a3bf-a449dda52880" class="numbered-list" start="3"><li>Repeat the process above to invite the old master account to the new org</li></ol></li></ul></details></li></ul><ul id="33b49000-33eb-4e9b-9950-77ca6c5b8aba" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="290f72eb-888c-4d28-987c-f43ed2cebf4a" class="bulleted-list"><li style="list-style-type:disc">Accounts<p id="4acfe9c1-2b97-4b29-87a7-d7e31f151927" class="">OUs are like folders in which you can place accounts (files).</p><p id="bd11a15d-4793-4f76-804a-84a9cb990cda" class="">Management account is the master account (default in the organization).</p><figure id="e4d94e8e-6fe2-4722-a0ff-791a3be82755" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20339.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20339.png"/></a></figure><p id="1334a23c-38cc-4496-ad5c-ecd84e958129" class="">Untitled</p></li></ul><ul id="a8ebc167-096b-4fe2-b862-e10830c6ed1b" class="bulleted-list"><li style="list-style-type:disc">Policies<p id="011e30ae-d26e-48a0-af13-cc9c925d565a" class="">We can create Service Control Policies and attach them to OUs or Accounts to allow or deny access to AWS resources within our organization.</p><figure id="eb217d96-c44e-4430-8e9e-8d2b2cd2d1d0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20340.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20340.png"/></a></figure><p id="f2dde58c-205c-4da3-8749-03b67d26976f" class="">Untitled</p></li></ul></details></li></ul></details></li></ul><ul id="d7167b1b-2cb1-43c2-97c9-f00c4dd6032c" class="toggle"><li><details open=""><summary>IAM Advanced</summary><ul id="2b82bd8a-bd25-48cc-b31f-b36aa926b74a" class="toggle"><li><details open=""><summary>IAM Conditions</summary><p id="4ecf9e7b-829f-46f2-ac1f-b5685dbd7f28" class="">Ways to make your IAM policies bit more restrictive using conditions</p><figure id="6ec723f8-43aa-4b3d-a471-d4f8054f66e8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20341.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20341.png"/></a></figure><figure id="c3593ce6-67df-474c-941f-dee945434495" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20342.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20342.png"/></a></figure></details></li></ul><ul id="391f78a4-6ec5-463e-bcc9-ac241537c4c5" class="toggle"><li><details open=""><summary>S3 bucket policies &amp; object policies</summary><figure id="e40f6b0f-3b76-4d32-bd65-767a7cea0c53" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20343.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20343.png"/></a></figure></details></li></ul><ul id="3811b16f-2995-4a78-9148-38cbc7730822" class="toggle"><li><details open=""><summary>Resource based policies</summary><figure id="9dbf834e-a3e5-4d5c-8953-8e0a8d6df57a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(569).png"><img style="width:1804px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(569).png"/></a></figure></details></li></ul><ul id="7d0dbd33-3f64-498d-991e-32a377d3b91d" class="toggle"><li><details open=""><summary>IAM Roles vs Resource based policies</summary><ul id="50d82fbc-0fff-4326-b317-b7ef08e51ae0" class="bulleted-list"><li style="list-style-type:disc">When you assume a role (user, application or service), you give up your original permissions and take the permissions assigned to the role</li></ul><ul id="d4ae6b13-586f-4c13-82a6-881d95c2067f" class="bulleted-list"><li style="list-style-type:disc">When using a resource based policy, the principal doesn’t have to give up his permissions</li></ul><ul id="456126e4-0f7a-4b4f-99b7-23b92aec2e2b" class="bulleted-list"><li style="list-style-type:disc">Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B.<ul id="9a9a8cac-861d-4a0a-9fbe-856976dca856" class="bulleted-list"><li style="list-style-type:circle">Need to use S3 bucket policy in account B. Cannot use IAM role because first scan the table in account A using the original role then assume another role in account B to write it in S3 bucket, but now you can’t read the scanned data from account A.<figure id="f4453d7d-039d-4cf1-b04e-c53ce171128d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20344.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20344.png"/></a></figure></li></ul></li></ul><ul id="9100a19a-ec89-4cba-b439-c0ae4ac7b999" class="bulleted-list"><li style="list-style-type:disc">Resource based policies are supported by Amazon S3 buckets, SNS topics, SQS queues</li></ul><figure id="868f7eb8-808a-4d6e-9462-243f78d08cd5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(570).png"><img style="width:1767px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(570).png"/></a></figure></details></li></ul><ul id="62f8b621-009a-4841-8ee7-056bcb2b1f7b" class="toggle"><li><details open=""><summary>IAM Permission Boundaries</summary><ul id="ca8b2feb-42cc-4147-82a8-cafa1acf9583" class="toggle"><li><details open=""><summary>Intro</summary><ul id="ba8b4e5d-03b4-4adf-8f13-5a520cf5d25f" class="bulleted-list"><li style="list-style-type:disc">lAM Permission Boundaries are supported for users and roles (not groups)</li></ul><ul id="11fcecf6-d4d5-47d1-9166-761e912e3d59" class="bulleted-list"><li style="list-style-type:disc">Advanced feature to use a managed policy to set the maximum permissions an IAM entity can get</li></ul><ul id="e6758108-51ce-483a-b43f-12c78817cc8e" class="bulleted-list"><li style="list-style-type:disc">Even if the user has admin access, the maximum permission is still based on the permission boundary.</li></ul><ul id="df5062a6-4711-45e7-b8b8-414121f0dd11" class="bulleted-list"><li style="list-style-type:disc">To set permission boundary for a user: IAM → Users → Select user → Permission boundary</li></ul><ul id="c536569e-5377-47e6-8df9-4185bc4fe096" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="5e6ccde3-d4eb-42ad-b503-f9954c2aa5b4" class="bulleted-list"><li style="list-style-type:circle">Delegate responsibilities to non-administrators within their permission boundaries, for example create new IAM users</li></ul><ul id="fc05f41b-5d11-4f68-8d6b-eb154a0d9b1c" class="bulleted-list"><li style="list-style-type:circle">Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (make themselves admin)</li></ul><ul id="9cc960b4-1cfb-4ecd-8293-ac98c9201f60" class="bulleted-list"><li style="list-style-type:circle">Useful to restrict one specific user (instead of a whole account using organizations &amp; SCP)</li></ul></li></ul><ul id="831a50d4-d0a4-4bb9-8b99-a02675acf5fa" class="bulleted-list"><li style="list-style-type:disc">Can be used in combination of SCP and identity-based policy<figure id="ac2678cf-767d-422e-a9ed-06ab59ecaa6f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20345.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20345.png"/></a></figure></li></ul></details></li></ul><ul id="301af28a-e306-46a6-9abc-6688aa0e248e" class="toggle"><li><details open=""><summary>Example</summary><figure id="3aa0ad7a-2583-4d27-9926-80349f6bb667" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20346.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20346.png"/></a></figure></details></li></ul></details></li></ul><ul id="c4000165-5add-4899-b749-4217c1d12f53" class="toggle"><li><details open=""><summary>Policy Evaluation Logic</summary><figure id="9fce7073-7e65-4856-903f-905f0fe9fa7f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20347.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20347.png"/></a></figure><figure id="f9fee806-e28f-4ae3-a993-f5fbc5aa09a1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(571).png"><img style="width:913px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(571).png"/></a></figure></details></li></ul></details></li></ul><ul id="7af55c23-3583-4d80-bf06-8b1f07582a42" class="toggle"><li><details open=""><summary>AWS Cognito</summary><figure id="636ccfee-17dc-4009-9a74-f0e5e5a4586d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(572).png"><img style="width:938px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(572).png"/></a></figure><figure id="2504aadf-f1c0-41e8-8e96-ac41f54d43a5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(573).png"><img style="width:863px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(573).png"/></a></figure><figure id="382faa67-85c9-4fbe-bb2f-36bae33cd298" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(574).png"><img style="width:965px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(574).png"/></a></figure><figure id="e6f1287d-db0c-4b70-aab7-40cf35f9b1b7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(575).png"><img style="width:1880px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(575).png"/></a></figure><figure id="fadbeaf7-667f-47e9-929d-522a165321f2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(576).png"><img style="width:926px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(576).png"/></a></figure><figure id="fff6a2d4-2f4d-4cdb-9761-9eb35a890566" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(577).png"><img style="width:1745px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(577).png"/></a></figure><figure id="18647df2-21b6-4d48-8512-6707f3c38394" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(578).png"><img style="width:1515px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(578).png"/></a></figure></details></li></ul><ul id="6effd592-cc93-406a-bfa6-e4a878b772ed" class="toggle"><li><details open=""><summary>AWS  IAM Identity Center - Single Sign-On (SSO)</summary><figure id="972c3277-e101-42ea-aaaa-8db161943cf1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(580).png"><img style="width:955px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(580).png"/></a></figure><figure id="53765cc0-e81a-4a0e-82a4-13028f6558c4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(581).png"><img style="width:1848px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(581).png"/></a></figure><figure id="b89b98ea-11ef-4480-a2cc-d57db3b7c458" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(582).png"><img style="width:1810px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(582).png"/></a></figure><figure id="9b27c378-25ee-416e-9c52-aa0c1cfa9f63" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(583).png"><img style="width:1717px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(583).png"/></a></figure><figure id="136222df-d5ac-468f-84b1-e5a9a852d162" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(584).png"><img style="width:1790px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(584).png"/></a></figure></details></li></ul><ul id="f6feeb3e-e67c-40c4-9602-1e76d51afc5a" class="toggle"><li><details open=""><summary>Microsoft Active Directory (AD)</summary><ul id="cd70e9a5-b73b-473f-bebd-d3d28cb693ce" class="bulleted-list"><li style="list-style-type:disc">It is a way to share login credentials of the users with all the machines within the network.</li></ul><ul id="d9cdc380-37d9-4de7-a9aa-6091cd7493b0" class="bulleted-list"><li style="list-style-type:disc">Found on any Windows Server with AD Domain Services</li></ul><ul id="c5ff589b-a83c-4c07-855c-b805196fba58" class="bulleted-list"><li style="list-style-type:disc">Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups, etc.</li></ul><ul id="ce8f3bea-8358-4b84-a815-33998a2ab026" class="bulleted-list"><li style="list-style-type:disc">Centralized security management. You can create account, assign permissions, etc.</li></ul><ul id="c1fbe0ba-5e18-4d3c-8645-34f61c2f1f30" class="bulleted-list"><li style="list-style-type:disc">Objects are organized in trees. A group of trees is a forest</li></ul><ul id="1eb6e2be-702e-40d3-b749-69beb06d73ad" class="bulleted-list"><li style="list-style-type:disc">There is a domain controller. We will create an account there. Since each windows machine on the network is connected to the domain controller, this user can be logged in from any machine on the network.</li></ul><figure id="56541203-7019-4670-8823-0af62f0430d5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20348.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20348.png"/></a></figure></details></li></ul><ul id="b6179e0d-7899-42d2-9394-0ad86d592dde" class="toggle"><li><details open=""><summary>AWS Directory Services</summary><p id="4a9ceeda-2a92-4b42-85d3-58e6e93ced63" class="">Used to extend the network by involving services like EC2 to be a part of the AD to share login credentials.</p><ul id="1511cd4d-2298-45f5-966a-3f895cef60ed" class="toggle"><li><details open=""><summary>AWS Managed Microsoft AD</summary><ul id="3d79bf63-7519-4f76-84ce-4751f04e5e06" class="bulleted-list"><li style="list-style-type:disc">Create your own AD in AWS to share login credentials between on-premise and AWS AD</li></ul><ul id="d9a0f60a-9141-44bd-8e2e-8a61d25f2e9c" class="bulleted-list"><li style="list-style-type:disc">Manage users on-premise and on AWS Managed AD</li></ul><ul id="59a456e5-7130-4092-88e1-42f5577a0bb5" class="bulleted-list"><li style="list-style-type:disc">Supports MFA</li></ul><ul id="1bfafec4-5d5a-41f3-9da2-2d705b9032d5" class="bulleted-list"><li style="list-style-type:disc">Establish “trust” connections with your on premise AD</li></ul></details></li></ul><ul id="472ac23e-ab9a-4669-b245-72e4c3fc055e" class="toggle"><li><details open=""><summary>AD Connector</summary><ul id="68dd7333-e63f-4550-80c8-27f5a01886b5" class="bulleted-list"><li style="list-style-type:disc">AD connector will proxy all the requests to the on-premise AD.</li></ul><ul id="61836610-d7db-495b-82da-8e4f8fcbd68d" class="bulleted-list"><li style="list-style-type:disc">Supports MFA</li></ul><ul id="8799b93f-f446-4b36-9c25-a61f0c6c58b3" class="bulleted-list"><li style="list-style-type:disc">Users are managed on the on-premise AD only</li></ul></details></li></ul><ul id="f4c456d9-3664-4493-9b06-dd9f41cf9425" class="toggle"><li><details open=""><summary>Simple AD</summary><ul id="c03b4b7c-76df-4d44-9c53-fa2ccbb46ba2" class="bulleted-list"><li style="list-style-type:disc">AD-compatible managed directory on AWS</li></ul><ul id="07610cb7-1c8e-4628-b264-991b9fa16a9b" class="bulleted-list"><li style="list-style-type:disc">Users are managed on the AWS AD only</li></ul><ul id="b0854666-6be9-4d1d-be9f-546d9966d826" class="bulleted-list"><li style="list-style-type:disc">Cannot be joined with on-premise AD</li></ul><ul id="d85c46e3-f34b-4251-8863-be93852f1463" class="bulleted-list"><li style="list-style-type:disc">Use when you don’t have an on-premise AD</li></ul></details></li></ul><ul id="64038765-905d-43fd-8651-7aad33380224" class="toggle"><li><details open=""><summary>Setup</summary><figure id="5e84c880-f4ac-4816-918f-6bc4088bbc1a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(585).png"><img style="width:1757px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(585).png"/></a></figure></details></li></ul></details></li></ul><ul id="bc1626a0-aa69-4368-b6ae-14ad05b721d5" class="toggle"><li><details open=""><summary>Control Tower</summary><figure id="29f648b4-0046-4ef1-ad7e-6ca2b16baee9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(586).png"><img style="width:938px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(586).png"/></a></figure><figure id="2565ef38-f445-46bc-ace6-88215846a27f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(587).png"><img style="width:921px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(587).png"/></a></figure></details></li></ul><ul id="2ef53e1c-8821-4a72-987b-b761a2a1d54e" class="toggle"><li><details open=""><summary>AWS  IAM Identity Center - Single Sign-On (SSO)</summary><ul id="c98b1fc2-e722-44d1-bb2a-a84d4b561282" class="toggle"><li><details open=""><summary>Intro</summary><ul id="442d128b-c225-4cce-ab06-b237ace161af" class="bulleted-list"><li style="list-style-type:disc">Centrally manage Single Sign-On to access multiple accounts and 3rd-party business applications.</li></ul><ul id="84189363-63ca-4d33-ae93-d860a908c7b2" class="bulleted-list"><li style="list-style-type:disc">Free service (no pricing)</li></ul><ul id="083e3ff0-bf23-4454-bc18-565f8c02e8eb" class="bulleted-list"><li style="list-style-type:disc">Integrated with AWS Organizations (login once for your organization and you can access all the accounts within that org)</li></ul><ul id="f838089e-40c1-4edf-addc-fdcb360ef009" class="bulleted-list"><li style="list-style-type:disc">Supports SAML 2.0 markup</li></ul><ul id="05d9d098-1fdf-47cb-952b-cbf81a73a14c" class="bulleted-list"><li style="list-style-type:disc">Integration with on-premise Active Directory</li></ul><ul id="334b7411-99cd-4816-8b5d-90b72ba220e7" class="bulleted-list"><li style="list-style-type:disc">Centralized permission management</li></ul><ul id="ba8c9049-54ae-4847-aaa1-34eee0e79bbc" class="bulleted-list"><li style="list-style-type:disc">Centralized auditing with CloudTrail</li></ul></details></li></ul><ul id="33bfc7f4-7082-4835-b790-f7c36fffdcab" class="toggle"><li><details open=""><summary>SSO with Microsoft AD</summary><figure id="26f0685b-5ba8-48fd-beba-06e9c736ba1f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20349.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20349.png"/></a></figure><p id="52720fb4-0745-4fb0-9ea2-e9de0b9fb133" class="">Once users are logged in from AD, they can access AWS consoles, business cloud applications and any custom SAML applications.</p></details></li></ul><ul id="f63da0ae-0a42-4ce5-8d7d-a8df2ee38a80" class="toggle"><li><details open=""><summary>AssumeRoleWthSAML vs SSO</summary><p id="7fabe91a-5675-4173-830c-3a627c18f395" class="">With AssumeRoleWithSAML, we need to maintain a 3rd party identity provider login portal. This portal checks in the identity store and returns a SAML assertion that we send to STS for access keys.</p><p id="b5c3dae3-2d37-4a64-9516-88a6be8a989d" class="">With AWS SSO, we don’t need to manage the login portal, it is done through the AWS SSO service. SSO service automatically scales with the number of accounts.</p><figure id="a4dbde8f-0dab-4784-a538-378c43ef4354" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20350.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20350.png"/></a></figure></details></li></ul><ul id="f1d5051d-f619-4704-9b8c-0d6b069050f6" class="toggle"><li><details open=""><summary>Hands on</summary><p id="64c0243e-323d-4509-b52a-1dcaec2f68e9" class="">AWS SSO → Enable SSO</p><p id="dbc13af2-9a54-400d-97c5-7ed48d88dcd5" class="">Once enabled, do the following.</p><figure id="1f3b96fd-2a7f-4e4c-b815-64d41bdbf4d0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20351.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20351.png"/></a></figure></details></li></ul></details></li></ul><ul id="4ab54474-c589-4b14-9a99-f4afa62de3ca" class="toggle"><li><details open=""><summary>Security Token Service (STS)</summary><ul id="041a2c91-25bc-4e0d-b1e7-c0f7eb7c47d0" class="bulleted-list"><li style="list-style-type:disc">Allows to grant limited and temporary access to AWS resources</li></ul><ul id="112b531b-958d-4b5d-9fd6-1e796fad1142" class="bulleted-list"><li style="list-style-type:disc">Token is valid for up to one hour (must be refreshed)</li></ul><ul id="6ab27c86-f44e-42d1-896d-62c7caea1d94" class="bulleted-list"><li style="list-style-type:disc">Use cases<ul id="d5639e6a-c332-4e5c-a6ee-77410400ed53" class="toggle"><li><details open=""><summary>AssumeRole</summary><ul id="460251c6-e5c7-42c7-b6d9-1ad1beecb16d" class="bulleted-list"><li style="list-style-type:disc">Within your own account: for additional security (ex. terminating an EC2 instance first requires users to temporarily assume a role)</li></ul><ul id="9fd4400b-3291-4d47-99b0-265712e197ac" class="bulleted-list"><li style="list-style-type:disc">Cross Account Access: assume role in target account to perform actions there</li></ul><ul id="4315b037-b6f0-4696-87e4-94f6fd515afc" class="bulleted-list"><li style="list-style-type:disc">To assign a temporary role to an IAM user</li></ul><ul id="a2fec753-db6a-4b19-bce9-dc60c94af12c" class="bulleted-list"><li style="list-style-type:disc">Steps<ul id="28f609b4-3f9c-4de9-b453-6c9c3f480d64" class="bulleted-list"><li style="list-style-type:circle">Define an lAM Role within your account or cross-account</li></ul><ul id="1aea0b52-fbeb-4b68-9d39-114acd8c267f" class="bulleted-list"><li style="list-style-type:circle">Define which principals can access this lAM Role (who should be allowed to assume this role)</li></ul><ul id="f993415f-0d14-49fa-8f0a-f193c7254125" class="bulleted-list"><li style="list-style-type:circle">Use AWS STS (Security Token Service) to retrieve credentials and impersonate the lAM Role you have access to (AssumeRole API). STS will check whether or not the user is allowed to assume that role.</li></ul><ul id="2a58443d-addc-4eba-acf3-2c8a22dd20a2" class="bulleted-list"><li style="list-style-type:circle">Temporary credentials can be valid between 15 minutes to I hour</li></ul><figure id="ee69adc3-a5e6-457b-9ed6-3152107ed5e0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20352.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20352.png"/></a></figure></li></ul><ul id="b529ba51-a228-4f32-8077-46f8f730c41d" class="bulleted-list"><li style="list-style-type:disc">Cross-account access with STS<figure id="f2a21f77-9f5e-4897-8030-0b55e9d4d684" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20353.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20353.png"/></a></figure></li></ul></details></li></ul><ul id="948a9a89-16c3-4e75-b170-0093dc859b75" class="toggle"><li><details open=""><summary>AssumeRoleWithSAML</summary><ul id="fdf6f789-84e4-4aea-b6b5-9a571a181501" class="bulleted-list"><li style="list-style-type:disc">return credentials for users logged with SAML (non IAM users)</li></ul></details></li></ul><ul id="da6a32a9-341e-482a-8d9d-a55cc24a2faa" class="toggle"><li><details open=""><summary>AssumeRoleWithWebldentity</summary><ul id="d97d2133-0762-4378-bbe9-7049b15b8a46" class="bulleted-list"><li style="list-style-type:disc">return creds for users logged with an identity provider (Facebook Login, Google Login, OIDC compatible…)</li></ul><ul id="1f3e9718-fc23-4bea-8fc6-46b02be7fe1c" class="bulleted-list"><li style="list-style-type:disc">AWS recommends against using this (recommended to use Cognito instead)</li></ul></details></li></ul><ul id="d784cdd0-8d7d-40b8-85d5-2e9e77866509" class="toggle"><li><details open=""><summary>GetSessionToken</summary><ul id="e3b76220-1950-4d26-ba7c-146e6ad7d681" class="bulleted-list"><li style="list-style-type:disc">for MFA, from a user or AWS account root user</li></ul></details></li></ul></li></ul></details></li></ul><ul id="639f2a68-145b-4176-a067-7d8ffd086b7d" class="toggle"><li><details open=""><summary>Identity Federation in AWS</summary><ul id="f325a2dc-2fd9-4e5d-be79-52d16d445b84" class="toggle"><li><details open=""><summary>Intro</summary><ul id="233dda5c-70e9-44e1-8272-6fb8afbf269d" class="bulleted-list"><li style="list-style-type:disc">Federation lets users outside of AWS to assume temporary role for accessing AWS resources. Use when you don’t want to manage users within your AWS account.</li></ul><ul id="eedbcfeb-9acf-4ec7-977e-1a8d037c7005" class="bulleted-list"><li style="list-style-type:disc">These users assume identity provided access role.</li></ul><ul id="9368b2c9-3907-4d4b-8eff-7ad78d8c3d53" class="bulleted-list"><li style="list-style-type:disc">Need to setup a trust between identity provider and IAM.</li></ul><ul id="d659b972-7a72-4e0a-a09a-3c954b4e6a04" class="bulleted-list"><li style="list-style-type:disc">Federations can have many flavors:<ul id="9fb62365-a9a5-45de-b794-4e9b4f3466d1" class="bulleted-list"><li style="list-style-type:circle">SAML 2.0</li></ul><ul id="f45e8929-1a08-44c6-9c95-e06ae6acd62c" class="bulleted-list"><li style="list-style-type:circle">Custom Identity Broker</li></ul><ul id="4ba74195-4e58-44f7-b655-62d40faf9be5" class="bulleted-list"><li style="list-style-type:circle">Web Identity Federation with Amazon Cognito</li></ul><ul id="6864e4e7-1bfa-44b6-af31-c06a58fc2218" class="bulleted-list"><li style="list-style-type:circle">Web Identity Federation without Amazon Cognito</li></ul><ul id="7188f561-ced8-4d10-8ea9-23ffd71db242" class="bulleted-list"><li style="list-style-type:circle">Single Sign On</li></ul><ul id="8dbbd4e6-243d-4e7f-ad76-0ec027b45cbc" class="bulleted-list"><li style="list-style-type:circle">Non-SAML with AWS Microsoft AD</li></ul></li></ul><ul id="37d22786-2a0a-4d2b-8c4a-61fd652c9e03" class="bulleted-list"><li style="list-style-type:disc">Using federation, you don’t need to create lAM users (user management is outside of AWS)</li></ul><figure id="6d3ca115-31b6-4710-b507-2ef2504c7acb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20354.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20354.png"/></a></figure></details></li></ul><ul id="61bdc8f9-64d7-427e-a445-9d6f52af81ef" class="toggle"><li><details open=""><summary>SAML 2.0 Federation</summary><ul id="62d9e5db-9d26-451a-b189-b69b0e2b8d60" class="bulleted-list"><li style="list-style-type:disc">To integrate Active Directory / ADFS with AWS (or any SAML 2.0)</li></ul><ul id="875a3e91-7e3b-4dd7-a81f-d7b80988021c" class="bulleted-list"><li style="list-style-type:disc">Provides access to AWS Console or CLI (through temporary credentials)</li></ul><ul id="3f0b2631-0f9b-482d-b07a-574948d3fa4e" class="bulleted-list"><li style="list-style-type:disc">No need to create an IAM user for each of your employees</li></ul><ul id="affdd48e-77f9-43d2-b865-be141dcf3950" class="bulleted-list"><li style="list-style-type:disc">SAML assertion is exchanged for security credentials from STS.</li></ul><figure id="7ffab6c4-d9cb-4a1b-bafe-6b144c91af27" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20355.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20355.png"/></a></figure><ul id="75d64e75-6b42-408f-a1b5-966254e7fe9f" class="bulleted-list"><li style="list-style-type:disc">Needs to setup a trust between AWS IAM and SAML (both ways)</li></ul><ul id="f8435d1e-6a19-47a1-b12b-2bd4f2deeb01" class="bulleted-list"><li style="list-style-type:disc">SAML 2.0 enables web-based, cross domain SSO</li></ul><ul id="664a416d-9b1e-45bb-b8d0-981e6fb19f23" class="bulleted-list"><li style="list-style-type:disc">Uses the STS API: AssumeRoleWithSAML</li></ul><ul id="e4af8369-ef0e-42a5-b3f5-5de32cd090ec" class="bulleted-list"><li style="list-style-type:disc">Note: federation through SAML is the old way, Amazon Single Sign On (SSO) Federation is the new managed and simpler way.</li></ul></details></li></ul><ul id="fdf2be95-241e-4b74-a9e3-5311f5bb9149" class="toggle"><li><details open=""><summary>Custom Identity Broker Application</summary><ul id="216b960a-9578-4a9c-9bfb-dc310917b1b1" class="bulleted-list"><li style="list-style-type:disc">Use only if identity provider is not compatible with SAML 2.0</li></ul><ul id="975de203-4ea8-45e7-a943-7c3c02d493ea" class="bulleted-list"><li style="list-style-type:disc">The identity broker must determine the appropriate lAM policy</li></ul><ul id="0cac08fb-f9e3-474c-9952-428610fa33aa" class="bulleted-list"><li style="list-style-type:disc">Uses the STS API: AssumeRole or GetFederationToken</li></ul><ul id="7963d891-ff16-4156-92d9-7f31513a005e" class="bulleted-list"><li style="list-style-type:disc">In this case instead of client asking STS for temporary security credentials, identity broker does this task.</li></ul><figure id="8e6f0969-ead3-49f1-b681-6a3cd6d2c775" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20356.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20356.png"/></a></figure></details></li></ul><ul id="5231afb4-ab48-4a9b-8f6c-864b5874685b" class="toggle"><li><details open=""><summary>Web Identity Federation</summary><ul id="56ed1212-ddc6-4780-a766-798f4fa5848f" class="bulleted-list"><li style="list-style-type:disc">Used to provide the users (non AWS) of our application, access to AWS resources.</li></ul><ul id="33c2d7b8-0ce1-4892-9a17-25c1cf425ab7" class="toggle"><li><details open=""><summary>Without Cognito</summary><ul id="1345cca8-6adb-4c9f-9d76-44ea71126159" class="bulleted-list"><li style="list-style-type:disc">Not recommended by AWS, use Cognito instead (allows for anonymous users, data synchronization, MFA)</li></ul><ul id="623311f0-888f-48fa-8ddf-0e7f10d4355c" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, Amazon is acting as the identity provider. It can also be FB or Google.</li></ul><figure id="6446c6cc-3d80-4c49-9d6a-58a3965488d9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20357.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20357.png"/></a></figure></details></li></ul><ul id="490596f2-55fd-4dc8-8290-5da98e8dedc0" class="toggle"><li><details open=""><summary>With Cognito</summary><ul id="ed1ba678-b104-42ef-b6e0-788b84c63969" class="bulleted-list"><li style="list-style-type:disc">Provide direct access to AWS Resources from the Client Side (mobile, web app)</li></ul><ul id="a48b16cd-8254-4e4c-acce-9dece779eae0" class="bulleted-list"><li style="list-style-type:disc">Example: provide (temporary) access to write to S3 bucket using Facebook Login</li></ul><ul id="e631f2ed-d273-43a0-a805-5f95363a3d85" class="bulleted-list"><li style="list-style-type:disc">We don’t want to create lAM users for our app users as there could be millions of them.</li></ul><ul id="c532c212-be4c-4589-ba1c-02c0875c2e89" class="bulleted-list"><li style="list-style-type:disc">Steps<ul id="0c7770ae-f4cc-492d-9367-f250901d2e0a" class="bulleted-list"><li style="list-style-type:circle">Log in to federated identity provider or remain anonymous</li></ul><ul id="2ed7113f-8bb3-47ea-b86c-22168439a7cd" class="bulleted-list"><li style="list-style-type:circle">Use the token to authenticate to Federated Identity Pool</li></ul><ul id="1ed8620e-2a80-4ce7-9482-d2c2ce4250e3" class="bulleted-list"><li style="list-style-type:circle">Get temporary AWS credentials back from the Federated Identity Pool</li></ul><ul id="4902d65e-a3d3-4c9f-99f0-8d58703be025" class="bulleted-list"><li style="list-style-type:circle">These credentials come with a pre-defined IAM policy stating their permissions</li></ul><figure id="1bdcd79b-ae9d-4fff-b17c-036aa5f35f22" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20358.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20358.png"/></a></figure></li></ul></details></li></ul></details></li></ul></details></li></ul><ul id="4c018dad-d211-4d97-863f-3085acc38440" class="toggle"><li><details open=""><summary>AWS Resource Access Manager (RAM)</summary><ul id="3cbc2300-2fee-42bc-bc45-b69decabd035" class="bulleted-list"><li style="list-style-type:disc">Share AWS resources with other AWS accounts to avoid resource duplication</li></ul><ul id="da5e44e7-00f3-44d2-8e33-f678e9ca96ba" class="bulleted-list"><li style="list-style-type:disc">Share with any account or within your Organization</li></ul><ul id="348556c3-6aed-44df-bca7-5516866d6ee1" class="bulleted-list"><li style="list-style-type:disc">Example:<ul id="0784d55a-9334-4280-a4f5-9d3409a9df17" class="toggle"><li><details open=""><summary>VPC Subnets:</summary><ul id="01675dcc-6f6e-4f5d-bfe4-ee5210e9c874" class="bulleted-list"><li style="list-style-type:disc">allow to have all the resources launched in the same subnets</li></ul><ul id="c9dccb4e-4f26-4471-a824-fb1db4e4f7a1" class="bulleted-list"><li style="list-style-type:disc">must be from the same AWS Organization</li></ul><ul id="dd11ca1f-b977-469e-ab9e-92f0cf794d7e" class="bulleted-list"><li style="list-style-type:disc">cannot share security groups and default VPC</li></ul><ul id="85581d4b-fdcc-4e77-8d32-85c8df654de1" class="bulleted-list"><li style="list-style-type:disc">each participating account manage their own resources</li></ul><ul id="45a5d2f5-d9bd-4208-9a39-15d589ca5a3e" class="bulleted-list"><li style="list-style-type:disc">participating accounts can’t view, modify, delete resources that belong to other participants or the owner</li></ul><ul id="318481df-91df-40f9-bb77-08ca926721c0" class="bulleted-list"><li style="list-style-type:disc">Network is shared<ul id="db631131-532b-48ba-83a6-36375ee53507" class="bulleted-list"><li style="list-style-type:circle">anything deployed in the VPC can talk to other resources in the VPC</li></ul><ul id="1ba0eeb8-cd51-4f03-8b4b-ee7f82a93d2e" class="bulleted-list"><li style="list-style-type:circle">applications are accessed easily across accounts, using private IP</li></ul><ul id="7c887bad-3b03-496d-9e72-aff9f61d46fa" class="bulleted-list"><li style="list-style-type:circle">security groups from other accounts can be referenced</li></ul></li></ul><figure id="8b66e424-f116-4935-ba76-bbdc321fbdb5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20359.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20359.png"/></a></figure></details></li></ul><ul id="9dead1c6-8988-44bf-b586-570d96073c50" class="bulleted-list"><li style="list-style-type:circle">AWS Transit Gateway</li></ul><ul id="83cb976b-843b-412a-8d03-80906a7cc75b" class="bulleted-list"><li style="list-style-type:circle">Route53 Resolver Rules</li></ul><ul id="33b39ab7-da62-466b-9649-2f94d21063c3" class="bulleted-list"><li style="list-style-type:circle">License Manager Configurations</li></ul></li></ul></details></li></ul></div><h3 id="20bd78c2-e6f9-440f-97f0-3becdebeae4a" class=""><details open=""><summary>Section 27: AWS Security &amp; Encryption: KMS, SSM Parameter Store, CloudHSM, Shield, WAF</summary></details></h3><div class="indented"><ul id="99e3e2af-eb42-4eb6-9c44-7e3b0d4a0189" class="toggle"><li><details open=""><summary>Encryption</summary><ul id="b154bbc1-facb-4766-acea-f1afac4f996d" class="toggle"><li><details open=""><summary>Encryption in flight (SSL - Secure Sockets Layer)</summary><ul id="1b175dff-d0de-4230-8cc1-0ec93e787340" class="bulleted-list"><li style="list-style-type:disc">Data is encrypted before sending and decrypted after receiving</li></ul><ul id="a03ad017-ed32-4e18-bdd0-e6de957a854d" class="bulleted-list"><li style="list-style-type:disc">SSL certificates help with encryption (HTTPS)</li></ul><ul id="adb7f004-7bd9-4d79-a5d8-477b9f56c3fc" class="bulleted-list"><li style="list-style-type:disc">Encryption in flight ensures no MITM (man in the middle) attack</li></ul><ul id="bb5bc2e8-1b0d-41dc-9e30-e51f02ef4984" class="bulleted-list"><li style="list-style-type:disc">Ex: sending credit card info for online payments</li></ul><figure id="728815d0-836b-4f43-9b29-fc02e0e10004" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20360.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20360.png"/></a></figure></details></li></ul><ul id="8baac45e-80d9-4e1f-8c15-03086fe0235e" class="toggle"><li><details open=""><summary>Server side encryption at rest</summary><ul id="19343bb2-31d5-4c61-a757-136bfdb10853" class="bulleted-list"><li style="list-style-type:disc">Data is encrypted after being received by the server</li></ul><ul id="470c2792-f31a-45f5-811c-2684b1a9fe27" class="bulleted-list"><li style="list-style-type:disc">Data is decrypted before being sent from the server</li></ul><ul id="7fb1eee4-b41c-4cd9-adc7-622b6f88f7e3" class="bulleted-list"><li style="list-style-type:disc">It is stored in an encrypted form thanks to a key (usually a data key)</li></ul><ul id="b1412711-2318-4eef-9eef-267de4a27ea6" class="bulleted-list"><li style="list-style-type:disc">The encryption / decryption keys must be managed somewhere and the server must have access to it (KMS)</li></ul><figure id="0938837c-fb4c-457d-af6b-d5fb41a7e4db" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20361.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20361.png"/></a></figure></details></li></ul><ul id="0f333650-0210-4b99-a4c1-ca184e354429" class="toggle"><li><details open=""><summary>Client side encryption at rest</summary><ul id="dde23766-4a12-456c-8094-f6705d33cebf" class="bulleted-list"><li style="list-style-type:disc">Data is encrypted by the client and never decrypted by the server</li></ul><ul id="eb8d4ddc-d89d-44de-a26d-46540de8e685" class="bulleted-list"><li style="list-style-type:disc">Data will be decrypted by a receiving client</li></ul><ul id="2d0394a0-68c8-4a91-b757-eb5398b99628" class="bulleted-list"><li style="list-style-type:disc">The server should not be able to decrypt the data</li></ul><ul id="9d6211d1-28a7-46d5-aede-bf7059818a24" class="bulleted-list"><li style="list-style-type:disc">Could leverage Envelope Encryption</li></ul><figure id="13f50ee5-b420-4aa2-ba9a-8868999357dd" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20362.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20362.png"/></a></figure></details></li></ul></details></li></ul><ul id="5e933c6e-c436-4dea-b0e3-c738554eb66b" class="toggle"><li><details open=""><summary>Key Management Service (KMS)</summary><ul id="be4dcf50-1f81-4b1a-8658-5710e606e452" class="toggle"><li><details open=""><summary>Intro</summary><ul id="24386821-ae11-44ee-ab58-eabaeb5fada1" class="bulleted-list"><li style="list-style-type:disc">Fully integrated with lAM for authorization</li></ul><ul id="1bdd66a7-7fb7-4fbe-a2bd-c2c8d709bb32" class="bulleted-list"><li style="list-style-type:disc">KMS keys are bound to a specific region</li></ul><ul id="36875217-a615-486d-8363-2c3a3eb3c671" class="bulleted-list"><li style="list-style-type:disc">Seamlessly integrated into multiple AWS services such as:<ul id="f5f58453-e91b-4b73-8356-9d177de2f1c8" class="bulleted-list"><li style="list-style-type:circle">Amazon EBS: encrypt volumes</li></ul><ul id="b70540c4-e80c-44f9-b4a3-b090fbe010d1" class="bulleted-list"><li style="list-style-type:circle">Amazon S3: Server side encryption of objects</li></ul><ul id="93be6891-9d7d-467b-a874-c8d025a0b0e1" class="bulleted-list"><li style="list-style-type:circle">Amazon Redshift: encryption of data</li></ul><ul id="90922307-5870-45a1-a2e1-3ec20b4ee99f" class="bulleted-list"><li style="list-style-type:circle">Amazon RDS: encryption of data</li></ul><ul id="3861da25-61b0-4152-a1d9-859809f3f5d9" class="bulleted-list"><li style="list-style-type:circle">Amazon SSM: Parameter store</li></ul></li></ul><ul id="0115eefe-7918-4838-9144-eb90ada6bafa" class="bulleted-list"><li style="list-style-type:disc">Can not only use with AWS services but also with the CLI &amp; SDK</li></ul><ul id="7ebe8d11-fd20-47d1-9f0d-c68c850c387b" class="bulleted-list"><li style="list-style-type:disc">Anytime you need to share sensitive information, use KMS<ul id="0b76151c-d400-4257-9b08-194273d097a0" class="bulleted-list"><li style="list-style-type:circle">Database passwords</li></ul><ul id="2885fd28-d151-4d5d-9869-ab91261ebe6f" class="bulleted-list"><li style="list-style-type:circle">Credentials to external service</li></ul><ul id="ad991088-b328-4622-ba1b-f9841cfe4f1b" class="bulleted-list"><li style="list-style-type:circle">Private Key of SSL certificates</li></ul></li></ul><ul id="ce129660-1c62-44b9-b479-da7d49a9135c" class="bulleted-list"><li style="list-style-type:disc">CMK used to encrypt data can never be retrieved by the user, and the CMK can be rotated for extra security</li></ul><ul id="ffa2f007-be14-4f6c-b877-d69f4272ccfb" class="bulleted-list"><li style="list-style-type:disc">Encrypted secrets can be stored in the code or environment variables</li></ul><ul id="565df493-4d79-4feb-b49e-6b8f88de8416" class="bulleted-list"><li style="list-style-type:disc">KMS can only help in encrypting up to 4KB of data per call. If data &gt; 4 KB, use envelope encryption</li></ul><ul id="e3e09aa6-cb8b-4401-a231-bcee48d33686" class="bulleted-list"><li style="list-style-type:disc">To give access to KMS to someone:<ul id="1b94a365-87e5-4745-8ef4-4d56cfe6c574" class="bulleted-list"><li style="list-style-type:circle">Make sure the Key Policy allows the user</li></ul><ul id="10439280-63dc-4fc6-9032-dba756d6a96b" class="bulleted-list"><li style="list-style-type:circle">Make sure the lAM Policy allows the API calls</li></ul></li></ul></details></li></ul><ul id="bf981b76-b628-4762-bd8f-0736199adc85" class="toggle"><li><details open=""><summary>Customer Master Key (CMK)</summary><ul id="10518df1-1008-4a10-ac0c-0c225c6e9010" class="bulleted-list"><li style="list-style-type:disc">Able to fully manage the keys &amp; policies:<ul id="053bfd64-43f9-427f-82a2-4a73aef92e56" class="bulleted-list"><li style="list-style-type:circle">Create</li></ul><ul id="4d3cfa5b-2453-4e6a-b92c-b0576f7ab496" class="bulleted-list"><li style="list-style-type:circle">Rotation policies</li></ul><ul id="4b305c4a-ee96-4244-a0a9-95856f6bbf44" class="bulleted-list"><li style="list-style-type:circle">Disable</li></ul><ul id="0f009a3f-e207-4c98-9ebe-e21bf23bfdbb" class="bulleted-list"><li style="list-style-type:circle">Enable</li></ul></li></ul><ul id="33b6b44d-a516-4a87-88e2-da5ab2e22468" class="bulleted-list"><li style="list-style-type:disc">Able to audit key usage (using CloudTrail)</li></ul><ul id="873a24fe-b29f-401a-aacd-5e3c4bfbd3fd" class="bulleted-list"><li style="list-style-type:disc">Three types of Customer Master Keys<ul id="b0f8cbd0-351b-402b-a0a7-76580521351b" class="toggle"><li><details open=""><summary>AWS Managed Service Default CMK (free)</summary><ul id="bd972a5b-36a4-456f-a2e6-bff1fe88e319" class="bulleted-list"><li style="list-style-type:disc">Separate default KMS key for each supported service</li></ul><ul id="8caea10c-dfc5-492b-9806-410cc246660d" class="bulleted-list"><li style="list-style-type:disc">Used to encrypt/decrypt anything in a specific AWS service</li></ul><ul id="b5ac69f5-af44-4645-a58b-85f18d5d6980" class="bulleted-list"><li style="list-style-type:disc">They are fully managed by AWS, we can’t view, rotate or delete them</li></ul><figure id="5c934baf-c2cd-4715-9e9a-6bfd588b08ca" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20363.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20363.png"/></a></figure></details></li></ul><ul id="be416a9c-e1d9-4f9d-af23-8c08943e4600" class="toggle"><li><details open=""><summary>User Keys created in KMS ($1 / month)</summary><ul id="9f331906-324d-4877-927b-7341c18236fe" class="bulleted-list"><li style="list-style-type:disc">Option to enable rotation every year for additional security</li></ul></details></li></ul><ul id="de438fb2-8378-4ab1-92e2-f8586478352d" class="toggle"><li><details open=""><summary>User Keys generated and imported from outside AWS ($1 / month)</summary><ul id="c9f14fbc-5dc3-4d9b-8d41-762ccdc1b010" class="bulleted-list"><li style="list-style-type:disc">Not recommended</li></ul><ul id="b6b772dc-f5b5-4f9c-91a6-eee8317cb64c" class="bulleted-list"><li style="list-style-type:disc">Must be 256-bit symmetric key</li></ul></details></li></ul></li></ul><ul id="a3cd8139-15db-410d-b115-b47ceeba0383" class="bulleted-list"><li style="list-style-type:disc">pay for API call to KMS ($0.03 / 10000 calls)</li></ul></details></li></ul><ul id="95b15cae-49d7-4db1-8dd0-ee2ba1abcbcb" class="toggle"><li><details open=""><summary>Symmetric &amp; Asymmetric Keys</summary><ul id="f6033658-8b12-4d47-ac67-2a018c4ffcd9" class="toggle"><li><details open=""><summary>Symmetric (AES-256 keys)</summary><ul id="3d8ca87b-7115-4b37-b6b3-6263222f4f47" class="bulleted-list"><li style="list-style-type:disc">First offering of KMS, single encryption key that is used to Encrypt and Decrypt data</li></ul><ul id="b52a43ea-3ebf-49b1-9c7a-69506df203fc" class="bulleted-list"><li style="list-style-type:disc">AWS services that are integrated with KMS use Symmetric CMKs</li></ul><ul id="66d92adb-d787-425b-a50c-1859cd2d06ad" class="bulleted-list"><li style="list-style-type:disc">Must call KMS API to encrypt data</li></ul><ul id="6458f21c-c404-4938-8cee-3e31b4a49c10" class="bulleted-list"><li style="list-style-type:disc">Necessary for envelope encryption</li></ul></details></li></ul><ul id="b8b06c80-a08a-4299-be7d-de93f951059e" class="toggle"><li><details open=""><summary>Asymmetric (RSA &amp; ECC key pairs)</summary><ul id="1c4a073a-a01a-4bd0-8c90-4c785f6f501f" class="bulleted-list"><li style="list-style-type:disc">Public (Encrypt) and Private Key (Decrypt) pair</li></ul><ul id="1175c67c-69d4-4019-838b-dfe9a9431759" class="bulleted-list"><li style="list-style-type:disc">Used for Encrypt/Decrypt, or Sign/Verify operations</li></ul><ul id="05a9a61f-b7d1-4a21-a2e2-6a406a61f144" class="bulleted-list"><li style="list-style-type:disc">The public key is downloadable, but you can’t access the Private Key unencrypted</li></ul><ul id="6658dddb-1704-4076-a171-931a78aa5d87" class="bulleted-list"><li style="list-style-type:disc">No need to call the KMS API to encrypt data (data can be encrypted by the client)</li></ul><ul id="41a66bd4-6c9a-485c-90fa-99866b3a54a2" class="bulleted-list"><li style="list-style-type:disc">Not eligible for automatic rotation</li></ul><ul id="4aabcf97-0a36-476b-a9c0-9d10ff49dae7" class="bulleted-list"><li style="list-style-type:disc">Use case: encryption outside of AWS by users who can’t call the KMS API</li></ul></details></li></ul></details></li></ul><ul id="8f7f088c-84f4-4a3a-a3e8-b0a749fb614a" class="toggle"><li><details open=""><summary>Encrypted Snapshot migration across regions</summary><ul id="2a95531d-dd96-4f5b-a8ff-abf6f8820773" class="bulleted-list"><li style="list-style-type:disc">Create a snapshot (encrypted) of the encrypted volume</li></ul><ul id="3ce2b652-e877-467b-8725-1a5431bf9058" class="bulleted-list"><li style="list-style-type:disc">Copy the snapshot to another region along with re-encryption using a new key in the new region (keys are bound to a region)</li></ul><ul id="0e530b83-0f64-4223-9519-9c4f9d07330e" class="bulleted-list"><li style="list-style-type:disc">Make a volume using the snapshot in the new region</li></ul><figure id="2e83bf00-5c88-422e-a4df-933115c079aa" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20364.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20364.png"/></a></figure></details></li></ul><ul id="0c433eac-170c-458b-ac94-6aaffc856596" class="toggle"><li><details open=""><summary>KMS key policies</summary><ul id="c80726fb-d16c-40ce-9126-8413a0179773" class="bulleted-list"><li style="list-style-type:disc">Control access to KMS keys, “similar” to S3 bucket policies, you cannot access KMS keys without them</li></ul><ul id="8959f737-dc57-444e-a041-ce65039220a1" class="bulleted-list"><li style="list-style-type:disc">Default KMS Key Policy:<ul id="4c1f9b18-5035-4652-9871-cc822d04af6a" class="bulleted-list"><li style="list-style-type:circle">Created if you don’t provide a specific KMS Key Policy</li></ul><ul id="cf6fd293-7864-4f0d-8ee8-b05265edb53a" class="bulleted-list"><li style="list-style-type:circle">Complete access to the key for the root user ⇒ any user or role can access the key (most permissible)</li></ul><ul id="01591b10-4531-46a3-94da-6bc42e968919" class="bulleted-list"><li style="list-style-type:circle">Gives access to the IAM policies to the KMS key</li></ul></li></ul><ul id="15312cbb-e62b-442c-86f1-bfcb0fc7808a" class="bulleted-list"><li style="list-style-type:disc">Custom KMS Key Policy:<ul id="6ce44d88-7df3-4842-9b51-e5c4274c9cb7" class="bulleted-list"><li style="list-style-type:circle">Define users, roles that can access the KMS key</li></ul><ul id="a64a1ea2-2c63-4b1d-af4e-3c6717ddd04a" class="bulleted-list"><li style="list-style-type:circle">Define who can administer the key</li></ul><ul id="5bb857fc-b469-4ddb-b559-4b052fcef03a" class="bulleted-list"><li style="list-style-type:circle">Useful for cross-account access of your KMS key</li></ul></li></ul></details></li></ul><ul id="8151cf0e-9e02-4f14-82f8-91f59a25319d" class="toggle"><li><details open=""><summary>Encrypted Snapshot migration across accounts</summary><ul id="e1816378-edc6-498a-97e3-626c463e5e49" class="bulleted-list"><li style="list-style-type:disc">Create a Snapshot, encrypted with your own CMK</li></ul><ul id="6a55df53-f85c-44df-94f0-30078c8528c5" class="bulleted-list"><li style="list-style-type:disc">Attach a KMS Key Policy to authorize cross-account access</li></ul><ul id="c7499dea-fb05-4ca3-9368-064821fc67b2" class="bulleted-list"><li style="list-style-type:disc">Share the encrypted snapshot</li></ul><ul id="db4b369d-5365-4aa1-a007-201a13e752e1" class="bulleted-list"><li style="list-style-type:disc">In the target account, create a copy of the snapshot (decryption will require the main CMS key),</li></ul><ul id="8d0781c2-cff2-4e28-9035-b2218545d12b" class="bulleted-list"><li style="list-style-type:disc">Encrypt it with a new KMS Key in your account</li></ul><ul id="f3ca0ace-a55c-43f7-9490-8de51925704c" class="bulleted-list"><li style="list-style-type:disc">Create a volume from the snapshot</li></ul><figure id="d6f1a724-f21a-4a94-836d-4024ab65e851" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20365.png"><img style="width:480px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20365.png"/></a></figure></details></li></ul><ul id="33809399-34fd-43c1-9ce8-59d0a89de46a" class="toggle"><li><details open=""><summary>KMS Multi-Region Keys</summary><figure id="5f06ab44-9bc5-49e6-8139-1a8a17f34801" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(588).png"><img style="width:1618px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(588).png"/></a></figure><figure id="5d2073ca-0ea9-4917-9a46-332d67d186c7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(589).png"><img style="width:1787px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(589).png"/></a></figure><figure id="9e42f32b-ea72-4ee1-bb30-46e01b86f8a0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(590).png"><img style="width:1798px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(590).png"/></a></figure><figure id="60ec3982-6082-46bf-9158-2ce80b156715" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(591).png"><img style="width:1778px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(591).png"/></a></figure></details></li></ul><p id="74931c5a-1351-4651-b2d3-be3ea5e46eaa" class="">
</p><p id="bd874975-d881-4e7b-af70-5c81e3f40fda" class="">new →</p><ul id="97095df4-4068-4837-b4cb-6217087cdede" class="toggle"><li><details open=""><summary>Key Rotation</summary><ul id="f8e1d403-5d89-40c7-9a52-10e045b3557a" class="toggle"><li><details open=""><summary>Automatic</summary><ul id="4a942835-3306-45e6-b00d-ece020908fab" class="bulleted-list"><li style="list-style-type:disc">For Customer-managed CMK (not AWS managed CMK)</li></ul><ul id="a62c609d-3e31-49c5-9ab4-6c2c1382e7d0" class="bulleted-list"><li style="list-style-type:disc">If enabled: automatic key rotation happens every 1 year</li></ul><ul id="79255e42-67e2-4f9c-a183-1f7139dc2add" class="bulleted-list"><li style="list-style-type:disc">Previous key is kept active so you can decrypt old data</li></ul><ul id="ebee1022-cc7d-4dc0-a348-557793b08ad3" class="bulleted-list"><li style="list-style-type:disc">New key has the same CMK ID (only the backing key is changed)</li></ul><figure id="d1aa4a1d-2f4c-4182-b4ce-c65a5b60992b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20366.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20366.png"/></a></figure></details></li></ul><ul id="cc21c36d-28c1-4ace-8ea7-f9294c97abe8" class="toggle"><li><details open=""><summary>Manual</summary><ul id="f4163587-6ffc-4b1c-92a4-809aea15c621" class="bulleted-list"><li style="list-style-type:disc">When you want to rotate key every 90 days or 180 days</li></ul><ul id="7b550d38-67ad-4d1a-b611-c892619677de" class="bulleted-list"><li style="list-style-type:disc">New Key has a different CMK ID</li></ul><ul id="e0575322-490c-457b-8b84-c108487482e7" class="bulleted-list"><li style="list-style-type:disc">Keep the previous key active so that you can decrypt old data</li></ul><ul id="1bc59929-e63d-46a2-8344-029c8f0ecca7" class="bulleted-list"><li style="list-style-type:disc">Better to use aliases in this case as CMK id changes after rotation (to hide the change of key for the application). After rotation, use UpdateAlias API to point the alias to the new key.</li></ul><ul id="a5f88af2-9aec-4513-8251-e095d10081e6" class="bulleted-list"><li style="list-style-type:disc">Good solution to rotate CMK that are not eligible for automatic rotation (asymmetric CMK)</li></ul><figure id="bdcc0518-c444-435a-9a6a-68f83a6a83c6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20367.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20367.png"/></a></figure></details></li></ul></details></li></ul></details></li></ul><ul id="9f63a49a-7bc8-4316-a801-af69270820cc" class="toggle"><li><details open=""><summary>S3 Replication &amp; Encryption</summary><figure id="fcf79264-15d3-4676-be09-60f7cd793ea1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(592).png"><img style="width:720px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(592).png"/></a></figure></details></li></ul><ul id="6ebb5fd8-709e-4478-b99b-c0069858fdaf" class="toggle"><li><details open=""><summary>AMI Sharing Process Encrypted via KMS</summary><figure id="3a92b377-d183-46c5-9e8e-4c2df04d6eba" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(593).png"><img style="width:1792px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(593).png"/></a></figure></details></li></ul><ul id="b34903d4-c528-4115-86e9-8cc452cae96a" class="toggle"><li><details open=""><summary>SSM Parameter Store</summary><ul id="9c84cf7a-82ff-427c-8c6f-e77302826bc2" class="toggle"><li><details open=""><summary>Intro</summary><p id="0c846cfb-9c69-4645-9210-5616b22a925f" class="">SSM Parameters Store can be used to store parameters and has built-in version tracking capability. Each time you edit the value of a parameter, SSM Parameter Store creates a new version of the parameter and retains the previous versions. You can view the details, including the values, of all versions in a parameter’s history.</p><ul id="84b8a6bc-3ce4-4f54-b6f1-e9fd9ed6bbf7" class="bulleted-list"><li style="list-style-type:disc">Secure storage for configuration and secrets for our application</li></ul><ul id="2ae7fcdd-382f-4b3d-a939-260cdc48e34a" class="bulleted-list"><li style="list-style-type:disc">Optional Seamless Encryption using KMS for encryption and decryption of stored secrets</li></ul><ul id="2420aa0b-f6af-4b68-9f94-0052214a888f" class="bulleted-list"><li style="list-style-type:disc">Serverless, scalable, durable, easy SDK</li></ul><ul id="11f92022-ef2d-470b-8846-a79e1c11179b" class="bulleted-list"><li style="list-style-type:disc">Version tracking of configurations / secrets</li></ul><ul id="51a55dc1-daf8-44b3-870f-17c7d8796b49" class="bulleted-list"><li style="list-style-type:disc">Configuration management using path &amp; IAM</li></ul><ul id="1c7e7717-6dd7-465f-8d44-086f746aa2a6" class="bulleted-list"><li style="list-style-type:disc">Notifications with CloudWatch Events</li></ul><ul id="171537b4-9c18-49b8-92eb-7a98a8f23e13" class="bulleted-list"><li style="list-style-type:disc">Integration with CloudFormation</li></ul><figure id="8f29a802-d8a7-4c22-8d5f-72e66df89d91" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20368.png"><img style="width:336px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20368.png"/></a></figure></details></li></ul><ul id="f7232fc0-2c2c-48f6-b015-921a0e533442" class="toggle"><li><details open=""><summary>Hierarchy</summary><ul id="6b776e92-c6c2-4c4a-9f1f-f9c058e3b8f2" class="bulleted-list"><li style="list-style-type:disc">Parameters are stored in hierarchical fashion.</li></ul><ul id="e85e1c8a-4d83-4724-8d05-b6e201fb8763" class="bulleted-list"><li style="list-style-type:disc">Can be used to reference secrets from secrets manager</li></ul><ul id="dc02570f-8963-4dea-b33e-f53ecaa03851" class="bulleted-list"><li style="list-style-type:disc">Can directly access parameters from AWS (ex. to get AMI ID for the latest Amazon Linux 2 AMI)</li></ul><figure id="f51cef2f-97d1-42d3-bf1c-1e2ab2d1c09b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20369.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20369.png"/></a></figure></details></li></ul><ul id="e7578f23-1577-4078-a3ed-1659f7d930f1" class="toggle"><li><details open=""><summary>Standard &amp; Advanced tiers</summary><figure id="28ad1235-43cc-41c0-ab71-6d3f2f41c698" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20370.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20370.png"/></a></figure></details></li></ul><ul id="0ad371aa-ca87-4d7d-881d-888fc36bdcd9" class="toggle"><li><details open=""><summary>Parameter Policies (advanced parameters)</summary><ul id="3b089407-d144-41d2-8c62-207a74ea0971" class="bulleted-list"><li style="list-style-type:disc">Allow to assign a TTL to a parameter (expiration date) to force updating or deleting sensitive data such as passwords</li></ul><ul id="b44337aa-2cfc-48b7-ab9d-a0dab1273096" class="bulleted-list"><li style="list-style-type:disc">Can assign multiple policies at a time</li></ul><figure id="5cce67e9-7fd7-47df-a26e-634c2f1534aa" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20371.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20371.png"/></a></figure></details></li></ul><ul id="b373a5a7-540c-47d9-a47c-24b07f576ed8" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="12a6fc56-3463-4aa5-8f4b-b2d3b0248eb4" class="bulleted-list"><li style="list-style-type:disc">Get Parameters (CLI)</li></ul><pre id="c34e49ac-08a7-45a2-8158-8d0adc983af7" class="code code-wrap"><code>aws ssm get-parameters --names /my-app/dev/db-url /my-app/dev/db-password --with-decryption
aws ssm get-parameters-by-path --path /my-app/ --recursive --with-decryption</code></pre></details></li></ul></details></li></ul><ul id="e4623ec9-fd21-41a1-bb54-66b426e6cf8e" class="toggle"><li><details open=""><summary>Secrets Manager</summary><ul id="58983080-b2f2-49ae-87dc-65363964574b" class="bulleted-list"><li style="list-style-type:disc">Newer service, meant for storing secrets only (parameter store is for storing any parameter)</li></ul><ul id="893ba4f6-665f-4c7d-a67b-d37c7692b4f5" class="bulleted-list"><li style="list-style-type:disc">Capability to force rotation of secrets every fixed number of days (up to 1 year) (not available on Parameter store)</li></ul><ul id="7df57158-0b61-4248-b265-e5c9fd38968d" class="bulleted-list"><li style="list-style-type:disc">Automate generation of secrets on rotation (uses Lambda function for this) (not available on Parameter store)</li></ul><ul id="35b20bd5-284e-4a3d-8621-64abb748c54f" class="bulleted-list"><li style="list-style-type:disc">A single secret consists of multiple key-value pairs</li></ul><ul id="3e2bcec8-c86f-47ea-bb00-33400dff3492" class="bulleted-list"><li style="list-style-type:disc">Integration with Amazon RDS (MySQL, PostgreSQL, Aurora)</li></ul><ul id="db8d8ce4-55c8-4c7e-9bea-5ee89c2a3f64" class="bulleted-list"><li style="list-style-type:disc">Secrets are encrypted using KMS</li></ul><ul id="ccb17b59-1b05-4f64-9c56-bc7194160375" class="bulleted-list"><li style="list-style-type:disc">Mostly meant for RDS integration</li></ul><ul id="623c8800-a6c1-4760-956c-2cb3564d9017" class="bulleted-list"><li style="list-style-type:disc">Can create secrets for<ul id="8ce37f91-4307-4e76-8aeb-9f5665ef4efd" class="bulleted-list"><li style="list-style-type:circle">databases<ul id="9d0febba-9316-4801-b794-8797d7b1ac38" class="bulleted-list"><li style="list-style-type:square">need to specify the username and password to access the database</li></ul><ul id="a48d62dd-32bf-4682-97c7-ffcc00fb5526" class="bulleted-list"><li style="list-style-type:square">link the secret to the respective database to allow for automatic rotation of database login info</li></ul></li></ul><ul id="e2864225-fb49-4719-8b6d-3fed41047658" class="bulleted-list"><li style="list-style-type:circle">custom secrets<ul id="961c0d8e-96a7-419d-88ca-15a5ee9e5c50" class="bulleted-list"><li style="list-style-type:square">provide our own key-value pairs</li></ul></li></ul></li></ul><ul id="14352934-1073-49a3-b62e-b815998dd837" class="toggle"><li><details open=""><summary>Multi Region Secrets</summary><figure id="02c0d765-1d5a-4ada-b4bc-0a067db5c7cd" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(594).png"><img style="width:1665px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(594).png"/></a></figure></details></li></ul></details></li></ul><ul id="c5f1b3a1-a85a-4d4a-9282-067a9bed2e92" class="toggle"><li><details open=""><summary>AWS Certificate Manager (ACM)</summary><figure id="4838cbe8-1256-4e58-9a57-83574325031d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(595).png"><img style="width:1774px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(595).png"/></a></figure><figure id="5a0efff0-f67d-45e7-a0fd-ba63d3805bbb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(596).png"><img style="width:843px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(596).png"/></a></figure><figure id="ead1eaa9-d8f3-4ca7-8fc8-4f2ef80a9b6f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(597).png"><img style="width:965px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(597).png"/></a></figure><figure id="4b3ae8a4-7841-4b96-a501-8662766ba334" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(598).png"><img style="width:895px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(598).png"/></a></figure><figure id="04b76d40-5d55-4c51-a7db-2eddd5d7b794" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(600).png"><img style="width:916px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(600).png"/></a></figure><figure id="848bec6a-68f8-4608-8da8-6c866af0fcdb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(599).png"><img style="width:1751px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(599).png"/></a></figure></details></li></ul><ul id="a03e1f0e-56a1-4cd3-a8f3-91fc81d8321c" class="toggle"><li><details open=""><summary>Web Application Firewall (WAF)</summary><ul id="fce88941-2658-4386-9852-56ca67e619c3" class="toggle"><li><details open=""><summary>Intro</summary><ul id="24bdbbec-bed0-428b-93a9-681add39aacf" class="bulleted-list"><li style="list-style-type:disc">Protects your web applications from common web exploits (Layer 7 - HTTP)</li></ul><ul id="257e8dfd-2d95-41d7-9beb-b0c98689f45c" class="bulleted-list"><li style="list-style-type:disc">Layer 7 has more data about the structure of the incoming request than layer 4 - TCP, UDP</li></ul><ul id="1bb4cfbb-340b-4c25-aaee-1f7a376eb6dd" class="bulleted-list"><li style="list-style-type:disc">Can only be deployed on<ul id="e1435278-76df-45f8-a64b-259369e8b8b7" class="bulleted-list"><li style="list-style-type:circle">Application Load Balancer</li></ul><ul id="1b5629fd-d63c-4c00-8133-1e132a354f84" class="bulleted-list"><li style="list-style-type:circle">API Gateway</li></ul><ul id="e3f34b13-fd84-4173-a033-56900e3614e7" class="bulleted-list"><li style="list-style-type:circle">CloudFront</li></ul></li></ul><ul id="ad6c6864-43b5-4fcb-be7a-583e6066cb2d" class="bulleted-list"><li style="list-style-type:disc">Define Web ACL (Web Access Control List)<ul id="99242cb1-f63c-4aca-ad42-a71e2c609d41" class="bulleted-list"><li style="list-style-type:circle">Rules can include:<ul id="30b1f294-d293-4408-a29f-00d239dcd4ed" class="bulleted-list"><li style="list-style-type:square">IP addresses</li></ul><ul id="9788394f-d64b-4e9a-a042-0aaef4b2fa65" class="bulleted-list"><li style="list-style-type:square">HTTP headers</li></ul><ul id="27ce466e-e1bf-4480-8490-8a4ae761a278" class="bulleted-list"><li style="list-style-type:square">HTTP body</li></ul><ul id="2ddcdd92-d303-458a-8253-6e3a72b14685" class="bulleted-list"><li style="list-style-type:square">URI strings</li></ul><ul id="8a7673a0-d906-4b77-8fd1-3e90f1094e96" class="bulleted-list"><li style="list-style-type:square">Size constraints (ex. max 5kb)</li></ul><ul id="fa8055b5-6cc5-45fc-a1cf-3bfc789d9d0c" class="bulleted-list"><li style="list-style-type:square">Geo-match (block countries)</li></ul><ul id="11910642-f99e-411e-8d9d-234821c773b7" class="bulleted-list"><li style="list-style-type:square">Rate-based rules (to count occurrences of events per IP) for DDoS protection</li></ul></li></ul><ul id="963caed2-42eb-4179-9de9-ec1e69729e28" class="bulleted-list"><li style="list-style-type:circle">Protects from common attack SQL injection and Cross-Site Scripting (XSS)</li></ul></li></ul><figure id="e18ed3ea-fcd7-4497-953c-254172f25117" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(601).png"><img style="width:945px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(601).png"/></a></figure><figure id="262c3c19-814d-4266-8d39-4e23f7a56140" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(602).png"><img style="width:1682px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(602).png"/></a></figure></details></li></ul></details></li></ul><ul id="50eb2315-8a6b-44f9-a80a-0f1aeccd0349" class="toggle"><li><details open=""><summary>AWS Shield</summary><p id="e203c165-1652-47ad-b146-712b497313e7" class="">DDoS: Distributed Denial of service - Many requests at the same time</p><ul id="06520d21-d4b5-4867-a384-5746e92e7d48" class="bulleted-list"><li style="list-style-type:disc">AWS Shield Standard<ul id="887ef874-bd34-4739-ba68-c99c3d09af07" class="bulleted-list"><li style="list-style-type:circle">Free service that is activated for every AWS customer</li></ul><ul id="29410e1a-a329-4cfa-9f03-af0f0d61dfd8" class="bulleted-list"><li style="list-style-type:circle">Provides protection from SYN/UDP Floods, Reflection attacks and other layer 3 &amp; layer 4 attacks</li></ul></li></ul><ul id="f5cbfa26-78fa-4865-8b9c-dc03e52d3aa3" class="bulleted-list"><li style="list-style-type:disc">AWS Shield Advanced<ul id="d78116a5-eb5d-4c3d-a6b4-cea8290719bd" class="bulleted-list"><li style="list-style-type:circle">Optional DDoS mitigation service ($3,000 per month per organization)</li></ul><ul id="1e41e63e-f2a2-4d97-9a5f-dc219e42057e" class="bulleted-list"><li style="list-style-type:circle">Protect against more sophisticated attack on Amazon EC2, Elastic Load Balancing (ELB), Amazon CloudFront, AWS Global Accelerator, and Route 53</li></ul><ul id="3e9a81b9-d958-4dd5-a215-e6f0f7b52c72" class="bulleted-list"><li style="list-style-type:circle">24/7 access to AWS DDoS response team (DRP)</li></ul><ul id="1b074135-d55f-481b-8001-65206666c3af" class="bulleted-list"><li style="list-style-type:circle">Get reimbursed for usage spikes due to DDoS</li></ul></li></ul></details></li></ul><ul id="28036ec8-4fcc-4c8e-b384-5409c2a9d05a" class="toggle"><li><details open=""><summary>AWS Firewall Manager</summary><ul id="d5e37b77-ada3-4760-bdc6-8cd6c440e006" class="bulleted-list"><li style="list-style-type:disc">Manage rules in all WAFs across all the accounts of an AWS Organization</li></ul><ul id="c0d9ddb2-4428-4b71-88eb-79a078436e4e" class="bulleted-list"><li style="list-style-type:disc">Common set of security rules</li></ul><ul id="194e92b3-c94b-44f1-a99d-8a84e7ccd548" class="bulleted-list"><li style="list-style-type:disc">WAF rules (Application Load Balancer, API Gateways, CloudFront)</li></ul><ul id="700db4dc-853e-44bb-8164-a32b90ef96a3" class="bulleted-list"><li style="list-style-type:disc">AWS Shield Advanced (ALB, CLB, Elastic IP CloudFront)</li></ul><ul id="2afd3f5c-ee52-4284-aa5c-9bd9d891d049" class="bulleted-list"><li style="list-style-type:disc">Security Groups for EC2 and ENI resources in VPC</li></ul><ul id="4a99f276-4099-40f4-b46e-168e501f0935" class="bulleted-list"><li style="list-style-type:disc">Amazon Route 53 Resolver DNS Firewall</li></ul><ul id="5891a8eb-98e3-42c8-ab93-f4780473365f" class="bulleted-list"><li style="list-style-type:disc">Policies are created at the region level</li></ul><ul id="59b7942e-240f-4113-b931-e8819a49fb50" class="bulleted-list"><li style="list-style-type:disc">Rules are applied to new resources as they created (good for compliance) across all and future accounts in your organization</li></ul><figure id="3aa3fcfe-29aa-473c-92b5-0da5dff7ca73" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(603).png"><img style="width:1666px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(603).png"/></a></figure></details></li></ul><ul id="b9912764-353e-4632-b0a7-dc280a604efc" class="toggle"><li><details open=""><summary>DDoS Protection Best Practices</summary><figure id="4a0576ac-2b7d-4701-a53f-1a35ed1cfa54" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(604).png"><img style="width:1776px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(604).png"/></a></figure><figure id="2be157bc-65df-4503-8d49-67475a2942fc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(605).png"><img style="width:949px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(605).png"/></a></figure><figure id="ea4628d5-fa5b-4f9a-a208-a6351f9febc2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(606).png"><img style="width:955px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(606).png"/></a></figure><figure id="335b34c8-2432-4da4-8c2a-ef9eed5159ff" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(607).png"><img style="width:951px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(607).png"/></a></figure></details></li></ul><ul id="6eed2d94-0d84-4452-a799-c66abf7417e2" class="toggle"><li><details open=""><summary>Amazon GuardDuty</summary><ul id="d9fd65d9-9bd2-42a3-b9e1-c833477f68d2" class="bulleted-list"><li style="list-style-type:disc">Intelligent threat discovery to protect AWS account</li></ul><ul id="8c021127-2775-4f81-be47-6ba352fedf55" class="bulleted-list"><li style="list-style-type:disc">Uses Machine Learning algorithms, anomaly detection, 3rd party data</li></ul><ul id="2cefc5bf-08d2-4b7b-a225-c9fa2bab7532" class="bulleted-list"><li style="list-style-type:disc">One click to enable (30 days trial), no need to install software</li></ul><ul id="480caff7-d1b2-4aff-b1b0-3a167de7c61b" class="bulleted-list"><li style="list-style-type:disc">Automatically monitors:<ul id="68e8c0f6-2137-4b6d-b64f-64009297603b" class="bulleted-list"><li style="list-style-type:circle">Cloud Trail Events Logs unusual API calls, unauthorized deployments<ul id="70d7627d-6f3d-4ed4-a876-f33e66ff4890" class="bulleted-list"><li style="list-style-type:square">CloudTrail Management Events - create VPC subnet, create trail,</li></ul><ul id="387a8cee-d4de-4856-b50f-fc6bd2946718" class="bulleted-list"><li style="list-style-type:square">CloudTrail S3 Data Events - get object, list objects, delete object, …</li></ul></li></ul><ul id="bedbabde-5345-409e-a4be-57d67303b911" class="bulleted-list"><li style="list-style-type:circle">VPC Flow Logs - unusual internal traffic, unusual IP address</li></ul><ul id="b6d961c9-3bde-4a17-83fa-aef98f541964" class="bulleted-list"><li style="list-style-type:circle">DNS Logs - compromised EC2 instances sending encoded data within DNS queries</li></ul><ul id="2b4408bc-a749-41ca-b892-e82e42e3a2e3" class="bulleted-list"><li style="list-style-type:circle">Kubernetes Audit Logs - suspicious activities and potential EKS cluster compromises</li></ul></li></ul><ul id="7513c40f-02b5-4e67-928c-0aa7bfb86006" class="bulleted-list"><li style="list-style-type:disc">Can setup CloudWatch Event rules to be notified in case of findings</li></ul><ul id="6856de7d-cdc7-4046-8484-f68481748944" class="bulleted-list"><li style="list-style-type:disc">CloudWatch Events rules can target AWS Lambda or SNS for automation</li></ul><ul id="2a7f2e93-9db8-45ac-8b43-4a2ca0febcb4" class="bulleted-list"><li style="list-style-type:disc">Can protect against CryptoCurrency attacks (has a dedicated “finding” for it)</li></ul><figure id="34250264-ee90-42d6-a876-9020185b6f9b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20372.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20372.png"/></a></figure></details></li></ul><ul id="f03be36b-2de6-4606-93db-20ba0f71bc80" class="toggle"><li><details open=""><summary>Amazon Inspector</summary><ul id="ac02c10c-21e8-49fc-a27a-1ad3328ac235" class="bulleted-list"><li style="list-style-type:disc">Automated Security Assessments for<ul id="7572c5b6-840d-4109-8986-41bba764eea1" class="bulleted-list"><li style="list-style-type:circle">EC2 instances<ul id="b21f570c-a51a-405b-a2bf-00cf262c2948" class="bulleted-list"><li style="list-style-type:square">Leveraging the AWS System Manager (SSM) agent running on EC2 instances for continuous assessment of EC2 instances</li></ul><ul id="6da3a86f-0ba5-4f1e-8c5b-bec6e8af198f" class="bulleted-list"><li style="list-style-type:square">Analyze against unintended network accessibility</li></ul><ul id="1c01f025-fbb5-46db-a3e1-2aace8ec7ddd" class="bulleted-list"><li style="list-style-type:square">Analyze the running OS against known vulnerabilities</li></ul></li></ul><ul id="1b0e1a79-3ca1-4f59-8201-226e1b513b2d" class="bulleted-list"><li style="list-style-type:circle">Containers push to Amazon ECR - Elastic Container Registry<ul id="c541237f-38ee-406c-a70a-dd2491f21f99" class="bulleted-list"><li style="list-style-type:square">Assessment of containers as they are pushed</li></ul></li></ul></li></ul><ul id="d51633e2-b50c-43eb-ba60-c24cec7d8474" class="bulleted-list"><li style="list-style-type:disc">Reporting &amp; integration with AWS Security Hub</li></ul><ul id="693b1d2a-d21a-4498-9e50-b99ed1241ea3" class="bulleted-list"><li style="list-style-type:disc">Send findings to Amazon Event Bridge</li></ul><ul id="35e9689b-845a-4918-bd47-c1351ede84a6" class="bulleted-list"><li style="list-style-type:disc">It will give a risk score associated with all vulnerabilities for prioritization</li></ul><figure id="42585557-a1bb-4944-847d-ab0518d30cf8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20373.png"><img style="width:336px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20373.png"/></a></figure><figure id="809c2a47-ced0-434d-b66e-e2f06fed7ed2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(608).png"><img style="width:1511px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(608).png"/></a></figure></details></li></ul><ul id="fd67d48c-1d4c-4575-941a-41dcd41a7c57" class="toggle"><li><details open=""><summary>Amazon Macie</summary><p id="caf6b205-62ea-4647-ac13-70470cac60ae" class="">Amazon Macie is a fully managed data security service that uses Machine Learning to discover and protect your sensitive data stored in S3 buckets. It automatically provides an inventory of S3 buckets including a list of unencrypted buckets, publicly accessible buckets, and buckets shared with other AWS accounts. It allows you to identify and alert you to sensitive data, such as Personally Identifiable Information (PII).</p><ul id="2a446289-4d5f-4629-8982-8a9362c29056" class="bulleted-list"><li style="list-style-type:disc">Amazon Macie is a fully managed data security and data privacy service that uses machine learning and pattern matching to discover and protect your sensitive data in AWS.</li></ul><ul id="285aad1f-2027-4682-88e1-af171905252b" class="bulleted-list"><li style="list-style-type:disc">Macie helps identify and alert you to sensitive data, such as personally identifiable information (PII) in an S3 bucket.</li></ul><ul id="4c9e8319-6071-4504-a934-4d20a454ccc5" class="bulleted-list"><li style="list-style-type:disc">One click to enable</li></ul><ul id="549f55f9-c02d-4581-8ba7-c159c7b51967" class="bulleted-list"><li style="list-style-type:disc">Notifies through an EB event</li></ul><figure id="635707c4-e4f4-47b1-bb32-2b9bd316f665" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20374.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20374.png"/></a></figure></details></li></ul><ul id="d3e0ff05-e527-4dc4-a7c7-55a2f40ad304" class="toggle"><li><details open=""><summary>CloudHSM</summary><ul id="38e0075b-63b2-4660-bbe2-aea0ce4e6178" class="toggle"><li><details open=""><summary>Intro</summary><ul id="5a4613a5-931f-4c6a-abb7-e01c8b495785" class="bulleted-list"><li style="list-style-type:disc">AWS provisions encryption hardware (Hardware Security Module)</li></ul><ul id="b533d6e5-ef66-4007-ba33-41e040bf8401" class="bulleted-list"><li style="list-style-type:disc">You manage your own encryption keys entirely (not AWS)</li></ul><ul id="811ced35-a56d-4195-838f-4ac44f8f95d0" class="bulleted-list"><li style="list-style-type:disc">HSM device is stored in AWS (tamper resistant, FIPS 140-2 Level 3 compliance)</li></ul><ul id="97534f96-ca41-4258-a321-811401fd2d4d" class="bulleted-list"><li style="list-style-type:disc">Supports both symmetric and asymmetric encryption (SSL/TLS keys)</li></ul><ul id="6c119f45-ad86-49ae-9d95-e7b92091e2a3" class="bulleted-list"><li style="list-style-type:disc">No free tier available</li></ul><ul id="4debab0a-6fac-4a42-ad07-a629b6fef0f0" class="bulleted-list"><li style="list-style-type:disc">CloudHSM clusters are spread across Multi AZ (HA)</li></ul><ul id="b47b2e82-8bd6-4f82-9560-b8f22a725785" class="bulleted-list"><li style="list-style-type:disc">Redshift supports CloudHSM for database encryption and key manasgement</li></ul><ul id="7545e866-b4b2-40dd-8712-6c543e1b0048" class="bulleted-list"><li style="list-style-type:disc">Good option to use with SSE-C encryption</li></ul><ul id="9e47cb4d-78c3-41e1-8d49-cebbbce30e9d" class="bulleted-list"><li style="list-style-type:disc">IAM permissions are required to perform CRUD operations on HSM cluster</li></ul><ul id="cb1cd56a-5792-4f25-84b5-d38fcfb391b2" class="bulleted-list"><li style="list-style-type:disc">CloudHSM Software is used to manage the keys and users (in KMS, everything is managed using IAM)</li></ul><figure id="1c80976c-8bdb-4972-9433-c1d14bfacf89" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20375.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20375.png"/></a></figure></details></li></ul><ul id="133cf6aa-f280-49a1-84c0-f478c541f94f" class="toggle"><li><details open=""><summary>KMS vs CloudHSM</summary><figure id="43147e7b-c0fd-46ad-90c1-cb4223020af3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20376.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20376.png"/></a></figure><p id="6e8b7cb3-14cd-4760-bfd5-fbd79eefcd02" class="">Untitled</p><figure id="6233e945-ccac-49aa-b5ce-727f1ea3c5f6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20377.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20377.png"/></a></figure><p id="7e266bd7-fcd3-4c79-8b0e-17690b0ddeae" class="">Untitled</p></details></li></ul></details></li></ul><ul id="4f94b0f0-67d6-41ed-b2f5-b91a3c686e9e" class="toggle"><li><details open=""><summary>Architecture for DDoS Protection</summary><p id="30c843ad-1a8d-4621-b789-02b81d7e8d8f" class="">Shield will protect against DDoS attack and WAF will control the kind of requests that can pass through.</p><figure id="ab63ccad-736a-4191-9b57-d3861fef2a42" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20378.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20378.png"/></a></figure></details></li></ul><ul id="f19e472b-95e4-4829-be31-f6ebc27acf4d" class="toggle"><li><details open=""><summary>Shared Responsibility Model</summary><ul id="de6ed35e-cec8-474d-be74-b90d00b8e60c" class="bulleted-list"><li style="list-style-type:disc">Intro<ul id="ba45b1f0-fa18-4c61-9463-27c847314167" class="bulleted-list"><li style="list-style-type:circle">AWS’s responsibility - Security of the Cloud<ul id="3c4a62a3-3d6f-4ad0-9b43-4c0bffa71a30" class="bulleted-list"><li style="list-style-type:square">Protecting infrastructure (hardware, software, facilities, and networking) that runs all the AWS services</li></ul><ul id="32f7f1b4-324b-48bb-b2d3-0db2f1d44e2a" class="bulleted-list"><li style="list-style-type:square">Managed services like S3, DynamoDB, RDS, etc.</li></ul></li></ul><ul id="b8e61372-3b66-4075-b9dc-34b568fb256a" class="bulleted-list"><li style="list-style-type:circle">Customer’s responsibility - Security in the Cloud<ul id="3d597c6c-d79c-499b-b602-06da62570e28" class="bulleted-list"><li style="list-style-type:square">For EC2 instance, customer is responsible for management of the guest OS (including security patches and updates), firewall &amp; network configuration, IAM</li></ul><ul id="28c46a0b-4664-4966-80c0-27014b74361c" class="bulleted-list"><li style="list-style-type:square">Encrypting application data</li></ul></li></ul><ul id="c9248346-22a5-400f-86ce-3cf4a27c63ac" class="bulleted-list"><li style="list-style-type:circle">Shared responsibility:<ul id="1a06fda0-4ea5-4f22-8149-158d6b5487e7" class="bulleted-list"><li style="list-style-type:square">Patch Management, Configuration Management, Awareness &amp; Training</li></ul></li></ul><figure id="52ae9611-a80e-4fed-ac29-ddec5f1f9fba" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20379.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20379.png"/></a></figure><p id="b2313541-b2cf-42ef-bc2b-a1213d357f51" class="">Untitled</p></li></ul><ul id="d0761ccb-76de-4b7b-868c-affad3004aa6" class="bulleted-list"><li style="list-style-type:disc">RDS - example<ul id="31daa153-a46c-47ad-bd23-000e07b438f8" class="bulleted-list"><li style="list-style-type:circle">AWS responsibility:<ul id="e19b859d-88f9-4923-b060-6b17b32ebe4a" class="bulleted-list"><li style="list-style-type:square">Manage the underlying EC2 instance, disable SSH access</li></ul><ul id="23af3844-fff7-4921-9767-7ad3219c9e28" class="bulleted-list"><li style="list-style-type:square">Automated DB patching</li></ul><ul id="f6d41ac5-ff37-4c4d-9ac9-c45e4d656c15" class="bulleted-list"><li style="list-style-type:square">Automated OS patching</li></ul><ul id="03008fd7-6b75-489f-81ff-d1f959258ff3" class="bulleted-list"><li style="list-style-type:square">Audit the underlying instance and disks &amp; guarantee it functions</li></ul></li></ul><ul id="84e8ea42-627e-4b58-95c4-524a470e8169" class="bulleted-list"><li style="list-style-type:circle">Your responsibility:<ul id="b0727b40-67bc-4195-81ff-ba2b9205d8b1" class="bulleted-list"><li style="list-style-type:square">Check the ports / IP / security group inbound rules in DB’s SG</li></ul><ul id="35860b29-52da-455e-9bd0-a05ccf74ce2d" class="bulleted-list"><li style="list-style-type:square">In-database user creation and permissions</li></ul><ul id="2637f4f8-4ba8-49e1-9b6a-5acb04f33415" class="bulleted-list"><li style="list-style-type:square">Creating a database with or without public access</li></ul><ul id="31b52627-303b-4f42-9511-5f817d7c2e42" class="bulleted-list"><li style="list-style-type:square">Ensure parameter groups or DB is configured to only allow SSL connections</li></ul><ul id="5cae0044-d8cf-4760-afa4-43fbc56f1988" class="bulleted-list"><li style="list-style-type:square">Database encryption setting</li></ul></li></ul></li></ul><ul id="683b50bd-6197-442b-8b64-c9d928517125" class="bulleted-list"><li style="list-style-type:disc">S3 - example<ul id="0fef1eca-758f-4a48-906f-bf5379e3c4de" class="bulleted-list"><li style="list-style-type:circle">AWS responsibility:<ul id="2da28694-7fe6-4a46-98c0-5e5060d3d5ae" class="bulleted-list"><li style="list-style-type:square">Guarantee you get unlimited storage</li></ul><ul id="0bbc07bc-f5d2-49cd-9388-f4e56e1f9164" class="bulleted-list"><li style="list-style-type:square">Guarantee you get encryption if you enable it</li></ul><ul id="ebd6794d-913c-402c-ad68-d08fe0bfa7ad" class="bulleted-list"><li style="list-style-type:square">Ensure separation of the data between different customers</li></ul><ul id="66b867b9-aff7-4da1-883a-155fa4e3511f" class="bulleted-list"><li style="list-style-type:square">Ensure AWS employees can’t access your data</li></ul></li></ul><ul id="04fb7b2f-9a81-4cb9-bcf8-003bbc849d58" class="bulleted-list"><li style="list-style-type:circle">Your responsibility:<ul id="11786bdc-c6c2-4bc5-b30e-55862a433564" class="bulleted-list"><li style="list-style-type:square">Bucket configuration</li></ul><ul id="0232f905-4dae-4b1d-9f24-b09b51869db3" class="bulleted-list"><li style="list-style-type:square">Bucket policy / public setting</li></ul><ul id="83e70fa3-fd47-4c83-87cd-480795ec5c53" class="bulleted-list"><li style="list-style-type:square">IAM user and roles</li></ul><ul id="b8f19b4e-d5b9-41a6-b228-d4d6094523c7" class="bulleted-list"><li style="list-style-type:square">Enabling encryption</li></ul></li></ul></li></ul></details></li></ul></div><h3 id="63fdd81b-e454-442e-9384-1c119843250d" class=""><details open=""><summary>Section 28: Networking - VPC</summary></details></h3><div class="indented"><ul id="c84c3613-c1f2-4e44-ac54-320d8753f7c4" class="toggle"><li><details open=""><summary>Classless Inter-Domain Routing (CIDR)</summary><ul id="5168dd36-7e7a-4438-bee6-644d65a7d213" class="bulleted-list"><li style="list-style-type:disc">It is a method for allocating IP addresses</li></ul><ul id="40e61699-af09-487b-9737-030c7d274791" class="bulleted-list"><li style="list-style-type:disc">CIDR consists of 2 components<ul id="5803465e-b383-4d32-883b-3821a2790694" class="bulleted-list"><li style="list-style-type:circle">Base IP</li></ul><ul id="6ad5c2ac-d8c4-41b3-9fde-dc414ba524d5" class="bulleted-list"><li style="list-style-type:circle">Subnet Mask<ul id="db0934a6-081e-4ed8-b91c-b5c3e3618fa7" class="bulleted-list"><li style="list-style-type:square">Defines how many bits are frozen from the left side</li></ul><ul id="0796b291-b0f4-4798-8b1f-05c070458bec" class="bulleted-list"><li style="list-style-type:square">Can be represented in two ways<ul id="cc9abf6f-943e-4c0b-86d0-db851329f2bd" class="bulleted-list"><li style="list-style-type:disc">/8 = 255.0.0.0</li></ul><ul id="ea3bfd62-4dea-462a-bc6a-80641e9e37f1" class="bulleted-list"><li style="list-style-type:disc">/16 = 255.255.0.0</li></ul><ul id="95c6c280-e264-48ee-9ba6-a8ab9e855e0c" class="bulleted-list"><li style="list-style-type:disc">/24 = 255.255.255.0</li></ul><ul id="3290f10f-3c2c-4798-b7ed-b80bc5519d5b" class="bulleted-list"><li style="list-style-type:disc">/32 = 255.255.255.255</li></ul></li></ul><figure id="085268ee-e1ef-4fad-a2f7-38cfbec89b6c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20380.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20380.png"/></a></figure></li></ul></li></ul><ul id="4619cc56-8157-47bc-92fa-70d5de5df7ea" class="bulleted-list"><li style="list-style-type:disc">0.0.0.0/0 ⇒ all IP space</li></ul><ul id="78e54ad3-6d59-4872-bb51-713636cc5169" class="bulleted-list"><li style="list-style-type:disc">The Internet Assigned Numbers Authority (IANA) established certain blocks of IPv4 addresses for the use of private (LAN) and public (Internet) addresses</li></ul><ul id="a4b541d5-5b6c-4194-b930-f417dfbbb490" class="bulleted-list"><li style="list-style-type:disc">Private IP can only allow certain values:<ul id="b1b1fc29-b1b3-4b6b-a7d1-8695fdb8c932" class="bulleted-list"><li style="list-style-type:circle">10.0.0.0 - 10.255.255.255 (10.0.0.0/8) ⇒ used in big networks (24 bits can change)</li></ul><ul id="5fdcb053-afbd-474a-b522-56e6e252be0e" class="bulleted-list"><li style="list-style-type:circle">172.16.0.0 - 172.31.255.255 (172.16.0.0/12) ⇒ AWS default VPC</li></ul><ul id="aace29b5-3d6c-4870-b101-10e5220055c8" class="bulleted-list"><li style="list-style-type:circle">192.168.0.0 - 192.168.255.255 (192.168.0.0/16) ⇒ home networks</li></ul></li></ul><ul id="55a5a7e7-19f1-4771-b501-33a9d3d03b93" class="bulleted-list"><li style="list-style-type:disc">All the rest of the IP addresses on the Internet are Public</li></ul><ul id="585f1e24-4184-4b5b-ac62-e31639bc6ad4" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.ipaddressguide.com/">https://www.ipaddressguide.com/</a></li></ul></details></li></ul><ul id="2b06a273-e185-4e46-816c-589a51363312" class="toggle"><li><details open=""><summary>VPC (Virtual Private Cloud)</summary><ul id="53377abb-5b51-4885-b852-91e3b9a38bba" class="toggle"><li><details open=""><summary>Theory</summary><ul id="7d66d6fe-bb45-452d-a037-604627dc8a1d" class="bulleted-list"><li style="list-style-type:disc">You can have multiple VPCs in an AWS region (max. 5 per region - soft limit, can be increased)</li></ul><ul id="acdc6aa7-9868-41d4-85dc-5b60bcac844b" class="bulleted-list"><li style="list-style-type:disc">Max. CIDR per VPC is 5</li></ul><ul id="5c106dd9-1933-4d0c-8a07-c2c32534ccf8" class="bulleted-list"><li style="list-style-type:disc">For each CIDR:<ul id="563f5760-ed6a-4a67-aaaf-a4f37f919ff1" class="bulleted-list"><li style="list-style-type:circle">Min. size is /28 (16 IP addresses)</li></ul><ul id="be3c01ba-515e-4d02-bd3d-11045ef76cbc" class="bulleted-list"><li style="list-style-type:circle">Max. size is /16 (65536 IP addresses)</li></ul></li></ul><ul id="358b6088-b56a-4e4d-9af5-799f498fab4d" class="bulleted-list"><li style="list-style-type:disc">Because VPC is private, only the Private IPv4 ranges are allowed</li></ul><ul id="f6bf345b-65c4-4d30-84b5-5d8e88c7cbc4" class="bulleted-list"><li style="list-style-type:disc">When we create a VPC, we need to specify an IPv4 CIDR. Once created, a default route table and network ACL will be attached to the subnets of this VPC.</li></ul><ul id="05b0e479-c59e-4ffc-9dc8-99fc953046df" class="bulleted-list"><li style="list-style-type:disc">A VPC consists of subnets (sub-range of IP addresses) where each subnet is bound to a specific AZ</li></ul><ul id="6e39875c-6e4f-4599-977a-058b3acbdfb9" class="bulleted-list"><li style="list-style-type:disc">All new AWS accounts have a default VPC</li></ul><ul id="434c1263-18e7-44d7-98cc-09c291a87c27" class="bulleted-list"><li style="list-style-type:disc">New EC2 instances are launched into the default VPC if no subnet is specified</li></ul><ul id="eb719e71-0b4b-457f-bba1-e0178379c17d" class="bulleted-list"><li style="list-style-type:disc">Default VPC has Internet connectivity and all EC2 instances inside it have public IPv4 addresses and public and a private IPv4 DNS names</li></ul></details></li></ul><ul id="6b6a1bf2-7799-47a4-9b49-3ee79c4bc6f4" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="f402dd59-300f-49fe-b2a0-f2a4872b18c4" class="bulleted-list"><li style="list-style-type:disc">Create a VPC<p id="3f6fbd4d-a733-4c93-a769-ca673acb4ef1" class="">VPC → Create</p><p id="fb0d9a1f-080b-49c7-a583-b18b4a35fd72" class="">CIDR: 10.0.0.0/16 (max size)</p><p id="f2f00e60-3f41-4526-84ab-9f6120b5fb2f" class="">We can edit the CIDR and add up to 5 CIDRs in the VPC.</p><figure id="eff306f8-e177-4974-9c0f-ea0af4e289ae" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20381.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20381.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="d2a33298-7985-41d6-a111-27b8f40284ff" class="toggle"><li><details open=""><summary>Subnets</summary><ul id="d747540b-3302-472a-aa24-4d031029e477" class="toggle"><li><details open=""><summary>Theory</summary><ul id="ede4cc58-f720-408a-840d-686061ec92ec" class="bulleted-list"><li style="list-style-type:disc">A sub range of IPv4 addresses within your VPC</li></ul><ul id="f444322c-d222-464e-a489-de3c77577979" class="bulleted-list"><li style="list-style-type:disc">Each subnet is bound to a specific AZ</li></ul><ul id="21ab0b5c-c24c-4b44-854d-ec8fc4ffcd97" class="bulleted-list"><li style="list-style-type:disc">Subnets in a VPC cannot have overlapping CIDRs</li></ul><ul id="6bc01c6f-453b-450b-9e1e-defc0c578643" class="bulleted-list"><li style="list-style-type:disc">AWS reserves 5 IP addresses (first 4 &amp; last 1) in each subnet. These 5 IP addresses are not available for use. Example: if CIDR block 10.0.0.0/24, then reserved IP addresses are:<ul id="8b40bd62-6766-4c76-b2e4-19e0e79f844e" class="bulleted-list"><li style="list-style-type:circle">10.0.0.0 ⇒ Network Address</li></ul><ul id="660ec9c0-72aa-4b63-8e15-77d291032e6c" class="bulleted-list"><li style="list-style-type:circle">10.0.0.1 ⇒ Reserved by AWS for the VPC router</li></ul><ul id="33b9f695-b897-4a73-9803-a7f31dd516b5" class="bulleted-list"><li style="list-style-type:circle">10.0.0.2 ⇒ Reserved by AWS for mapping to Amazon-provided DNS</li></ul><ul id="ea95073e-a00c-4234-8b0b-b0e9f8d3278a" class="bulleted-list"><li style="list-style-type:circle">10.0.0.3 ⇒ Reserved by AWS for future use</li></ul><ul id="66e67429-03c7-4640-878e-a0c8d3faedaa" class="bulleted-list"><li style="list-style-type:circle">10.0.0.255 ⇒ Network Broadcast Address. AWS does not support broadcast in a VPC, therefore the address is reserved</li></ul></li></ul><ul id="bfb63362-207e-4815-a26c-bd72485a6c56" class="bulleted-list"><li style="list-style-type:disc">Exam Tip: If you need 29 IP addresses for EC2 instances: You can’t choose a subnet of size /27 (32 IP addresses, 32 - 5 = 27 &lt; 29) You need to choose a subnet of size /26 (64 IP addresses, 64 - 5 = 59 &gt; 29)</li></ul></details></li></ul><ul id="f80b9c5c-ca2d-4f8f-afe2-f9eeccba3a24" class="toggle"><li><details open=""><summary>Hands on</summary><p id="a1b9fd81-973f-4c87-ae62-5ff7ba82ae49" class="">Inside the custom VPC, create 4 subnets</p><figure id="66e83344-97df-4101-9666-ddca1b88d42d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20382.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20382.png"/></a></figure></details></li></ul></details></li></ul><ul id="2e8a920d-6580-4c47-94ad-88a995b644bc" class="toggle"><li><details open=""><summary>Internet Gateway (IGW)</summary><ul id="189a4381-8cea-4fa5-8fc0-2c9c31a36f1b" class="toggle"><li><details open=""><summary>Theory</summary><ul id="4ff60dc2-3a6d-4586-93c8-5a658d3491f6" class="bulleted-list"><li style="list-style-type:disc">Allows resources in a VPC connect to the Internet</li></ul><ul id="ced5c5d9-521e-4f8a-94f9-daa3debf1253" class="bulleted-list"><li style="list-style-type:disc">Should be used to connect public resources to the internet (use NAT gateway for private resources)</li></ul><ul id="f988a329-06fa-4715-a4c3-dedd0d5fea49" class="bulleted-list"><li style="list-style-type:disc">It scales horizontally and is highly available and redundant</li></ul><ul id="64d88556-4b4c-40c8-8a37-eb015b93a4bb" class="bulleted-list"><li style="list-style-type:disc">Must be created separately from a VPC</li></ul><ul id="d6db0d9a-77b9-4d63-9adf-a7733620ba33" class="bulleted-list"><li style="list-style-type:disc">One VPC can only be attached to one IGW and vice versa</li></ul><ul id="93507e63-d5e9-4e5b-a28c-68cdb08631d2" class="bulleted-list"><li style="list-style-type:disc">Internet Gateways on their own do not allow Internet access, route table of the public subnets must also be edited to allow requests destined outside the VPC to be routed to the IGW.</li></ul><figure id="c5cf0fec-95c5-49aa-b4ce-4f668bc54c2f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20383.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20383.png"/></a></figure></details></li></ul><ul id="5d3b6f7a-eb6b-4843-906f-a1c0d2ef09f5" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="49679bd9-01f0-4d96-9174-2e54be0f1656" class="bulleted-list"><li style="list-style-type:disc">Create an EC2 instance in a public subnet<p id="630180c3-9f1c-42eb-bc45-a668c20fefeb" class="">Now, if we try to connect to this instance, it will not work as the internet gateway is not configured.</p><figure id="2cba99f3-f2db-47e9-8f12-029a540dd510" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20384.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20384.png"/></a></figure><p id="9e443c56-0377-4f67-bbb9-afcd4a50617a" class="">Untitled</p></li></ul><ul id="67f34916-ffb5-4c21-a7f5-fc9678da3b65" class="bulleted-list"><li style="list-style-type:disc">Create Internet Gateway &amp; attach it to VPC<p id="56671b33-269b-4882-a181-78679eac9b89" class="">VPC → Internet Gateways → Create</p></li></ul><ul id="ea752283-52f3-4132-8d2b-96440b44fe8b" class="bulleted-list"><li style="list-style-type:disc">Create Public and Private route tables and assign them to respective subnets<p id="84c0539a-948b-499f-991b-1b2ba5c1e672" class="">Create PublicRouteTable and associate it to PublicSubnetA &amp; PublicSubnetB. Do the same with PrivateRouteTable.</p><figure id="6119be40-d1a0-4323-970f-51fde8ca3234" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20385.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20385.png"/></a></figure><p id="9d89ce06-3a6e-4fd5-9554-fcf2e4d4a9bb" class="">Untitled</p></li></ul><ul id="e4004b90-2edb-4518-93bb-7703fce08f6a" class="bulleted-list"><li style="list-style-type:disc">Add route to Public Route Table to send traffic to IGW<p id="a596f438-1e72-4a0f-9618-d537e1da9159" class="">The below routes say:</p><ul id="f4b08fc4-cb46-4ff3-ae09-df0da7c51128" class="bulleted-list"><li style="list-style-type:circle">If the traffic is destined to VPC, route it locally (to VPC)</li></ul><ul id="802e2447-8d49-4010-81b3-4ee126e76d11" class="bulleted-list"><li style="list-style-type:circle">If the destination IP doesn’t match the above criteria, send it to the internet gateway</li></ul><figure id="a027ae63-4ce1-439c-92d0-ee6174bdaee9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20386.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20386.png"/></a></figure><p id="988d01bf-ff40-4fc0-9b8c-cf8e33a90f28" class="">Untitled</p></li></ul><p id="7fce7981-2210-427c-b477-d838a5a5afa9" class="">Now, we can connect to our EC2 instance in the public subnets from the public internet</p></details></li></ul></details></li></ul><ul id="c1164aee-7fcf-436a-b223-aac41d7928e5" class="toggle"><li><details open=""><summary>Bastion Hosts</summary><ul id="cf8a05e2-7f2d-4ab0-9a01-597b570fbe05" class="toggle"><li><details open=""><summary>Theory</summary><ul id="bd298836-d34d-432a-b462-164fb620885d" class="bulleted-list"><li style="list-style-type:disc">It is an EC2 instance running in the public subnet of our VPC to allow users to SSH into the instances in the private subnet.</li></ul><ul id="7cfbae99-4d99-4ac1-a1d6-6bb7d54eca8a" class="bulleted-list"><li style="list-style-type:disc">Users from the internet SSH into the Bastion Host which will then SSH into the EC2 instance of the private subnet.</li></ul><ul id="40843320-f45d-4d5a-a2ec-ff8d0c210732" class="bulleted-list"><li style="list-style-type:disc">Security groups of the private instances should only allow traffic from the bastion host.</li></ul><ul id="581b377a-cfbb-4c07-9e6e-db201bc6be68" class="bulleted-list"><li style="list-style-type:disc">Exam Tip: Make sure the bastion host only has port 22 traffic from the IP address you need (tightened security).</li></ul><figure id="18516fe0-5e27-4b1f-9145-fb53d1266eb3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20387.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20387.png"/></a></figure></details></li></ul><ul id="79ced3ce-fd1c-42a3-94f4-0657595cba5e" class="toggle"><li><details open=""><summary>Hands on</summary><p id="ca8db0b5-0bf8-4044-8f35-9add6257f819" class="">Create an EC2 instance in a private subnet with a security group to only allow SSH from the Bastion Host</p><p id="dae2846f-42d5-4a31-9257-32779d3818c0" class="">SSH into Bastion Host and then SSH into the private instance.</p></details></li></ul></details></li></ul><ul id="40c68d5d-db00-457c-9415-7a0371acaaa9" class="toggle"><li><details open=""><summary>NAT Instances (outdated)</summary><ul id="8f3c42f2-40b7-4b28-9d07-50df67be249f" class="toggle"><li><details open=""><summary>Theory</summary><ul id="38ea3e24-9c34-4a9f-8dbf-ab524969957d" class="bulleted-list"><li style="list-style-type:disc">NAT (Network Address Translation)</li></ul><ul id="83118247-17a3-4f8d-98ab-950fd51483dc" class="bulleted-list"><li style="list-style-type:disc">Allows EC2 instances in private subnets to connect to the Internet without being connected from the internet</li></ul><ul id="a7e32926-df8c-4eb6-92ea-f41693ce10ed" class="bulleted-list"><li style="list-style-type:disc">It is an instance launched in the public subnet which routes the packets to-from the public internet to the private instances.</li></ul><ul id="43e94155-ef7d-42b8-b12d-80531c3a3fe5" class="bulleted-list"><li style="list-style-type:disc">Must disable EC2 setting: source / destination IP check on the NAT instance as the IPs can change.</li></ul><ul id="fc269006-58a3-4498-aa5a-5d07ad78e271" class="bulleted-list"><li style="list-style-type:disc">NAT instances must have Elastic IP attached to it</li></ul><ul id="557b7e4e-c9bd-445d-8430-92731a2ea360" class="bulleted-list"><li style="list-style-type:disc">Route Tables must be configured to route traffic from private subnets to the NAT instance (its elastic IP)</li></ul><ul id="71ad8e89-ccc0-46e9-a66d-04062a2ef472" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, the private instance wants to hit a public server.<figure id="99d02095-81db-4a5b-81d0-a71d6cfea841" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20388.png"><img style="width:384px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20388.png"/></a></figure></li></ul><ul id="db51c57e-2b54-4bb6-9adb-c08fd640542a" class="bulleted-list"><li style="list-style-type:disc">Pre-configured Amazon Linux AMI is available for NAT instances (deprecated on December 31, 2020)</li></ul><ul id="daf139eb-a253-483d-a8a8-9b8727e2c9e4" class="bulleted-list"><li style="list-style-type:disc">Not highly available or resilient out of the box. You need to create an ASG in multi-AZ + resilient user-data script</li></ul><ul id="2d6952ca-2578-4bdd-abc5-e1e9a00ddb47" class="bulleted-list"><li style="list-style-type:disc">Internet traffic bandwidth depends on EC2 instance type</li></ul><ul id="8da4e54e-93bb-4f59-bb43-d69d8d27e690" class="bulleted-list"><li style="list-style-type:disc">You must manage Security Groups &amp; rules:<ul id="224f3623-dc4c-4204-95de-4abbe9673697" class="bulleted-list"><li style="list-style-type:circle">Inbound:<ul id="c442dcf1-2358-443c-b8d8-27369e35b830" class="bulleted-list"><li style="list-style-type:square">Allow HTTP / HTTPS traffic coming from Private Subnets</li></ul><ul id="c3209461-6fdb-4177-ba29-1de74c52b92c" class="bulleted-list"><li style="list-style-type:square">Allow SSH from your home network (access is provided through Internet Gateway)</li></ul></li></ul><ul id="2376cdae-08a5-4c09-8e33-634865c6cb5b" class="bulleted-list"><li style="list-style-type:circle">Outbound:<ul id="2ad8c148-8429-48aa-97e3-d9b7b425bd15" class="bulleted-list"><li style="list-style-type:square">Allow HTTP / HTTPS traffic to the Internet</li></ul></li></ul></li></ul></details></li></ul><ul id="582ead41-6eeb-49ab-84a6-99bf4d5a98fd" class="toggle"><li><details open=""><summary>Architecture</summary><figure id="84f0c658-9221-4f3b-b1ae-c58e5287375e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20389.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20389.png"/></a></figure><p id="d06c7876-c182-4008-9dff-738df600786e" class="">Untitled</p></details></li></ul><ul id="368fa75c-6d57-4282-86e6-9f25745a60d8" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="145971b6-674b-42ba-8df7-7b50dee14d59" class="bulleted-list"><li style="list-style-type:disc">Create a NAT instance using a pre-configured AMI<p id="58b25e7f-ed60-4e77-a34f-abfc5f44f341" class="">Security group rules for NAT instance: allow incoming HTTP, HTTPS and ICMP-IPv4 traffic from our VPC</p><figure id="342e5b21-fb5d-42f9-8ab8-ca0933a18c35" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20390.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20390.png"/></a></figure></li></ul><ul id="a1ee4171-aa20-48d2-837b-4aa4bbf0552e" class="bulleted-list"><li style="list-style-type:disc">Disable source/destination check on the NAT instance</li></ul><ul id="2ff9fa2f-36b7-4b98-84ee-5a337756c8b6" class="bulleted-list"><li style="list-style-type:disc">Edit PrivateRouteTable to send all requests destined to public internet to the NAT instance<figure id="3c893f29-b672-4cb1-bbff-8adf2b3eee71" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20391.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20391.png"/></a></figure><p id="7a50d526-7491-4f82-ad5e-ac5806101ed2" class="">Untitled</p></li></ul><p id="b7e95595-db07-4656-833c-1919b5b352ae" class="">Now if we <code>ping google.com</code> from the private instance, we will get the result back.</p></details></li></ul></details></li></ul><ul id="1d8ca964-e7a7-43aa-878d-4bf6bd31eaec" class="toggle"><li><details open=""><summary>NAT Gateway</summary><ul id="e950b30d-2d60-4a4a-9776-86255301a30c" class="toggle"><li><details open=""><summary>Intro</summary><ul id="b04b7e0a-56eb-48f2-93ce-37e6b64cf754" class="bulleted-list"><li style="list-style-type:disc">Used to allow instances in private subnet to connect to internet but not be accessed over the internet.</li></ul><ul id="b417d152-a139-4928-b05d-56c322e6dddc" class="bulleted-list"><li style="list-style-type:disc">AWS-managed NAT, higher bandwidth, high availability, no administration</li></ul><ul id="d585b255-9c45-4a7b-adac-3a28b21c0a03" class="bulleted-list"><li style="list-style-type:disc">Pay per hour for usage and bandwidth</li></ul><ul id="6e3a5ef7-6c58-49e3-8647-e434ffecb56b" class="bulleted-list"><li style="list-style-type:disc">NATGW is created in a specific Availability Zone</li></ul><ul id="462214eb-b4aa-426c-82f2-a2f3ae3e78f1" class="bulleted-list"><li style="list-style-type:disc">Just like NAT instances, NAT gateway uses an Elastic IP</li></ul><ul id="77cedac8-2d04-4f2b-a950-6db9c2af283a" class="bulleted-list"><li style="list-style-type:disc">Can’t be used by EC2 instances in the same subnet (only from other subnets)</li></ul><ul id="e7100252-ad8b-42a7-a5da-827a44d55a68" class="bulleted-list"><li style="list-style-type:disc">Routing of requests: Private Subnet ⇒ NATGW ⇒ IGW</li></ul><ul id="58642c57-de4d-4967-b076-f07de08f42d8" class="bulleted-list"><li style="list-style-type:disc">5 Gbps of bandwidth with automatic scaling up to 45 Gbps</li></ul><ul id="0d3e196a-ce5c-4582-9352-23da8c6c2e6b" class="bulleted-list"><li style="list-style-type:disc">No Security Groups required</li></ul><ul id="145c6ef6-0b16-433a-b806-7a053d82b975" class="bulleted-list"><li style="list-style-type:disc">Route table of the private subnets need to be updated to route public requests to NAT gateway<figure id="b5ef1d98-7ee6-4a6f-9441-dcf48d2d4655" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20392.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20392.png"/></a></figure></li></ul></details></li></ul><ul id="654cb12e-89e9-45f3-ad43-4ab2a0a1dfcb" class="toggle"><li><details open=""><summary>High availability</summary><ul id="e4716b1e-47b8-4f67-80ce-753783c71782" class="bulleted-list"><li style="list-style-type:disc">NAT Gateway is resilient within a single Availability Zone</li></ul><ul id="78601b9b-e6fa-496c-85d0-31d6bdece2da" class="bulleted-list"><li style="list-style-type:disc">Must create multiple NAT Gateways in multiple AZs for fault-tolerance</li></ul><ul id="3b0a698c-6a4d-4215-a67d-0d2f9aeb12d7" class="bulleted-list"><li style="list-style-type:disc">There is no cross-AZ failover needed because if an AZ goes down, all of the instances in that AZ are also down. So, they don’t need NAT.</li></ul><figure id="4c60fa4d-c6ca-4d7c-9482-e6c1897c61fa" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20393.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20393.png"/></a></figure></details></li></ul><ul id="908bb31b-c8d2-4df4-ac91-9ff3c3f06fda" class="toggle"><li><details open=""><summary>NAT Gateway vs NAT Instance</summary><figure id="182a9ee1-e6e0-443f-bbc7-13bfd692e4af" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20394.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20394.png"/></a></figure></details></li></ul><ul id="51dd5f59-2766-48b1-955b-0a27a567105d" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="211a848b-bf2f-44f8-869c-07402d72e279" class="bulleted-list"><li style="list-style-type:disc">Create a NAT Gateway<p id="4321f580-3a48-4f80-89a3-5ef234d462d6" class="">VPC → NAT Gateways → Create</p><p id="6fc864c8-9c73-4b43-a7bd-044fb0a1eb14" class="">Subnet: any public subnet</p><p id="43f87d57-25bf-44a4-a1d5-03383e88852d" class="">Connectivity type: Public</p><p id="1b3a713e-ed68-4989-9762-d766e4aff922" class="">Need to allocate an elastic IP</p></li></ul><ul id="568436e0-4764-4f7e-9fd2-b01739125197" class="bulleted-list"><li style="list-style-type:disc">Edit PrivateRouteTable to send public requests to NAT Gateway <figure id="71db00e2-c952-4222-92a5-9ef418c22724" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20395.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20395.png"/></a></figure><p id="8701c0d6-204d-4173-a8bd-54cfe06d6d26" class="">Untitled</p></li></ul><p id="9b309098-20ff-4061-91c3-c32881652e1a" class="">Now, we can hit public endpoints from the instances in our private subnets.</p></details></li></ul></details></li></ul><ul id="fa4000c6-0115-441e-84f3-2f987395b2c9" class="toggle"><li><details open=""><summary>Network Access Control List (NACL)</summary><ul id="742293e4-66b2-4c55-839b-ff583af3d700" class="toggle"><li><details open=""><summary>Intro</summary><ul id="dc5d709f-8d1c-43c4-a03f-2cb9f227b6b9" class="bulleted-list"><li style="list-style-type:disc">NACL are like a firewall which control traffic from and to subnets</li></ul><ul id="b672f367-c99f-4020-862e-38adf03c2d57" class="bulleted-list"><li style="list-style-type:disc">One NACL per subnet but a single NACL can be attached to multiple subnets</li></ul><ul id="d5ef04de-e7d9-4cef-b5cd-b5eb85aac104" class="bulleted-list"><li style="list-style-type:disc">New subnets are assigned the Default NACL</li></ul><ul id="4a429fd8-fc9f-4804-af8a-e82c00423415" class="bulleted-list"><li style="list-style-type:disc">You define NACL Rules:<ul id="80086cbe-a86e-4c3b-9117-80731bb8f532" class="bulleted-list"><li style="list-style-type:circle">Rules have a number (1-32766), lower number has higher precedence</li></ul><ul id="99a1263e-26ff-484d-8bb1-6714c34cf7c6" class="bulleted-list"><li style="list-style-type:circle">First rule match will drive the decision</li></ul><ul id="6aa19dd2-8c17-4946-b461-2598fb0b0345" class="bulleted-list"><li style="list-style-type:circle">Example: if you define #100 ALLOW 10.0.0.10/32 and #200 DENY 10.0.0.10/32, the IP address will be allowed because 100 has a higher precedence over 200</li></ul><ul id="fa315b22-f8ba-4e32-9c8a-fb0d16d13c45" class="bulleted-list"><li style="list-style-type:circle">The last rule is an asterisk (*) and denies a request in case of no rule match</li></ul><ul id="a07fd477-e10a-48c1-a4e1-8b2c082904a2" class="bulleted-list"><li style="list-style-type:circle">AWS recommends adding rules by increment of 100 so that you can add rules in between if needed</li></ul></li></ul><ul id="f6817a26-c7f2-44c2-97c4-ebf194c85bca" class="bulleted-list"><li style="list-style-type:disc">Newly created NACLs will deny everything</li></ul><ul id="62a90284-ec90-4ec3-bc12-3685e41b22c2" class="bulleted-list"><li style="list-style-type:disc">NACL are a great way of blocking a specific IP address at the subnet level</li></ul></details></li></ul><ul id="15b9372e-0616-4c9c-a30c-0287d3ce1a7f" class="toggle"><li><details open=""><summary>Default NACL</summary><ul id="f8240f93-4909-405d-803a-e95bc572abe4" class="bulleted-list"><li style="list-style-type:disc">Allows everything inbound/outbound</li></ul><ul id="eb03cd64-d439-448d-b497-848daca293a2" class="bulleted-list"><li style="list-style-type:disc">Do NOT modify the Default NACL, instead create custom NACLs</li></ul><ul id="e8752142-98e0-4073-845e-2533740074f0" class="bulleted-list"><li style="list-style-type:disc">If this NACL is associated with any subnet, it will allow all traffic in and out of the subnet</li></ul><figure id="f507fe9a-f7c4-4a78-b36b-b98fe62ef154" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20396.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20396.png"/></a></figure></details></li></ul><ul id="36b19e80-386b-443e-a9dd-bc2b8394e95b" class="toggle"><li><details open=""><summary>NACL &amp; Security Groups</summary><ul id="ccfee693-25a5-4865-9cfb-5ebd4dbab16b" class="bulleted-list"><li style="list-style-type:disc">NACL evaluates the incoming and outgoing requests at the subnet level.</li></ul><ul id="648bb83d-d2a5-4554-9249-12dca2621891" class="bulleted-list"><li style="list-style-type:disc">NACL is stateless whereas Security Groups are stateful</li></ul><ul id="318d5c44-6c5a-4997-948d-989a1c270e0c" class="bulleted-list"><li style="list-style-type:disc">Incoming requests: Evaluated by NACL before entering the subnet → Evaluated by SG → Response passes through the SG without check (stateful) → Response evaluated at NACL (stateless)</li></ul><ul id="8af080f1-8852-4418-bbc3-7122cab8d1e3" class="bulleted-list"><li style="list-style-type:disc">The above point can be verified by running a HTTP server on a public instance in the VPC and blocking outbound traffic on the security group. The response will still travel out from the security group (stateful). On the other hand, adding a higher precedence rule in the NACL to block the outbound traffic will not allow the response from the server to reach back to client.</li></ul><figure id="7be60c00-e856-4db1-b8d1-b7dfed0aa6c0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20397.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20397.png"/></a></figure></details></li></ul><ul id="02b74a0c-f203-469b-b465-81a0a1cebf49" class="toggle"><li><details open=""><summary>NACL with Ephemeral Ports</summary><ul id="2cd49f4e-70fe-4082-acb7-082364a3bd58" class="toggle"><li><details open=""><summary>Ephemeral Ports </summary><p id="be66534e-05e1-49ea-bcff-14f1936337cd" class="">When a client sends an HTTP request to a server, it does so on a fixed IP and port of the server. In the request, the client also sends a temporary port for the server to respond back. The server when sending the response uses this port which is only lived for the duration of this HTTP connection.</p><figure id="83a96d9e-d6f9-4d66-a491-6b7955dd20ae" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20398.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20398.png"/></a></figure><figure id="a0a30265-127e-4414-a1cd-cfc0ce510bac" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(617).png"><img style="width:1665px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(617).png"/></a></figure></details></li></ul><p id="afe8f1de-4ab0-4dce-ba95-277bdb6203d4" class="">In the example below, the client EC2 instance needs to connect to DB instance.</p><p id="4647c8f5-9541-44a7-911c-76ac82f8494b" class="">Since the ephemeral port can be randomly assigned from a range of ports, the Web Subnets’s NACL must allow inbound traffic from that range of ports and similarly DB Subnet’s NACL must allow outbound traffic on the same range of ports.</p><figure id="462f5675-32e2-4249-a387-c7cf1ef71ffa" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20399.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20399.png"/></a></figure><p id="57d3d3b1-3fae-44da-ac16-9a53bf2d7137" class="">Multiple subnets ⇒ configure NACL for cross subnet connections too.</p><figure id="f6fa58ef-690f-49ad-8160-4185d7beecef" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20400.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20400.png"/></a></figure></details></li></ul><ul id="fc54f321-2be5-4497-a9ed-ba98ae2e984f" class="toggle"><li><details open=""><summary>NACL vs Security Groups</summary><figure id="eccd4622-22c1-437d-9f3f-d5911485a9c5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20401.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20401.png"/></a></figure></details></li></ul></details></li></ul><ul id="01803b16-29b7-45bf-b409-dca9fdf4a336" class="toggle"><li><details open=""><summary>VPC Peering</summary><ul id="6e339e75-2327-4fd3-9478-6ef4dabd0bc3" class="toggle"><li><details open=""><summary>Theory</summary><ul id="ed379fb3-4d89-4124-858f-efec05d6edf0" class="bulleted-list"><li style="list-style-type:disc">Privately connect two VPCs (could be in different region or account) using AWS’ network to make them behave as if they were in the same network<figure id="acac0ae4-bf82-4c62-9026-016564f05949" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20402.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20402.png"/></a></figure></li></ul><ul id="033ef636-a80c-4e30-af18-eca88e29ff53" class="bulleted-list"><li style="list-style-type:disc">Participating VPCs must not have overlapping CIDRs</li></ul><ul id="a21cfcae-d1ca-4e40-8e18-fa7102f84351" class="bulleted-list"><li style="list-style-type:disc">VPC Peering connection is NOT transitive (A - B, B - C ≠&gt; A - C)<figure id="2c66cd7c-9858-4eb8-b413-e6b850fc4fbe" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20403.png"><img style="width:336px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20403.png"/></a></figure></li></ul><ul id="8774a10d-ef25-4788-8149-09ff38403b2e" class="bulleted-list"><li style="list-style-type:disc">You must update route tables in each VPC’s subnets to ensure EC2 instances across VPCs can communicate with each other</li></ul><ul id="eb50831a-b77f-49a5-b5a8-80890333abda" class="bulleted-list"><li style="list-style-type:disc">You can reference a security group in a peered VPC across account or region. This allows us to use SGs instead of CIDRs when configuring rules.<figure id="d3777731-628b-4452-a746-171bc8acfa9a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20404.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20404.png"/></a></figure></li></ul></details></li></ul><ul id="375ec027-dbf3-4332-8fb9-1e35ba69a7b1" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="ea7b06dc-ca31-49ad-8dc1-6351d1181c95" class="bulleted-list"><li style="list-style-type:disc">Launch an EC2 instance in the Default VPC</li></ul><ul id="26657e85-36b1-4120-a1bb-27df8515d453" class="bulleted-list"><li style="list-style-type:disc">Launch an EC2 instance in the public subnet of custom VPC with a simple HTTP server</li></ul><ul id="fb4705c6-9c41-4775-b465-5e3e9bf8e34d" class="bulleted-list"><li style="list-style-type:disc">Create a peering connection between the default VPC and custom VPC<p id="c44476a8-9069-4779-b1e0-6209d2fbc1d0" class="">VPC → Peering Connection → Create</p><p id="7e0bfdc7-a6fe-4f45-90cd-3505c526f3a5" class="">Accept the peering request</p></li></ul><ul id="a34400dd-8b50-41fc-af37-e28e47d7572a" class="bulleted-list"><li style="list-style-type:disc">Configure the PublicRouteTable for custom VPC<p id="958210a4-7f7e-4fb9-9b54-3bf5fcd82c2d" class="">Route the traffic destined to Default VPC through the peering connection.</p><figure id="59d5e0b4-103b-4306-9e93-56d16240ce3b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20405.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20405.png"/></a></figure><p id="b87ad225-5a82-4088-b888-d6a7f8a37dd1" class="">Untitled</p></li></ul><ul id="06322d94-7271-4416-beb9-0438d27f3adb" class="bulleted-list"><li style="list-style-type:disc">Configure the DefaultRouteTable for default VPC<p id="0a5fb168-e296-4cff-ba3d-45379629e85f" class="">Route the traffic destined to Custom VPC through the peering connection.</p><figure id="aaa182fc-cf1a-4ce0-94ff-cc5c1beb31c0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20406.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20406.png"/></a></figure><p id="6edd0cb1-cddb-4440-b111-38bb1a2eea56" class="">Untitled</p></li></ul><p id="28fec944-3bc5-40b3-8ea9-5dc9a0339307" class="">Now the two VPCs will behave as one but with different CIDRs.</p><p id="efb31402-c6c9-4411-9f4d-f0ddd41aae53" class="">To test, run <code>curl private_ip_of_the_instance_in_custom_vpc</code></p></details></li></ul></details></li></ul><ul id="b9862ddb-0ed4-4bf0-aec3-3155bd6b171a" class="toggle"><li><details open=""><summary>VPC Endpoints (AWS PrivateLink)</summary><ul id="ea1fae98-a42a-4bb6-a530-f6fba813d5e8" class="toggle"><li><details open=""><summary>Intro</summary><ul id="e75f7b27-d35e-4f61-97b3-5e6676d3c72b" class="bulleted-list"><li style="list-style-type:disc">These are private endpoints within your VPC that allow AWS services to privately connect to resources within the VPC without traversing the public internet.</li></ul><ul id="69f0ec43-a9ac-40ef-968a-8018cc784622" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, DynamoDB is connected through the public internet (more cost due to the request being routed through NATGW &amp; IGW) but CloudWatch and S3 are connected within the AWS network.<figure id="95c65b63-5e61-44b5-8b72-c7ad41aa4955" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20407.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20407.png"/></a></figure></li></ul><ul id="610b797a-d38a-4828-8225-b546545ab2b6" class="bulleted-list"><li style="list-style-type:disc">They’re redundant and scale horizontally</li></ul><ul id="e25a50d5-a5db-4a25-8de4-61300ebaa7f3" class="bulleted-list"><li style="list-style-type:disc">They remove the need of IGW, NATGW, etc. to access AWS Services</li></ul><ul id="f31719b4-2766-47e2-8124-8f3d2f67de2a" class="bulleted-list"><li style="list-style-type:disc">In case of issues:<ul id="33073a5e-d2e9-4541-acff-bbf6f4114fb9" class="bulleted-list"><li style="list-style-type:circle">Check DNS Setting Resolution in your VPC</li></ul><ul id="f69fbeab-b408-45e5-833c-7a4f2ce3acca" class="bulleted-list"><li style="list-style-type:circle">Check Route Tables</li></ul><figure id="c178588c-bede-43c1-8f54-c4ff1a579c74" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(630).png"><img style="width:384px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(630).png"/></a></figure></li></ul></details></li></ul><ul id="f926eb9b-339b-43ed-945e-e11cf6ec00b4" class="toggle"><li><details open=""><summary>Types of VPC Endpoints</summary><ul id="423902db-621a-4719-ba86-8d078bfd724f" class="toggle"><li><details open=""><summary>Interface Endpoints</summary><ul id="27f00c4a-3531-44d1-b85c-eeb4dc30682f" class="bulleted-list"><li style="list-style-type:disc">Provisions an ENI (private IP address) as an entry point per subnet</li></ul><ul id="5b475c3f-db87-409b-b22b-4b9dac71327d" class="bulleted-list"><li style="list-style-type:disc">Need to attach a security group to the VPC endpoint to control access to the VPC endpoint</li></ul><ul id="a44883ec-64f4-4af4-afe7-a28a270b387c" class="bulleted-list"><li style="list-style-type:disc">Supports most AWS services</li></ul><ul id="9ab709e6-378b-476d-b952-3e4f8007d218" class="bulleted-list"><li style="list-style-type:disc">$ per hour + $ per GB of data processed</li></ul><figure id="1cbdf8c7-fe43-46b7-8c1f-fee62de152e3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20408.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20408.png"/></a></figure></details></li></ul><ul id="20a3a9ca-2be0-4198-92f3-49412e9e06f1" class="toggle"><li><details open=""><summary>Gateway Endpoints</summary><ul id="591b6da2-d863-4009-ae49-40d9305b643b" class="bulleted-list"><li style="list-style-type:disc">Provisions a gateway and must be used as a target in a route table</li></ul><ul id="979ded35-8ee2-428b-85a9-4749433de812" class="bulleted-list"><li style="list-style-type:disc">Supports only S3 and DynamoDB</li></ul><ul id="5c8dedc9-9929-4185-878e-dad8468a83c4" class="bulleted-list"><li style="list-style-type:disc">free</li></ul><figure id="f0a84992-3344-41d3-8436-215ebdcfb660" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20409.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20409.png"/></a></figure></details></li></ul></details></li></ul><ul id="05df356c-5f44-4450-82e5-408681e4022a" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="47e15101-a26b-4cda-8528-3e9a335ffd41" class="bulleted-list"><li style="list-style-type:disc">Access S3 bucket through the public internet<ul id="c75b3563-7ec2-44dd-99cd-fd4eec3b4ab5" class="bulleted-list"><li style="list-style-type:circle">Attach an IAM role policy to allow the private instance to access S3 buckets within the account<ul id="10cccda2-e6c1-4d86-9fd1-1ba31f0b4055" class="bulleted-list"><li style="list-style-type:square">Select instance → Actions → Instance settings → Modify IAM Role</li></ul></li></ul><ul id="971492c2-1c92-48ed-bbfb-eae397b54156" class="bulleted-list"><li style="list-style-type:circle">SSH into Bastion Host → SSH into private instance → <code>aws s3 ls</code> this command will work</li></ul></li></ul><ul id="3faa1541-bebf-4022-ab5b-d6a3e0413424" class="bulleted-list"><li style="list-style-type:disc">Remove internet access to Private Subnet<p id="711e1660-98bc-4693-b0ca-6726cb19681c" class="">Edit the route table of private subnet → Remove the route which redirects public destined packets to NAT gateway for internet access</p><p id="62c519c7-aaed-45be-9f31-1dc7014d3e71" class="">Now, <code>aws s3 ls</code> command will not work as it routes through the public internet</p></li></ul><ul id="179f7097-bbde-4885-99be-44b7b0528412" class="bulleted-list"><li style="list-style-type:disc">Create a VPC endpoint to allow access to S3<p id="eff3bdad-7007-43a9-be69-ec6892fd63db" class="">VPC → Endpoints → Create</p><p id="52e2df74-df02-4bf8-b661-5fa0386291da" class="">VPC: Custom VPC</p><p id="6efd348b-eefb-4bf6-a0ec-43a743b930a6" class="">Route Table: PrivateRouteTable</p><p id="09728ed5-0b3e-4c8a-a307-c64c30f57795" class="">Now, a new managed route will be added to the private route table to route S3 requests internally through the private network.</p><figure id="b561a3c5-0647-44a8-8d10-2597f35e9285" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20410.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20410.png"/></a></figure><p id="58398852-d577-409d-9110-ef3121dceb76" class="">Untitled</p><p id="0fb40259-7345-4165-ba5a-fe6fc788957a" class="">Now, we can run <code>aws s3 ls --region ap-south-1</code> with the region as in AWS CLI, the default region is us-east-1</p></li></ul></details></li></ul></details></li></ul><ul id="87a61a2d-ab78-4d88-a43c-acb2ec3c62b0" class="toggle"><li><details open=""><summary>VPC Flow Logs</summary><ul id="57cf4f3e-b931-4f63-bfc8-353c60e8a50e" class="toggle"><li><details open=""><summary>Theory</summary><ul id="8bef98a6-1754-4335-bb6f-2e8e2fd8c84a" class="bulleted-list"><li style="list-style-type:disc">Capture information about IP traffic going into your interfaces</li></ul><ul id="a5baa7b9-8c4c-4d26-9dd3-fb0caf1e20c2" class="bulleted-list"><li style="list-style-type:disc">Flow Logs can be at three levels:<ul id="573bfa60-8c48-42ac-bfbe-e6599c0d569e" class="bulleted-list"><li style="list-style-type:circle">VPC Flow Logs</li></ul><ul id="1b0d0dfe-ec82-4eb5-8569-dd22aac167b2" class="bulleted-list"><li style="list-style-type:circle">Subnet Flow Logs</li></ul><ul id="d2d64016-aed5-4368-9738-125d50359841" class="bulleted-list"><li style="list-style-type:circle">Elastic Network Interface (ENI) Flow Logs</li></ul></li></ul><ul id="f0b7f38b-f871-4936-ae99-0175dd72f39c" class="bulleted-list"><li style="list-style-type:disc">Flow logs can be configured to show:<ul id="7e07df2e-0087-4e21-ae5f-18617b7757c7" class="bulleted-list"><li style="list-style-type:circle">Accepted traffic</li></ul><ul id="182dfaad-832c-42b9-a104-f051f9f04527" class="bulleted-list"><li style="list-style-type:circle">Rejected traffic</li></ul><ul id="11c29d37-1383-4c01-a471-5e3aeff85ddb" class="bulleted-list"><li style="list-style-type:circle">All traffic</li></ul></li></ul><ul id="3f08803f-7510-4e69-b61c-9c9ce3d8aec6" class="bulleted-list"><li style="list-style-type:disc">Helps to monitor &amp; troubleshoot connectivity issues</li></ul><ul id="a32454b4-661c-484e-ba7b-9529ec4979be" class="bulleted-list"><li style="list-style-type:disc">Can be used for analytics on usage patterns, or malicious behavior</li></ul><ul id="ac6e3f3a-d4ed-44c2-a603-f3fd8e46a961" class="bulleted-list"><li style="list-style-type:disc">Flow logs data can go to S3 (bulk analytics) or Cloud Watch Logs (near real-time decision making)</li></ul><ul id="9f015d97-0e9c-4167-b4cc-70710629dffe" class="bulleted-list"><li style="list-style-type:disc">Query VPC flow logs using Athena on S3 or Cloud Watch Logs Insights</li></ul><ul id="987d624a-7cc1-48ea-bfb5-caa4f2621d14" class="bulleted-list"><li style="list-style-type:disc">Captures network information from AWS managed interfaces too: ELB, RDS, ElastiCache, Redshift, WorkSpaces, NATGW, Transit Gateway, etc.</li></ul><figure id="e5067258-1b74-4906-931b-4ced73f00fc8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20411.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20411.png"/></a></figure></details></li></ul><ul id="112640ff-6b12-42c2-9bc8-9fe34e20d36d" class="toggle"><li><details open=""><summary>VPC Flow Logs syntax</summary><figure id="ed7597ab-d62a-4197-a250-71c1aff35802" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20412.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20412.png"/></a></figure><ul id="3658aafa-d7f7-42e8-919d-9f09e3b8d140" class="bulleted-list"><li style="list-style-type:disc">srcaddr &amp; dstaddr - help identify problematic IP</li></ul><ul id="23bf108b-4446-4f43-b6f9-d700ff5dbb25" class="bulleted-list"><li style="list-style-type:disc">srcport &amp; dstport - help identity problematic ports</li></ul><ul id="856784ae-9db7-4290-8392-d04a35c80af8" class="bulleted-list"><li style="list-style-type:disc">action - success or failure of the request due to Security Group / NACL</li></ul></details></li></ul><ul id="e24202ff-6454-402c-b3b1-8e4b1d0b2957" class="toggle"><li><details open=""><summary>Troubleshooting NACL and SG issues</summary><p id="5dadeaf7-c852-4067-b015-f467f64303f1" class="">For incoming requests, if the inbound traffic is rejected, it could be due to NACL or SG blocking the request. But, if the outbound traffic is rejected, then it means only NACL is blocking the response as SG is stateless (default allow). Similarly, for outbound requests.</p><figure id="c54bf2a6-5dc2-476e-9a0b-e4e9b7acd1e3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20413.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20413.png"/></a></figure></details></li></ul><ul id="93778aba-2280-4a08-ba6b-5d934d96ddaa" class="toggle"><li><details open=""><summary>VPC Flow Logs - Architectures</summary><figure id="70c740b1-55a8-440f-bfb5-c196eac40d3d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(631).png"><img style="width:1680px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(631).png"/></a></figure></details></li></ul></details></li></ul><ul id="23d0709b-8188-4de0-8064-31e26cd5ce41" class="toggle"><li><details open=""><summary>Site-to-Site VPN</summary><ul id="b8ae77bd-8111-44ab-a693-3f31fd31d714" class="toggle"><li><details open=""><summary>Intro</summary><ul id="d67f2e77-e787-4a85-92d3-ed04b163d6b0" class="bulleted-list"><li style="list-style-type:disc">Used to connect our VPC to the network of a corporate data center.</li></ul><ul id="caa37af1-75bf-4a83-b1f1-cff30d1d0f86" class="bulleted-list"><li style="list-style-type:disc">Customer gateway on the corporate data center and VPN gateway on the VPC are connected via a VPN connection (encrypted) that goes through the public internet.</li></ul><ul id="824a515c-55d0-49eb-b2c3-7d595bedcd9b" class="bulleted-list"><li style="list-style-type:disc">Virtual Private Gateway (VGW)<ul id="73fea41c-6910-4e74-b138-ae5735cf0a88" class="bulleted-list"><li style="list-style-type:circle">VPN concentrator on the AWS side of the VPN connection</li></ul><ul id="e21c8930-1bd5-4adf-bd9b-9a3d0feacc91" class="bulleted-list"><li style="list-style-type:circle">VGW is created and attached to the VPC from which you want to create the Site-to-Site VPN connection</li></ul><ul id="887fed91-b9a6-46fd-93b8-5688e4da1e8c" class="bulleted-list"><li style="list-style-type:circle">Possibility to customize the ASN (Autonomous System Number)</li></ul></li></ul><ul id="5962e798-494c-4d3c-9b4d-7c3f2845e242" class="bulleted-list"><li style="list-style-type:disc">Customer Gateway (CGW)<ul id="43bdeb4f-a1c5-4f88-8cc7-4f36b749acfd" class="bulleted-list"><li style="list-style-type:circle">Software application or physical device on customer side of the VPN connection</li></ul></li></ul><figure id="ec672285-679e-402e-9048-3f570202a249" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20414.png"><img style="width:672px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20414.png"/></a></figure></details></li></ul><ul id="06f5b383-65da-43bf-ac4b-27f776e1b6b8" class="toggle"><li><details open=""><summary>Connection</summary><ul id="83ee1d2a-4dc8-4bae-87be-6c4443555179" class="bulleted-list"><li style="list-style-type:disc">If the customer gateway device has a public internet-routable IP address, VPN will connect to it.</li></ul><ul id="18bb6026-8d38-4417-88b9-40b2e1029682" class="bulleted-list"><li style="list-style-type:disc">If the customer gateway device is behind a NAT device that’s enabled for NAT traversal (NAT-T), use the public IP address of the NAT device to connect with VPN.</li></ul><ul id="d39ab6bc-265b-4270-8995-686b487e7ec8" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>Important step: enable Route Propagation for the Virtual Private Gateway in the route table that is associated with your subnets</strong></mark></li></ul><ul id="3f5a4912-c6dd-4ec3-ac43-5ccfbb6699c4" class="bulleted-list"><li style="list-style-type:disc">If you need to ping your EC2 instances from on-premises, make sure you add the ICMP protocol on the inbound rules of your security groups<figure id="2737867b-82bf-46af-bafe-d77e5268a906" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20415.png"><img style="width:240px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20415.png"/></a></figure></li></ul></details></li></ul><ul id="11999375-fcaa-4ffa-a43d-13036b698114" class="toggle"><li><details open=""><summary>VPN CloudHub</summary><ul id="a365e925-cd9c-43af-a346-71ac1bfa781f" class="bulleted-list"><li style="list-style-type:disc">Provide secure communication between multiple sites, if you have multiple VPN connections</li></ul><ul id="06238c3b-aebb-4b93-93a2-28043f2baaa3" class="bulleted-list"><li style="list-style-type:disc">Low-cost hub-and-spoke model for primary or secondary network connectivity between different locations (VPN only)</li></ul><ul id="5145a8ad-476c-4b4f-b598-d63cae14dfa2" class="bulleted-list"><li style="list-style-type:disc">It’s a VPN connection so it goes over the public Internet but the connection is encrypted in flight</li></ul><ul id="a1843ac7-db11-47c5-9729-91cb8b1ff8cf" class="bulleted-list"><li style="list-style-type:disc">Every participating network can communicate with one another through the VPN connection</li></ul><ul id="fce8e706-14e2-4b79-ac4e-d35587e5de6c" class="bulleted-list"><li style="list-style-type:disc">To set it up, connect multiple VPN connections on the same VGW, setup dynamic routing and configure route tables<figure id="27667396-a233-4d61-b113-cc39d8bccec2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20416.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20416.png"/></a></figure></li></ul></details></li></ul></details></li></ul><ul id="5238bddf-eba7-4c8b-b1be-3e830de20282" class="toggle"><li><details open=""><summary>Direct Connect (DX)</summary><ul id="d863ba34-8118-4198-8ef3-bf00980a384b" class="toggle"><li><details open=""><summary>Intro</summary><ul id="69e18e75-b6ed-4319-ad88-156a335afbae" class="bulleted-list"><li style="list-style-type:disc">Provides a dedicated private connection from a remote network to your VPC, more stable and secure than Site-to-Site VPN</li></ul><ul id="5cb44cf2-1272-4c4e-b3f6-60cbcbab0c93" class="bulleted-list"><li style="list-style-type:disc">AWS Direct Connect Location is a physical location that needs to be commissioned</li></ul><ul id="6834d04d-35be-4df1-8761-da0ec9f05de7" class="bulleted-list"><li style="list-style-type:disc">Dedicated connection must be setup between your DC and AWS Direct Connect locations</li></ul><ul id="7e317285-976e-43e0-a6e5-fc4421722694" class="bulleted-list"><li style="list-style-type:disc">You need to setup a Virtual Private Gateway on your VPC</li></ul><ul id="7d19f367-4d79-4203-9893-09ae6142a52e" class="bulleted-list"><li style="list-style-type:disc">Access public resources (S3) and private (EC2) on same connection</li></ul><ul id="35f1db50-877d-4a38-89fd-03bd9f5a6238" class="bulleted-list"><li style="list-style-type:disc">Supports both IPv4 and IPv6</li></ul><ul id="f71e6bac-1a7b-40c5-870c-d0fe28b5d27f" class="bulleted-list"><li style="list-style-type:disc">Use Cases:<ul id="3a32a51d-0be4-4cfa-95bd-690e33647926" class="bulleted-list"><li style="list-style-type:circle">Increase bandwidth throughput - working with large data sets - lower cost</li></ul><ul id="a62e2d19-c7e4-41c7-a0e4-17365bccf449" class="bulleted-list"><li style="list-style-type:circle">More consistent network experience - applications using real-time data feeds</li></ul><ul id="a48fd563-368f-4196-9d53-f7e39352738b" class="bulleted-list"><li style="list-style-type:circle">Supports Hybrid Environments (on premises + cloud)</li></ul></li></ul><ul id="9806fca2-fcb8-4e2e-8db7-d24e78eb8e0c" class="bulleted-list"><li style="list-style-type:disc">Lead times are often longer than 1 month to establish a new connection</li></ul><ul id="0c31ce17-fa13-4d9f-b4c1-f45480447662" class="bulleted-list"><li style="list-style-type:disc">Private Virtual Interface (VIF) is used to connect to private instances and similarly for public instances.</li></ul><figure id="612296dd-64cf-44c2-ab04-d6a866172c86" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20417.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20417.png"/></a></figure></details></li></ul><ul id="717861c1-1b91-4187-bc81-09893da6c6e3" class="toggle"><li><details open=""><summary>Direct Connect Gateway</summary><p id="007e212e-045c-4cab-818f-ed97485a527d" class="">Used when you want to setup a Direct Connect to multiple VPCs in many different regions (same account)</p><p id="17cd47b1-2643-4390-a8ff-070ac5432c6b" class="">Using DX, we will create a VIF to the Direct Connect Gateway which will extend the VIF to Virtual Private Gateway (VGW) in the two regions.</p><figure id="b18e34c6-690c-464c-a6ca-af11f52fd8b2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20418.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20418.png"/></a></figure></details></li></ul><ul id="d3e504a8-24cc-4cf9-b121-f3808d573291" class="toggle"><li><details open=""><summary>Connection types</summary><ul id="94e4997c-b20b-40c8-85cf-472c4b4ce002" class="bulleted-list"><li style="list-style-type:disc">Dedicated Connection<ul id="c2b7d1fa-4baa-4561-b186-1f15c57d5acf" class="bulleted-list"><li style="list-style-type:circle">1 Gbps and 10 Gbps capacity</li></ul><ul id="5a6843b0-d11e-4c02-a537-805b5979521c" class="bulleted-list"><li style="list-style-type:circle">Physical ethernet port dedicated to a customer</li></ul><ul id="a23a9e38-0444-42e3-82f5-5b8114bb098d" class="bulleted-list"><li style="list-style-type:circle">Request made to AWS first, then completed by AWS Direct Connect Partners</li></ul></li></ul><ul id="52447fd8-772b-4170-a90c-0baf8c92ec5e" class="bulleted-list"><li style="list-style-type:disc">Hosted Connection<ul id="7b0d19ad-4a64-4459-bb11-cb8f0b7c23f3" class="bulleted-list"><li style="list-style-type:circle">50Mbps, 500 Mbps, to 10 Gbps</li></ul><ul id="ef689201-b59f-4497-9ece-8047853bcf9f" class="bulleted-list"><li style="list-style-type:circle">Connection requests are made via AWS Direct Connect Partners</li></ul><ul id="c105767d-1fbd-48c1-8b07-2172823dd140" class="bulleted-list"><li style="list-style-type:circle">Capacity can be added or removed on demand (more flexible than dedicated connection)</li></ul><ul id="08ca632c-5a8e-4322-93f0-716cb7504544" class="bulleted-list"><li style="list-style-type:circle">1, 2, 5, 10 Gbps available at select AWS Direct Connect Partners</li></ul></li></ul></details></li></ul><ul id="e8f26330-3844-4134-b401-3d2d5f98dcb0" class="toggle"><li><details open=""><summary>Encryption</summary><ul id="30ee2352-33de-4974-b199-48740f7e6714" class="bulleted-list"><li style="list-style-type:disc">Data in transit is not encrypted but is private as the connection is private</li></ul><ul id="fc09e101-7d50-47b2-8efd-d8c18bf40180" class="bulleted-list"><li style="list-style-type:disc">To have encryption in flight, use AWS Direct Connect + VPN which provides an IPsec-encrypted private connection. Good for an extra level of security, but slightly more complex to put in place.</li></ul><ul id="098120d5-703c-4111-a3f8-22ac7f317602" class="bulleted-list"><li style="list-style-type:disc">Data is shared through a VPN between the customer router and AWS Direct Connection Endpoint. So, all the traffic will be encrypted.</li></ul><figure id="d909dd19-e97d-41a4-87fa-e59909efe872" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20419.png"><img style="width:576px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20419.png"/></a></figure></details></li></ul><ul id="e75a8417-2e8c-4338-8816-3fcae467e92e" class="toggle"><li><details open=""><summary>Resiliency</summary><p id="fc7f9357-2bdd-4b54-8776-3e7aebbd0a9a" class="">In the diagram below, each VIF is private.</p><figure id="b5c04199-cd4a-49a4-9de6-a9f1bccc4e7a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20420.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20420.png"/></a></figure></details></li></ul></details></li></ul><ul id="d2093125-ce13-428c-b636-6c41be0a521d" class="toggle"><li><details open=""><summary>Direct Connect + Site to Site VPN</summary><figure id="db99093d-a4ea-475c-9f54-aa4ccbbc2699" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(632).png"><img style="width:1653px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(632).png"/></a></figure></details></li></ul><ul id="f078e459-18b0-4e61-9b4e-1af16d79190a" class="toggle"><li><details open=""><summary>Transit Gateway</summary><ul id="c9a2763d-4824-413b-9f39-360b2a5c898e" class="toggle"><li><details open=""><summary>Intro</summary><ul id="d79ba9ca-55e9-42e3-843e-e18801913681" class="bulleted-list"><li style="list-style-type:disc">Transit Gateway solves the problem of common network topologies getting complicated</li></ul><ul id="ec6a108d-53f4-44ce-9e70-fe8706593d84" class="bulleted-list"><li style="list-style-type:disc">Transitive peering between thousands of VPCs and on-premise data centers, hub-and-spoke (star) connection</li></ul><ul id="881143bd-c2f6-46ee-aa56-4a24492986c6" class="bulleted-list"><li style="list-style-type:disc">Transit Gateway is a regional resource, can work cross-region too</li></ul><ul id="33a5343b-c01e-4994-ba20-baf42ecc5b24" class="bulleted-list"><li style="list-style-type:disc">Can peer Transit Gateways across regions</li></ul><ul id="d17263d5-4101-4820-be2a-d0de875f7f27" class="bulleted-list"><li style="list-style-type:disc">Can share Transit Gateway across accounts using Resource Access Manager (used to connect Direct Connect Gateway to VPCs in multiple accounts)</li></ul><ul id="53b1cfcc-64f5-4f38-9490-c73d590f2291" class="bulleted-list"><li style="list-style-type:disc">Route Tables: limit which VPC can talk with other VPC</li></ul><ul id="243608db-88dd-4c66-91bf-827d982cc3ba" class="bulleted-list"><li style="list-style-type:disc">Works with Direct Connect Gateway, VPN connections and VPCs</li></ul><ul id="6afd6ba3-9800-4791-a154-49a96f41e395" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>Supports IP Multicast (not supported by any other AWS service)</strong></mark><figure id="35a9e7f5-99bc-469d-8970-626239cec488" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20421.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20421.png"/></a></figure></li></ul></details></li></ul><ul id="83e759b3-9d03-477b-95f4-4bf3a44fed21" class="toggle"><li><details open=""><summary>Increasing BW of Side-to-Side VPN connection using ECMP</summary><ul id="18414b69-82e1-4ab3-8242-e74ca2fdfe83" class="bulleted-list"><li style="list-style-type:disc">ECMP (Equal-cost multi-path routing) is a routing strategy to allow to forward a packet over multiple best path</li></ul><ul id="e5628f48-d3cc-4ac7-9107-28e80bb4c15b" class="bulleted-list"><li style="list-style-type:disc">To increase the bandwidth of the connection between Transit Gateway and corporate data center, multiple site-to-site VPN connections can be created each with 2 tunnels for increased bandwidth.<figure id="c64671fb-352f-40e7-b6c1-f6b87c28eef4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20422.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20422.png"/></a></figure></li></ul></details></li></ul><ul id="14f537c9-b539-4bd5-a9f3-0387a776dc47" class="toggle"><li><details open=""><summary>Transit Gateway throughput with ECMP</summary><ul id="5c4542a0-8544-445c-9bd2-8f824dacf7da" class="bulleted-list"><li style="list-style-type:disc">If we connect a VPN to a Virtual Private Gateway (VGW), we only get one connection into a single VPC. The connection has 2 tunnels, out of which only 1 is used ~ 1.25 Gbps.</li></ul><ul id="74448622-e103-4d1e-a0bc-070231ab1663" class="bulleted-list"><li style="list-style-type:disc">If we connect a VPN to a transit gateway, we get one side-to-side VPN into many VPC. Each connection has 2 tunnels, both of which are used ~ 2.5 Gbps. To increase the throughput, increase the number of side-to-side VPN connections through ECMP.</li></ul><ul id="d59a4e8c-730f-4c72-8310-058e76730083" class="bulleted-list"><li style="list-style-type:disc">Pay per GB of data going through the transit gateway (added cost for multiple connections)</li></ul><figure id="7112af6f-f74c-4735-9648-137376c88578" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20423.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20423.png"/></a></figure></details></li></ul><ul id="07237aee-60cc-463c-9fd5-cd09c7882d04" class="toggle"><li><details open=""><summary>Share Direct Connect between multiple AWS accounts</summary><p id="4630c693-a5d3-48c9-944e-060d21084497" class="">Using Transit Gateway, we can share a direct connect connection between multiple accounts and VPCs.</p><figure id="0eb44cba-0ab1-4239-8e77-16be31eca459" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20424.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20424.png"/></a></figure></details></li></ul></details></li></ul><ul id="a41c3aa6-981d-4fa1-a605-32307e9c0184" class="toggle"><li><details open=""><summary>Traffic Mirroring</summary><ul id="e8ac515f-9b6d-4387-98d6-a9b2e915e163" class="bulleted-list"><li style="list-style-type:disc">Allows you to capture and inspect network traffic in your VPC without disturbing the normal flow of traffic.</li></ul><ul id="e13357b5-60b4-45bf-884d-c128481c8010" class="bulleted-list"><li style="list-style-type:disc">Capture the traffic<ul id="302e34a3-b15d-402a-8022-b84ad1fe0d19" class="bulleted-list"><li style="list-style-type:circle">From (Source) ENIs</li></ul><ul id="14457317-88df-4424-a37b-50405d72af49" class="bulleted-list"><li style="list-style-type:circle">To (Targets) an ENI or a Network Load Balancer</li></ul></li></ul><ul id="a6c0573f-3136-409e-9304-aeb6fc80bc4b" class="bulleted-list"><li style="list-style-type:disc">Capture all packets or capture the packets of your interest (optionally, truncate packets).</li></ul><ul id="67ad4cef-a915-4053-99a3-95dfccdd8811" class="bulleted-list"><li style="list-style-type:disc">Source and Target can be in the same VPC or different VPCs (VPC Peering)</li></ul><ul id="e1a24571-bd30-48c9-aad9-2bee7b814a94" class="bulleted-list"><li style="list-style-type:disc">Use cases: content inspection, threat monitoring, troubleshooting, etc.</li></ul><ul id="d1d391ef-d75d-4060-872c-c0dbae3db472" class="bulleted-list"><li style="list-style-type:disc">Inbound and outbound traffic through ENIs (eg. attached to EC2 instances) will be mirrored to the destination (NLB) for inspection without affecting the original traffic.</li></ul><figure id="47358bee-e6b7-4f6a-b6e8-a46b40b25a02" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20425.png"><img style="width:384px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20425.png"/></a></figure></details></li></ul><ul id="f97289ea-e92f-4876-9317-571bb9341a59" class="toggle"><li><details open=""><summary>IPv6 for VPC</summary><ul id="8a09c729-61d4-4976-ba17-a71278f4fdd1" class="bulleted-list"><li style="list-style-type:disc">IPv4 designed to provide 4.3 Billion addresses (they’ll be exhausted soon)</li></ul><ul id="3898bee9-a0c5-4e39-bccd-166e823b690b" class="bulleted-list"><li style="list-style-type:disc">IPV6 is designed to provide 3.4 x 10^38 unique IP addresses</li></ul><ul id="a5605ccc-867e-46d2-8485-33efc8801980" class="bulleted-list"><li style="list-style-type:disc">Every IPv6 address is public and Internet-routable (no private range)</li></ul><ul id="a75cdae3-09c3-4af2-b382-7f0c8b93a502" class="bulleted-list"><li style="list-style-type:disc">Format x.x.x.x.x.x.x.x (x is hexadecimal, range can be from 0000 to ffff)</li></ul><ul id="f371f671-9e26-4d0a-98d7-4e7ddf8b9116" class="bulleted-list"><li style="list-style-type:disc">Examples:<ul id="84ead878-032d-4bab-9ea5-fd83bf74ed24" class="bulleted-list"><li style="list-style-type:circle">2001:db8:3333:4444:5555:6666:7777:8888</li></ul><ul id="05988cbe-cf8d-4cdf-a055-3e2c23f69c65" class="bulleted-list"><li style="list-style-type:circle">2001:db8:3333:4444:cccc:dddd:eeee:ffff</li></ul><ul id="f218dc6f-9201-4247-8d1d-e1da89e894c3" class="bulleted-list"><li style="list-style-type:circle">:: ⇒ all 8 segments are zero</li></ul><ul id="628bdf88-1125-4f3c-af4e-37b9a67141d6" class="bulleted-list"><li style="list-style-type:circle">2001:db8:: ⇒ the last 6 segments are zero</li></ul><ul id="88319cb8-bb44-4b80-bc5f-3713b126ca6b" class="bulleted-list"><li style="list-style-type:circle">::1234:5678 ⇒ the first 6 segments are zero</li></ul><ul id="71707e45-1b47-4205-973a-f07f8f76a020" class="bulleted-list"><li style="list-style-type:circle">2001:db8::1234:5678 ⇒ the middle 4 segments are zero</li></ul></li></ul><ul id="5a4c21e7-b9f4-4ef8-b44f-aedd5c03f500" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>IPv4 cannot be disabled for your VPC and subnets</strong></mark></li></ul><ul id="45727838-3805-4090-be03-acb9c1e70e56" class="bulleted-list"><li style="list-style-type:disc">You can enable IPv6 to operate in dual-stack mode in which your EC2 instances will get at least a private IPv4 and a public IPv6. They can communicate using either IPv4 or IPv6 to the internet through an Internet Gateway.<figure id="249c905f-c73b-4e18-aedc-4fa8b532e0e9" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20426.png"><img style="width:288px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20426.png"/></a></figure></li></ul><ul id="7949536e-3b7b-4d46-bdb7-6887879e7f87" class="bulleted-list"><li style="list-style-type:disc">If you cannot launch an EC2 instance in your subnet, It’s not because it cannot acquire an IPv6 (the space is very large). It’s because there are no available IPv4 in your subnet. Solution: create a new IPv4 CIDR in your subnet.<figure id="1b09486c-8e64-4392-8258-65e68a0e3e75" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(634).png"><img style="width:1765px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(634).png"/></a></figure></li></ul></details></li></ul><ul id="5a80031d-363c-437a-a7b6-8cd26f086419" class="toggle"><li><details open=""><summary>Egress-only Internet Gateway</summary><ul id="3ca74a69-12e2-49be-8160-af2514bd78ac" class="toggle"><li><details open=""><summary>Intro</summary><ul id="58661f05-4403-4b7c-8404-1e65706899a4" class="bulleted-list"><li style="list-style-type:disc">Used for IPv6 only (similar to a NAT Gateway but for IPV6)</li></ul><ul id="3beb2eda-b6ba-4b25-9547-0aeb1ea9e073" class="bulleted-list"><li style="list-style-type:disc">Allows instances in your VPC outbound connections over IPv6 while preventing the internet to initiate an IPv6 connection to your instances</li></ul><ul id="ff9dbda7-a403-4188-959c-75c0d4daebbd" class="bulleted-list"><li style="list-style-type:disc">You must update the Route Tables</li></ul><figure id="b47b1609-2ba9-4d0a-a091-1cd0c151c70f" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20427.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20427.png"/></a></figure></details></li></ul><ul id="d60d74cc-e96f-4bef-a2fe-bf958120812c" class="toggle"><li><details open=""><summary>IPv6 Routing</summary><figure id="39397882-7ed9-4b9f-b7db-1016defe10e5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20428.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20428.png"/></a></figure></details></li></ul></details></li></ul><ul id="71f8f1fe-1dcc-4133-8d26-374d481789fa" class="toggle"><li><details open=""><summary>VPC Summary</summary><ul id="edae7fc6-68b7-462a-acf1-fedf9527afac" class="bulleted-list"><li style="list-style-type:disc">CIDR ⇒ IP Range</li></ul><ul id="de2380ba-edec-4faa-abf7-f35e4c8daf1c" class="bulleted-list"><li style="list-style-type:disc">VPC - Virtual Private Cloud, we define a list of IPv4 &amp; IPv6 CIDR</li></ul><ul id="17cd49e9-1884-4730-bbf2-9fabf3b1f889" class="bulleted-list"><li style="list-style-type:disc">Subnets tied to an AZ, we define a CIDR for each subnet</li></ul><ul id="0d29fc64-e8fe-46f8-a55e-15661f2959b9" class="bulleted-list"><li style="list-style-type:disc">Internet Gateway at the VPC level, provide IPv4 &amp; IPv6 Internet Access</li></ul><ul id="5a72ccac-425f-4792-bd4e-23ee9a983dcb" class="bulleted-list"><li style="list-style-type:disc">Route Tables must be edited to add routes from subnets to the IGW, VPC Peering Connections, VPC Endpoints, etc. to ensure that the traffic flows properly.</li></ul><ul id="f5e859e3-acba-48c7-923b-315441079b5d" class="bulleted-list"><li style="list-style-type:disc">Bastion Host public EC2 instance to SSH into, that has SSH connectivity to EC2 instances in private subnets</li></ul><ul id="27fa07dd-c919-49d1-9e1b-4d9c85313d8a" class="bulleted-list"><li style="list-style-type:disc">NAT Instances gives Internet access to EC2 instances in private subnets. Old, must be setup in a public subnet, disable Source / Destination check flag</li></ul><ul id="96b7f4ac-4201-461e-89d8-366834c84b21" class="bulleted-list"><li style="list-style-type:disc">NAT Gateway managed by AWS, provides scalable Internet access to private EC2 instances, IPv4 only</li></ul><ul id="b48ca273-5506-42c0-b03c-70266364ab2b" class="bulleted-list"><li style="list-style-type:disc">Private DNS + Route 53 ⇒ enable DNS Resolution + DNS Hostnames (VPC)</li></ul><ul id="7cb1406f-0c9b-4583-b553-408f642eae86" class="bulleted-list"><li style="list-style-type:disc">NACL ⇒ stateless, subnet rules for inbound and outbound, ephemeral ports</li></ul><ul id="993a2b85-ec0f-44f4-8fc3-6b5d2f3c2cfb" class="bulleted-list"><li style="list-style-type:disc">Security Groups ⇒ stateful, operate at the EC2 instance level</li></ul><ul id="2e8e8c2c-7999-4642-a2fc-693fb9cf4a51" class="bulleted-list"><li style="list-style-type:disc">Reachability Analyzer ⇒ perform network connectivity testing between AWS resources</li></ul><ul id="74f940e9-95f7-45dc-8416-6b5a0f486db3" class="bulleted-list"><li style="list-style-type:disc">VPC Peering ⇒ connect two VPCs with non overlapping CIDR, non-transitive</li></ul><ul id="b5238cf6-0d6d-422a-a10d-6dde60b69cdc" class="bulleted-list"><li style="list-style-type:disc">VPC Endpoints ⇒ provide private access to AWS Services (S3, DynamoDB, CloudFormation, SSM) within a VPC</li></ul><ul id="4e6cc734-fb28-4663-8d2c-bd52fa3d6d75" class="bulleted-list"><li style="list-style-type:disc">VPC Flow Logs can be setup at the VPC / Subnet / ENI Level, for ACCEPT and REJECT traffic, helps identifying attacks, analyze using Athena or Cloud Watch Logs Insights</li></ul><ul id="0b643ea0-8c75-4bd6-8a3d-46dad9f00464" class="bulleted-list"><li style="list-style-type:disc">Site-to-Site VPN ⇒ setup a Customer Gateway on DC, a Virtual Private Gateway on VPC, and site-to-site VPN over public Internet</li></ul><ul id="d07648fa-7463-4cb0-836d-cf119c4e4dd4" class="bulleted-list"><li style="list-style-type:disc">AWS VPN CloudHub ⇒ hub-and-spoke VPN model to connect your sites</li></ul><ul id="00be293b-df47-470b-a9bc-911fa8dd6289" class="bulleted-list"><li style="list-style-type:disc">Direct Connect ⇒ setup a Virtual Private Gateway on VPC, and establish a direct private connection to an AWS Direct Connect Location. More secure and stable connection but takes longer to setup.</li></ul><ul id="cdd3f4c5-0961-48c4-b63b-5abe23eab69f" class="bulleted-list"><li style="list-style-type:disc">Direct Connect Gateway ⇒ setup Direct Connect to many VPCs in different AWS regions</li></ul><ul id="28752e24-4218-43d4-8d4c-8eb7e9590a2e" class="bulleted-list"><li style="list-style-type:disc">AWS PrivateLink / VPC Endpoint Services:<ul id="7bb590ad-ccdd-4532-a806-5247aca86464" class="bulleted-list"><li style="list-style-type:circle">Connect services privately from your service VPC to customers VPC</li></ul><ul id="4ea510a0-3adb-4b6f-805a-14723f6a9056" class="bulleted-list"><li style="list-style-type:circle">Doesn’t need VPC Peering, public Internet, NAT Gateway, Route Tables</li></ul><ul id="c3827859-0506-4124-8e28-ca5f27b6ccb9" class="bulleted-list"><li style="list-style-type:circle">Must be used with Network Load Balancer &amp; ENI</li></ul><ul id="7be5c90a-7bec-473a-a61c-27959dc6d655" class="bulleted-list"><li style="list-style-type:circle">Can connect AWS services to 1000s of VPCs</li></ul></li></ul><ul id="01913bf5-8cd1-4a36-ab8b-5f8898361c3c" class="bulleted-list"><li style="list-style-type:disc">ClassicLink ⇒ connect EC2-Classic EC2 instances privately to your VPC (deprecated)</li></ul><ul id="bf6cfcf6-a0bc-4d20-8d31-925c8c837aa9" class="bulleted-list"><li style="list-style-type:disc">Transit Gateway ⇒ transitive peering connections for VPC, VPN &amp; DX Gateway</li></ul><ul id="5e8e69ca-9dc3-42f2-8c72-714d2e35d7c6" class="bulleted-list"><li style="list-style-type:disc">Traffic Mirroring ⇒ copy network traffic from ENIs for further analysis</li></ul><ul id="2ab8f1f5-7270-4bdd-9228-ce7125e8b197" class="bulleted-list"><li style="list-style-type:disc">Egress-only Internet Gateway ⇒ like a NAT Gateway, but for IPv6</li></ul></details></li></ul><ul id="70432714-5809-48dc-bb43-e1e973e077ca" class="toggle"><li><details open=""><summary>Networking Costs in AWS</summary><ul id="53b7e4dc-1e8e-4bc6-a334-ba0c26c3a2a1" class="toggle"><li><details open=""><summary>Inter-AZ &amp; Inter-Region Networking</summary><ul id="ccddd5c8-4d95-49da-9483-53fbd3a202d1" class="bulleted-list"><li style="list-style-type:disc">Use Private IP instead of Public IP for good savings and better network performance</li></ul><ul id="4c911de4-a95a-488b-bb5f-1af44ee8e67d" class="bulleted-list"><li style="list-style-type:disc">Use same AZ for maximum savings (at the cost of high availability)</li></ul><figure id="86e1fb44-4000-49a3-9c11-881456de3b43" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20429.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20429.png"/></a></figure></details></li></ul><ul id="61584344-aee0-4045-991d-d348aa22ca50" class="toggle"><li><details open=""><summary>Egress Traffic Network Cost</summary><ul id="4ecc8205-b420-4146-865e-d1957f21eee7" class="bulleted-list"><li style="list-style-type:disc">Egress traffic: outbound traffic - from AWS to outside (paid)</li></ul><ul id="d320f03d-bb05-4603-be6c-91bdd10353e0" class="bulleted-list"><li style="list-style-type:disc">Ingress traffic: inbound traffic - from outside to AWS (typically free)</li></ul><ul id="4a4f7e13-dbdd-48b0-abd3-72bf972da837" class="bulleted-list"><li style="list-style-type:disc">Try to keep as much internet traffic within AWS to minimize costs</li></ul><ul id="e7c72a23-eba4-4c5b-a720-7d0a4eb4b67e" class="bulleted-list"><li style="list-style-type:disc">Direct Connect location that are co-located in the same AWS Region result in lower cost for egress network</li></ul><figure id="64dd66b2-b620-411d-a28a-4cc9cc6b7a52" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20430.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20430.png"/></a></figure></details></li></ul><ul id="d07c589b-ac0b-4e46-8156-b191ab651afe" class="toggle"><li><details open=""><summary>S3 Data Transfer Pricing</summary><ul id="d68b7e55-0ebb-464a-879d-ae6b4c3d6359" class="bulleted-list"><li style="list-style-type:disc">S3 ingress (uploading to S3): free</li></ul><ul id="860888da-8d22-46b9-baf7-3c822501ab2a" class="bulleted-list"><li style="list-style-type:disc">S3 to Internet: $0.09 per GB</li></ul><ul id="6842e8c8-a69d-482c-a377-80fb99c6959a" class="bulleted-list"><li style="list-style-type:disc">S3 Transfer Acceleration:<ul id="58e4c5e1-e315-4eb7-a34b-728032cfa963" class="bulleted-list"><li style="list-style-type:circle">Faster transfer times (50 to 500% better)</li></ul><ul id="a912ffc8-f4c7-4a26-956a-230149c39a90" class="bulleted-list"><li style="list-style-type:circle">Additional cost on top of Data Transfer (+$0.04 to $0.08 per GB)</li></ul></li></ul><ul id="60e9edc9-686f-492a-b127-70ce282724f3" class="bulleted-list"><li style="list-style-type:disc">S3 to CloudFront: free (internal network)</li></ul><ul id="0812bd3e-1622-44f9-b8cb-b05d64ec8d7c" class="bulleted-list"><li style="list-style-type:disc">CloudFront to Internet: $0.085 per GB (slightly cheaper than S3)<ul id="097d966a-fb31-42f0-99a2-24bdeaa79d67" class="bulleted-list"><li style="list-style-type:circle">Caching capability (lower latency)</li></ul><ul id="dccae2f3-2ca8-4246-88a4-4a2ca80e94e4" class="bulleted-list"><li style="list-style-type:circle">Reduce costs associated with S3 Requests (7x cheaper with CloudFront)</li></ul></li></ul><ul id="aa7585e7-a81a-48ff-a8bd-6567e01e5068" class="bulleted-list"><li style="list-style-type:disc">S3 Cross Region Replication: $0.02 per GB</li></ul><figure id="7fd84164-aee1-496f-b334-da726f6bea53" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20431.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20431.png"/></a></figure></details></li></ul><ul id="dd71b67b-3146-4bf3-ae8c-4db69b072605" class="toggle"><li><details open=""><summary>NAT Gateway vs VPC Endpoint</summary><figure id="48f92e95-c60e-47a9-945e-7b1c4446d5e0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20432.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20432.png"/></a></figure></details></li></ul></details></li></ul><ul id="b7bab511-675f-43dc-a2c6-c2c0a4eec448" class="toggle"><li><details open=""><summary>Network Protection on AWS</summary><figure id="6bf856e4-28a9-44f4-9fe0-e0b8b7868708" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(635).png"><img style="width:910px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(635).png"/></a></figure><figure id="1ec45320-225f-40d2-b09b-707786c3742e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(636).png"><img style="width:1801px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(636).png"/></a></figure><figure id="5aa176eb-5d2f-488d-ac4b-c72b57a263f0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(637).png"><img style="width:948px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(637).png"/></a></figure></details></li></ul><ul id="b5040fd3-f280-419b-8cea-f7c96e590dd3" class="toggle"><li><details open=""><summary>DNS Resolution in VPC</summary><ul id="439ae146-fc9b-4a20-8342-a95a4831bcb6" class="toggle"><li><details open=""><summary>Theory</summary><p id="c6683e8c-e6f3-4e0b-8446-beb7341b9213" class="">Two settings need to be enabled to allow DNS resolution within a VPC:</p><ul id="4a422206-82fb-4ed2-b247-52d1ef165e54" class="toggle"><li><details open=""><summary>DNS Support (enableDnsSupport)</summary><ul id="c160f421-4038-48f5-aafd-d87c5a7aaa23" class="bulleted-list"><li style="list-style-type:disc">Enabled by default, allows the resources within the VPC to query the DNS provided by Route 53 Resolver at 169.254.169.253 or the reserved IP address at the base of the VPC IPv4 network range plus two (.2)</li></ul><ul id="94bc7223-fe06-4228-ad41-73f4c8e867e4" class="bulleted-list"><li style="list-style-type:disc">If disabled, we need to provide a custom DNS server otherwise we won’t be able to hit hostnames</li></ul><figure id="3f6c4341-ea2c-4564-bd85-c4b1b93dcd93" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20433.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20433.png"/></a></figure><p id="c25ad045-7c55-4361-aa68-868ddf8b4368" class="">Untitled</p></details></li></ul><ul id="c527f896-193d-406b-9cd9-69b1f18c67e9" class="toggle"><li><details open=""><summary>DNS Hostnames (enableDnsHostnames)</summary><ul id="7404dff6-efd1-46bd-9b08-c0d2d2c0d1cd" class="bulleted-list"><li style="list-style-type:disc">If enabled, assigns public hostname to EC2 instance in our VPC if it has a public IPv4</li></ul><ul id="a456b662-c7ec-497c-8d1e-5fffbb39acb2" class="bulleted-list"><li style="list-style-type:disc">Won’t do anything unless enableDnsSupport=true</li></ul><ul id="8ec0d1bf-96d5-4152-8500-b1da7278ebde" class="bulleted-list"><li style="list-style-type:disc">By default<ul id="3f6f1c4f-9e95-42a4-85a8-a9c47f970df6" class="bulleted-list"><li style="list-style-type:circle">Default VPC - Enabled</li></ul><ul id="bd3997bb-b75c-4c7b-ae16-fbca7b2c166d" class="bulleted-list"><li style="list-style-type:circle">Custom VPC - Disabled</li></ul></li></ul><ul id="87c5eed8-549a-4eaa-9e72-1be5b4062305" class="bulleted-list"><li style="list-style-type:disc">When DNS Hostnames is enabled, the instances have both public and private hostnames.</li></ul><ul id="740c790a-aee6-4cfe-9cbb-09cd1848de84" class="bulleted-list"><li style="list-style-type:disc">When disabled, instances in the VPC will have a public IP but no public DNS.</li></ul><figure id="93ad3ea7-02f8-49b5-b7ff-2d52477c8bb6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20434.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20434.png"/></a></figure><p id="cd2817f6-7c95-413d-9287-1f1e1a0364af" class="">Untitled</p></details></li></ul><p id="4c604068-17e5-4cd5-b62c-ed0432512108" class="">If you use custom DNS domain names in a Private Hosted Zone in Route 53, you must set both these attributes (enableDnsSupport &amp; enableDnsHostname) to true.</p><figure id="911cb4e1-1be5-4811-9517-b8d13ca96ea5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20435.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20435.png"/></a></figure><p id="90e60f43-db8b-496b-918c-e4fa78c91bb5" class="">Untitled</p></details></li></ul><ul id="82861185-e416-41fe-88fe-3739863a6fb8" class="toggle"><li><details open=""><summary>Hands on</summary><ul id="27982765-d6a1-4d9c-afde-6066b8ae66f4" class="bulleted-list"><li style="list-style-type:disc">Enable DNS Hostnames for the VPC<p id="e205942f-074d-424e-acdf-c697f468d4d2" class="">VPC → Select VPC → Action → Edit DNS Hostnames → Enable</p></li></ul><ul id="230cb10c-6878-41d2-98f4-09307d8ece5f" class="bulleted-list"><li style="list-style-type:disc">Create a Hosted Zone in Route 53<p id="e67ad622-edad-4c75-9f0d-06060062d973" class="">💡 Hosted zone configures how to route traffic for a domain</p><p id="afe6c621-490b-4311-8619-de06ece28881" class="">Route 53 → Hosted Zones → Create</p><p id="39d0b1eb-5a3c-413b-89e9-288ce9a8bc73" class="">Type: Private</p><p id="177c662a-3dd5-4c47-9131-d852d8b14bbc" class="">Select the Region and VPC</p></li></ul><ul id="abb064ad-7957-4b5e-9722-30d7b5e68615" class="bulleted-list"><li style="list-style-type:disc">Create a new record in the Hosted Zone to route traffic going to google.arkalim.internal to www.google.com<figure id="c8f8e9a2-c0af-4a7d-8d4e-21648672267c" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20436.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20436.png"/></a></figure><p id="f80e6c78-6b54-4f76-addc-b18d3e2bdb16" class="">Untitled</p></li></ul><p id="979056d3-77bb-4c2a-8746-9cf9bf50458c" class="">Now we can run <code>ping google.arkalim.internal</code> from our bastion host</p></details></li></ul></details></li></ul><ul id="80c821e2-9312-4ebf-b00a-5eac377aeb94" class="toggle"><li><details open=""><summary>Reachability Analyzer</summary><ul id="fcdd0c2d-790a-4a46-b2f0-04d021a9d77f" class="bulleted-list"><li style="list-style-type:disc">A network diagnostics tool that troubleshoots network connectivity between two endpoints in your VPC</li></ul><ul id="876245e5-49f7-4d83-8abf-9a8b38a186d1" class="bulleted-list"><li style="list-style-type:disc">The source and destination could be anything in the VPC</li></ul><ul id="effbbac5-1912-446c-997c-b731e12fb91f" class="bulleted-list"><li style="list-style-type:disc">It builds a model of the network configuration, then checks the reachability based on these configurations (it doesn’t send packets, just tests the configurations)</li></ul><ul id="34612b0f-9073-47d9-9627-9c12b38e3de2" class="bulleted-list"><li style="list-style-type:disc">When the destination is:<ul id="1e68fac8-f613-4102-95ec-a55a9eaab67b" class="bulleted-list"><li style="list-style-type:circle">Reachable - it produces hop-by-hop details of the virtual network path</li></ul><ul id="c1f177bc-8301-410b-88fb-9c58c066cb75" class="bulleted-list"><li style="list-style-type:circle">Not reachable - it identifies the blocking components (eg. configuration issues In SGs, NACLs, Route Tables, etc.)</li></ul></li></ul><ul id="c62223fb-f387-4fe2-bfb0-8eecc309b197" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="34243eeb-6573-44ad-9ed7-8820152354b9" class="bulleted-list"><li style="list-style-type:circle">Troubleshoot connectivity issues</li></ul><ul id="163d2a3e-9084-4989-ba33-72cffbfdacad" class="bulleted-list"><li style="list-style-type:circle">Ensure network configuration is as intended</li></ul></li></ul><ul id="c8c8ac36-b29c-4d7e-9eb8-5568e7571b6f" class="bulleted-list"><li style="list-style-type:disc">Example path for connectivity between two EC2 instances<figure id="06a769f9-ac81-4d4c-a10d-82e5d484fef0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20437.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20437.png"/></a></figure><p id="3f5a2594-f488-4f99-8f5b-65265e54cf6d" class="">Untitled</p></li></ul></details></li></ul><ul id="a6cad51e-7de3-4898-85fa-2ae5abc1b258" class="toggle"><li><details open=""><summary>EC2 Classic &amp; AWS ClassicLink</summary><ul id="cab1dec1-2226-4d80-9ede-8afb6ecf6079" class="bulleted-list"><li style="list-style-type:disc">EC2-Classic: instances run in single network shared with other customers (this is how AWS started)</li></ul><ul id="94a6e283-8d63-4ea4-af0d-babe83f09757" class="bulleted-list"><li style="list-style-type:disc">Amazon VPC: your instances run logically isolated to your AWS account (this is what AWS has become)</li></ul><ul id="741c2b39-1131-457f-9044-b732bf755b9e" class="bulleted-list"><li style="list-style-type:disc">ClassicLink allows you to link EC2-Classic instances to a VPC in your account<ul id="15b01163-befd-4757-afd5-012b58705439" class="bulleted-list"><li style="list-style-type:circle">Must associate a security group</li></ul><ul id="7d31d580-d361-4fc1-ad53-f657a8002250" class="bulleted-list"><li style="list-style-type:circle">Enables communication using private IPv4 addresses</li></ul><ul id="04197a1b-76f4-426f-bafe-1bcdfe655457" class="bulleted-list"><li style="list-style-type:circle">Removes the need to make use of public IPv4 addresses or Elastic IP addresses</li></ul></li></ul><p id="d7b821d8-7f46-4cef-84a6-2029ec647e5c" class="">💡 Likely to be distractors at the exam</p></details></li></ul><ul id="7f7724d5-5967-4698-86c5-383632677de0" class="toggle"><li><details open=""><summary>AWS PrivateLink</summary><ul id="c6dbca9b-3665-458a-826d-d3f91b6c8f80" class="toggle"><li><details open=""><summary>Exposing services in your VPC to other VPCs</summary><ul id="df3eebfb-60f9-4774-8c56-d0766af06c5f" class="toggle"><li><details open=""><summary>Option 1: Make it public</summary><ul id="ccfc2628-2473-4532-848f-a1ffcc06ad20" class="bulleted-list"><li style="list-style-type:disc">Traffic goes through the public internet</li></ul><ul id="1d9c6cb5-53ad-4605-8658-37138702f24c" class="bulleted-list"><li style="list-style-type:disc">Tough to manage access</li></ul><figure id="a9564852-fd95-4150-a6da-c8c5390d2fa0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20438.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20438.png"/></a></figure><p id="c1b1f5a7-0b1d-4833-9eac-ad660ce39af5" class="">Untitled</p></details></li></ul><ul id="3f19b246-b8bf-48bd-a5dd-eced6851019c" class="toggle"><li><details open=""><summary>Option 2: VPC Peering</summary><ul id="d9f84ac9-e48f-41a4-9b4d-e6cb89fbf401" class="bulleted-list"><li style="list-style-type:disc">Each peer connection exposes the whole network even though we want to externalize just a few services</li></ul><figure id="71825496-d319-459b-bf78-76f66b3fbfe2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20439.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20439.png"/></a></figure><p id="32256e9f-3130-47c8-b03e-7304177e781a" class="">Untitled</p></details></li></ul><ul id="0def9283-6dc5-41cb-a046-4c4ef10862e4" class="toggle"><li><details open=""><summary>Option 3: AWS PrivateLink</summary><ul id="57904b62-a7f2-45d3-9284-8fcbab90a1b5" class="bulleted-list"><li style="list-style-type:disc">Most secure &amp; scalable way to expose service to 1000s of VPCs in the same or other accounts</li></ul><ul id="75687175-6d38-4d10-80d9-1b4de80221bb" class="bulleted-list"><li style="list-style-type:disc">Does not require VPC peering, internet gateway, NAT, route tables, etc.</li></ul><ul id="fcdd6d11-9063-4841-905b-ae45cfa727b0" class="bulleted-list"><li style="list-style-type:disc">Requires a Network Load Balancer (most common) or GWLB (Service VPC) and ENI (Customer VPC)</li></ul><ul id="114fde44-42f7-4045-9ac1-4af0358dec7b" class="bulleted-list"><li style="list-style-type:disc">If the NLB is in multiple AZ, then you need ENIs in multiple AZ and the solution is fault tolerant</li></ul><ul id="d090d75d-a8a2-4fe9-9941-d415f77c3a86" class="bulleted-list"><li style="list-style-type:disc">The NLB in the Service VPC and ENI in the Customer VPC talk directly through the AWS PrivateLink</li></ul><figure id="b421522d-5006-4bb6-80d4-d2ac1c5705e0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20440.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20440.png"/></a></figure><p id="228fa632-9ffc-4873-abe4-ace980d11e20" class="">Untitled</p></details></li></ul></details></li></ul><ul id="66870a8f-1684-4e94-9807-24a8efc1332c" class="toggle"><li><details open=""><summary>PrivateLink with ECS</summary><ul id="4fb99097-5c7d-4da7-9fb0-4e4cd9e974c5" class="bulleted-list"><li style="list-style-type:disc">ECS tasks require an ALB. So, we can connect the ALB to the NLB for PrivateLink.</li></ul><ul id="6d4ffc0a-de9c-49ef-a7fa-e5c50941a83a" class="bulleted-list"><li style="list-style-type:disc">Corporate Data Centers will still connect through the VPN or Direct Connect.</li></ul><figure id="41df7a3e-ede0-44d4-96af-825a7ef1731e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20441.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20441.png"/></a></figure></details></li></ul></details></li></ul></div><h3 id="bf037830-efd4-400a-8a73-45e9d8f112c3" class=""><details open=""><summary>Section 29: Disaster Recovery &amp; Migrations</summary></details></h3><div class="indented"><ul id="1c483aec-6b06-44ec-89f6-d7ea9c034453" class="toggle"><li><details open=""><summary>Disaster Recovery</summary><ul id="a51decdc-3e2d-4463-8132-ed0f1c9daeab" class="toggle"><li><details open=""><summary>Intro</summary><ul id="75b32595-acc9-457d-adf0-b2e0eff16226" class="bulleted-list"><li style="list-style-type:disc">Any event that has a negative impact on a company’s business continuity or finances is a disaster</li></ul><ul id="a32427fe-7e43-46a8-bed1-975bc3fcd6f2" class="bulleted-list"><li style="list-style-type:disc">Disaster recovery (DR) is about preparing for and recovering from a disaster</li></ul><ul id="0900fcd7-468b-4271-8214-b719042865cf" class="bulleted-list"><li style="list-style-type:disc">Recovery Point Objective: how often you backup your data or how much data are you willing to lose in case of a disaster</li></ul><ul id="687f93c2-b401-4461-92d6-9be3c1273a7f" class="bulleted-list"><li style="list-style-type:disc">Recovery Time Objective: how long it takes to recover from the disaster (down time)</li></ul><figure id="8302103f-cc76-4aaf-bc94-87ff27e0abbc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20442.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20442.png"/></a></figure></details></li></ul><ul id="f130cbdb-585c-4ffe-acef-4225a2478dd6" class="toggle"><li><details open=""><summary>Strategies</summary><ul id="61ac6f44-8d33-4352-bd8a-4b5ff743f2d8" class="toggle"><li><details open=""><summary>Intro</summary><figure id="e79e7e55-c7ac-4f88-b68b-a9fefb9a4947" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(559).png"><img style="width:777px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(559).png"/></a></figure></details></li></ul><ul id="3e0e910c-f344-4f55-81e9-e214b9b28f1d" class="toggle"><li><details open=""><summary>Backup &amp; Restore</summary><ul id="87e59b99-87b4-4166-aa23-7b3b47563c67" class="bulleted-list"><li style="list-style-type:disc">High RPO (backup every day or week)</li></ul><ul id="107767e7-d584-481e-a7e5-4f70f4c766c2" class="bulleted-list"><li style="list-style-type:disc">High RTO (in case of a disaster, need to spin up instances and restore volumes from snapshots, takes time)</li></ul><ul id="189adb81-969d-417e-b22a-df4db79d0a3a" class="bulleted-list"><li style="list-style-type:disc">Less management</li></ul><ul id="11cda843-0bab-4e70-a4c6-85a24020512f" class="bulleted-list"><li style="list-style-type:disc">Low cost</li></ul><figure id="40e0a88a-a48c-4123-867a-78adee4e940a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20443.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20443.png"/></a></figure></details></li></ul><ul id="156ee6c6-f593-4506-a336-ff868cacaa97" class="toggle"><li><details open=""><summary>Pilot Light</summary><ul id="91756f70-9f13-4621-82e8-ea1cd1c42ab2" class="bulleted-list"><li style="list-style-type:disc">Critical parts of the app are always running in the cloud (eg. continuous replication of data to another region, if one region fails, quickly failover to the other region)</li></ul><ul id="143a58f3-f8f5-40a8-bcb1-1b4b3bb8c989" class="bulleted-list"><li style="list-style-type:disc">Faster than Backup and Restore as critical systems are already up</li></ul><ul id="ae637d74-a392-4d38-a541-8267f980a3ce" class="bulleted-list"><li style="list-style-type:disc">Low RPO and RTO</li></ul><ul id="96567c50-c52b-4424-b810-5588be8a15b3" class="bulleted-list"><li style="list-style-type:disc">In the diagram below, DB is critical so it is replicated continuously in RDS but EC2 instance is spin up only when a disaster strikes.<figure id="6678d2d2-02be-4986-8868-7b3b7bed565d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20444.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20444.png"/></a></figure></li></ul></details></li></ul><ul id="65cd688c-de7c-41ee-8ef9-14a7c57deeb6" class="toggle"><li><details open=""><summary>Warm Standby</summary><ul id="9de7eca6-25e1-447d-b36a-c6a8a78d5ad4" class="bulleted-list"><li style="list-style-type:disc">A complete backup system is up and running but at the minimum capacity. This system is quickly scaled to production capacity in case of a disaster.</li></ul><ul id="0253faf3-1029-480e-bf24-b6e882f70488" class="bulleted-list"><li style="list-style-type:disc">Very low RPO &amp; RTO</li></ul><ul id="c9ec42c8-0315-4e18-a91f-2407e5211060" class="bulleted-list"><li style="list-style-type:disc">Expensive</li></ul><figure id="08a50650-e304-4966-9ffa-138282c8b2c7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20445.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20445.png"/></a></figure></details></li></ul><ul id="8cd0c246-31c2-4199-ac56-b779b1cf4a83" class="toggle"><li><details open=""><summary>Multi-Site / Hot Site Approach</summary><ul id="43f38f9a-b81d-4082-9a1f-277484104c2c" class="bulleted-list"><li style="list-style-type:disc">A backup system is running at full production capacity and the request can be routed to either the DC or the backup system running on AWS.</li></ul><ul id="40b85f08-1b22-446e-aeee-9f9398e28904" class="bulleted-list"><li style="list-style-type:disc">Multi-data center approach</li></ul><ul id="6f8e6e84-0a1f-4105-a981-2d13449d704a" class="bulleted-list"><li style="list-style-type:disc">Lowest RPO &amp; RTO (minutes or seconds)</li></ul><ul id="68698b46-4b8d-432a-9138-4732375ea1af" class="bulleted-list"><li style="list-style-type:disc">Very Expensive</li></ul><figure id="e4cb5634-f81c-42cb-818b-27214c72daa3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20446.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20446.png"/></a></figure></details></li></ul><ul id="6a17d0db-c318-4fa4-aea0-80ff0acd53c7" class="toggle"><li><details open=""><summary>AWS Multi Region</summary><figure id="22b89b7d-c8a5-435d-aabc-54b55a1a643e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(560).png"><img style="width:871px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(560).png"/></a></figure></details></li></ul><ul id="8b86cf7f-da5e-458e-b149-d4159c343c49" class="toggle"><li><details open=""><summary>Outro</summary><figure id="16020e9a-8d95-4d35-bf96-4bfcf791e1b3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(562).png"><img style="width:1141px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(562).png"/></a></figure></details></li></ul></details></li></ul></details></li></ul><ul id="2c54ff58-60c7-4036-8b55-49cf69848227" class="toggle"><li><details open=""><summary>Database Migration Service (DMS)</summary><ul id="bde7c3b8-85c7-4792-82e5-2f691ca20ab0" class="toggle"><li><details open=""><summary>Intro</summary><ul id="d90c7c5f-ad2c-48bc-9396-7cb957e5412b" class="bulleted-list"><li style="list-style-type:disc">Quickly and securely migrate databases from on-premises to AWS cloud</li></ul><ul id="79abb554-ebc0-4f53-89dc-79c09a102de1" class="bulleted-list"><li style="list-style-type:disc">The source database remains available during the migration</li></ul><ul id="bc53c211-2fcf-4f3e-8940-5a4e20c9068e" class="bulleted-list"><li style="list-style-type:disc">Supports:<ul id="8a63b21c-0dca-46fc-b2a6-9ebcc906df12" class="bulleted-list"><li style="list-style-type:circle">Homogeneous migrations (eg. Oracle to Oracle)</li></ul><ul id="4b77939c-a824-4e28-a39e-7202839d8808" class="bulleted-list"><li style="list-style-type:circle">Heterogeneous migrations (eg. Microsoft SQL Server to Aurora)</li></ul></li></ul><ul id="68200db7-5889-47b5-a4a4-7d43a234158e" class="bulleted-list"><li style="list-style-type:disc">Continuous Data Replication using CDC (change data capture)</li></ul><ul id="dd512e2a-9618-4322-8334-dec711f4d6cb" class="bulleted-list"><li style="list-style-type:disc">You must create an EC2 instance running the DMS software to perform the replication tasks. If the amount of data is large, use a large instance. If multi-AZ is enabled, multiple instances will be created in different AZs.<figure id="cb981471-f08e-4fea-8bf4-675e01efba24" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20447.png"><img style="width:192px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20447.png"/></a></figure></li></ul><figure id="ca9e5f74-ed45-4d59-b477-e6868a082fba" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(563).png"><img style="width:943px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(563).png"/></a></figure><ul id="a98f7920-dbf7-458b-8565-93daf63826c2" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><strong>If the source and target DBs aren’t running the same engine, we need to use Schema Conversion Tool (SCT) to convert the DB’s schema from one engine to another.</strong></mark><figure id="29849c68-716a-4d00-9662-647c53434d13" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20448.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20448.png"/></a></figure></li></ul></details></li></ul><ul id="61d017db-fadc-4b38-85fb-cce4116e294c" class="toggle"><li><details open=""><summary>DMS Continuous Migration</summary><p id="b4414d24-9543-4c21-a43c-5a462b7b9a6f" class="">In the example below, source and target engines are different. SCT is installed on premises and the schema conversion is written to RDS (target). DMS instance with CDC is used for continuous data migration.</p><figure id="695f66bc-2358-457e-bb5f-862c31515fd0" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20449.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20449.png"/></a></figure></details></li></ul></details></li></ul><ul id="a532b211-0c9d-4ec8-9dc3-4da54d0c3045" class="toggle"><li><details open=""><summary>RDS and Aurora Migrations</summary><figure id="f5efa7ba-83d0-4b04-bdf6-1f3f807a5064" class="image"><a href="https://www.notion.so"><img style="width:948px" src="https://www.notion.so"/></a></figure></details></li></ul><ul id="22c1fc72-3069-4f4b-bf57-5568523c6ff0" class="toggle"><li><details open=""><summary>AWS On-premises strategies</summary><ul id="e82cf588-7ce3-40c0-bb95-d206adc7d807" class="bulleted-list"><li style="list-style-type:disc">Ability to download Amazon Linux 2 AMI as a VM (.iso format) and run on virtualization softwares like VMWare, KVM, Virtual Box (Oracle VM), Microsoft Hyper-V</li></ul><ul id="7531334a-b7ae-4a8d-8056-cdced716ca7c" class="bulleted-list"><li style="list-style-type:disc">VM Import / Export<ul id="1b0c5496-f1ab-429b-8a85-a7f3e6ea7d66" class="bulleted-list"><li style="list-style-type:circle">Migrate existing applications as VMs into EC2</li></ul><ul id="bc79334b-9500-48fc-9c7c-456b299ab058" class="bulleted-list"><li style="list-style-type:circle">Create a DR repository strategy for your on-premise VMs</li></ul><ul id="c2009251-e832-4cc0-8eec-9c3daf77904a" class="bulleted-list"><li style="list-style-type:circle">Can export back the VMs from EC2 to on-premise</li></ul></li></ul><ul id="9671f966-1782-4bf3-89d3-1e895f09b90a" class="bulleted-list"><li style="list-style-type:disc">AWS Application Discovery Service<ul id="c575f239-36d8-455d-85dc-b69628bbab45" class="bulleted-list"><li style="list-style-type:circle">Gather information about your on-premise servers to plan a migration</li></ul><ul id="d8f8fe68-3c3a-498a-8d42-1587ea59d665" class="bulleted-list"><li style="list-style-type:circle">Server utilization and dependency mappings</li></ul><ul id="8a6e99c5-242b-4f1a-aa1f-63132741c6f7" class="bulleted-list"><li style="list-style-type:circle">Track with AWS Migration Hub</li></ul></li></ul><ul id="f6c79bc1-694c-4246-9d80-33f0d28f48f2" class="bulleted-list"><li style="list-style-type:disc">AWS Database Migration Service (DMS)<ul id="97d85c03-4c38-43de-bf6d-12bf1b9809dd" class="bulleted-list"><li style="list-style-type:circle">replicate On-premise ⇒ AWS , AWS ⇒ AWS, AWS ⇒ On-premise</li></ul><ul id="474cb2c6-4e21-44c8-b855-929131bbf86f" class="bulleted-list"><li style="list-style-type:circle">Works with various database technologies (Oracle, MySQL, DynamoDB, etc..)</li></ul></li></ul><ul id="2ab9ef4d-3f2e-4b1d-a2dd-dd28d354101a" class="bulleted-list"><li style="list-style-type:disc">AWS Server Migration Service (SMS)<ul id="486e7694-3cf6-4027-8e98-7c254f92efad" class="bulleted-list"><li style="list-style-type:circle">Incremental replication of on-premise live servers to AWS</li></ul></li></ul></details></li></ul><ul id="d426a3e1-7516-4ba6-aaa4-88a9b1b4f5e0" class="toggle"><li><details open=""><summary>AWS Backup</summary><ul id="b994a930-2c64-4c80-8ea6-8a15f032f563" class="toggle"><li><details open=""><summary>Intro</summary><ul id="3dcf989f-ba2d-4607-8787-964d5e1930bb" class="bulleted-list"><li style="list-style-type:disc">Fully managed service</li></ul><ul id="a45bc386-8a7d-4a6f-9246-e0400b918d3a" class="bulleted-list"><li style="list-style-type:disc">Centrally manage and automate backups across AWS services</li></ul><ul id="628c3f1e-5173-42b6-a2d8-f63bd824de09" class="bulleted-list"><li style="list-style-type:disc">No need to create custom scripts and manual processes</li></ul><ul id="05fc24b5-92ca-4bd1-b449-9aef2f40b80e" class="bulleted-list"><li style="list-style-type:disc">Supported services:<ul id="8f43380a-6e2e-40d6-a7b4-c94339b703da" class="bulleted-list"><li style="list-style-type:circle">Amazon EC2 / Amazon EBS</li></ul><ul id="ae732081-6d69-47ae-b9c2-5ae92d54a941" class="bulleted-list"><li style="list-style-type:circle">Amazon S3</li></ul><ul id="a430ca37-9ffa-48bf-81b8-871b8ad8bd2c" class="bulleted-list"><li style="list-style-type:circle">Amazon RDS (all DBs engines) / Amazon Aurora / Amazon DynamoDB</li></ul><ul id="5e9c5619-ac1c-4ece-8f52-607e476bdcaf" class="bulleted-list"><li style="list-style-type:circle">Amazon DocumentDB / Amazon Neptune</li></ul><ul id="0ce21112-2b26-4515-bb0d-a0e9c0cb7ac4" class="bulleted-list"><li style="list-style-type:circle">Amazon EFS / Amazon FSx (Lustre &amp; Windows File Server)</li></ul><ul id="be7dbd0d-df9e-4c58-8bef-ef6e677f37a2" class="bulleted-list"><li style="list-style-type:circle">AWS Storage Gateway (Volume Gateway)</li></ul></li></ul><ul id="06c85073-60c9-4536-bd48-5b7880e9a407" class="bulleted-list"><li style="list-style-type:disc">Supports cross-region backups</li></ul><ul id="0d3d064e-9ade-4a64-a18c-c4221f73e84f" class="bulleted-list"><li style="list-style-type:disc">Supports cross-account backups</li></ul><ul id="8522e2ab-37fb-4543-8cec-1f63b5e241d5" class="bulleted-list"><li style="list-style-type:disc">Supports point in time recovery (PITR) for supported services</li></ul><ul id="6b914ce7-018e-440a-a2b6-78317e676b56" class="bulleted-list"><li style="list-style-type:disc">On-Demand and Scheduled backups</li></ul><ul id="937c900b-195a-404a-8961-fb26cd0e57a9" class="bulleted-list"><li style="list-style-type:disc">Tag-based backup policies</li></ul><ul id="af154455-678b-4a56-a2ca-f4e567c2fcb8" class="bulleted-list"><li style="list-style-type:disc">You create backup policies known as Backup Plans<ul id="b7c3e96d-3096-4890-bbd5-98e549b1b0bd" class="bulleted-list"><li style="list-style-type:circle">Backup frequency (every 12 hours, daily, weekly, monthly, cron expression)</li></ul><ul id="7aa1313b-49e1-4995-bc58-0fb6d1c169ec" class="bulleted-list"><li style="list-style-type:circle">Backup window</li></ul><ul id="9ab64c0b-8190-4dfe-949f-74ec9909ed91" class="bulleted-list"><li style="list-style-type:circle">Transition to Cold Storage (Never, Days, Weeks, Months, Years)</li></ul><ul id="b366cd63-3f30-4504-b66a-e863c4725912" class="bulleted-list"><li style="list-style-type:circle">Retention Period (Always, Days, Weeks, Months, Years)</li></ul></li></ul><figure id="a8c90de3-2e2f-4e81-90e1-aa8b29f1cb4d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20450.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20450.png"/></a></figure></details></li></ul><ul id="7d887eb4-9d9f-4e88-91c2-07128b4aac4a" class="toggle"><li><details open=""><summary>Vault Lock</summary><ul id="ad800a7d-101c-4c0a-b78e-1cdbc6ebecd4" class="bulleted-list"><li style="list-style-type:disc">Enforce a WORM (Write Once Read Many) state for all the backups that you store in your AWS Backup Vault</li></ul><ul id="d19f2439-435d-4192-b3d6-308132b308c3" class="bulleted-list"><li style="list-style-type:disc">Additional layer of defense to protect your backups against:<ul id="a9d4ba01-a924-4645-af21-755a7b43e3ad" class="bulleted-list"><li style="list-style-type:circle">Inadvertent or malicious delete operations</li></ul><ul id="7ef69272-c5b5-4e9f-af0b-4e22b185fbc6" class="bulleted-list"><li style="list-style-type:circle">Updates that shorten or alter retention periods</li></ul></li></ul><ul id="96394916-bbe5-4371-83ac-12cfce6b3c1b" class="bulleted-list"><li style="list-style-type:disc">Even the root user cannot delete backups when enabled</li></ul></details></li></ul></details></li></ul><ul id="2e334c65-69a6-4c80-8d7a-328846af663a" class="toggle"><li><details open=""><summary>Application Migration Service - MGN</summary><figure id="060e99c5-f01a-40be-91e6-9fe85f75f120" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(565).png"><img style="width:672px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(565).png"/></a></figure><figure id="1d441154-1975-4ecd-9334-7484ef1803c3" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(566).png"><img style="width:1773px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(566).png"/></a></figure></details></li></ul><ul id="51a31a12-988a-48d1-b2d5-6eb8420dabbf" class="toggle"><li><details open=""><summary>Transferring large amount of data into AWS</summary><p id="87e4b667-4669-4379-8b7b-5c3538a3a4de" class="">Example: transfer 200 TB of data to the cloud. We have a 100 Mbps internet connection.</p><ul id="937444f3-f98d-4b4e-979e-22024d189522" class="bulleted-list"><li style="list-style-type:disc">Over the internet / Site-to-Site VPN:<ul id="a220761b-8663-4ac7-9b0c-7f5fed63ad34" class="bulleted-list"><li style="list-style-type:circle">Immediate to setup</li></ul><ul id="63b5cbb7-778d-4279-8a4a-d7d50c8b0936" class="bulleted-list"><li style="list-style-type:circle">Will take 200(TB)* 1000(GB)* 1000(MB)*8(Mb)/100 Mbps = 16,000,000s = 185d</li></ul></li></ul><ul id="e868cecb-62c3-48e9-92a7-c8c2dbd07f3a" class="bulleted-list"><li style="list-style-type:disc">Over direct connect - 1Gbps:<ul id="94838ed3-9eed-406d-84b3-e7789906a7e4" class="bulleted-list"><li style="list-style-type:circle">Long for the one-time setup (over a month)</li></ul><ul id="b932d718-6de2-4d8d-9f37-5f849b40aac4" class="bulleted-list"><li style="list-style-type:circle">Will take 200(TB)<em>1000(GB)</em>8(Gb)/| Gbps = 1,600,000 = 18.5d</li></ul></li></ul><ul id="b7da159e-0c33-4e48-8da8-551da8cb6a90" class="bulleted-list"><li style="list-style-type:disc">Over Snowball:<ul id="829bcb74-31e9-4567-a318-38d68f4d0434" class="bulleted-list"><li style="list-style-type:circle">Will take 2 to 3 snowballs in parallel</li></ul><ul id="2ebe547b-f564-4651-af75-4201ede57633" class="bulleted-list"><li style="list-style-type:circle">Takes about 1 week for the end-to-end transfer</li></ul><ul id="43801eda-ff7b-4d00-a179-e43eaa19a4a9" class="bulleted-list"><li style="list-style-type:circle">Can be combined with DMS</li></ul></li></ul><ul id="e80bb977-8777-413d-b3ed-901e91683e61" class="bulleted-list"><li style="list-style-type:disc">For on-going replication transfers: Site-to-Site VPN or DX with DMS or DataSync</li></ul></details></li></ul><ul id="0193061e-8a31-445d-93bc-105f6fa3b2a9" class="toggle"><li><details open=""><summary>VMware cloud on AWS</summary><figure id="2db2f308-5cdb-4055-a7f9-c7ca59508499" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(567).png"><img style="width:1768px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(567).png"/></a></figure></details></li></ul><ul id="d2fd7916-fbe1-413f-ac6f-a74c616b254e" class="toggle"><li><details open=""><summary>AWS DataSync</summary><ul id="9d044af4-8154-4abd-ad29-d26fd2994a14" class="toggle"><li><details open=""><summary>Intro</summary><ul id="a9b01d81-04bb-4f6f-8082-defc284f7910" class="bulleted-list"><li style="list-style-type:disc">Move large amount of data from on-premise to AWS over the public internet using TLS</li></ul><ul id="0796c59c-f807-4ac5-b285-c61f74915c73" class="bulleted-list"><li style="list-style-type:disc">Can synchronize to: Amazon S3 (any storage classes including Glacier), Amazon EFS, Amazon FSx for Windows</li></ul><ul id="126256ac-d7b3-4603-86b0-38a3837deb02" class="bulleted-list"><li style="list-style-type:disc">Move data from your NAS or file system via NFS or SMB</li></ul><ul id="0ecbfca0-9253-40b2-930b-9d8a57855c54" class="bulleted-list"><li style="list-style-type:disc">Replication tasks can be scheduled hourly, daily, weekly (not continuous replication)</li></ul><ul id="afd3fe39-0f77-45a5-8222-c745b0ac5840" class="bulleted-list"><li style="list-style-type:disc">Need to install AWS DataSync Agent on premises</li></ul><ul id="f4b8bb55-74cc-46c1-94ff-6f22caa8bfe4" class="bulleted-list"><li style="list-style-type:disc">Can setup a bandwidth limit</li></ul></details></li></ul><ul id="54340747-dea5-44e0-bcd7-8916d8eaae08" class="toggle"><li><details open=""><summary>NFS / SMB to AWS</summary><figure id="32505f70-8928-49de-acdb-50b6269151c1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20451.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20451.png"/></a></figure></details></li></ul><ul id="f3f9f103-d951-4b29-8cee-0e8121176cd0" class="toggle"><li><details open=""><summary>EFS to EFS</summary><figure id="f55f3d00-a4dc-4ed7-b4ed-c626e930cac5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20452.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20452.png"/></a></figure></details></li></ul></details></li></ul></div><h3 id="a275a195-bf03-489e-8e33-c168f2c2d400" class=""><details open=""><summary>Section 30: More Solution Architectures</summary></details></h3><div class="indented"><ul id="b2139188-4da7-4da1-9bde-2eca07f53577" class="toggle"><li><details open=""><summary>Event Processing</summary><ul id="dd08eb28-75ed-46e8-865e-5b314080565d" class="toggle"><li><details open=""><summary>SQS + Lambda</summary><p id="754c6591-2de3-43a2-9d66-eab1ed8e8fca" class="">Need to setup a DLQ to prevent infinite loop if a message is faulty</p><figure id="0ecd3030-5369-4358-a70a-8f49ee2175ce" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20453.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20453.png"/></a></figure></details></li></ul><ul id="798c1661-94e8-43b6-b3d9-562b9e14120c" class="toggle"><li><details open=""><summary>SQS FIFO + Lambda</summary><p id="796b6af8-ff6e-462f-ae81-10ff973a9007" class="">If a message is faulty, it can block the entire queue due to infinite loop (need DLQ)</p><figure id="a8989004-41ae-4937-b7a2-7178ca2b4e14" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20454.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20454.png"/></a></figure></details></li></ul><ul id="de81c013-0b9d-4b65-97e4-34dcbab4b62e" class="toggle"><li><details open=""><summary>SNS + Lambda</summary><p id="5d5ef7e7-ab42-46f7-86f4-177865494bfe" class="">Lambda retries each failed message 3 times after which it is sent to the DLQ directly by the lambda.</p><figure id="3e4f221c-a5c1-439e-9784-7968311abb09" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20455.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20455.png"/></a></figure></details></li></ul><ul id="17f768e5-d2ab-4884-abb9-ece624cb2335" class="toggle"><li><details open=""><summary>Fan out pattern</summary><figure id="7c2102c8-e5b9-4206-81ac-34361900b1bf" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20456.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20456.png"/></a></figure></details></li></ul><ul id="a9eae34b-b4cb-4124-919e-9a8df7f134fd" class="toggle"><li><details open=""><summary>S3 Event Notifications</summary><figure id="9e39ddf1-0454-4892-80f2-0d5036ee62d5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(609).png"><img style="width:914px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(609).png"/></a></figure><figure id="1c849a16-c8a2-40dc-a70e-541172e349b1" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(610).png"><img style="width:942px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(610).png"/></a></figure></details></li></ul><ul id="77320400-7fa8-4984-ba3f-62c3e7cac270" class="toggle"><li><details open=""><summary>EventBridge - Intercept API Calls</summary><figure id="13ab515c-5026-465c-83d7-446722270f1e" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(611).png"><img style="width:898px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(611).png"/></a></figure></details></li></ul><ul id="969bc82d-f066-4498-a608-208a6ee0597d" class="toggle"><li><details open=""><summary>API Gateway</summary><figure id="34ccbed6-43da-4a3b-a0d1-3e24612a72f2" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(612).png"><img style="width:924px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(612).png"/></a></figure></details></li></ul></details></li></ul><ul id="2baf0e8d-1e47-4b8d-9980-a3ca4c744ca8" class="toggle"><li><details open=""><summary>Caching </summary><p id="0feb9098-cd03-4058-9c97-f396454d6b71" class="">The upper flow is for serving dynamic content and the lower flow is for serving static content.</p><p id="9b83d7e8-0725-446f-93bc-17f0fef76f30" class="">Cache hit can happen on CloudFront, API Gateway or DB cache. The later the cache hit, higher the network, latency and computation.</p><figure id="64713e8d-c8fe-4a15-81e3-4c9ebdd98b2b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20457.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20457.png"/></a></figure></details></li></ul><ul id="3a4d7f75-be42-46eb-8fdf-5b82434e3cc1" class="toggle"><li><details open=""><summary>Blocking an IP address</summary><ul id="07f92add-2c8a-424b-97d9-c43f1d9a7ec6" class="bulleted-list"><li style="list-style-type:disc">We can explicitly deny the specific IP address in the NACL. SG only has allow rules so if the application is global, we will have to allow all the IPs. We can use a firewall software running on the instance but in that case since the request has already reached the instance, it will incur processing cost.<figure id="89fc2b40-9a3d-48f0-969b-45a049313ffc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20458.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20458.png"/></a></figure></li></ul><ul id="5b9ab7b5-99e3-4414-be66-73c3d5f0e89d" class="bulleted-list"><li style="list-style-type:disc">In case of ALB, the incoming connection is terminated and the ALB creates a new connection with the EC2 instance. EC2 instance must allow ALB’s SG. For ALB, the NACL can be used to block the IP.<figure id="cd6cf786-c58b-4cba-83d1-c5af2eddbf36" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20459.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20459.png"/></a></figure></li></ul><ul id="dafb187f-79a9-4ac1-bd02-94fade777f6e" class="bulleted-list"><li style="list-style-type:disc">NLB doesn’t terminate the incoming connection. There is no SG for NLB. The instance gets to see the client’s public IP. NACL will be used to block the IP.<figure id="4be22672-b023-4d8c-8463-9cdbec2cde49" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20460.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20460.png"/></a></figure></li></ul><ul id="e49aa760-20a9-4681-9541-416e43507b3a" class="bulleted-list"><li style="list-style-type:disc">Web Application Firewall (WAF) can be used for complex IP filtering at the ALB level along with IP blocking at NACL - Network Access Control List (two lines of defense).<figure id="172eaab8-6a45-4443-a8fc-03d4680bd845" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20461.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20461.png"/></a></figure></li></ul><ul id="c7d00b71-034d-460c-810d-a4c0f77da1cc" class="bulleted-list"><li style="list-style-type:disc">CloudFront distribution sits outside the VPC. The ALB gets to see the CF’s public IPs only (not the client IP). So, NACL isn’t helpful in this case. To block a specific IP, use WAF at the CF level.<figure id="fdc1d465-5d20-4a14-9f86-7f7432513cf8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20462.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20462.png"/></a></figure></li></ul></details></li></ul><ul id="14752144-05b7-4d2a-a765-2019b8e66fbf" class="toggle"><li><details open=""><summary>High Performance Computing (HPC)</summary><ul id="9df12ab3-cb11-42d1-b6b3-89a15379f632" class="toggle"><li><details open=""><summary>Intro</summary><ul id="cf0f2c64-8782-48ec-8129-2fc2f7a389af" class="bulleted-list"><li style="list-style-type:disc">The cloud is the perfect place to perform HPC</li></ul><ul id="2349f3b1-d4af-4899-ab73-61db1f54f9a7" class="bulleted-list"><li style="list-style-type:disc">You can create a very high number of resources in no time</li></ul><ul id="339a4a1d-a81b-47f3-bf05-b556e6fe73eb" class="bulleted-list"><li style="list-style-type:disc">You can speed up time to results by adding more resources</li></ul><ul id="4c8f60b2-10b5-448f-8444-66af45ac20f4" class="bulleted-list"><li style="list-style-type:disc">You can pay only for the systems you have used</li></ul><ul id="e9ab9260-b973-41ce-b004-21a4fb704cd8" class="bulleted-list"><li style="list-style-type:disc">Perform genomics, computational chemistry, financial risk modeling, weather prediction, machine learning, deep learning, autonomous driving</li></ul></details></li></ul><ul id="6fe7c5ec-ea72-4707-9c28-7df65f78ec27" class="toggle"><li><details open=""><summary>Data Management &amp; Transfer</summary><ul id="07251d23-789e-40b0-a985-34b37b76dfe7" class="bulleted-list"><li style="list-style-type:disc">AWS Direct Connect:<ul id="bc9f6928-4bb2-4e5f-86d8-063c90340f54" class="bulleted-list"><li style="list-style-type:circle">Move GB/s of data to the cloud, over a private secure network</li></ul></li></ul><ul id="fc8013ce-a1d2-4884-b0a2-930026f01940" class="bulleted-list"><li style="list-style-type:disc">Snowball &amp; Snowmobile<ul id="ddc52cdf-d70a-4aa6-9fe8-b64e1e6a58d5" class="bulleted-list"><li style="list-style-type:circle">Move PB of data to the cloud</li></ul></li></ul><ul id="14461f1a-dcda-41f8-98f7-28371ea191a2" class="bulleted-list"><li style="list-style-type:disc">AWS DataSync<ul id="6da4d65b-2965-446a-84c7-fa18d2c294a9" class="bulleted-list"><li style="list-style-type:circle">Move large amount of data between on-premise and S3, EFS, FSx for Windows</li></ul></li></ul></details></li></ul><ul id="737837af-75e4-4d07-b07f-a29861cf5d8b" class="toggle"><li><details open=""><summary>Compute &amp; Networking</summary><ul id="ea913ffc-1e10-474c-8f1a-ae6ef7e1c2de" class="bulleted-list"><li style="list-style-type:disc">EC2 Instances:<ul id="57b6f120-923c-44fc-ac31-b2b30b3009e2" class="bulleted-list"><li style="list-style-type:circle">CPU optimized, GPU optimized</li></ul><ul id="7dcb8d56-2c5f-49c1-97c7-fec53610652b" class="bulleted-list"><li style="list-style-type:circle">Spot Instances / Spot Fleets for cost savings + Auto Scaling</li></ul></li></ul><ul id="c9eae6cf-bd9c-4a7f-876b-760929ceb674" class="bulleted-list"><li style="list-style-type:disc">EC2 Placement Groups: Cluster for good network performance<figure id="1e27a360-0487-4e02-9a7c-9e9b9f5c3738" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20463.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20463.png"/></a></figure></li></ul><ul id="0fab5bf8-17b3-407e-bddd-6a551566a494" class="bulleted-list"><li style="list-style-type:disc">EC2 Enhanced Networking (SR-IOV)<ul id="a2d69fd3-f0ca-4984-a86c-a44890ee4e10" class="bulleted-list"><li style="list-style-type:circle">Higher bandwidth</li></ul><ul id="2a9608fd-d83c-404f-b576-b70db78b76dc" class="bulleted-list"><li style="list-style-type:circle">Higher PPS (packet per second)</li></ul><ul id="303c2173-fc9e-4ecc-a057-88ae6a5d0fdd" class="bulleted-list"><li style="list-style-type:circle">Lower latency</li></ul><ul id="b61f6544-6384-4af5-83a9-1f409e23af9f" class="bulleted-list"><li style="list-style-type:circle">Can be achieved in two ways:<ul id="a5a445fd-f5e4-41c9-bd55-9566f190c1af" class="bulleted-list"><li style="list-style-type:square"><strong>Option I: Elastic Network Adapter (ENA) - up to 100 Gbps</strong></li></ul><ul id="6bbf9c29-0175-4df6-b39b-a6b821d043ac" class="bulleted-list"><li style="list-style-type:square"><strong>Option 2: Intel 82599 VF up to 10 Gbps - legacy (old standard)</strong></li></ul></li></ul></li></ul><ul id="4611658b-ce74-4923-b815-d5666b7c5510" class="bulleted-list"><li style="list-style-type:disc">Elastic Fabric Adapter (EFA)<ul id="62b559f9-80bc-4290-a116-883f5d35d347" class="bulleted-list"><li style="list-style-type:circle">Improved ENA for HPC, only works for Linux</li></ul><ul id="f067b733-afff-4814-8960-fb4341ec9bd2" class="bulleted-list"><li style="list-style-type:circle">Great for inter-node communications, tightly coupled workloads</li></ul><ul id="db91933b-9fad-4f20-8929-5dd4989f212d" class="bulleted-list"><li style="list-style-type:circle">Leverages Message Passing Interface (MP) standard</li></ul><ul id="dfa64a74-dec1-4a0e-babe-00e6e37623c0" class="bulleted-list"><li style="list-style-type:circle">Bypasses the underlying Linux OS to provide low-latency, reliable transport</li></ul></li></ul></details></li></ul><ul id="f30aa0ab-274c-4fd4-be41-b524c86aa222" class="toggle"><li><details open=""><summary>Storage</summary><ul id="5af3f293-fff0-4e7d-a7b0-4ad460b1a2ae" class="bulleted-list"><li style="list-style-type:disc">Instance-attached storage:<ul id="6f9c5188-b33d-4ec4-8a3c-0656562f89df" class="bulleted-list"><li style="list-style-type:circle">EBS: scale up to 256,000 lOPS with io2 Block Express</li></ul><ul id="1a24352d-b6b2-4e87-aeb8-44e53735cfc8" class="bulleted-list"><li style="list-style-type:circle">Instance Store: scale to millions of IOPS, linked to EC2 instance, low latency</li></ul></li></ul><ul id="1897b0f9-2569-4d04-a400-df8421a3b777" class="bulleted-list"><li style="list-style-type:disc">Network storage:<ul id="476eaed3-1174-457c-ad0c-a647ed3ba8d4" class="bulleted-list"><li style="list-style-type:circle">Amazon S3: large blob, not a file system</li></ul><ul id="8546552c-3bad-49d2-9b69-184551ad8bad" class="bulleted-list"><li style="list-style-type:circle">Amazon EFS: scale IOPS based on total size, or use provisioned IOPS mode</li></ul><ul id="1be24e5b-55b4-42cc-9397-bc31f00e7ff2" class="bulleted-list"><li style="list-style-type:circle">Amazon FSx for Lustre:<ul id="c8e1284f-bf96-4535-b455-d32fe895c5ea" class="bulleted-list"><li style="list-style-type:square">HPC optimized distributed file system, millions of IOPS</li></ul><ul id="8eb3f9b8-10b9-45b7-a72e-fe078c16b68d" class="bulleted-list"><li style="list-style-type:square">Backed by S3</li></ul></li></ul></li></ul></details></li></ul><ul id="498d8ddc-a33f-44da-a19b-e31ef1d346ee" class="toggle"><li><details open=""><summary>Automation &amp; Orchestration</summary><ul id="541cae38-ff0b-4653-b553-a43d2cc3853f" class="bulleted-list"><li style="list-style-type:disc">AWS Batch<ul id="96b568a3-938c-4fcf-aa49-f5a765d68d0a" class="bulleted-list"><li style="list-style-type:circle">AWS Batch supports multi-node parallel jobs, which enables you to run single jobs that span multiple EC2 instances.</li></ul><ul id="4f926409-5d3a-4886-92f2-68902ff98fea" class="bulleted-list"><li style="list-style-type:circle">Easily schedule jobs and launch EC2 instances accordingly</li></ul></li></ul><ul id="9172a6b9-dbc7-4d46-9189-15a2ecfef9ba" class="bulleted-list"><li style="list-style-type:disc">AWS Parallel Cluster<ul id="1b7e280c-8eb2-428f-a03b-a29860aaf0fa" class="bulleted-list"><li style="list-style-type:circle">Open-source cluster management tool to deploy HPC on AWS</li></ul><ul id="6277db66-8d21-4618-bff4-8d5621c5d36c" class="bulleted-list"><li style="list-style-type:circle">Configure with text files</li></ul><ul id="2441eaca-0bd1-4eee-a61c-2702eb765770" class="bulleted-list"><li style="list-style-type:circle">Automate creation of VPC, Subnet, cluster type and instance types</li></ul><ul id="b3572663-42c7-4c60-9df1-3b2301d1e910" class="bulleted-list"><li style="list-style-type:circle">Ability to enable EFA on the cluster (improves network performance)</li></ul></li></ul></details></li></ul></details></li></ul><ul id="52409446-c35d-472a-a768-a0152957b031" class="toggle"><li><details open=""><summary>EC2 High Availability</summary><ul id="abdfba22-f125-44a5-9484-6afaa2bef3d3" class="toggle"><li><details open=""><summary>Method 1</summary><figure id="8c4f2ed2-fb36-48b5-8e67-efdb3645a7c4" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(613).png"><img style="width:1770px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(613).png"/></a></figure></details></li></ul><ul id="f4ba2841-656a-41ed-a30f-1a9e60d11269" class="toggle"><li><details open=""><summary>Method 2 - Stateless</summary><p id="383741a0-2680-4514-b380-dc70c4cd7f14" class="">Create a system where only 1 EC2 instance stays active at a time. If the instance goes down, ASG will start a new one. Also, the</p><p id="d897cd5e-b466-4c7d-8c4b-0d3a298c9705" class="">EC2 instance will issue an API call to attach the Elastic IP based on tag.</p><figure id="8fc1dfc2-248a-4784-8a6e-585c1db9e602" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20464.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20464.png"/></a></figure></details></li></ul><ul id="6e29cfe9-9c1e-48c3-ad69-d3de696442c9" class="toggle"><li><details open=""><summary>Method 3 - Stateful</summary><p id="01924397-3e70-43c5-8651-384a14dfe3e8" class="">The EC2 instance maintains state in an EBS volume (attached to an AZ). If the instance goes down, create a snapshot of the EBS volume which will be triggered on ASG Terminate lifecycle hook. Similarly, when a new instance is spun up, create a new EBS volume in the appropriate instance using the ASG Launch lifecycle hook.</p><figure id="50124396-3e91-4a45-a0ac-78ce025598b5" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20465.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20465.png"/></a></figure></details></li></ul><p id="0447a25d-c814-4bfa-8c3d-7f04652604d8" class="">
</p></details></li></ul><ul id="8474bad5-d3c4-4a71-8a4c-ff482ba4f7a8" class="toggle"><li><details open=""><summary>Bastion Host - High Availability</summary><ul id="a9627703-49c4-4f64-a9fc-15f5f79c1a49" class="bulleted-list"><li style="list-style-type:disc">HA options for Bastion Host<ul id="67df6f9e-c2e4-4d0a-aa3e-5df48a63c1aa" class="bulleted-list"><li style="list-style-type:circle">Run 2 Bastion Hosts across 2 AZ</li></ul><ul id="33bfb88e-2cb9-41bd-a0f3-3dad27dc4d09" class="bulleted-list"><li style="list-style-type:circle">Run 1 Bastion Host across 2 AZ with ASG 1:1:1</li></ul></li></ul><ul id="54d7f383-a5f1-47ca-9bd5-60c449cc5100" class="bulleted-list"><li style="list-style-type:disc">Routing to the bastion host<ul id="2a56c921-0a60-477b-9fe1-3c920cdadd81" class="bulleted-list"><li style="list-style-type:circle">If 1 bastion host, use an elastic IP with ec2 user-data script to access it</li></ul><ul id="5abc9928-eab3-4c45-99ae-e56329eb4ff2" class="bulleted-list"><li style="list-style-type:circle">If 2 bastion hosts, use a Network Load Balancer (layer 4) deployed in multiple AZ. If NLB, the bastion hosts can live in the private subnet directly (more secure)</li></ul></li></ul><p id="c9b22206-c82f-4fef-b7a2-741a71dce4ab" class="">Note: Can’t use ALB as the ALB is layer 7 (HTTP protocol) and SSH works with TCP</p><figure id="c44cef2d-96f6-4c95-bb87-f53fcd38af84" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20466.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20466.png"/></a></figure></details></li></ul></div><h3 id="32beeea7-0f44-4823-b88d-118cf43a652a" class=""><details open=""><summary>Section 31: Other Services</summary></details></h3><div class="indented"><ul id="49cd07ce-b8a6-4652-9fdb-45bc2c39437e" class="toggle"><li><details open=""><summary>CloudFormation</summary><ul id="02fdcb5a-09bf-455f-876e-559eadd35e21" class="toggle"><li><details open=""><summary>Infrastructure as Code</summary><ul id="8c4fa643-b452-4a3c-860a-753d224802a9" class="bulleted-list"><li style="list-style-type:disc">Currently, we have been doing a lot of manual work</li></ul><ul id="4eb7f34f-9e75-4a38-b3b0-16edc07f8da1" class="bulleted-list"><li style="list-style-type:disc">All this manual work will be very tough to reproduce:<ul id="330fb32c-6910-42e5-b81f-d60e69defaf8" class="bulleted-list"><li style="list-style-type:circle">in another region</li></ul><ul id="eb58e573-7336-4581-9a1a-760ab7baf3d1" class="bulleted-list"><li style="list-style-type:circle">in another AWS account</li></ul><ul id="2bfdf6ed-579a-4abe-a3c5-86d62e385069" class="bulleted-list"><li style="list-style-type:circle">within the same region if everything was deleted</li></ul></li></ul><ul id="b019d57e-fe6f-49d4-9def-be6a9ec5ee7c" class="bulleted-list"><li style="list-style-type:disc">IaC allows us to write our infrastructure as a config file which can be easily replicated</li></ul></details></li></ul><ul id="42262afa-ad77-4d0a-8252-f4915c998afd" class="toggle"><li><details open=""><summary>CloudFormation Intro</summary><ul id="dd8d5af4-c491-4241-b7cd-d73f8cb6153a" class="bulleted-list"><li style="list-style-type:disc">CloudFormation is a declarative way of outlining your AWS Infrastructure, for any resources (most of them are supported).</li></ul><ul id="9f86b287-e0ff-4b75-9512-e42982157604" class="bulleted-list"><li style="list-style-type:disc">CloudFormation creates the resources for you, in the right order, with the exact configuration that you specify</li></ul><ul id="be47f0e5-104d-419e-a237-e3efed911fcb" class="bulleted-list"><li style="list-style-type:disc">No resources are manually created, which is excellent for control</li></ul><ul id="9fc5e628-6f9d-44c9-a2e0-368e41fe5c95" class="bulleted-list"><li style="list-style-type:disc">The code can be version controlled for example using git</li></ul><ul id="64f754cb-1f15-4583-b990-81d67b2db83c" class="bulleted-list"><li style="list-style-type:disc">Changes to the infrastructure are reviewed through code</li></ul><ul id="ad87f260-bb35-4a06-909d-6ef8b4dce51e" class="bulleted-list"><li style="list-style-type:disc">Cost<ul id="f24110ba-d6fa-4c63-9e28-af031889d80e" class="bulleted-list"><li style="list-style-type:circle">Each resources within the stack is tagged with an identifier so you can easily see how much a stack costs you</li></ul><ul id="becf4526-5c91-4dd6-9d32-d5a23028ed92" class="bulleted-list"><li style="list-style-type:circle">You can estimate the costs of your resources using the CloudFormation template</li></ul><ul id="e0ceed62-e2a1-4b61-952b-985f04373227" class="bulleted-list"><li style="list-style-type:circle">Savings strategy: In Dev, you could automation deletion of templates at 5 PM and recreated at 8 AM, safely</li></ul></li></ul><ul id="7438c89b-7ae2-41cc-8979-7bdccf974ad0" class="bulleted-list"><li style="list-style-type:disc">Productivity<ul id="e34c0bd0-783d-40b7-839a-79f4d8e1271b" class="bulleted-list"><li style="list-style-type:circle">Ability to destroy and re-create an infrastructure on the cloud on the fly</li></ul><ul id="d0211bb4-b38c-4451-8d2f-8dc3ca247939" class="bulleted-list"><li style="list-style-type:circle">Automated generation of Diagram for your templates for PPT slides</li></ul><ul id="070b806b-5a24-463e-9067-ebcad9e119f6" class="bulleted-list"><li style="list-style-type:circle">Declarative programming (no need to figure out ordering and orchestration)</li></ul></li></ul><ul id="56cb8780-80c8-425b-a3f7-5022f35ee6bb" class="bulleted-list"><li style="list-style-type:disc">Separation of concern: create many stacks for many apps and many layers (eg. VPC stacks, Network stacks, App stacks, etc.)</li></ul><ul id="8a216712-8f1b-4b6e-a0f1-a2a06b007d23" class="bulleted-list"><li style="list-style-type:disc">Don’t re-invent the wheel<ul id="a231af58-7aee-42bc-b46e-9f800662b97f" class="bulleted-list"><li style="list-style-type:circle">Leverage existing templates on the web!</li></ul><ul id="d8c1338b-d735-41ef-9dff-2ffdc4a5c632" class="bulleted-list"><li style="list-style-type:circle">Leverage the documentation</li></ul></li></ul></details></li></ul><ul id="dc373946-0413-4213-8a12-0965795ec12f" class="toggle"><li><details open=""><summary>How it works</summary><ul id="313e04f1-3d4d-4f22-ab62-15b02b1068a0" class="bulleted-list"><li style="list-style-type:disc">Templates have to be uploaded in S3 and then referenced in CloudFormation</li></ul><ul id="cfd8b542-9df7-47e3-aa25-d5f415436b30" class="bulleted-list"><li style="list-style-type:disc">To update a template, we can’t edit previous ones. We have to re-upload a new version of the template to AWS</li></ul><ul id="fa56d5c7-c7df-4ade-88cc-b2ca0fefba18" class="bulleted-list"><li style="list-style-type:disc">Stacks are identified by a name</li></ul><ul id="e3f5fe57-163d-47c3-9e12-ea4cee3b8a6b" class="bulleted-list"><li style="list-style-type:disc">Deleting a stack deletes every single artifact that was created by CloudFormation (very clean way of deleting resources)</li></ul></details></li></ul><ul id="69b58396-e111-4ced-8217-2521906df0df" class="toggle"><li><details open=""><summary>Deploying CloudFormation Templates</summary><ul id="30ec6f12-8e25-4ef0-82b8-d005d89c890c" class="bulleted-list"><li style="list-style-type:disc">Manual way:<ul id="570f0810-ece7-48a8-a845-4f4b8e764c17" class="bulleted-list"><li style="list-style-type:circle">Editing templates in the CloudFormation Designer</li></ul><ul id="adb5844f-e693-48bc-a24c-27b942089c82" class="bulleted-list"><li style="list-style-type:circle">Using the console to input parameters, etc</li></ul></li></ul><ul id="d9accc50-242e-4305-9d21-41c7db8f132d" class="bulleted-list"><li style="list-style-type:disc">Automated way:<ul id="56c13b92-6d12-49fb-80ef-e5bd88540f3d" class="bulleted-list"><li style="list-style-type:circle">Editing templates in a YAML file</li></ul><ul id="9b24de64-4515-47ce-85c3-597f8bb45d29" class="bulleted-list"><li style="list-style-type:circle">Using the AWS CLI (Command Line Interface) to deploy the templates</li></ul><ul id="f0bd9b3c-a71e-4398-b591-39404ac380e1" class="bulleted-list"><li style="list-style-type:circle">Recommended way when you fully want to automate your flow</li></ul></li></ul></details></li></ul><ul id="fe5d88af-fd84-46b9-a802-8e5a49b3d3eb" class="toggle"><li><details open=""><summary>Building Blocks</summary><ul id="db1762c5-d8ae-4957-80fd-1c8efe82293f" class="bulleted-list"><li style="list-style-type:disc">Templates components<ul id="7f7f3e34-b0be-4bee-9e99-1738fc6d580a" class="bulleted-list"><li style="list-style-type:circle">Resources: your AWS resources declared in the template (mandatory)</li></ul><ul id="aa8130d7-e141-4efe-b17b-d249fc893ffc" class="bulleted-list"><li style="list-style-type:circle">Parameters: the dynamic inputs for your template</li></ul><ul id="105e46d7-5b65-44eb-a47d-d37d8e24e463" class="bulleted-list"><li style="list-style-type:circle">Mappings: the static variables for your template</li></ul><ul id="6ceff2f2-a67a-4512-b435-b146563bca85" class="bulleted-list"><li style="list-style-type:circle">Outputs: References to what has been created (will be returned upon stack creation)</li></ul><ul id="41711d66-4bde-4127-96b5-e190c9a6b34a" class="bulleted-list"><li style="list-style-type:circle">Conditionals: List of conditions to perform resource creation</li></ul><ul id="d6d4095e-ef04-4310-8130-77d9d57ebdc5" class="bulleted-list"><li style="list-style-type:circle">Metadata</li></ul></li></ul><ul id="338337fb-12bd-4dbe-9fdf-074acfc4305e" class="bulleted-list"><li style="list-style-type:disc">Templates helpers:<ul id="8ba4d2bd-304b-46cf-b079-77f4e5761ec8" class="bulleted-list"><li style="list-style-type:circle">References</li></ul><ul id="3ba95727-d58a-44bd-98a5-1555d3a21af1" class="bulleted-list"><li style="list-style-type:circle">Functions</li></ul></li></ul></details></li></ul><ul id="3f831f4a-6fbc-4f36-8c5b-4d1c91f402a9" class="toggle"><li><details open=""><summary>StackSets</summary><ul id="c2536121-da7c-49e9-8bfb-936ccdb9740d" class="bulleted-list"><li style="list-style-type:disc">Create, update, or delete stacks across multiple accounts and regions with a single operation</li></ul><ul id="51dc1abe-62e5-4a72-a1bc-b55b0bdb93d7" class="bulleted-list"><li style="list-style-type:disc">Administrator account to create StackSets</li></ul><ul id="95e7ab47-4184-4095-b8ae-426c8d90dbd0" class="bulleted-list"><li style="list-style-type:disc">Trusted accounts to create, update, delete stack instances from StackSets</li></ul><ul id="5ff38f68-7ea3-4727-ad61-4c0a70b11aee" class="bulleted-list"><li style="list-style-type:disc">When you update a stack set, all associated stack instances are updated throughout all accounts and regions.</li></ul></details></li></ul></details></li></ul><ul id="2cc813ce-e779-4d2f-b309-59418683ce04" class="toggle"><li><details open=""><summary>Simple Email Service - SES</summary><figure id="b381b29e-4bc3-486e-9eea-d6267ed7ede6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(614).png"><img style="width:1757px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(614).png"/></a></figure></details></li></ul><ul id="0235c075-2cd5-45ea-a304-f5909d2e610d" class="toggle"><li><details open=""><summary>AWS Pinpoint</summary><figure id="5c10744f-d5c8-4903-ab90-ded0c6f55e2b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(615).png"><img style="width:1782px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(615).png"/></a></figure></details></li></ul><ul id="8fcdc767-c7c2-49eb-832a-1a848211875d" class="toggle"><li><details open=""><summary>SSM Session Manager</summary><figure id="61c9279c-8b1b-4dea-89d1-5f28b9fc376a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(616).png"><img style="width:948px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(616).png"/></a></figure></details></li></ul><ul id="34a0646e-b736-41c0-b7bf-273726f0dc91" class="toggle"><li><details open=""><summary>Systems Manager</summary><ul id="acf0c536-7df8-4ec0-bc65-9db9d2d3011d" class="toggle"><li><details open=""><summary>Systems Manager - Run Command</summary><figure id="d905537a-752b-43c1-9faf-109f87a08fd8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(618).png"><img style="width:1781px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(618).png"/></a></figure><p id="624955c7-4a53-43fe-9e74-ac5ca776a23b" class="">
</p></details></li></ul><ul id="1794dbd4-f516-43d9-8342-a1381a3dbeeb" class="toggle"><li><details open=""><summary>Systems Manager - Patch Manager</summary><figure id="527b960d-60ef-49ff-b71d-71f9fd485a5b" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(620).png"><img style="width:1769px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(620).png"/></a></figure></details></li></ul><ul id="e9acc633-7c19-4f0d-8e95-8b7da095f7db" class="toggle"><li><details open=""><summary>Systems Manager - Maintenance Windows</summary><figure id="06c83dc5-3098-4feb-8899-fca091c40ce7" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(621).png"><img style="width:1766px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(621).png"/></a></figure></details></li></ul><ul id="e69f5080-3629-45de-8533-d3dde4df696d" class="toggle"><li><details open=""><summary>Systems Manager - Automation</summary><figure id="fad50966-d155-4387-aceb-9437ab6a5ecb" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(623).png"><img style="width:1807px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(623).png"/></a></figure></details></li></ul></details></li></ul><ul id="0e0542fa-56d9-4ada-bf08-444b10eb1c36" class="toggle"><li><details open=""><summary>CostExplorer</summary><p id="5714f365-fed7-48e2-afea-5a43930a9751" class="">AWS Cost Explorer enables you to view and analyze your costs and usage. You can view data for up to the last 12 months, forecast how much you are likely to spend for the next 12 months, and get recommendations for what EC2 reserved instances to purchase.</p><ul id="470b8e19-8c48-4dbd-8ac0-0c98f4152176" class="bulleted-list"><li style="list-style-type:disc">Visualize, understand, and manage your AWS costs and usage over time</li></ul><ul id="a8186eba-0e05-4077-877f-a0ae0978a3ef" class="bulleted-list"><li style="list-style-type:disc">Create custom reports that analyze cost and usage data.</li></ul><ul id="d34df130-97d7-409b-b36c-645edba2566e" class="bulleted-list"><li style="list-style-type:disc">Analyze your data at a high level: total costs and usage across all accounts or Monthly, hourly, resource level granularity</li></ul><ul id="dffe2616-229d-431c-815b-b295dec389e0" class="bulleted-list"><li style="list-style-type:disc">Choose an optimal Savings Plan (to lower prices on your bill)</li></ul><ul id="86afcf7f-7316-45a8-947f-f145efcf42df" class="bulleted-list"><li style="list-style-type:disc">Forecast usage up to 12 months based on previous usage</li></ul></details></li></ul><ul id="0026080f-668a-42f0-94ca-51c05b6127bf" class="toggle"><li><details open=""><summary>Elastic Transcoder</summary><figure id="d1bc5cbc-8208-4637-b2a3-7bb1a84d4441" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(624).png"><img style="width:1713px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(624).png"/></a></figure></details></li></ul><ul id="a66d13c6-8d71-4a44-8e4f-5ac466f042ee" class="toggle"><li><details open=""><summary>AWS Batch</summary><figure id="37debf58-0e45-48f5-a214-027afb15cf5d" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(625).png"><img style="width:930px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(625).png"/></a></figure><figure id="26b43db7-89c0-4be0-86e2-fa1efcc38176" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(626).png"><img style="width:962px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(626).png"/></a></figure><figure id="b8668185-0a9f-4791-a8db-7c8b6e5040b8" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(627).png"><img style="width:864px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(627).png"/></a></figure></details></li></ul><ul id="bf51099c-cc90-4d6b-8e33-a70472364f4a" class="toggle"><li><details open=""><summary>AppFlow</summary><figure id="1d5bfea8-8944-440f-b2ce-1404e6f7b2cd" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(628).png"><img style="width:1754px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(628).png"/></a></figure><figure id="ada666d4-9bec-426a-8685-1cefa6ec3c71" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(629).png"><img style="width:1547px" src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Screenshot_(629).png"/></a></figure></details></li></ul><ul id="3db72b2c-1357-405b-a2ca-09ed9c77035a" class="toggle"><li><details open=""><summary>CICD (Continuous Integration - Continuous Delivery)</summary><ul id="e8b67840-5950-49c2-8a31-b88916759581" class="toggle"><li><details open=""><summary>Continuous Integration</summary><ul id="012989e7-7be9-4289-ba2b-47be59e87934" class="bulleted-list"><li style="list-style-type:disc">Developers push the code to a code repository often (GitHub / CodeCommit / Bitbucket / etc…)</li></ul><ul id="178db36f-86bb-4fc1-890d-1dfeba81a123" class="bulleted-list"><li style="list-style-type:disc">A testing / build server checks the code as soon as it’s pushed (CodeBuild / Jenkins CI etc…)</li></ul><ul id="9d215843-7c64-4428-8ba0-dd11b73b8e2d" class="bulleted-list"><li style="list-style-type:disc">The developer gets feedback about the tests and checks that have passed / failed</li></ul><ul id="0d07eca0-c11d-4d39-93fe-d25a0b858a43" class="bulleted-list"><li style="list-style-type:disc">Find bugs early, fix bugs</li></ul><ul id="22ca4b46-7b73-4ac6-ac89-35350533c969" class="bulleted-list"><li style="list-style-type:disc">Deliver faster as the code is tested</li></ul><ul id="ac3521b5-93b2-417e-a3db-a53106939797" class="bulleted-list"><li style="list-style-type:disc">Deploy often</li></ul><ul id="837f3e3e-7711-40be-b46e-f427345685ea" class="bulleted-list"><li style="list-style-type:disc">Happier developers, as they’re unblocked</li></ul><figure id="721dc00c-c9d5-4a58-bc44-09d6ed4989bc" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20467.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20467.png"/></a></figure><p id="ee1ec6d1-9af8-459e-9b14-b821317c96a8" class="">Untitled</p></details></li></ul><ul id="a9e5f653-449c-415e-a5f1-70de3cf2569a" class="toggle"><li><details open=""><summary>Continuous Delivery</summary><ul id="82785f2d-ad8b-4746-84fa-7d6d68128562" class="bulleted-list"><li style="list-style-type:disc">Ensure that the software can be released reliably whenever needed.</li></ul><ul id="68e03ac7-b33a-458d-9e13-fa50e8b33d79" class="bulleted-list"><li style="list-style-type:disc">Ensures deployments happen often and are quick</li></ul><ul id="2210c894-3072-4845-90c1-99c3b24e4b57" class="bulleted-list"><li style="list-style-type:disc">Shift away from “one release every 3 months’ to”5 releases a day&quot;</li></ul><ul id="bfd43dfd-dca0-4ab0-a525-4ad19aa4df97" class="bulleted-list"><li style="list-style-type:disc">That usually means automated deployment using CodeDeploy, Jenkins CD, Spinnaker, etc.</li></ul><figure id="41c5e7f8-f03b-442d-987c-2d2a349e8390" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20468.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20468.png"/></a></figure><p id="48a84566-b1c1-4859-8e0f-9ed7bbd10e06" class="">Untitled</p></details></li></ul><ul id="99fc71fb-bf3c-462e-9907-81a65b31a294" class="toggle"><li><details open=""><summary>Technology Stack for CICD</summary><ul id="a898c9bc-63e6-416e-b8f7-16a8a87b85a5" class="bulleted-list"><li style="list-style-type:disc">AWS CodeBuild is a fully managed continuous integration (CI) service that compiles source code, runs tests, and produces software packages that are ready to deploy. It is an alternative to Jenkins.</li></ul><ul id="f0727ba1-b024-4f10-b547-9dbf26a4e96d" class="bulleted-list"><li style="list-style-type:disc">AWS CodeDeploy is a fully managed deployment service that automates software deployments to a variety of computing services such as EC2, Fargate, Lambda, and your on-premises servers. You can define the strategy you want to execute such as in-place or blue/green deployments.</li></ul><ul id="4a924236-8355-41c7-b24f-9eddfdc84d19" class="bulleted-list"><li style="list-style-type:disc">AWS CodePipeline is a fully managed continuous delivery (CD) service that helps you automate your release pipeline for fast and reliable application and infrastructure updates. It automates the build, test, and deploy phases of your release process every time there is a code change. It has direct integration with Elastic Beanstalk.</li></ul><figure id="6828fb1b-c9c9-4112-b11b-ba0787337541" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20469.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20469.png"/></a></figure><p id="72521d17-6808-4921-9caf-61cd5c4ccb97" class="">Untitled</p></details></li></ul></details></li></ul><ul id="0b1fa37b-cd58-4554-83ba-4486aaf55c7d" class="toggle"><li><details open=""><summary>Step Functions</summary><ul id="e288cf53-978f-4674-8966-8fb08cd9a9e7" class="bulleted-list"><li style="list-style-type:disc">Build serverless visual workflow to orchestrate your Lambda functions</li></ul><ul id="8386f52d-0b0e-40a9-b3db-f48bca6af93f" class="bulleted-list"><li style="list-style-type:disc">Represent flow as a JSON state machine</li></ul><ul id="a35083c5-0273-42cb-b7d1-ee15cb12e961" class="bulleted-list"><li style="list-style-type:disc">Features: sequence, parallel, conditions, timeouts, error handling…</li></ul><ul id="21502e94-d746-4048-af0e-43f4f3806cfd" class="bulleted-list"><li style="list-style-type:disc">Can also integrate with EC2, ECS, On premise servers, API Gateway</li></ul><ul id="bb2a5d17-40d9-412d-a9ea-6de971e7884f" class="bulleted-list"><li style="list-style-type:disc">Maximum workflow execution time of 1 year</li></ul><ul id="7eed853b-57f1-4c1b-93f7-2df0ec5d3476" class="bulleted-list"><li style="list-style-type:disc">Possibility to implement human approval feature but it is complicated</li></ul><ul id="ae289b1a-a0c7-4f5e-848f-2ddeb6120bed" class="bulleted-list"><li style="list-style-type:disc">Use cases:<ul id="b3dfb6ae-810c-40a5-9807-b7594d10454f" class="bulleted-list"><li style="list-style-type:circle">Order fulfillment</li></ul><ul id="3ab81e7c-cfaf-4487-8288-1dbe4c713cce" class="bulleted-list"><li style="list-style-type:circle">Data processing</li></ul><ul id="9e69aa87-61e1-4844-af1a-d544e517a424" class="bulleted-list"><li style="list-style-type:circle">Web applications</li></ul><ul id="86f55ffb-2d3b-4c17-88c6-71e159e4e86a" class="bulleted-list"><li style="list-style-type:circle">Any workflow</li></ul></li></ul><ul id="0acedf8c-c5f2-4955-9e48-2cc784cd1d83" class="bulleted-list"><li style="list-style-type:disc">Provides a visual graph showing the current state and which path the workflow has taken.<figure id="f957f394-12bd-4d2c-9088-21514420188a" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20470.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20470.png"/></a></figure><p id="f9c14953-48a8-4565-a443-221e346078b3" class="">Untitled</p></li></ul></details></li></ul><ul id="9be4905d-cf59-40c0-929e-5d7b9b5e3c9e" class="toggle"><li><details open=""><summary>Simple Workflow Service (SWF)</summary><ul id="d6e96bad-6925-4022-8103-4cf1fecce87f" class="bulleted-list"><li style="list-style-type:disc">Coordinate work amongst applications</li></ul><ul id="7acf7e2c-25cb-4b2d-bb12-8edf5ce2102c" class="bulleted-list"><li style="list-style-type:disc">Outdated service (step functions are preferred instead)</li></ul><ul id="bf56073a-f4a1-4b33-b1a3-c3ba61b02a85" class="bulleted-list"><li style="list-style-type:disc">Code runs on EC2 (not serverless)</li></ul><ul id="e9b80b8a-f4d8-49e6-b772-231e3980e32a" class="bulleted-list"><li style="list-style-type:disc">1 year max runtime</li></ul><ul id="e280a7a7-0b8c-4923-8b11-eff0b4ff9764" class="bulleted-list"><li style="list-style-type:disc">Built-in “human intervention” step</li></ul><ul id="675cd7a1-1953-4264-a0a2-dcb704ea2693" class="bulleted-list"><li style="list-style-type:disc">Example: order fulfilment from web to warehouse to delivery</li></ul><ul id="792335fd-eca2-4266-b17b-4c669a13bfed" class="bulleted-list"><li style="list-style-type:disc">Step Functions are recommended to be used for new applications, except:<ul id="ea45c97c-6e97-43de-a277-f2ce1e3533b9" class="bulleted-list"><li style="list-style-type:circle">If you need external signals to intervene in the processes</li></ul><ul id="0acfe4a2-2469-4062-a997-524adec43d36" class="bulleted-list"><li style="list-style-type:circle">If you need child processes that return values to parent processes</li></ul></li></ul></details></li></ul><ul id="7e7b3492-7eab-4ef7-bf48-eb673e4158df" class="toggle"><li><details open=""><summary>Elastic Map Reduce (EMR)</summary><ul id="bb90be37-ba9a-4df7-b887-bd2f6ae3cdda" class="bulleted-list"><li style="list-style-type:disc">EMR helps creating Hadoop clusters (Big Data) to analyze and process vast amount of data</li></ul><ul id="a79da220-222b-4522-ba33-555916100546" class="bulleted-list"><li style="list-style-type:disc">The clusters can be made of hundreds of EC2 instances</li></ul><ul id="869f344e-6004-49fc-8265-86ac70e4bae2" class="bulleted-list"><li style="list-style-type:disc">Also supports Apache Spark, HBase, Presto, Flink…..</li></ul><ul id="be722e70-87d7-4399-8dd9-29d118b67b98" class="bulleted-list"><li style="list-style-type:disc">EMR takes care of all the provisioning and configuration</li></ul><ul id="7370fae2-e4b6-4eb1-a0bb-0aa5749d653e" class="bulleted-list"><li style="list-style-type:disc">Auto-scaling and integrated with Spot instances</li></ul><ul id="8805ab36-25db-433f-bae8-e2ccc4df7ef5" class="bulleted-list"><li style="list-style-type:disc">Use cases: data processing, machine learning, web indexing, big data…</li></ul></details></li></ul><ul id="3d1f99d9-6896-4593-a5c1-03c51b639e5e" class="toggle"><li><details open=""><summary>OpsWorks</summary><ul id="f1f8b7e7-c617-4a8b-a113-602feb6cc980" class="bulleted-list"><li style="list-style-type:disc">Chef &amp; Puppet are two open-source softwares that help you perform server configuration automatically, or repetitive actions</li></ul><ul id="645033c5-a430-4b9a-8121-86e5b6ff0042" class="bulleted-list"><li style="list-style-type:disc">They work great with EC2 &amp; On Premise VM</li></ul><ul id="fbebdcdb-2104-46af-b88d-a92995472a0d" class="bulleted-list"><li style="list-style-type:disc">AWS OpsWorks is nothing but AWS Managed Chef &amp; Puppet</li></ul><ul id="b8b8672c-83dd-4dc8-817d-705f541d6a12" class="bulleted-list"><li style="list-style-type:disc">It’s an alternative to AWS SSM</li></ul><ul id="ca70f7ba-94f3-4d8c-a3c9-b14b11910f97" class="bulleted-list"><li style="list-style-type:disc">Exam tip: Chef &amp; Puppet ⇒ AWS OpsWorks</li></ul></details></li></ul><ul id="271aac2a-1986-403c-81b8-92414fd1f390" class="toggle"><li><details open=""><summary>Amazon WorkSpaces</summary><p id="74991ad0-b744-40d7-91f5-0f428d5d3e79" class="">Amazon WorkSpaces is a fully managed, persistent desktop virtualization service that enables your users to access data, applications, and resources they need, anywhere, anytime, from any supported device. It can be used to provision either Windows or Linux desktops.</p><ul id="67b85bfd-691c-46bf-9e39-4237fad8ad09" class="bulleted-list"><li style="list-style-type:disc">Managed &amp; Secure Cloud Desktop</li></ul><ul id="82540992-4959-446d-a8fb-ecaaad307c88" class="bulleted-list"><li style="list-style-type:disc">Great to eliminate management of on-premise VDI (Virtual Desktop Infrastructure)</li></ul><ul id="ef897db9-651f-4ab6-ba02-2cbede30b232" class="bulleted-list"><li style="list-style-type:disc">On Demand, pay per by usage</li></ul><ul id="9ecb2b16-6bab-437f-bd1e-236a3a0c4f20" class="bulleted-list"><li style="list-style-type:disc">Secure, Encrypted, Network Isolation</li></ul><ul id="40ac7d8f-1d52-4ec5-ad3e-735909e957e7" class="bulleted-list"><li style="list-style-type:disc">Integrated with Microsoft Active Directory</li></ul><figure id="4d12de4f-e29a-4e94-9178-00ed8220efc6" class="image"><a href="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20471.png"><img src="AWS%20Solutions%20Architect%20Arjunan%20K%20449b8d49641f44b28cca6bf5acb43142/Untitled%20471.png"/></a></figure></details></li></ul><ul id="66060e5e-de8f-4df5-93f9-a026741303a7" class="toggle"><li><details open=""><summary>AppSync</summary><ul id="20167b99-d8d4-4195-89a0-b31505172589" class="bulleted-list"><li style="list-style-type:disc">Store and sync data across mobile and web apps in real-time</li></ul><ul id="6c697013-c648-45c3-9998-5e421ec96525" class="bulleted-list"><li style="list-style-type:disc">Makes use of GraphQL (mobile technology from Facebook)</li></ul><ul id="6bdb3b44-9d71-44b4-9b13-55d6a5b8e912" class="bulleted-list"><li style="list-style-type:disc">Client Code can be generated automatically</li></ul><ul id="d4fc3d3f-1e3d-47d0-b7d3-36d13770d0bf" class="bulleted-list"><li style="list-style-type:disc">Integrations with DynamoDB/ Lambda</li></ul><ul id="cad9d286-516c-46b0-b864-f348ee0d12e2" class="bulleted-list"><li style="list-style-type:disc">Real-time subscriptions</li></ul><ul id="f8820925-023a-4096-8838-d97ae20d7b1d" class="bulleted-list"><li style="list-style-type:disc">Offline data synchronization (replaces Cognito Sync)</li></ul><ul id="fbe4fe67-33c0-4432-bf75-96296101acd9" class="bulleted-list"><li style="list-style-type:disc">Fine Grained Security</li></ul></details></li></ul></div><h3 id="58335946-5865-4370-a61c-97b05f86f2ea" class=""><details open=""><summary>Section 32: WhitePapers &amp; Architectures</summary></details></h3><div class="indented"><ul id="564658ac-4373-4291-a8c0-edbb622a609a" class="toggle"><li><details open=""><summary>AWS Well Architected Framework Guidelines</summary><ul id="614cb66b-fd06-4057-a93a-7f44f790d5b4" class="bulleted-list"><li style="list-style-type:disc">Stop guessing your capacity needs</li></ul><ul id="cbb27531-b488-4431-b9ee-884441d4bbcb" class="bulleted-list"><li style="list-style-type:disc">Test systems at production scale</li></ul><ul id="0e9ba894-d49e-4689-9ce2-74f32de96e6a" class="bulleted-list"><li style="list-style-type:disc">Automate to make architectural experimentation easier</li></ul><ul id="78bb32d2-6809-46e7-924b-9b442a5147fd" class="bulleted-list"><li style="list-style-type:disc">Allow for evolutionary architectures</li></ul><ul id="340904a9-6cc1-4b90-8da1-7f6c576576b1" class="bulleted-list"><li style="list-style-type:disc">Design based on changing requirements</li></ul><ul id="da0be9b2-7e71-4cc1-b002-9bc4b469acf6" class="bulleted-list"><li style="list-style-type:disc">Drive architectures using data</li></ul><ul id="2965604d-4174-4dd6-bf72-2798d8a76e5a" class="bulleted-list"><li style="list-style-type:disc">Improve through game days<ul id="4e5f8114-23f7-4278-ad4d-32c9fa7176b0" class="bulleted-list"><li style="list-style-type:circle">Simulate applications for flash sale days (load testing)</li></ul></li></ul></details></li></ul><ul id="d0aefb43-1ed3-45a9-8f32-422d8f367334" class="toggle"><li><details open=""><summary>AWS Well Architected Framework Pillars</summary><ol type="1" id="5b6cedf6-60a0-4534-8182-5e486fac5754" class="numbered-list" start="1"><li>Cost Optimization</li></ol><ol type="1" id="300e651d-370d-46e1-ad68-387fa628e980" class="numbered-list" start="2"><li>Performance Efficiency</li></ol><ol type="1" id="0d60217e-69ad-471b-aafe-92e73ecf933e" class="numbered-list" start="3"><li>Reliability</li></ol><ol type="1" id="e68f4dbe-6cbf-435b-b915-6897ca70a6b4" class="numbered-list" start="4"><li>Security</li></ol><ol type="1" id="a5d64fcc-04f1-4a44-abaa-3e8bb9b7220d" class="numbered-list" start="5"><li>Sustainability</li></ol><ol type="1" id="eff8726b-bfea-4b3d-a622-72a328a71667" class="numbered-list" start="6"><li>Operational Excellence</li></ol></details></li></ul><ul id="d216e0e4-9bb9-4905-b3e1-8785be087461" class="toggle"><li><details open=""><summary>AWS Well Architected Tool</summary><ul id="2436eb5e-50a1-4d4a-8a74-632787f0aff9" class="bulleted-list"><li style="list-style-type:disc">Free tool to review your architectures against the 6 pillars Well-Architected</li></ul><ul id="7ff4cd0a-36de-46ee-aece-6c9c49eca04f" class="bulleted-list"><li style="list-style-type:disc">Framework and adopt architectural best practices</li></ul><ul id="dc46c480-3708-40a1-b570-4fd242555048" class="bulleted-list"><li style="list-style-type:disc">How does it work?<ul id="892c57af-737b-474d-96fb-915a557a0f32" class="bulleted-list"><li style="list-style-type:circle">Select your workload and answer questions</li></ul><ul id="9132c35d-6a7a-49b6-92de-babac9cb369b" class="bulleted-list"><li style="list-style-type:circle">Review your answers against the 6 pillars</li></ul><ul id="25952e1e-51e6-4df5-b923-5251a59c1915" class="bulleted-list"><li style="list-style-type:circle">Obtain advice: get videos and documentations, generate a report, see the results in a dashboard</li></ul></li></ul><p id="9b539bb6-1357-4652-a52d-270bd3b7d3e3" class="">Let’s have a look: <a href="https://console.aws.amazon.com/wellarchitected">https://console.aws.amazon.com/wellarchitected</a></p></details></li></ul><ul id="cc4caf52-89b9-466d-968e-ae746d43a548" class="toggle"><li><details open=""><summary>AWS Trusted Advisor</summary><ul id="70682ea0-e729-4b06-853f-1f1b386265b3" class="bulleted-list"><li style="list-style-type:disc">Service that analyzes your AWS accounts and provides recommendations on:<ul id="0b89338f-efce-4669-bb68-ad707a316b87" class="bulleted-list"><li style="list-style-type:circle">Cost Optimization:<ul id="fc900243-60d3-49ae-b2df-37dc60ec1cf0" class="bulleted-list"><li style="list-style-type:square">low utilization EC2 instances, idle load balancers, under-utilized EBS volumes…</li></ul><ul id="84d7b33d-97be-45b3-b5a7-05fe52b76856" class="bulleted-list"><li style="list-style-type:square">Reserved instances &amp; savings plans optimizations</li></ul></li></ul><ul id="dcddc63d-423f-463b-87a4-4860cfb77288" class="bulleted-list"><li style="list-style-type:circle">Performance:<ul id="e2b484c8-6aa7-4cf3-a55f-050cd051ef84" class="bulleted-list"><li style="list-style-type:square">High utilization EC2 instances, CloudFront CDN optimizations</li></ul><ul id="09ea5ec7-8fc2-412b-9050-9b8baa4fe879" class="bulleted-list"><li style="list-style-type:square">EC2 to EBS throughput optimizations, Alias records recommendations</li></ul></li></ul><ul id="68415489-e79d-426e-b28a-939c8ee930e2" class="bulleted-list"><li style="list-style-type:circle">Security:<ul id="7b95d84a-da87-4112-8f16-9d3591e975c3" class="bulleted-list"><li style="list-style-type:square">MFA enabled on Root Account, IAM key rotation, exposed Access Keys</li></ul><ul id="ecaadc78-0f62-43cd-bac7-870da050fc99" class="bulleted-list"><li style="list-style-type:square">S3 Bucket Permissions for public access, security groups with unrestricted ports</li></ul></li></ul><ul id="efeb47d7-4b1b-40e1-8cec-0fac5d0d9f0a" class="bulleted-list"><li style="list-style-type:circle">Fault Tolerance:<ul id="a4d12424-a00b-4347-9ea1-82f0da005e8e" class="bulleted-list"><li style="list-style-type:square">EBS snapshots age, Availability Zone Balance</li></ul><ul id="fd92d2cc-0503-4a08-b816-605b9ddde824" class="bulleted-list"><li style="list-style-type:square">ASG Multi-AZ, RDS Multi-AZ, ELB configuration, etc.</li></ul></li></ul><ul id="c8d9d902-010b-4aed-85bf-0499a163da8b" class="bulleted-list"><li style="list-style-type:circle">Service Limits<ul id="34f51b8c-188a-4a22-94b8-b57e7ef176a3" class="bulleted-list"><li style="list-style-type:square">whether or not you are reaching the service limit for a service and suggest you to increase the limit beforehand</li></ul></li></ul></li></ul><ul id="2a060295-9ecd-4958-bee6-6050d327c11e" class="bulleted-list"><li style="list-style-type:disc">No installation needed</li></ul><ul id="116513dc-092e-4f8e-be46-fea23009ee37" class="bulleted-list"><li style="list-style-type:disc">Can enable weekly email notification from the console</li></ul><ul id="2da105ee-115c-49ee-9902-b560eb7b226a" class="bulleted-list"><li style="list-style-type:disc">Core Checks and recommendations all customers</li></ul><ul id="6c1c6be1-b38f-413d-ba25-ef980abe53bf" class="bulleted-list"><li style="list-style-type:disc">Full Trusted Advisor Available for Business &amp; Enterprise support plans<ul id="2fe95b50-7c21-4a93-befa-263278a24834" class="bulleted-list"><li style="list-style-type:circle">Ability to set CloudWatch alarms when reaching limits</li></ul><ul id="c3458343-1529-401d-9f2a-62540a27ac15" class="bulleted-list"><li style="list-style-type:circle">Programmatic Access using AWS Support API</li></ul></li></ul></details></li></ul><ul id="1a816d7d-3555-437d-ab72-be3695879c90" class="toggle"><li><details open=""><summary>Examples of Architecture</summary><p id="25af3ed6-b71c-4dd0-a8a2-885d444373e4" class=""><a href="https://aws.amazon.com/architecture/">https://aws.amazon.com/architecture/</a></p><p id="f094b3d1-e092-45b8-a539-170652b420e8" class=""><a href="https://aws.amazon.com/solutions/">https://aws.amazon.com/solutions/</a></p></details></li></ul></div><p id="46d63696-c71a-49c8-b9fb-51d9a58890e3" class="">
</p></div></article></body></html>
